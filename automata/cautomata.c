/* Generated by Cython 0.29.2 */

#define PY_SSIZE_T_CLEAN
#include "Python.h"
#ifndef Py_PYTHON_H
    #error Python headers needed to compile C extensions, please install development version of Python.
#elif PY_VERSION_HEX < 0x02060000 || (0x03000000 <= PY_VERSION_HEX && PY_VERSION_HEX < 0x03030000)
    #error Cython requires Python 2.6+ or Python 3.3+.
#else
#define CYTHON_ABI "0_29_2"
#define CYTHON_HEX_VERSION 0x001D02F0
#define CYTHON_FUTURE_DIVISION 0
#include <stddef.h>
#ifndef offsetof
  #define offsetof(type, member) ( (size_t) & ((type*)0) -> member )
#endif
#if !defined(WIN32) && !defined(MS_WINDOWS)
  #ifndef __stdcall
    #define __stdcall
  #endif
  #ifndef __cdecl
    #define __cdecl
  #endif
  #ifndef __fastcall
    #define __fastcall
  #endif
#endif
#ifndef DL_IMPORT
  #define DL_IMPORT(t) t
#endif
#ifndef DL_EXPORT
  #define DL_EXPORT(t) t
#endif
#define __PYX_COMMA ,
#ifndef HAVE_LONG_LONG
  #if PY_VERSION_HEX >= 0x02070000
    #define HAVE_LONG_LONG
  #endif
#endif
#ifndef PY_LONG_LONG
  #define PY_LONG_LONG LONG_LONG
#endif
#ifndef Py_HUGE_VAL
  #define Py_HUGE_VAL HUGE_VAL
#endif
#ifdef PYPY_VERSION
  #define CYTHON_COMPILING_IN_PYPY 1
  #define CYTHON_COMPILING_IN_PYSTON 0
  #define CYTHON_COMPILING_IN_CPYTHON 0
  #undef CYTHON_USE_TYPE_SLOTS
  #define CYTHON_USE_TYPE_SLOTS 0
  #undef CYTHON_USE_PYTYPE_LOOKUP
  #define CYTHON_USE_PYTYPE_LOOKUP 0
  #if PY_VERSION_HEX < 0x03050000
    #undef CYTHON_USE_ASYNC_SLOTS
    #define CYTHON_USE_ASYNC_SLOTS 0
  #elif !defined(CYTHON_USE_ASYNC_SLOTS)
    #define CYTHON_USE_ASYNC_SLOTS 1
  #endif
  #undef CYTHON_USE_PYLIST_INTERNALS
  #define CYTHON_USE_PYLIST_INTERNALS 0
  #undef CYTHON_USE_UNICODE_INTERNALS
  #define CYTHON_USE_UNICODE_INTERNALS 0
  #undef CYTHON_USE_UNICODE_WRITER
  #define CYTHON_USE_UNICODE_WRITER 0
  #undef CYTHON_USE_PYLONG_INTERNALS
  #define CYTHON_USE_PYLONG_INTERNALS 0
  #undef CYTHON_AVOID_BORROWED_REFS
  #define CYTHON_AVOID_BORROWED_REFS 1
  #undef CYTHON_ASSUME_SAFE_MACROS
  #define CYTHON_ASSUME_SAFE_MACROS 0
  #undef CYTHON_UNPACK_METHODS
  #define CYTHON_UNPACK_METHODS 0
  #undef CYTHON_FAST_THREAD_STATE
  #define CYTHON_FAST_THREAD_STATE 0
  #undef CYTHON_FAST_PYCALL
  #define CYTHON_FAST_PYCALL 0
  #undef CYTHON_PEP489_MULTI_PHASE_INIT
  #define CYTHON_PEP489_MULTI_PHASE_INIT 0
  #undef CYTHON_USE_TP_FINALIZE
  #define CYTHON_USE_TP_FINALIZE 0
  #undef CYTHON_USE_DICT_VERSIONS
  #define CYTHON_USE_DICT_VERSIONS 0
  #undef CYTHON_USE_EXC_INFO_STACK
  #define CYTHON_USE_EXC_INFO_STACK 0
#elif defined(PYSTON_VERSION)
  #define CYTHON_COMPILING_IN_PYPY 0
  #define CYTHON_COMPILING_IN_PYSTON 1
  #define CYTHON_COMPILING_IN_CPYTHON 0
  #ifndef CYTHON_USE_TYPE_SLOTS
    #define CYTHON_USE_TYPE_SLOTS 1
  #endif
  #undef CYTHON_USE_PYTYPE_LOOKUP
  #define CYTHON_USE_PYTYPE_LOOKUP 0
  #undef CYTHON_USE_ASYNC_SLOTS
  #define CYTHON_USE_ASYNC_SLOTS 0
  #undef CYTHON_USE_PYLIST_INTERNALS
  #define CYTHON_USE_PYLIST_INTERNALS 0
  #ifndef CYTHON_USE_UNICODE_INTERNALS
    #define CYTHON_USE_UNICODE_INTERNALS 1
  #endif
  #undef CYTHON_USE_UNICODE_WRITER
  #define CYTHON_USE_UNICODE_WRITER 0
  #undef CYTHON_USE_PYLONG_INTERNALS
  #define CYTHON_USE_PYLONG_INTERNALS 0
  #ifndef CYTHON_AVOID_BORROWED_REFS
    #define CYTHON_AVOID_BORROWED_REFS 0
  #endif
  #ifndef CYTHON_ASSUME_SAFE_MACROS
    #define CYTHON_ASSUME_SAFE_MACROS 1
  #endif
  #ifndef CYTHON_UNPACK_METHODS
    #define CYTHON_UNPACK_METHODS 1
  #endif
  #undef CYTHON_FAST_THREAD_STATE
  #define CYTHON_FAST_THREAD_STATE 0
  #undef CYTHON_FAST_PYCALL
  #define CYTHON_FAST_PYCALL 0
  #undef CYTHON_PEP489_MULTI_PHASE_INIT
  #define CYTHON_PEP489_MULTI_PHASE_INIT 0
  #undef CYTHON_USE_TP_FINALIZE
  #define CYTHON_USE_TP_FINALIZE 0
  #undef CYTHON_USE_DICT_VERSIONS
  #define CYTHON_USE_DICT_VERSIONS 0
  #undef CYTHON_USE_EXC_INFO_STACK
  #define CYTHON_USE_EXC_INFO_STACK 0
#else
  #define CYTHON_COMPILING_IN_PYPY 0
  #define CYTHON_COMPILING_IN_PYSTON 0
  #define CYTHON_COMPILING_IN_CPYTHON 1
  #ifndef CYTHON_USE_TYPE_SLOTS
    #define CYTHON_USE_TYPE_SLOTS 1
  #endif
  #if PY_VERSION_HEX < 0x02070000
    #undef CYTHON_USE_PYTYPE_LOOKUP
    #define CYTHON_USE_PYTYPE_LOOKUP 0
  #elif !defined(CYTHON_USE_PYTYPE_LOOKUP)
    #define CYTHON_USE_PYTYPE_LOOKUP 1
  #endif
  #if PY_MAJOR_VERSION < 3
    #undef CYTHON_USE_ASYNC_SLOTS
    #define CYTHON_USE_ASYNC_SLOTS 0
  #elif !defined(CYTHON_USE_ASYNC_SLOTS)
    #define CYTHON_USE_ASYNC_SLOTS 1
  #endif
  #if PY_VERSION_HEX < 0x02070000
    #undef CYTHON_USE_PYLONG_INTERNALS
    #define CYTHON_USE_PYLONG_INTERNALS 0
  #elif !defined(CYTHON_USE_PYLONG_INTERNALS)
    #define CYTHON_USE_PYLONG_INTERNALS 1
  #endif
  #ifndef CYTHON_USE_PYLIST_INTERNALS
    #define CYTHON_USE_PYLIST_INTERNALS 1
  #endif
  #ifndef CYTHON_USE_UNICODE_INTERNALS
    #define CYTHON_USE_UNICODE_INTERNALS 1
  #endif
  #if PY_VERSION_HEX < 0x030300F0
    #undef CYTHON_USE_UNICODE_WRITER
    #define CYTHON_USE_UNICODE_WRITER 0
  #elif !defined(CYTHON_USE_UNICODE_WRITER)
    #define CYTHON_USE_UNICODE_WRITER 1
  #endif
  #ifndef CYTHON_AVOID_BORROWED_REFS
    #define CYTHON_AVOID_BORROWED_REFS 0
  #endif
  #ifndef CYTHON_ASSUME_SAFE_MACROS
    #define CYTHON_ASSUME_SAFE_MACROS 1
  #endif
  #ifndef CYTHON_UNPACK_METHODS
    #define CYTHON_UNPACK_METHODS 1
  #endif
  #ifndef CYTHON_FAST_THREAD_STATE
    #define CYTHON_FAST_THREAD_STATE 1
  #endif
  #ifndef CYTHON_FAST_PYCALL
    #define CYTHON_FAST_PYCALL 1
  #endif
  #ifndef CYTHON_PEP489_MULTI_PHASE_INIT
    #define CYTHON_PEP489_MULTI_PHASE_INIT (PY_VERSION_HEX >= 0x03050000)
  #endif
  #ifndef CYTHON_USE_TP_FINALIZE
    #define CYTHON_USE_TP_FINALIZE (PY_VERSION_HEX >= 0x030400a1)
  #endif
  #ifndef CYTHON_USE_DICT_VERSIONS
    #define CYTHON_USE_DICT_VERSIONS (PY_VERSION_HEX >= 0x030600B1)
  #endif
  #ifndef CYTHON_USE_EXC_INFO_STACK
    #define CYTHON_USE_EXC_INFO_STACK (PY_VERSION_HEX >= 0x030700A3)
  #endif
#endif
#if !defined(CYTHON_FAST_PYCCALL)
#define CYTHON_FAST_PYCCALL  (CYTHON_FAST_PYCALL && PY_VERSION_HEX >= 0x030600B1)
#endif
#if CYTHON_USE_PYLONG_INTERNALS
  #include "longintrepr.h"
  #undef SHIFT
  #undef BASE
  #undef MASK
  #ifdef SIZEOF_VOID_P
    enum { __pyx_check_sizeof_voidp = 1 / (int)(SIZEOF_VOID_P == sizeof(void*)) };
  #endif
#endif
#ifndef __has_attribute
  #define __has_attribute(x) 0
#endif
#ifndef __has_cpp_attribute
  #define __has_cpp_attribute(x) 0
#endif
#ifndef CYTHON_RESTRICT
  #if defined(__GNUC__)
    #define CYTHON_RESTRICT __restrict__
  #elif defined(_MSC_VER) && _MSC_VER >= 1400
    #define CYTHON_RESTRICT __restrict
  #elif defined (__STDC_VERSION__) && __STDC_VERSION__ >= 199901L
    #define CYTHON_RESTRICT restrict
  #else
    #define CYTHON_RESTRICT
  #endif
#endif
#ifndef CYTHON_UNUSED
# if defined(__GNUC__)
#   if !(defined(__cplusplus)) || (__GNUC__ > 3 || (__GNUC__ == 3 && __GNUC_MINOR__ >= 4))
#     define CYTHON_UNUSED __attribute__ ((__unused__))
#   else
#     define CYTHON_UNUSED
#   endif
# elif defined(__ICC) || (defined(__INTEL_COMPILER) && !defined(_MSC_VER))
#   define CYTHON_UNUSED __attribute__ ((__unused__))
# else
#   define CYTHON_UNUSED
# endif
#endif
#ifndef CYTHON_MAYBE_UNUSED_VAR
#  if defined(__cplusplus)
     template<class T> void CYTHON_MAYBE_UNUSED_VAR( const T& ) { }
#  else
#    define CYTHON_MAYBE_UNUSED_VAR(x) (void)(x)
#  endif
#endif
#ifndef CYTHON_NCP_UNUSED
# if CYTHON_COMPILING_IN_CPYTHON
#  define CYTHON_NCP_UNUSED
# else
#  define CYTHON_NCP_UNUSED CYTHON_UNUSED
# endif
#endif
#define __Pyx_void_to_None(void_result) ((void)(void_result), Py_INCREF(Py_None), Py_None)
#ifdef _MSC_VER
    #ifndef _MSC_STDINT_H_
        #if _MSC_VER < 1300
           typedef unsigned char     uint8_t;
           typedef unsigned int      uint32_t;
        #else
           typedef unsigned __int8   uint8_t;
           typedef unsigned __int32  uint32_t;
        #endif
    #endif
#else
   #include <stdint.h>
#endif
#ifndef CYTHON_FALLTHROUGH
  #if defined(__cplusplus) && __cplusplus >= 201103L
    #if __has_cpp_attribute(fallthrough)
      #define CYTHON_FALLTHROUGH [[fallthrough]]
    #elif __has_cpp_attribute(clang::fallthrough)
      #define CYTHON_FALLTHROUGH [[clang::fallthrough]]
    #elif __has_cpp_attribute(gnu::fallthrough)
      #define CYTHON_FALLTHROUGH [[gnu::fallthrough]]
    #endif
  #endif
  #ifndef CYTHON_FALLTHROUGH
    #if __has_attribute(fallthrough)
      #define CYTHON_FALLTHROUGH __attribute__((fallthrough))
    #else
      #define CYTHON_FALLTHROUGH
    #endif
  #endif
  #if defined(__clang__ ) && defined(__apple_build_version__)
    #if __apple_build_version__ < 7000000
      #undef  CYTHON_FALLTHROUGH
      #define CYTHON_FALLTHROUGH
    #endif
  #endif
#endif

#ifndef CYTHON_INLINE
  #if defined(__clang__)
    #define CYTHON_INLINE __inline__ __attribute__ ((__unused__))
  #elif defined(__GNUC__)
    #define CYTHON_INLINE __inline__
  #elif defined(_MSC_VER)
    #define CYTHON_INLINE __inline
  #elif defined (__STDC_VERSION__) && __STDC_VERSION__ >= 199901L
    #define CYTHON_INLINE inline
  #else
    #define CYTHON_INLINE
  #endif
#endif

#if CYTHON_COMPILING_IN_PYPY && PY_VERSION_HEX < 0x02070600 && !defined(Py_OptimizeFlag)
  #define Py_OptimizeFlag 0
#endif
#define __PYX_BUILD_PY_SSIZE_T "n"
#define CYTHON_FORMAT_SSIZE_T "z"
#if PY_MAJOR_VERSION < 3
  #define __Pyx_BUILTIN_MODULE_NAME "__builtin__"
  #define __Pyx_PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\
          PyCode_New(a+k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)
  #define __Pyx_DefaultClassType PyClass_Type
#else
  #define __Pyx_BUILTIN_MODULE_NAME "builtins"
  #define __Pyx_PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)\
          PyCode_New(a, k, l, s, f, code, c, n, v, fv, cell, fn, name, fline, lnos)
  #define __Pyx_DefaultClassType PyType_Type
#endif
#ifndef Py_TPFLAGS_CHECKTYPES
  #define Py_TPFLAGS_CHECKTYPES 0
#endif
#ifndef Py_TPFLAGS_HAVE_INDEX
  #define Py_TPFLAGS_HAVE_INDEX 0
#endif
#ifndef Py_TPFLAGS_HAVE_NEWBUFFER
  #define Py_TPFLAGS_HAVE_NEWBUFFER 0
#endif
#ifndef Py_TPFLAGS_HAVE_FINALIZE
  #define Py_TPFLAGS_HAVE_FINALIZE 0
#endif
#ifndef METH_STACKLESS
  #define METH_STACKLESS 0
#endif
#if PY_VERSION_HEX <= 0x030700A3 || !defined(METH_FASTCALL)
  #ifndef METH_FASTCALL
     #define METH_FASTCALL 0x80
  #endif
  typedef PyObject *(*__Pyx_PyCFunctionFast) (PyObject *self, PyObject *const *args, Py_ssize_t nargs);
  typedef PyObject *(*__Pyx_PyCFunctionFastWithKeywords) (PyObject *self, PyObject *const *args,
                                                          Py_ssize_t nargs, PyObject *kwnames);
#else
  #define __Pyx_PyCFunctionFast _PyCFunctionFast
  #define __Pyx_PyCFunctionFastWithKeywords _PyCFunctionFastWithKeywords
#endif
#if CYTHON_FAST_PYCCALL
#define __Pyx_PyFastCFunction_Check(func)\
    ((PyCFunction_Check(func) && (METH_FASTCALL == (PyCFunction_GET_FLAGS(func) & ~(METH_CLASS | METH_STATIC | METH_COEXIST | METH_KEYWORDS | METH_STACKLESS)))))
#else
#define __Pyx_PyFastCFunction_Check(func) 0
#endif
#if CYTHON_USE_DICT_VERSIONS
#define __PYX_GET_DICT_VERSION(dict)  (((PyDictObject*)(dict))->ma_version_tag)
#define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)\
    (version_var) = __PYX_GET_DICT_VERSION(dict);\
    (cache_var) = (value);
#define __PYX_PY_DICT_LOOKUP_IF_MODIFIED(VAR, DICT, LOOKUP) {\
        static PY_UINT64_T __pyx_dict_version = 0;\
        static PyObject *__pyx_dict_cached_value = NULL;\
        if (likely(__PYX_GET_DICT_VERSION(DICT) == __pyx_dict_version)) {\
            (VAR) = __pyx_dict_cached_value;\
        } else {\
            (VAR) = __pyx_dict_cached_value = (LOOKUP);\
            __pyx_dict_version = __PYX_GET_DICT_VERSION(DICT);\
        }\
    }
#else
#define __PYX_GET_DICT_VERSION(dict)  (0)
#define __PYX_UPDATE_DICT_CACHE(dict, value, cache_var, version_var)
#define __PYX_PY_DICT_LOOKUP_IF_MODIFIED(VAR, DICT, LOOKUP)  (VAR) = (LOOKUP);
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyObject_Malloc)
  #define PyObject_Malloc(s)   PyMem_Malloc(s)
  #define PyObject_Free(p)     PyMem_Free(p)
  #define PyObject_Realloc(p)  PyMem_Realloc(p)
#endif
#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX < 0x030400A1
  #define PyMem_RawMalloc(n)           PyMem_Malloc(n)
  #define PyMem_RawRealloc(p, n)       PyMem_Realloc(p, n)
  #define PyMem_RawFree(p)             PyMem_Free(p)
#endif
#if CYTHON_COMPILING_IN_PYSTON
  #define __Pyx_PyCode_HasFreeVars(co)  PyCode_HasFreeVars(co)
  #define __Pyx_PyFrame_SetLineNumber(frame, lineno) PyFrame_SetLineNumber(frame, lineno)
#else
  #define __Pyx_PyCode_HasFreeVars(co)  (PyCode_GetNumFree(co) > 0)
  #define __Pyx_PyFrame_SetLineNumber(frame, lineno)  (frame)->f_lineno = (lineno)
#endif
#if !CYTHON_FAST_THREAD_STATE || PY_VERSION_HEX < 0x02070000
  #define __Pyx_PyThreadState_Current PyThreadState_GET()
#elif PY_VERSION_HEX >= 0x03060000
  #define __Pyx_PyThreadState_Current _PyThreadState_UncheckedGet()
#elif PY_VERSION_HEX >= 0x03000000
  #define __Pyx_PyThreadState_Current PyThreadState_GET()
#else
  #define __Pyx_PyThreadState_Current _PyThreadState_Current
#endif
#if PY_VERSION_HEX < 0x030700A2 && !defined(PyThread_tss_create) && !defined(Py_tss_NEEDS_INIT)
#include "pythread.h"
#define Py_tss_NEEDS_INIT 0
typedef int Py_tss_t;
static CYTHON_INLINE int PyThread_tss_create(Py_tss_t *key) {
  *key = PyThread_create_key();
  return 0; // PyThread_create_key reports success always
}
static CYTHON_INLINE Py_tss_t * PyThread_tss_alloc(void) {
  Py_tss_t *key = (Py_tss_t *)PyObject_Malloc(sizeof(Py_tss_t));
  *key = Py_tss_NEEDS_INIT;
  return key;
}
static CYTHON_INLINE void PyThread_tss_free(Py_tss_t *key) {
  PyObject_Free(key);
}
static CYTHON_INLINE int PyThread_tss_is_created(Py_tss_t *key) {
  return *key != Py_tss_NEEDS_INIT;
}
static CYTHON_INLINE void PyThread_tss_delete(Py_tss_t *key) {
  PyThread_delete_key(*key);
  *key = Py_tss_NEEDS_INIT;
}
static CYTHON_INLINE int PyThread_tss_set(Py_tss_t *key, void *value) {
  return PyThread_set_key_value(*key, value);
}
static CYTHON_INLINE void * PyThread_tss_get(Py_tss_t *key) {
  return PyThread_get_key_value(*key);
}
#endif // TSS (Thread Specific Storage) API
#if CYTHON_COMPILING_IN_CPYTHON || defined(_PyDict_NewPresized)
#define __Pyx_PyDict_NewPresized(n)  ((n <= 8) ? PyDict_New() : _PyDict_NewPresized(n))
#else
#define __Pyx_PyDict_NewPresized(n)  PyDict_New()
#endif
#if PY_MAJOR_VERSION >= 3 || CYTHON_FUTURE_DIVISION
  #define __Pyx_PyNumber_Divide(x,y)         PyNumber_TrueDivide(x,y)
  #define __Pyx_PyNumber_InPlaceDivide(x,y)  PyNumber_InPlaceTrueDivide(x,y)
#else
  #define __Pyx_PyNumber_Divide(x,y)         PyNumber_Divide(x,y)
  #define __Pyx_PyNumber_InPlaceDivide(x,y)  PyNumber_InPlaceDivide(x,y)
#endif
#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1 && CYTHON_USE_UNICODE_INTERNALS
#define __Pyx_PyDict_GetItemStr(dict, name)  _PyDict_GetItem_KnownHash(dict, name, ((PyASCIIObject *) name)->hash)
#else
#define __Pyx_PyDict_GetItemStr(dict, name)  PyDict_GetItem(dict, name)
#endif
#if PY_VERSION_HEX > 0x03030000 && defined(PyUnicode_KIND)
  #define CYTHON_PEP393_ENABLED 1
  #define __Pyx_PyUnicode_READY(op)       (likely(PyUnicode_IS_READY(op)) ?\
                                              0 : _PyUnicode_Ready((PyObject *)(op)))
  #define __Pyx_PyUnicode_GET_LENGTH(u)   PyUnicode_GET_LENGTH(u)
  #define __Pyx_PyUnicode_READ_CHAR(u, i) PyUnicode_READ_CHAR(u, i)
  #define __Pyx_PyUnicode_MAX_CHAR_VALUE(u)   PyUnicode_MAX_CHAR_VALUE(u)
  #define __Pyx_PyUnicode_KIND(u)         PyUnicode_KIND(u)
  #define __Pyx_PyUnicode_DATA(u)         PyUnicode_DATA(u)
  #define __Pyx_PyUnicode_READ(k, d, i)   PyUnicode_READ(k, d, i)
  #define __Pyx_PyUnicode_WRITE(k, d, i, ch)  PyUnicode_WRITE(k, d, i, ch)
  #define __Pyx_PyUnicode_IS_TRUE(u)      (0 != (likely(PyUnicode_IS_READY(u)) ? PyUnicode_GET_LENGTH(u) : PyUnicode_GET_SIZE(u)))
#else
  #define CYTHON_PEP393_ENABLED 0
  #define PyUnicode_1BYTE_KIND  1
  #define PyUnicode_2BYTE_KIND  2
  #define PyUnicode_4BYTE_KIND  4
  #define __Pyx_PyUnicode_READY(op)       (0)
  #define __Pyx_PyUnicode_GET_LENGTH(u)   PyUnicode_GET_SIZE(u)
  #define __Pyx_PyUnicode_READ_CHAR(u, i) ((Py_UCS4)(PyUnicode_AS_UNICODE(u)[i]))
  #define __Pyx_PyUnicode_MAX_CHAR_VALUE(u)   ((sizeof(Py_UNICODE) == 2) ? 65535 : 1114111)
  #define __Pyx_PyUnicode_KIND(u)         (sizeof(Py_UNICODE))
  #define __Pyx_PyUnicode_DATA(u)         ((void*)PyUnicode_AS_UNICODE(u))
  #define __Pyx_PyUnicode_READ(k, d, i)   ((void)(k), (Py_UCS4)(((Py_UNICODE*)d)[i]))
  #define __Pyx_PyUnicode_WRITE(k, d, i, ch)  (((void)(k)), ((Py_UNICODE*)d)[i] = ch)
  #define __Pyx_PyUnicode_IS_TRUE(u)      (0 != PyUnicode_GET_SIZE(u))
#endif
#if CYTHON_COMPILING_IN_PYPY
  #define __Pyx_PyUnicode_Concat(a, b)      PyNumber_Add(a, b)
  #define __Pyx_PyUnicode_ConcatSafe(a, b)  PyNumber_Add(a, b)
#else
  #define __Pyx_PyUnicode_Concat(a, b)      PyUnicode_Concat(a, b)
  #define __Pyx_PyUnicode_ConcatSafe(a, b)  ((unlikely((a) == Py_None) || unlikely((b) == Py_None)) ?\
      PyNumber_Add(a, b) : __Pyx_PyUnicode_Concat(a, b))
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyUnicode_Contains)
  #define PyUnicode_Contains(u, s)  PySequence_Contains(u, s)
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyByteArray_Check)
  #define PyByteArray_Check(obj)  PyObject_TypeCheck(obj, &PyByteArray_Type)
#endif
#if CYTHON_COMPILING_IN_PYPY && !defined(PyObject_Format)
  #define PyObject_Format(obj, fmt)  PyObject_CallMethod(obj, "__format__", "O", fmt)
#endif
#define __Pyx_PyString_FormatSafe(a, b)   ((unlikely((a) == Py_None || (PyString_Check(b) && !PyString_CheckExact(b)))) ? PyNumber_Remainder(a, b) : __Pyx_PyString_Format(a, b))
#define __Pyx_PyUnicode_FormatSafe(a, b)  ((unlikely((a) == Py_None || (PyUnicode_Check(b) && !PyUnicode_CheckExact(b)))) ? PyNumber_Remainder(a, b) : PyUnicode_Format(a, b))
#if PY_MAJOR_VERSION >= 3
  #define __Pyx_PyString_Format(a, b)  PyUnicode_Format(a, b)
#else
  #define __Pyx_PyString_Format(a, b)  PyString_Format(a, b)
#endif
#if PY_MAJOR_VERSION < 3 && !defined(PyObject_ASCII)
  #define PyObject_ASCII(o)            PyObject_Repr(o)
#endif
#if PY_MAJOR_VERSION >= 3
  #define PyBaseString_Type            PyUnicode_Type
  #define PyStringObject               PyUnicodeObject
  #define PyString_Type                PyUnicode_Type
  #define PyString_Check               PyUnicode_Check
  #define PyString_CheckExact          PyUnicode_CheckExact
  #define PyObject_Unicode             PyObject_Str
#endif
#if PY_MAJOR_VERSION >= 3
  #define __Pyx_PyBaseString_Check(obj) PyUnicode_Check(obj)
  #define __Pyx_PyBaseString_CheckExact(obj) PyUnicode_CheckExact(obj)
#else
  #define __Pyx_PyBaseString_Check(obj) (PyString_Check(obj) || PyUnicode_Check(obj))
  #define __Pyx_PyBaseString_CheckExact(obj) (PyString_CheckExact(obj) || PyUnicode_CheckExact(obj))
#endif
#ifndef PySet_CheckExact
  #define PySet_CheckExact(obj)        (Py_TYPE(obj) == &PySet_Type)
#endif
#if CYTHON_ASSUME_SAFE_MACROS
  #define __Pyx_PySequence_SIZE(seq)  Py_SIZE(seq)
#else
  #define __Pyx_PySequence_SIZE(seq)  PySequence_Size(seq)
#endif
#if PY_MAJOR_VERSION >= 3
  #define PyIntObject                  PyLongObject
  #define PyInt_Type                   PyLong_Type
  #define PyInt_Check(op)              PyLong_Check(op)
  #define PyInt_CheckExact(op)         PyLong_CheckExact(op)
  #define PyInt_FromString             PyLong_FromString
  #define PyInt_FromUnicode            PyLong_FromUnicode
  #define PyInt_FromLong               PyLong_FromLong
  #define PyInt_FromSize_t             PyLong_FromSize_t
  #define PyInt_FromSsize_t            PyLong_FromSsize_t
  #define PyInt_AsLong                 PyLong_AsLong
  #define PyInt_AS_LONG                PyLong_AS_LONG
  #define PyInt_AsSsize_t              PyLong_AsSsize_t
  #define PyInt_AsUnsignedLongMask     PyLong_AsUnsignedLongMask
  #define PyInt_AsUnsignedLongLongMask PyLong_AsUnsignedLongLongMask
  #define PyNumber_Int                 PyNumber_Long
#endif
#if PY_MAJOR_VERSION >= 3
  #define PyBoolObject                 PyLongObject
#endif
#if PY_MAJOR_VERSION >= 3 && CYTHON_COMPILING_IN_PYPY
  #ifndef PyUnicode_InternFromString
    #define PyUnicode_InternFromString(s) PyUnicode_FromString(s)
  #endif
#endif
#if PY_VERSION_HEX < 0x030200A4
  typedef long Py_hash_t;
  #define __Pyx_PyInt_FromHash_t PyInt_FromLong
  #define __Pyx_PyInt_AsHash_t   PyInt_AsLong
#else
  #define __Pyx_PyInt_FromHash_t PyInt_FromSsize_t
  #define __Pyx_PyInt_AsHash_t   PyInt_AsSsize_t
#endif
#if PY_MAJOR_VERSION >= 3
  #define __Pyx_PyMethod_New(func, self, klass) ((self) ? PyMethod_New(func, self) : (Py_INCREF(func), func))
#else
  #define __Pyx_PyMethod_New(func, self, klass) PyMethod_New(func, self, klass)
#endif
#if CYTHON_USE_ASYNC_SLOTS
  #if PY_VERSION_HEX >= 0x030500B1
    #define __Pyx_PyAsyncMethodsStruct PyAsyncMethods
    #define __Pyx_PyType_AsAsync(obj) (Py_TYPE(obj)->tp_as_async)
  #else
    #define __Pyx_PyType_AsAsync(obj) ((__Pyx_PyAsyncMethodsStruct*) (Py_TYPE(obj)->tp_reserved))
  #endif
#else
  #define __Pyx_PyType_AsAsync(obj) NULL
#endif
#ifndef __Pyx_PyAsyncMethodsStruct
    typedef struct {
        unaryfunc am_await;
        unaryfunc am_aiter;
        unaryfunc am_anext;
    } __Pyx_PyAsyncMethodsStruct;
#endif

#if defined(WIN32) || defined(MS_WINDOWS)
  #define _USE_MATH_DEFINES
#endif
#include <math.h>
#ifdef NAN
#define __PYX_NAN() ((float) NAN)
#else
static CYTHON_INLINE float __PYX_NAN() {
  float value;
  memset(&value, 0xFF, sizeof(value));
  return value;
}
#endif
#if defined(__CYGWIN__) && defined(_LDBL_EQ_DBL)
#define __Pyx_truncl trunc
#else
#define __Pyx_truncl truncl
#endif


#define __PYX_ERR(f_index, lineno, Ln_error) \
{ \
  __pyx_filename = __pyx_f[f_index]; __pyx_lineno = lineno; __pyx_clineno = __LINE__; goto Ln_error; \
}

#ifndef __PYX_EXTERN_C
  #ifdef __cplusplus
    #define __PYX_EXTERN_C extern "C"
  #else
    #define __PYX_EXTERN_C extern
  #endif
#endif

#define __PYX_HAVE__automata__cautomata
#define __PYX_HAVE_API__automata__cautomata
/* Early includes */
#include "Automaton.h"
#include "automataC.h"
#include <string.h>
#include <stdlib.h>
#include <signal.h>
#include <stdio.h>
#include "struct_signals.h"
#include "pythread.h"
#ifdef _OPENMP
#include <omp.h>
#endif /* _OPENMP */

#if defined(PYREX_WITHOUT_ASSERTIONS) && !defined(CYTHON_WITHOUT_ASSERTIONS)
#define CYTHON_WITHOUT_ASSERTIONS
#endif

typedef struct {PyObject **p; const char *s; const Py_ssize_t n; const char* encoding;
                const char is_unicode; const char is_str; const char intern; } __Pyx_StringTabEntry;

#define __PYX_DEFAULT_STRING_ENCODING_IS_ASCII 0
#define __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT 0
#define __PYX_DEFAULT_STRING_ENCODING ""
#define __Pyx_PyObject_FromString __Pyx_PyBytes_FromString
#define __Pyx_PyObject_FromStringAndSize __Pyx_PyBytes_FromStringAndSize
#define __Pyx_uchar_cast(c) ((unsigned char)c)
#define __Pyx_long_cast(x) ((long)x)
#define __Pyx_fits_Py_ssize_t(v, type, is_signed)  (\
    (sizeof(type) < sizeof(Py_ssize_t))  ||\
    (sizeof(type) > sizeof(Py_ssize_t) &&\
          likely(v < (type)PY_SSIZE_T_MAX ||\
                 v == (type)PY_SSIZE_T_MAX)  &&\
          (!is_signed || likely(v > (type)PY_SSIZE_T_MIN ||\
                                v == (type)PY_SSIZE_T_MIN)))  ||\
    (sizeof(type) == sizeof(Py_ssize_t) &&\
          (is_signed || likely(v < (type)PY_SSIZE_T_MAX ||\
                               v == (type)PY_SSIZE_T_MAX)))  )
static CYTHON_INLINE int __Pyx_is_valid_index(Py_ssize_t i, Py_ssize_t limit) {
    return (size_t) i < (size_t) limit;
}
#if defined (__cplusplus) && __cplusplus >= 201103L
    #include <cstdlib>
    #define __Pyx_sst_abs(value) std::abs(value)
#elif SIZEOF_INT >= SIZEOF_SIZE_T
    #define __Pyx_sst_abs(value) abs(value)
#elif SIZEOF_LONG >= SIZEOF_SIZE_T
    #define __Pyx_sst_abs(value) labs(value)
#elif defined (_MSC_VER)
    #define __Pyx_sst_abs(value) ((Py_ssize_t)_abs64(value))
#elif defined (__STDC_VERSION__) && __STDC_VERSION__ >= 199901L
    #define __Pyx_sst_abs(value) llabs(value)
#elif defined (__GNUC__)
    #define __Pyx_sst_abs(value) __builtin_llabs(value)
#else
    #define __Pyx_sst_abs(value) ((value<0) ? -value : value)
#endif
static CYTHON_INLINE const char* __Pyx_PyObject_AsString(PyObject*);
static CYTHON_INLINE const char* __Pyx_PyObject_AsStringAndSize(PyObject*, Py_ssize_t* length);
#define __Pyx_PyByteArray_FromString(s) PyByteArray_FromStringAndSize((const char*)s, strlen((const char*)s))
#define __Pyx_PyByteArray_FromStringAndSize(s, l) PyByteArray_FromStringAndSize((const char*)s, l)
#define __Pyx_PyBytes_FromString        PyBytes_FromString
#define __Pyx_PyBytes_FromStringAndSize PyBytes_FromStringAndSize
static CYTHON_INLINE PyObject* __Pyx_PyUnicode_FromString(const char*);
#if PY_MAJOR_VERSION < 3
    #define __Pyx_PyStr_FromString        __Pyx_PyBytes_FromString
    #define __Pyx_PyStr_FromStringAndSize __Pyx_PyBytes_FromStringAndSize
#else
    #define __Pyx_PyStr_FromString        __Pyx_PyUnicode_FromString
    #define __Pyx_PyStr_FromStringAndSize __Pyx_PyUnicode_FromStringAndSize
#endif
#define __Pyx_PyBytes_AsWritableString(s)     ((char*) PyBytes_AS_STRING(s))
#define __Pyx_PyBytes_AsWritableSString(s)    ((signed char*) PyBytes_AS_STRING(s))
#define __Pyx_PyBytes_AsWritableUString(s)    ((unsigned char*) PyBytes_AS_STRING(s))
#define __Pyx_PyBytes_AsString(s)     ((const char*) PyBytes_AS_STRING(s))
#define __Pyx_PyBytes_AsSString(s)    ((const signed char*) PyBytes_AS_STRING(s))
#define __Pyx_PyBytes_AsUString(s)    ((const unsigned char*) PyBytes_AS_STRING(s))
#define __Pyx_PyObject_AsWritableString(s)    ((char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsWritableSString(s)    ((signed char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsWritableUString(s)    ((unsigned char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsSString(s)    ((const signed char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_AsUString(s)    ((const unsigned char*) __Pyx_PyObject_AsString(s))
#define __Pyx_PyObject_FromCString(s)  __Pyx_PyObject_FromString((const char*)s)
#define __Pyx_PyBytes_FromCString(s)   __Pyx_PyBytes_FromString((const char*)s)
#define __Pyx_PyByteArray_FromCString(s)   __Pyx_PyByteArray_FromString((const char*)s)
#define __Pyx_PyStr_FromCString(s)     __Pyx_PyStr_FromString((const char*)s)
#define __Pyx_PyUnicode_FromCString(s) __Pyx_PyUnicode_FromString((const char*)s)
static CYTHON_INLINE size_t __Pyx_Py_UNICODE_strlen(const Py_UNICODE *u) {
    const Py_UNICODE *u_end = u;
    while (*u_end++) ;
    return (size_t)(u_end - u - 1);
}
#define __Pyx_PyUnicode_FromUnicode(u)       PyUnicode_FromUnicode(u, __Pyx_Py_UNICODE_strlen(u))
#define __Pyx_PyUnicode_FromUnicodeAndLength PyUnicode_FromUnicode
#define __Pyx_PyUnicode_AsUnicode            PyUnicode_AsUnicode
#define __Pyx_NewRef(obj) (Py_INCREF(obj), obj)
#define __Pyx_Owned_Py_None(b) __Pyx_NewRef(Py_None)
static CYTHON_INLINE PyObject * __Pyx_PyBool_FromLong(long b);
static CYTHON_INLINE int __Pyx_PyObject_IsTrue(PyObject*);
static CYTHON_INLINE int __Pyx_PyObject_IsTrueAndDecref(PyObject*);
static CYTHON_INLINE PyObject* __Pyx_PyNumber_IntOrLong(PyObject* x);
#define __Pyx_PySequence_Tuple(obj)\
    (likely(PyTuple_CheckExact(obj)) ? __Pyx_NewRef(obj) : PySequence_Tuple(obj))
static CYTHON_INLINE Py_ssize_t __Pyx_PyIndex_AsSsize_t(PyObject*);
static CYTHON_INLINE PyObject * __Pyx_PyInt_FromSize_t(size_t);
#if CYTHON_ASSUME_SAFE_MACROS
#define __pyx_PyFloat_AsDouble(x) (PyFloat_CheckExact(x) ? PyFloat_AS_DOUBLE(x) : PyFloat_AsDouble(x))
#else
#define __pyx_PyFloat_AsDouble(x) PyFloat_AsDouble(x)
#endif
#define __pyx_PyFloat_AsFloat(x) ((float) __pyx_PyFloat_AsDouble(x))
#if PY_MAJOR_VERSION >= 3
#define __Pyx_PyNumber_Int(x) (PyLong_CheckExact(x) ? __Pyx_NewRef(x) : PyNumber_Long(x))
#else
#define __Pyx_PyNumber_Int(x) (PyInt_CheckExact(x) ? __Pyx_NewRef(x) : PyNumber_Int(x))
#endif
#define __Pyx_PyNumber_Float(x) (PyFloat_CheckExact(x) ? __Pyx_NewRef(x) : PyNumber_Float(x))
#if PY_MAJOR_VERSION < 3 && __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
static int __Pyx_sys_getdefaultencoding_not_ascii;
static int __Pyx_init_sys_getdefaultencoding_params(void) {
    PyObject* sys;
    PyObject* default_encoding = NULL;
    PyObject* ascii_chars_u = NULL;
    PyObject* ascii_chars_b = NULL;
    const char* default_encoding_c;
    sys = PyImport_ImportModule("sys");
    if (!sys) goto bad;
    default_encoding = PyObject_CallMethod(sys, (char*) "getdefaultencoding", NULL);
    Py_DECREF(sys);
    if (!default_encoding) goto bad;
    default_encoding_c = PyBytes_AsString(default_encoding);
    if (!default_encoding_c) goto bad;
    if (strcmp(default_encoding_c, "ascii") == 0) {
        __Pyx_sys_getdefaultencoding_not_ascii = 0;
    } else {
        char ascii_chars[128];
        int c;
        for (c = 0; c < 128; c++) {
            ascii_chars[c] = c;
        }
        __Pyx_sys_getdefaultencoding_not_ascii = 1;
        ascii_chars_u = PyUnicode_DecodeASCII(ascii_chars, 128, NULL);
        if (!ascii_chars_u) goto bad;
        ascii_chars_b = PyUnicode_AsEncodedString(ascii_chars_u, default_encoding_c, NULL);
        if (!ascii_chars_b || !PyBytes_Check(ascii_chars_b) || memcmp(ascii_chars, PyBytes_AS_STRING(ascii_chars_b), 128) != 0) {
            PyErr_Format(
                PyExc_ValueError,
                "This module compiled with c_string_encoding=ascii, but default encoding '%.200s' is not a superset of ascii.",
                default_encoding_c);
            goto bad;
        }
        Py_DECREF(ascii_chars_u);
        Py_DECREF(ascii_chars_b);
    }
    Py_DECREF(default_encoding);
    return 0;
bad:
    Py_XDECREF(default_encoding);
    Py_XDECREF(ascii_chars_u);
    Py_XDECREF(ascii_chars_b);
    return -1;
}
#endif
#if __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT && PY_MAJOR_VERSION >= 3
#define __Pyx_PyUnicode_FromStringAndSize(c_str, size) PyUnicode_DecodeUTF8(c_str, size, NULL)
#else
#define __Pyx_PyUnicode_FromStringAndSize(c_str, size) PyUnicode_Decode(c_str, size, __PYX_DEFAULT_STRING_ENCODING, NULL)
#if __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT
static char* __PYX_DEFAULT_STRING_ENCODING;
static int __Pyx_init_sys_getdefaultencoding_params(void) {
    PyObject* sys;
    PyObject* default_encoding = NULL;
    char* default_encoding_c;
    sys = PyImport_ImportModule("sys");
    if (!sys) goto bad;
    default_encoding = PyObject_CallMethod(sys, (char*) (const char*) "getdefaultencoding", NULL);
    Py_DECREF(sys);
    if (!default_encoding) goto bad;
    default_encoding_c = PyBytes_AsString(default_encoding);
    if (!default_encoding_c) goto bad;
    __PYX_DEFAULT_STRING_ENCODING = (char*) malloc(strlen(default_encoding_c) + 1);
    if (!__PYX_DEFAULT_STRING_ENCODING) goto bad;
    strcpy(__PYX_DEFAULT_STRING_ENCODING, default_encoding_c);
    Py_DECREF(default_encoding);
    return 0;
bad:
    Py_XDECREF(default_encoding);
    return -1;
}
#endif
#endif


/* Test for GCC > 2.95 */
#if defined(__GNUC__)     && (__GNUC__ > 2 || (__GNUC__ == 2 && (__GNUC_MINOR__ > 95)))
  #define likely(x)   __builtin_expect(!!(x), 1)
  #define unlikely(x) __builtin_expect(!!(x), 0)
#else /* !__GNUC__ or GCC < 2.95 */
  #define likely(x)   (x)
  #define unlikely(x) (x)
#endif /* __GNUC__ */
static CYTHON_INLINE void __Pyx_pretend_to_initialize(void* ptr) { (void)ptr; }

static PyObject *__pyx_m = NULL;
static PyObject *__pyx_d;
static PyObject *__pyx_b;
static PyObject *__pyx_cython_runtime = NULL;
static PyObject *__pyx_empty_tuple;
static PyObject *__pyx_empty_bytes;
static PyObject *__pyx_empty_unicode;
static int __pyx_lineno;
static int __pyx_clineno = 0;
static const char * __pyx_cfilenm= __FILE__;
static const char *__pyx_filename;


static const char *__pyx_f[] = {
  "automata/cautomata.pyx",
  "stringsource",
  "type.pxd",
  "bool.pxd",
  "complex.pxd",
  "cautomata.pxd",
};

/*--- Type declarations ---*/
struct __pyx_obj_4sage_8combinat_5words_9cautomata_DeterministicAutomaton;
struct __pyx_obj_4sage_8combinat_5words_9cautomata_CAutomaton;
struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton;
struct __pyx_obj_8automata_9cautomata_CAutomaton;

/* "libc/signal.pxd":3
 * # 7.14 Signal handling <signal.h>
 * 
 * ctypedef void (*sighandler_t)(int SIGNUM) nogil             # <<<<<<<<<<<<<<
 * 
 * cdef extern from "<signal.h>" nogil:
 */
typedef void (*__pyx_t_4libc_6signal_sighandler_t)(int);
struct __pyx_opt_args_8automata_9cautomata_imagDict;
struct __pyx_opt_args_8automata_9cautomata_imagDict2;
struct __pyx_opt_args_8automata_9cautomata_getDict;
struct __pyx_opt_args_8automata_9cautomata_getDict2;
struct __pyx_opt_args_8automata_9cautomata_imagProductDict;
struct __pyx_opt_args_8automata_9cautomata_getProductDict;
struct __pyx_opt_args_8automata_9cautomata_getAutomaton;
struct __pyx_opt_args_8automata_9cautomata_getNAutomaton;
struct __pyx_opt_args_8automata_9cautomata_AutomatonToDiGraph;

/* "automata/cautomata.pyx":119
 *     void Test()
 * 
 * cdef imagDict(dict d, list A, list A2=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary which is numbering projected alphabet
 */
struct __pyx_opt_args_8automata_9cautomata_imagDict {
  int __pyx_n;
  PyObject *A2;
};

/* "automata/cautomata.pyx":133
 *     return d1
 * 
 * cdef imagDict2(dict d, list A, list A2=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary which is numbering a new alphabet
 */
struct __pyx_opt_args_8automata_9cautomata_imagDict2 {
  int __pyx_n;
  PyObject *A2;
};

/* "automata/cautomata.pyx":149
 *     return d1
 * 
 * cdef Dict getDict(dict d, list A, dict d1=None):             # <<<<<<<<<<<<<<
 *     A = list(A)
 *     cdef Dict r
 */
struct __pyx_opt_args_8automata_9cautomata_getDict {
  int __pyx_n;
  PyObject *d1;
};

/* "automata/cautomata.pyx":173
 *     return d
 * 
 * cdef InvertDict getDict2(dict d, list A, dict d1=None):             # <<<<<<<<<<<<<<
 *     A = list(A)
 *     cdef InvertDict r
 */
struct __pyx_opt_args_8automata_9cautomata_getDict2 {
  int __pyx_n;
  PyObject *d1;
};

/* "automata/cautomata.pyx":194
 *     return r
 * 
 * cdef imagProductDict(dict d, list A1, list A2, list Av=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary numbering the projected alphabet
 */
struct __pyx_opt_args_8automata_9cautomata_imagProductDict {
  int __pyx_n;
  PyObject *Av;
};

/* "automata/cautomata.pyx":209
 *     return dv
 * 
 * cdef Dict getProductDict(dict d, list A1, list A2, dict dv=None, verb=True):             # <<<<<<<<<<<<<<
 *     cdef Dict r
 *     d1 = {}
 */
struct __pyx_opt_args_8automata_9cautomata_getProductDict {
  int __pyx_n;
  PyObject *dv;
  PyObject *verb;
};

/* "automata/cautomata.pyx":237
 *     return r
 * 
 * cdef Automaton getAutomaton(a, initial=None, F=None, A=None):             # <<<<<<<<<<<<<<
 *     d = {}
 *     da = {}
 */
struct __pyx_opt_args_8automata_9cautomata_getAutomaton {
  int __pyx_n;
  PyObject *initial;
  PyObject *F;
  PyObject *A;
};

/* "automata/cautomata.pyx":305
 *     return r
 * 
 * cdef NAutomaton getNAutomaton(a, I=None, F=None, A=None, verb=False):             # <<<<<<<<<<<<<<
 *     d = {}
 *     da = {}
 */
struct __pyx_opt_args_8automata_9cautomata_getNAutomaton {
  int __pyx_n;
  PyObject *I;
  PyObject *F;
  PyObject *A;
  PyObject *verb;
};

/* "automata/cautomata.pyx":432
 *     return SageAutomaton(L, initial_states=I, final_states=F)
 * 
 * cdef AutomatonToDiGraph(Automaton a, A, keep_edges_labels=True):             # <<<<<<<<<<<<<<
 *     from sage.graphs.digraph import DiGraph
 *     cdef int i, j
 */
struct __pyx_opt_args_8automata_9cautomata_AutomatonToDiGraph {
  int __pyx_n;
  PyObject *keep_edges_labels;
};

/* "sage/combinat/words/cautomata.pxd":43
 *     void FreeNAutomaton(NAutomaton *a)
 * 
 * cdef class DeterministicAutomaton:             # <<<<<<<<<<<<<<
 *     cdef Automaton* a
 *     cdef list A	 # alphabet
 */
struct __pyx_obj_4sage_8combinat_5words_9cautomata_DeterministicAutomaton {
  PyObject_HEAD
  Automaton *a;
  PyObject *A;
  PyObject *S;
};


/* "sage/combinat/words/cautomata.pxd":52
 * 
 * 
 * cdef class CAutomaton:             # <<<<<<<<<<<<<<
 *     cdef NAutomaton* a
 *     cdef list A
 */
struct __pyx_obj_4sage_8combinat_5words_9cautomata_CAutomaton {
  PyObject_HEAD
  NAutomaton *a;
  PyObject *A;
  PyObject *S;
};


/* "automata/cautomata.pxd":43
 *     void FreeNAutomaton(NAutomaton *a)
 * 
 * cdef class DeterministicAutomaton:             # <<<<<<<<<<<<<<
 *     cdef Automaton* a
 *     cdef list A	 # alphabet
 */
struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton {
  PyObject_HEAD
  Automaton *a;
  PyObject *A;
  PyObject *S;
};


/* "automata/cautomata.pxd":52
 * 
 * 
 * cdef class CAutomaton:             # <<<<<<<<<<<<<<
 *     cdef NAutomaton* a
 *     cdef list A
 */
struct __pyx_obj_8automata_9cautomata_CAutomaton {
  PyObject_HEAD
  NAutomaton *a;
  PyObject *A;
  PyObject *S;
};


/* --- Runtime support code (head) --- */
/* Refnanny.proto */
#ifndef CYTHON_REFNANNY
  #define CYTHON_REFNANNY 0
#endif
#if CYTHON_REFNANNY
  typedef struct {
    void (*INCREF)(void*, PyObject*, int);
    void (*DECREF)(void*, PyObject*, int);
    void (*GOTREF)(void*, PyObject*, int);
    void (*GIVEREF)(void*, PyObject*, int);
    void* (*SetupContext)(const char*, int, const char*);
    void (*FinishContext)(void**);
  } __Pyx_RefNannyAPIStruct;
  static __Pyx_RefNannyAPIStruct *__Pyx_RefNanny = NULL;
  static __Pyx_RefNannyAPIStruct *__Pyx_RefNannyImportAPI(const char *modname);
  #define __Pyx_RefNannyDeclarations void *__pyx_refnanny = NULL;
#ifdef WITH_THREAD
  #define __Pyx_RefNannySetupContext(name, acquire_gil)\
          if (acquire_gil) {\
              PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();\
              __pyx_refnanny = __Pyx_RefNanny->SetupContext((name), __LINE__, __FILE__);\
              PyGILState_Release(__pyx_gilstate_save);\
          } else {\
              __pyx_refnanny = __Pyx_RefNanny->SetupContext((name), __LINE__, __FILE__);\
          }
#else
  #define __Pyx_RefNannySetupContext(name, acquire_gil)\
          __pyx_refnanny = __Pyx_RefNanny->SetupContext((name), __LINE__, __FILE__)
#endif
  #define __Pyx_RefNannyFinishContext()\
          __Pyx_RefNanny->FinishContext(&__pyx_refnanny)
  #define __Pyx_INCREF(r)  __Pyx_RefNanny->INCREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_DECREF(r)  __Pyx_RefNanny->DECREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_GOTREF(r)  __Pyx_RefNanny->GOTREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_GIVEREF(r) __Pyx_RefNanny->GIVEREF(__pyx_refnanny, (PyObject *)(r), __LINE__)
  #define __Pyx_XINCREF(r)  do { if((r) != NULL) {__Pyx_INCREF(r); }} while(0)
  #define __Pyx_XDECREF(r)  do { if((r) != NULL) {__Pyx_DECREF(r); }} while(0)
  #define __Pyx_XGOTREF(r)  do { if((r) != NULL) {__Pyx_GOTREF(r); }} while(0)
  #define __Pyx_XGIVEREF(r) do { if((r) != NULL) {__Pyx_GIVEREF(r);}} while(0)
#else
  #define __Pyx_RefNannyDeclarations
  #define __Pyx_RefNannySetupContext(name, acquire_gil)
  #define __Pyx_RefNannyFinishContext()
  #define __Pyx_INCREF(r) Py_INCREF(r)
  #define __Pyx_DECREF(r) Py_DECREF(r)
  #define __Pyx_GOTREF(r)
  #define __Pyx_GIVEREF(r)
  #define __Pyx_XINCREF(r) Py_XINCREF(r)
  #define __Pyx_XDECREF(r) Py_XDECREF(r)
  #define __Pyx_XGOTREF(r)
  #define __Pyx_XGIVEREF(r)
#endif
#define __Pyx_XDECREF_SET(r, v) do {\
        PyObject *tmp = (PyObject *) r;\
        r = v; __Pyx_XDECREF(tmp);\
    } while (0)
#define __Pyx_DECREF_SET(r, v) do {\
        PyObject *tmp = (PyObject *) r;\
        r = v; __Pyx_DECREF(tmp);\
    } while (0)
#define __Pyx_CLEAR(r)    do { PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);} while(0)
#define __Pyx_XCLEAR(r)   do { if((r) != NULL) {PyObject* tmp = ((PyObject*)(r)); r = NULL; __Pyx_DECREF(tmp);}} while(0)

/* PyObjectGetAttrStr.proto */
#if CYTHON_USE_TYPE_SLOTS
static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name);
#else
#define __Pyx_PyObject_GetAttrStr(o,n) PyObject_GetAttr(o,n)
#endif

/* GetBuiltinName.proto */
static PyObject *__Pyx_GetBuiltinName(PyObject *name);

/* DictGetItem.proto */
#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key);
#define __Pyx_PyObject_Dict_GetItem(obj, name)\
    (likely(PyDict_CheckExact(obj)) ?\
     __Pyx_PyDict_GetItem(obj, name) : PyObject_GetItem(obj, name))
#else
#define __Pyx_PyDict_GetItem(d, key) PyObject_GetItem(d, key)
#define __Pyx_PyObject_Dict_GetItem(obj, name)  PyObject_GetItem(obj, name)
#endif

/* ListAppend.proto */
#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
static CYTHON_INLINE int __Pyx_PyList_Append(PyObject* list, PyObject* x) {
    PyListObject* L = (PyListObject*) list;
    Py_ssize_t len = Py_SIZE(list);
    if (likely(L->allocated > len) & likely(len > (L->allocated >> 1))) {
        Py_INCREF(x);
        PyList_SET_ITEM(list, len, x);
        Py_SIZE(list) = len+1;
        return 0;
    }
    return PyList_Append(list, x);
}
#else
#define __Pyx_PyList_Append(L,x) PyList_Append(L,x)
#endif

/* PyIntBinop.proto */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_AddObjC(PyObject *op1, PyObject *op2, long intval, int inplace);
#else
#define __Pyx_PyInt_AddObjC(op1, op2, intval, inplace)\
    (inplace ? PyNumber_InPlaceAdd(op1, op2) : PyNumber_Add(op1, op2))
#endif

/* GetItemInt.proto */
#define __Pyx_GetItemInt(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
    __Pyx_GetItemInt_Fast(o, (Py_ssize_t)i, is_list, wraparound, boundscheck) :\
    (is_list ? (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL) :\
               __Pyx_GetItemInt_Generic(o, to_py_func(i))))
#define __Pyx_GetItemInt_List(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
    __Pyx_GetItemInt_List_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
    (PyErr_SetString(PyExc_IndexError, "list index out of range"), (PyObject*)NULL))
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
                                                              int wraparound, int boundscheck);
#define __Pyx_GetItemInt_Tuple(o, i, type, is_signed, to_py_func, is_list, wraparound, boundscheck)\
    (__Pyx_fits_Py_ssize_t(i, type, is_signed) ?\
    __Pyx_GetItemInt_Tuple_Fast(o, (Py_ssize_t)i, wraparound, boundscheck) :\
    (PyErr_SetString(PyExc_IndexError, "tuple index out of range"), (PyObject*)NULL))
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
                                                              int wraparound, int boundscheck);
static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j);
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i,
                                                     int is_list, int wraparound, int boundscheck);

/* PyThreadStateGet.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_PyThreadState_declare  PyThreadState *__pyx_tstate;
#define __Pyx_PyThreadState_assign  __pyx_tstate = __Pyx_PyThreadState_Current;
#define __Pyx_PyErr_Occurred()  __pyx_tstate->curexc_type
#else
#define __Pyx_PyThreadState_declare
#define __Pyx_PyThreadState_assign
#define __Pyx_PyErr_Occurred()  PyErr_Occurred()
#endif

/* PyErrFetchRestore.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_PyErr_Clear() __Pyx_ErrRestore(NULL, NULL, NULL)
#define __Pyx_ErrRestoreWithState(type, value, tb)  __Pyx_ErrRestoreInState(PyThreadState_GET(), type, value, tb)
#define __Pyx_ErrFetchWithState(type, value, tb)    __Pyx_ErrFetchInState(PyThreadState_GET(), type, value, tb)
#define __Pyx_ErrRestore(type, value, tb)  __Pyx_ErrRestoreInState(__pyx_tstate, type, value, tb)
#define __Pyx_ErrFetch(type, value, tb)    __Pyx_ErrFetchInState(__pyx_tstate, type, value, tb)
static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb);
static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
#if CYTHON_COMPILING_IN_CPYTHON
#define __Pyx_PyErr_SetNone(exc) (Py_INCREF(exc), __Pyx_ErrRestore((exc), NULL, NULL))
#else
#define __Pyx_PyErr_SetNone(exc) PyErr_SetNone(exc)
#endif
#else
#define __Pyx_PyErr_Clear() PyErr_Clear()
#define __Pyx_PyErr_SetNone(exc) PyErr_SetNone(exc)
#define __Pyx_ErrRestoreWithState(type, value, tb)  PyErr_Restore(type, value, tb)
#define __Pyx_ErrFetchWithState(type, value, tb)  PyErr_Fetch(type, value, tb)
#define __Pyx_ErrRestoreInState(tstate, type, value, tb)  PyErr_Restore(type, value, tb)
#define __Pyx_ErrFetchInState(tstate, type, value, tb)  PyErr_Fetch(type, value, tb)
#define __Pyx_ErrRestore(type, value, tb)  PyErr_Restore(type, value, tb)
#define __Pyx_ErrFetch(type, value, tb)  PyErr_Fetch(type, value, tb)
#endif

/* WriteUnraisableException.proto */
static void __Pyx_WriteUnraisable(const char *name, int clineno,
                                  int lineno, const char *filename,
                                  int full_traceback, int nogil);

/* PyCFunctionFastCall.proto */
#if CYTHON_FAST_PYCCALL
static CYTHON_INLINE PyObject *__Pyx_PyCFunction_FastCall(PyObject *func, PyObject **args, Py_ssize_t nargs);
#else
#define __Pyx_PyCFunction_FastCall(func, args, nargs)  (assert(0), NULL)
#endif

/* PyFunctionFastCall.proto */
#if CYTHON_FAST_PYCALL
#define __Pyx_PyFunction_FastCall(func, args, nargs)\
    __Pyx_PyFunction_FastCallDict((func), (args), (nargs), NULL)
#if 1 || PY_VERSION_HEX < 0x030600B1
static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, int nargs, PyObject *kwargs);
#else
#define __Pyx_PyFunction_FastCallDict(func, args, nargs, kwargs) _PyFunction_FastCallDict(func, args, nargs, kwargs)
#endif
#define __Pyx_BUILD_ASSERT_EXPR(cond)\
    (sizeof(char [1 - 2*!(cond)]) - 1)
#ifndef Py_MEMBER_SIZE
#define Py_MEMBER_SIZE(type, member) sizeof(((type *)0)->member)
#endif
  static size_t __pyx_pyframe_localsplus_offset = 0;
  #include "frameobject.h"
  #define __Pxy_PyFrame_Initialize_Offsets()\
    ((void)__Pyx_BUILD_ASSERT_EXPR(sizeof(PyFrameObject) == offsetof(PyFrameObject, f_localsplus) + Py_MEMBER_SIZE(PyFrameObject, f_localsplus)),\
     (void)(__pyx_pyframe_localsplus_offset = ((size_t)PyFrame_Type.tp_basicsize) - Py_MEMBER_SIZE(PyFrameObject, f_localsplus)))
  #define __Pyx_PyFrame_GetLocalsplus(frame)\
    (assert(__pyx_pyframe_localsplus_offset), (PyObject **)(((char *)(frame)) + __pyx_pyframe_localsplus_offset))
#endif

/* PyObjectCall.proto */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw);
#else
#define __Pyx_PyObject_Call(func, arg, kw) PyObject_Call(func, arg, kw)
#endif

/* PyObjectCallMethO.proto */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg);
#endif

/* PyObjectCallOneArg.proto */
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg);

/* py_dict_keys.proto */
static CYTHON_INLINE PyObject* __Pyx_PyDict_Keys(PyObject* d);

/* UnpackUnboundCMethod.proto */
typedef struct {
    PyObject *type;
    PyObject **method_name;
    PyCFunction func;
    PyObject *method;
    int flag;
} __Pyx_CachedCFunction;

/* CallUnboundCMethod0.proto */
static PyObject* __Pyx__CallUnboundCMethod0(__Pyx_CachedCFunction* cfunc, PyObject* self);
#if CYTHON_COMPILING_IN_CPYTHON
#define __Pyx_CallUnboundCMethod0(cfunc, self)\
    (likely((cfunc)->func) ?\
        (likely((cfunc)->flag == METH_NOARGS) ?  (*((cfunc)->func))(self, NULL) :\
         (PY_VERSION_HEX >= 0x030600B1 && likely((cfunc)->flag == METH_FASTCALL) ?\
            (PY_VERSION_HEX >= 0x030700A0 ?\
                (*(__Pyx_PyCFunctionFast)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0) :\
                (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0, NULL)) :\
          (PY_VERSION_HEX >= 0x030700A0 && (cfunc)->flag == (METH_FASTCALL | METH_KEYWORDS) ?\
            (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, &__pyx_empty_tuple, 0, NULL) :\
            (likely((cfunc)->flag == (METH_VARARGS | METH_KEYWORDS)) ?  ((*(PyCFunctionWithKeywords)(void*)(PyCFunction)(cfunc)->func)(self, __pyx_empty_tuple, NULL)) :\
               ((cfunc)->flag == METH_VARARGS ?  (*((cfunc)->func))(self, __pyx_empty_tuple) :\
               __Pyx__CallUnboundCMethod0(cfunc, self)))))) :\
        __Pyx__CallUnboundCMethod0(cfunc, self))
#else
#define __Pyx_CallUnboundCMethod0(cfunc, self)  __Pyx__CallUnboundCMethod0(cfunc, self)
#endif

/* RaiseTooManyValuesToUnpack.proto */
static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected);

/* RaiseNeedMoreValuesToUnpack.proto */
static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index);

/* IterFinish.proto */
static CYTHON_INLINE int __Pyx_IterFinish(void);

/* UnpackItemEndCheck.proto */
static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected);

/* GetAttr.proto */
static CYTHON_INLINE PyObject *__Pyx_GetAttr(PyObject *, PyObject *);

/* HasAttr.proto */
static CYTHON_INLINE int __Pyx_HasAttr(PyObject *, PyObject *);

/* PyObjectCallNoArg.proto */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallNoArg(PyObject *func);
#else
#define __Pyx_PyObject_CallNoArg(func) __Pyx_PyObject_Call(func, __pyx_empty_tuple, NULL)
#endif

/* GetTopmostException.proto */
#if CYTHON_USE_EXC_INFO_STACK
static _PyErr_StackItem * __Pyx_PyErr_GetTopmostException(PyThreadState *tstate);
#endif

/* SaveResetException.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_ExceptionSave(type, value, tb)  __Pyx__ExceptionSave(__pyx_tstate, type, value, tb)
static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
#define __Pyx_ExceptionReset(type, value, tb)  __Pyx__ExceptionReset(__pyx_tstate, type, value, tb)
static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb);
#else
#define __Pyx_ExceptionSave(type, value, tb)   PyErr_GetExcInfo(type, value, tb)
#define __Pyx_ExceptionReset(type, value, tb)  PyErr_SetExcInfo(type, value, tb)
#endif

/* PyErrExceptionMatches.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_PyErr_ExceptionMatches(err) __Pyx_PyErr_ExceptionMatchesInState(__pyx_tstate, err)
static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err);
#else
#define __Pyx_PyErr_ExceptionMatches(err)  PyErr_ExceptionMatches(err)
#endif

/* GetException.proto */
#if CYTHON_FAST_THREAD_STATE
#define __Pyx_GetException(type, value, tb)  __Pyx__GetException(__pyx_tstate, type, value, tb)
static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb);
#else
static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb);
#endif

/* RaiseException.proto */
static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause);

/* PyObjectSetAttrStr.proto */
#if CYTHON_USE_TYPE_SLOTS
#define __Pyx_PyObject_DelAttrStr(o,n) __Pyx_PyObject_SetAttrStr(o, n, NULL)
static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value);
#else
#define __Pyx_PyObject_DelAttrStr(o,n)   PyObject_DelAttr(o,n)
#define __Pyx_PyObject_SetAttrStr(o,n,v) PyObject_SetAttr(o,n,v)
#endif

/* ObjectGetItem.proto */
#if CYTHON_USE_TYPE_SLOTS
static CYTHON_INLINE PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key);
#else
#define __Pyx_PyObject_GetItem(obj, key)  PyObject_GetItem(obj, key)
#endif

/* PyObjectCall2Args.proto */
static CYTHON_UNUSED PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2);

/* PyObjectGetMethod.proto */
static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method);

/* PyObjectCallMethod1.proto */
static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg);

/* append.proto */
static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x);

/* Import.proto */
static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level);

/* ImportFrom.proto */
static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name);

/* RaiseArgTupleInvalid.proto */
static void __Pyx_RaiseArgtupleInvalid(const char* func_name, int exact,
    Py_ssize_t num_min, Py_ssize_t num_max, Py_ssize_t num_found);

/* KeywordStringCheck.proto */
static int __Pyx_CheckKeywordStrings(PyObject *kwdict, const char* function_name, int kw_allowed);

/* RaiseDoubleKeywords.proto */
static void __Pyx_RaiseDoubleKeywordsError(const char* func_name, PyObject* kw_name);

/* ParseKeywords.proto */
static int __Pyx_ParseOptionalKeywords(PyObject *kwds, PyObject **argnames[],\
    PyObject *kwds2, PyObject *values[], Py_ssize_t num_pos_args,\
    const char* function_name);

/* CallUnboundCMethod1.proto */
static PyObject* __Pyx__CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg);
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg);
#else
#define __Pyx_CallUnboundCMethod1(cfunc, self, arg)  __Pyx__CallUnboundCMethod1(cfunc, self, arg)
#endif

/* ExtTypeTest.proto */
static CYTHON_INLINE int __Pyx_TypeTest(PyObject *obj, PyTypeObject *type);

/* GetModuleGlobalName.proto */
#if CYTHON_USE_DICT_VERSIONS
#define __Pyx_GetModuleGlobalName(var, name)  {\
    static PY_UINT64_T __pyx_dict_version = 0;\
    static PyObject *__pyx_dict_cached_value = NULL;\
    (var) = (likely(__pyx_dict_version == __PYX_GET_DICT_VERSION(__pyx_d))) ?\
        (likely(__pyx_dict_cached_value) ? __Pyx_NewRef(__pyx_dict_cached_value) : __Pyx_GetBuiltinName(name)) :\
        __Pyx__GetModuleGlobalName(name, &__pyx_dict_version, &__pyx_dict_cached_value);\
}
#define __Pyx_GetModuleGlobalNameUncached(var, name)  {\
    PY_UINT64_T __pyx_dict_version;\
    PyObject *__pyx_dict_cached_value;\
    (var) = __Pyx__GetModuleGlobalName(name, &__pyx_dict_version, &__pyx_dict_cached_value);\
}
static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value);
#else
#define __Pyx_GetModuleGlobalName(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
#define __Pyx_GetModuleGlobalNameUncached(var, name)  (var) = __Pyx__GetModuleGlobalName(name)
static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name);
#endif

/* SliceTupleAndList.proto */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyList_GetSlice(PyObject* src, Py_ssize_t start, Py_ssize_t stop);
static CYTHON_INLINE PyObject* __Pyx_PyTuple_GetSlice(PyObject* src, Py_ssize_t start, Py_ssize_t stop);
#else
#define __Pyx_PyList_GetSlice(seq, start, stop)   PySequence_GetSlice(seq, start, stop)
#define __Pyx_PyTuple_GetSlice(seq, start, stop)  PySequence_GetSlice(seq, start, stop)
#endif

/* ArgTypeTest.proto */
#define __Pyx_ArgTypeTest(obj, type, none_allowed, name, exact)\
    ((likely((Py_TYPE(obj) == type) | (none_allowed && (obj == Py_None)))) ? 1 :\
        __Pyx__ArgTypeTest(obj, type, name, exact))
static int __Pyx__ArgTypeTest(PyObject *obj, PyTypeObject *type, const char *name, int exact);

/* PyIntCompare.proto */
static CYTHON_INLINE PyObject* __Pyx_PyInt_NeObjC(PyObject *op1, PyObject *op2, long intval, long inplace);

/* None.proto */
static CYTHON_INLINE void __Pyx_RaiseUnboundLocalError(const char *varname);

/* ListCompAppend.proto */
#if CYTHON_USE_PYLIST_INTERNALS && CYTHON_ASSUME_SAFE_MACROS
static CYTHON_INLINE int __Pyx_ListComp_Append(PyObject* list, PyObject* x) {
    PyListObject* L = (PyListObject*) list;
    Py_ssize_t len = Py_SIZE(list);
    if (likely(L->allocated > len)) {
        Py_INCREF(x);
        PyList_SET_ITEM(list, len, x);
        Py_SIZE(list) = len+1;
        return 0;
    }
    return PyList_Append(list, x);
}
#else
#define __Pyx_ListComp_Append(L,x) PyList_Append(L,x)
#endif

/* py_dict_values.proto */
static CYTHON_INLINE PyObject* __Pyx_PyDict_Values(PyObject* d);

/* PySequenceContains.proto */
static CYTHON_INLINE int __Pyx_PySequence_ContainsTF(PyObject* item, PyObject* seq, int eq) {
    int result = PySequence_Contains(seq, item);
    return unlikely(result < 0) ? result : (result == (eq == Py_EQ));
}

/* PyIntBinop.proto */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_SubtractObjC(PyObject *op1, PyObject *op2, long intval, int inplace);
#else
#define __Pyx_PyInt_SubtractObjC(op1, op2, intval, inplace)\
    (inplace ? PyNumber_InPlaceSubtract(op1, op2) : PyNumber_Subtract(op1, op2))
#endif

/* py_dict_pop.proto */
static CYTHON_INLINE PyObject *__Pyx_PyDict_Pop(PyObject *d, PyObject *key, PyObject *default_value);

/* CallUnboundCMethod2.proto */
static PyObject* __Pyx__CallUnboundCMethod2(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg1, PyObject* arg2);
#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030600B1
static CYTHON_INLINE PyObject *__Pyx_CallUnboundCMethod2(__Pyx_CachedCFunction *cfunc, PyObject *self, PyObject *arg1, PyObject *arg2);
#else
#define __Pyx_CallUnboundCMethod2(cfunc, self, arg1, arg2)  __Pyx__CallUnboundCMethod2(cfunc, self, arg1, arg2)
#endif

/* FetchCommonType.proto */
static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type);

/* CythonFunction.proto */
#define __Pyx_CyFunction_USED 1
#define __Pyx_CYFUNCTION_STATICMETHOD  0x01
#define __Pyx_CYFUNCTION_CLASSMETHOD   0x02
#define __Pyx_CYFUNCTION_CCLASS        0x04
#define __Pyx_CyFunction_GetClosure(f)\
    (((__pyx_CyFunctionObject *) (f))->func_closure)
#define __Pyx_CyFunction_GetClassObj(f)\
    (((__pyx_CyFunctionObject *) (f))->func_classobj)
#define __Pyx_CyFunction_Defaults(type, f)\
    ((type *)(((__pyx_CyFunctionObject *) (f))->defaults))
#define __Pyx_CyFunction_SetDefaultsGetter(f, g)\
    ((__pyx_CyFunctionObject *) (f))->defaults_getter = (g)
typedef struct {
    PyCFunctionObject func;
#if PY_VERSION_HEX < 0x030500A0
    PyObject *func_weakreflist;
#endif
    PyObject *func_dict;
    PyObject *func_name;
    PyObject *func_qualname;
    PyObject *func_doc;
    PyObject *func_globals;
    PyObject *func_code;
    PyObject *func_closure;
    PyObject *func_classobj;
    void *defaults;
    int defaults_pyobjects;
    int flags;
    PyObject *defaults_tuple;
    PyObject *defaults_kwdict;
    PyObject *(*defaults_getter)(PyObject *);
    PyObject *func_annotations;
} __pyx_CyFunctionObject;
static PyTypeObject *__pyx_CyFunctionType = 0;
#define __Pyx_CyFunction_Check(obj)  (__Pyx_TypeCheck(obj, __pyx_CyFunctionType))
#define __Pyx_CyFunction_NewEx(ml, flags, qualname, self, module, globals, code)\
    __Pyx_CyFunction_New(__pyx_CyFunctionType, ml, flags, qualname, self, module, globals, code)
static PyObject *__Pyx_CyFunction_New(PyTypeObject *, PyMethodDef *ml,
                                      int flags, PyObject* qualname,
                                      PyObject *self,
                                      PyObject *module, PyObject *globals,
                                      PyObject* code);
static CYTHON_INLINE void *__Pyx_CyFunction_InitDefaults(PyObject *m,
                                                         size_t size,
                                                         int pyobjects);
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsTuple(PyObject *m,
                                                            PyObject *tuple);
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsKwDict(PyObject *m,
                                                             PyObject *dict);
static CYTHON_INLINE void __Pyx_CyFunction_SetAnnotationsDict(PyObject *m,
                                                              PyObject *dict);
static int __pyx_CyFunction_init(void);

/* PyObject_GenericGetAttrNoDict.proto */
#if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
static CYTHON_INLINE PyObject* __Pyx_PyObject_GenericGetAttrNoDict(PyObject* obj, PyObject* attr_name);
#else
#define __Pyx_PyObject_GenericGetAttrNoDict PyObject_GenericGetAttr
#endif

/* PyObject_GenericGetAttr.proto */
#if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
static PyObject* __Pyx_PyObject_GenericGetAttr(PyObject* obj, PyObject* attr_name);
#else
#define __Pyx_PyObject_GenericGetAttr PyObject_GenericGetAttr
#endif

/* SetupReduce.proto */
static int __Pyx_setup_reduce(PyObject* type_obj);

/* TypeImport.proto */
#ifndef __PYX_HAVE_RT_ImportType_proto
#define __PYX_HAVE_RT_ImportType_proto
enum __Pyx_ImportType_CheckSize {
   __Pyx_ImportType_CheckSize_Error = 0,
   __Pyx_ImportType_CheckSize_Warn = 1,
   __Pyx_ImportType_CheckSize_Ignore = 2
};
static PyTypeObject *__Pyx_ImportType(PyObject* module, const char *module_name, const char *class_name, size_t size, enum __Pyx_ImportType_CheckSize check_size);
#endif

/* CLineInTraceback.proto */
#ifdef CYTHON_CLINE_IN_TRACEBACK
#define __Pyx_CLineForTraceback(tstate, c_line)  (((CYTHON_CLINE_IN_TRACEBACK)) ? c_line : 0)
#else
static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line);
#endif

/* CodeObjectCache.proto */
typedef struct {
    PyCodeObject* code_object;
    int code_line;
} __Pyx_CodeObjectCacheEntry;
struct __Pyx_CodeObjectCache {
    int count;
    int max_count;
    __Pyx_CodeObjectCacheEntry* entries;
};
static struct __Pyx_CodeObjectCache __pyx_code_cache = {0,0,NULL};
static int __pyx_bisect_code_objects(__Pyx_CodeObjectCacheEntry* entries, int count, int code_line);
static PyCodeObject *__pyx_find_code_object(int code_line);
static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object);

/* AddTraceback.proto */
static void __Pyx_AddTraceback(const char *funcname, int c_line,
                               int py_line, const char *filename);

/* CIntToPy.proto */
static CYTHON_INLINE PyObject* __Pyx_PyInt_From_int(int value);

/* CIntToPy.proto */
static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value);

/* CIntToPy.proto */
static CYTHON_INLINE PyObject* __Pyx_PyInt_From_bool(bool value);

/* CIntFromPy.proto */
static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *);

/* CIntFromPy.proto */
static CYTHON_INLINE bool __Pyx_PyInt_As_bool(PyObject *);

/* CIntFromPy.proto */
static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *);

/* FastTypeChecks.proto */
#if CYTHON_COMPILING_IN_CPYTHON
#define __Pyx_TypeCheck(obj, type) __Pyx_IsSubtype(Py_TYPE(obj), (PyTypeObject *)type)
static CYTHON_INLINE int __Pyx_IsSubtype(PyTypeObject *a, PyTypeObject *b);
static CYTHON_INLINE int __Pyx_PyErr_GivenExceptionMatches(PyObject *err, PyObject *type);
static CYTHON_INLINE int __Pyx_PyErr_GivenExceptionMatches2(PyObject *err, PyObject *type1, PyObject *type2);
#else
#define __Pyx_TypeCheck(obj, type) PyObject_TypeCheck(obj, (PyTypeObject *)type)
#define __Pyx_PyErr_GivenExceptionMatches(err, type) PyErr_GivenExceptionMatches(err, type)
#define __Pyx_PyErr_GivenExceptionMatches2(err, type1, type2) (PyErr_GivenExceptionMatches(err, type1) || PyErr_GivenExceptionMatches(err, type2))
#endif
#define __Pyx_PyException_Check(obj) __Pyx_TypeCheck(obj, PyExc_Exception)

/* CheckBinaryVersion.proto */
static int __Pyx_check_binary_version(void);

/* VoidPtrImport.proto */
static int __Pyx_ImportVoidPtr(PyObject *module, const char *name, void **p, const char *sig);

/* FunctionImport.proto */
static int __Pyx_ImportFunction(PyObject *module, const char *funcname, void (**f)(void), const char *sig);

/* InitStrings.proto */
static int __Pyx_InitStrings(__Pyx_StringTabEntry *t);


/* Module declarations from 'libc.string' */

/* Module declarations from 'libc.stdlib' */

/* Module declarations from 'libc.signal' */

/* Module declarations from 'libc.stdio' */

/* Module declarations from '__builtin__' */

/* Module declarations from 'cpython.type' */
static PyTypeObject *__pyx_ptype_7cpython_4type_type = 0;

/* Module declarations from 'cpython.version' */

/* Module declarations from 'cpython.ref' */

/* Module declarations from 'cpython.exc' */

/* Module declarations from 'cpython.module' */

/* Module declarations from 'cpython.mem' */

/* Module declarations from 'cpython.tuple' */

/* Module declarations from 'cpython.list' */

/* Module declarations from 'cpython.sequence' */

/* Module declarations from 'cpython.mapping' */

/* Module declarations from 'cpython.iterator' */

/* Module declarations from 'cpython.number' */

/* Module declarations from 'cpython.int' */

/* Module declarations from '__builtin__' */

/* Module declarations from 'cpython.bool' */
static PyTypeObject *__pyx_ptype_7cpython_4bool_bool = 0;

/* Module declarations from 'cpython.long' */

/* Module declarations from 'cpython.float' */

/* Module declarations from '__builtin__' */

/* Module declarations from 'cpython.complex' */
static PyTypeObject *__pyx_ptype_7cpython_7complex_complex = 0;

/* Module declarations from 'cpython.string' */

/* Module declarations from 'cpython.unicode' */

/* Module declarations from 'cpython.dict' */

/* Module declarations from 'cpython.instance' */

/* Module declarations from 'cpython.function' */

/* Module declarations from 'cpython.method' */

/* Module declarations from 'cpython.weakref' */

/* Module declarations from 'cpython.getargs' */

/* Module declarations from 'cpython.pythread' */

/* Module declarations from 'cpython.pystate' */

/* Module declarations from 'cpython.cobject' */

/* Module declarations from 'cpython.oldbuffer' */

/* Module declarations from 'cpython.set' */

/* Module declarations from 'cpython.buffer' */

/* Module declarations from 'cpython.bytes' */

/* Module declarations from 'cpython.pycapsule' */

/* Module declarations from 'cpython' */

/* Module declarations from 'cpython.object' */

/* Module declarations from 'cysignals.signals' */
static cysigs_t *__pyx_vp_9cysignals_7signals_cysigs = 0;
#define cysigs (*__pyx_vp_9cysignals_7signals_cysigs)
static void (*__pyx_f_9cysignals_7signals_verify_exc_value)(void); /*proto*/
static void (*_sig_on_interrupt_received)(void); /*proto*/
static void (*_sig_on_recover)(void); /*proto*/
static void (*_sig_off_warning)(char const *, int); /*proto*/
static void (*print_backtrace)(void); /*proto*/

/* Module declarations from 'sage.combinat.words.cautomata' */
static PyTypeObject *__pyx_ptype_4sage_8combinat_5words_9cautomata_DeterministicAutomaton = 0;
static PyTypeObject *__pyx_ptype_4sage_8combinat_5words_9cautomata_CAutomaton = 0;

/* Module declarations from 'sage.combinat.words' */

/* Module declarations from 'sage.combinat' */

/* Module declarations from 'sage' */

/* Module declarations from 'automata.cautomata' */
static PyTypeObject *__pyx_ptype_8automata_9cautomata_DeterministicAutomaton = 0;
static PyTypeObject *__pyx_ptype_8automata_9cautomata_CAutomaton = 0;
static PyObject *__pyx_f_8automata_9cautomata_imagDict(PyObject *, PyObject *, struct __pyx_opt_args_8automata_9cautomata_imagDict *__pyx_optional_args); /*proto*/
static PyObject *__pyx_f_8automata_9cautomata_imagDict2(PyObject *, PyObject *, struct __pyx_opt_args_8automata_9cautomata_imagDict2 *__pyx_optional_args); /*proto*/
static Dict __pyx_f_8automata_9cautomata_getDict(PyObject *, PyObject *, struct __pyx_opt_args_8automata_9cautomata_getDict *__pyx_optional_args); /*proto*/
static Dict __pyx_f_8automata_9cautomata_list_to_Dict(PyObject *); /*proto*/
static InvertDict __pyx_f_8automata_9cautomata_getDict2(PyObject *, PyObject *, struct __pyx_opt_args_8automata_9cautomata_getDict2 *__pyx_optional_args); /*proto*/
static PyObject *__pyx_f_8automata_9cautomata_imagProductDict(PyObject *, PyObject *, PyObject *, struct __pyx_opt_args_8automata_9cautomata_imagProductDict *__pyx_optional_args); /*proto*/
static Dict __pyx_f_8automata_9cautomata_getProductDict(PyObject *, PyObject *, PyObject *, struct __pyx_opt_args_8automata_9cautomata_getProductDict *__pyx_optional_args); /*proto*/
static Automaton __pyx_f_8automata_9cautomata_getAutomaton(PyObject *, struct __pyx_opt_args_8automata_9cautomata_getAutomaton *__pyx_optional_args); /*proto*/
static NAutomaton __pyx_f_8automata_9cautomata_getNAutomaton(PyObject *, struct __pyx_opt_args_8automata_9cautomata_getNAutomaton *__pyx_optional_args); /*proto*/
static PyObject *__pyx_f_8automata_9cautomata_AutomatonToSageAutomaton(Automaton, PyObject *); /*proto*/
static PyObject *__pyx_f_8automata_9cautomata_AutomatonToDiGraph(Automaton, PyObject *, struct __pyx_opt_args_8automata_9cautomata_AutomatonToDiGraph *__pyx_optional_args); /*proto*/
#define __Pyx_MODULE_NAME "automata.cautomata"
extern int __pyx_module_is_main_automata__cautomata;
int __pyx_module_is_main_automata__cautomata = 0;

/* Implementation of 'automata.cautomata' */
static PyObject *__pyx_builtin_range;
static PyObject *__pyx_builtin_print;
static PyObject *__pyx_builtin_AttributeError;
static PyObject *__pyx_builtin_ValueError;
static PyObject *__pyx_builtin_MemoryError;
static PyObject *__pyx_builtin_enumerate;
static PyObject *__pyx_builtin_ImportError;
static PyObject *__pyx_builtin_open;
static PyObject *__pyx_builtin_NotImplemented;
static PyObject *__pyx_builtin_NotImplementedError;
static PyObject *__pyx_builtin_TypeError;
static PyObject *__pyx_builtin_max;
static const char __pyx_k_A[] = "A";
static const char __pyx_k_F[] = "F";
static const char __pyx_k_I[] = "I";
static const char __pyx_k_S[] = "S";
static const char __pyx_k_a[] = "a";
static const char __pyx_k_b[] = "b";
static const char __pyx_k_d[] = "d";
static const char __pyx_k_e[] = "e";
static const char __pyx_k_f[] = "f";
static const char __pyx_k_i[] = "i";
static const char __pyx_k_j[] = "j";
static const char __pyx_k_k[] = "k";
static const char __pyx_k_l[] = "l";
static const char __pyx_k_s[] = "s";
static const char __pyx_k_w[] = "w";
static const char __pyx_k_z[] = "z";
static const char __pyx_k_dC[] = "dC=";
static const char __pyx_k_li[] = "li";
static const char __pyx_k_no[] = " -> no.";
static const char __pyx_k_np[] = "np";
static const char __pyx_k_sx[] = "sx";
static const char __pyx_k_sy[] = "sy";
static const char __pyx_k_A_s[] = "A=%s";
static const char __pyx_k_PIL[] = "PIL";
static const char __pyx_k__43[] = "<";
static const char __pyx_k__44[] = ">";
static const char __pyx_k__45[] = "\"";
static const char __pyx_k__48[] = ", ";
static const char __pyx_k__60[] = " ]";
static const char __pyx_k__68[] = "";
static const char __pyx_k_d_d[] = "%d -> %d";
static const char __pyx_k_d_s[] = "d=%s";
static const char __pyx_k_dag[] = "dag";
static const char __pyx_k_det[] = "det";
static const char __pyx_k_dot[] = ".dot";
static const char __pyx_k_end[] = "end...";
static const char __pyx_k_g_s[] = "g=%s";
static const char __pyx_k_key[] = "key";
static const char __pyx_k_l_2[] = "l=[";
static const char __pyx_k_max[] = "max";
static const char __pyx_k_png[] = ".png";
static const char __pyx_k_pop[] = "pop";
static const char __pyx_k_s_2[] = " %s";
static const char __pyx_k_yes[] = " -> yes !";
static const char __pyx_k_Av_s[] = "Av=%s";
static const char __pyx_k_List[] = "List...";
static const char __pyx_k_Word[] = "Word";
static const char __pyx_k_algo[] = "algo";
static const char __pyx_k_copy[] = "copy";
static const char __pyx_k_draw[] = "draw";
static const char __pyx_k_dv_s[] = "dv=%s";
static const char __pyx_k_file[] = "file";
static const char __pyx_k_html[] = "html";
static const char __pyx_k_init[] = "init...";
static const char __pyx_k_keys[] = "keys";
static const char __pyx_k_list[] = "list...";
static const char __pyx_k_main[] = "__main__";
static const char __pyx_k_name[] = "__name__";
static const char __pyx_k_nmax[] = "nmax";
static const char __pyx_k_nmin[] = "nmin";
static const char __pyx_k_open[] = "open";
static const char __pyx_k_plot[] = "plot...";
static const char __pyx_k_read[] = "read";
static const char __pyx_k_ring[] = "ring";
static const char __pyx_k_sink[] = "sink";
static const char __pyx_k_sort[] = "sort";
static const char __pyx_k_sp_s[] = "sp=%s";
static const char __pyx_k_test[] = "__test__";
static const char __pyx_k_verb[] = "verb";
static const char __pyx_k_Alloc[] = "Alloc...";
static const char __pyx_k_Image[] = "Image";
static const char __pyx_k_d_s_s[] = "d[%s]=%s";
static const char __pyx_k_edges[] = "edges";
static const char __pyx_k_final[] = "final";
static const char __pyx_k_i_s_s[] = "i=%s : %s";
static const char __pyx_k_index[] = "index";
static const char __pyx_k_label[] = "label";
static const char __pyx_k_loops[] = "loops";
static const char __pyx_k_op_EQ[] = "op_EQ";
static const char __pyx_k_op_NE[] = "op_NE";
static const char __pyx_k_other[] = "other";
static const char __pyx_k_print[] = "print";
static const char __pyx_k_prune[] = "prune";
static const char __pyx_k_r_r_r[] = "(%r, %r, %r)";
static const char __pyx_k_range[] = "range";
static const char __pyx_k_roots[] = "roots";
static const char __pyx_k_spm_s[] = "spm=%s";
static const char __pyx_k_union[] = "union";
static const char __pyx_k_Keys_s[] = "Keys=%s";
static const char __pyx_k_append[] = "append";
static const char __pyx_k_approx[] = "approx";
static const char __pyx_k_couple[] = "couple";
static const char __pyx_k_factor[] = "factor";
static const char __pyx_k_file_s[] = "file=%s";
static const char __pyx_k_format[] = "format";
static const char __pyx_k_import[] = "__import__";
static const char __pyx_k_keep_S[] = "keep_S";
static const char __pyx_k_matrix[] = "matrix";
static const char __pyx_k_plot_2[] = "plot";
static const char __pyx_k_pruned[] = "pruned";
static const char __pyx_k_random[] = "random";
static const char __pyx_k_reduce[] = "__reduce__";
static const char __pyx_k_sparse[] = "sparse";
static const char __pyx_k_states[] = "states";
static const char __pyx_k_values[] = "values";
static const char __pyx_k_0_and_s[] = "0 and %s)";
static const char __pyx_k_DiGraph[] = "DiGraph";
static const char __pyx_k_alloc_s[] = "alloc %s...";
static const char __pyx_k_dot2tex[] = "dot2tex";
static const char __pyx_k_initial[] = "initial";
static const char __pyx_k_len_s_s[] = "len %s %s";
static const char __pyx_k_product[] = "product";
static const char __pyx_k_project[] = "project";
static const char __pyx_k_unshift[] = "unshift";
static const char __pyx_k_vl_NULL[] = "vl = NULL";
static const char __pyx_k_vlabels[] = "vlabels";
static const char __pyx_k_word_in[] = "word_in";
static const char __pyx_k_Alphabet[] = "Alphabet";
static const char __pyx_k_alphabet[] = "alphabet";
static const char __pyx_k_charpoly[] = "charpoly";
static const char __pyx_k_getstate[] = "__getstate__";
static const char __pyx_k_issubset[] = "issubset";
static const char __pyx_k_minimize[] = "minimize";
static const char __pyx_k_setstate[] = "__setstate__";
static const char __pyx_k_simplify[] = "simplify";
static const char __pyx_k_to_state[] = "to_state";
static const char __pyx_k_vertices[] = "vertices";
static const char __pyx_k_word_out[] = "word_out";
static const char __pyx_k_Automaton[] = "Automaton";
static const char __pyx_k_DiGraph_2[] = "DiGraph...";
static const char __pyx_k_LatexExpr[] = "LatexExpr";
static const char __pyx_k_TypeError[] = "TypeError";
static const char __pyx_k_a_is_None[] = "a is None";
static const char __pyx_k_aperiodic[] = "aperiodic";
static const char __pyx_k_d1_s_A2_s[] = "d1=%s, A2=%s";
static const char __pyx_k_enumerate[] = "enumerate";
static const char __pyx_k_free_plot[] = "free...plot";
static const char __pyx_k_minimized[] = "minimized";
static const char __pyx_k_real_part[] = "real_part";
static const char __pyx_k_reduce_ex[] = "__reduce_ex__";
static const char __pyx_k_successor[] = "successor";
static const char __pyx_k_CAutomaton[] = "CAutomaton";
static const char __pyx_k_ValueError[] = "ValueError";
static const char __pyx_k_difference[] = "difference";
static const char __pyx_k_from_state[] = "from_state";
static const char __pyx_k_label_sink[] = "label_sink";
static const char __pyx_k_multiedges[] = "multiedges";
static const char __pyx_k_real_roots[] = "real_roots";
static const char __pyx_k_sink_state[] = "sink_state";
static const char __pyx_k_vertices_s[] = "vertices=%s";
static const char __pyx_k_Determinize[] = "Determinize...";
static const char __pyx_k_ImportError[] = "ImportError";
static const char __pyx_k_IntegerRing[] = "IntegerRing";
static const char __pyx_k_MemoryError[] = "MemoryError";
static const char __pyx_k_concatenate[] = "concatenate";
static const char __pyx_k_determinize[] = "determinize";
static const char __pyx_k_edge_labels[] = "edge_labels";
static const char __pyx_k_get_digraph[] = "get_digraph";
static const char __pyx_k_no_trivials[] = "no_trivials";
static const char __pyx_k_transitions[] = "transitions";
static const char __pyx_k_final_states[] = "final states...";
static const char __pyx_k_is_aperiodic[] = "is_aperiodic";
static const char __pyx_k_tmp_filename[] = "tmp_filename";
static const char __pyx_k_non_aperiodic[] = "non aperiodic";
static const char __pyx_k_r_e_s_a_s_s_s[] = "r.e[%s].a[%s] = %s,%s";
static const char __pyx_k_reduce_cython[] = "__reduce_cython__";
static const char __pyx_k_sub_automaton[] = "sub_automaton";
static const char __pyx_k_AttributeError[] = "AttributeError";
static const char __pyx_k_NotImplemented[] = "NotImplemented";
static const char __pyx_k_Sage_automaton[] = "Sage automaton...";
static const char __pyx_k_final_states_2[] = "final_states";
static const char __pyx_k_initial_states[] = "initial states...";
static const char __pyx_k_sage_misc_html[] = "sage.misc.html";
static const char __pyx_k_word_not_found[] = "word not found!";
static const char __pyx_k_a_s_A_s_b_s_A_s[] = "a=%s (A=%s)\nb=%s (A=%s)";
static const char __pyx_k_alloc_ll_size_s[] = "alloc ll (size=%s)...";
static const char __pyx_k_bigger_alphabet[] = "bigger_alphabet";
static const char __pyx_k_d_is_not_in_1_d[] = "%d is not in [-1, %d]";
static const char __pyx_k_sage_misc_latex[] = "sage.misc.latex";
static const char __pyx_k_setstate_cython[] = "__setstate_cython__";
static const char __pyx_k_spectral_radius[] = "spectral_radius";
static const char __pyx_k_adjacency_matrix[] = "adjacency_matrix";
static const char __pyx_k_d_is_not_a_state[] = "%d is not a state!";
static const char __pyx_k_initial_states_2[] = "initial_states";
static const char __pyx_k_only_non_trivial[] = "only_non_trivial";
static const char __pyx_k_s_is_not_a_state[] = "%s is not a state!";
static const char __pyx_k_sage_rings_qqbar[] = "sage.rings.qqbar";
static const char __pyx_k_complete_in_place[] = "complete_in_place";
static const char __pyx_k_sage_misc_prandom[] = "sage.misc.prandom";
static const char __pyx_k_AlgebraicRealField[] = "AlgebraicRealField";
static const char __pyx_k_Alloc_s_s_and_init[] = "Alloc(%s, %s) and init...";
static const char __pyx_k_No_vertices_method[] = "No vertices() method";
static const char __pyx_k_Prune_and_minimize[] = "Prune and minimize...";
static const char __pyx_k_Test_if_dot_exists[] = "Test if dot exists...";
static const char __pyx_k_automata_cautomata[] = "automata.cautomata";
static const char __pyx_k_browse_transitions[] = "browse transitions...";
static const char __pyx_k_cline_in_traceback[] = "cline_in_traceback";
static const char __pyx_k_keep_states_labels[] = "keep_states_labels";
static const char __pyx_k_minimal_Automata_s[] = "minimal Automata : %s";
static const char __pyx_k_vertices_and_edges[] = "vertices_and_edges";
static const char __pyx_k_ModuleNotFoundError[] = "ModuleNotFoundError";
static const char __pyx_k_NotImplementedError[] = "NotImplementedError";
static const char __pyx_k_There_is_no_state_s[] = "There is no state %s !";
static const char __pyx_k_np_must_be_positive[] = "np must be positive!";
static const char __pyx_k_sage_graphs_digraph[] = "sage.graphs.digraph";
static const char __pyx_k_shift_list_in_place[] = "shift_list_in_place";
static const char __pyx_k_sage_functions_other[] = "sage.functions.other";
static const char __pyx_k_A_s_i_r_final_states_s[] = "]], A=%s, i=%r, final_states=%s)";
static const char __pyx_k_DeterministicAutomaton[] = "DeterministicAutomaton";
static const char __pyx_k_Ouvre_l_image_produite[] = "Ouvre l'image produite...";
static const char __pyx_k_complementary_in_place[] = "complementary_in_place";
static const char __pyx_k_sage_structure_richcmp[] = "sage.structure.richcmp";
static const char __pyx_k_Alphabet_Changing_s_s_s[] = "Alphabet Changing (%s, %s -> %s)...";
static const char __pyx_k_CAutomaton_with_d_state[] = "CAutomaton with %d state";
static const char __pyx_k_component_with_s_states[] = "component with %s states...";
static const char __pyx_k_keep_transitions_labels[] = "keep_transitions_labels";
static const char __pyx_k_sage_matrix_constructor[] = "sage.matrix.constructor";
static const char __pyx_k_sage_rings_integer_ring[] = "sage.rings.integer_ring";
static const char __pyx_k_DeterministicAutomaton_2[] = "DeterministicAutomaton...";
static const char __pyx_k_DeterministicAutomaton_s[] = "DeterministicAutomaton([%s, [";
static const char __pyx_k_sage_misc_temporary_file[] = "sage.misc.temporary_file";
static const char __pyx_k_The_state_s_doesn_t_exist[] = "The state %s doesn't exist.";
static const char __pyx_k_The_letter_s_doesn_t_exist[] = "The letter %s doesn't exist.";
static const char __pyx_k_r_is_not_in_the_alphabet_s[] = "%r is not in the alphabet %s";
static const char __pyx_k_The_state_s_doesn_t_exist_2[] = "The state  %s doesn't exist.";
static const char __pyx_k_and_an_alphabet_of_d_letter[] = " and an alphabet of %d letter";
static const char __pyx_k_getNAutomaton_s_I_s_F_s_A_s[] = "getNAutomaton(%s, I=%s, F=%s, A=%s)";
static const char __pyx_k_s_component_strongly_connex[] = "%s component strongly connex.";
static const char __pyx_k_The_alphabets_are_differents[] = "The alphabets are differents.";
static const char __pyx_k_index_i_d_cannot_be_negative[] = "index i=%d cannot be negative";
static const char __pyx_k_Incorrect_set_of_final_states[] = "Incorrect set of final states.";
static const char __pyx_k_spectral_radius_locals_lambda[] = "spectral_radius.<locals>.<lambda>";
static const char __pyx_k_strongly_connected_components[] = "strongly_connected_components";
static const char __pyx_k_s_is_not_a_state_i_e_between_0[] = "%s is not a state (i.e. between 0 and %s)";
static const char __pyx_k_Deterministic_automaton_of_Fini[] = "\nDeterministic automaton of Finite state machines using C\nDeterministicAutomaton for determinist automata and CAutomaton for non necessarily determinist automaton\n\n\nAUTHORS:\n\n- Paul Mercat (2013)- I2M AMU Aix-Marseille Universite - initial version\n- Dominique Benielli (2018) Labex Archimede - I2M -\n  AMU Aix-Marseille Universite - Integration in -SageMath\n\nREFERENCES:\n\n.. [Hopcroft] \"Around Hopcroft\342\200\231s Algorithm\"  Manuel of BACLET and\n   Claire PAGETTI.\n\n";
static const char __pyx_k_Failed_to_allocate_memory_for_C[] = "Failed to allocate memory for C initialization of CAutomaton.";
static const char __pyx_k_Failed_to_allocate_memory_for_l[] = "Failed to allocate memory for l in add_path";
static const char __pyx_k_Failed_to_allocate_memory_for_w[] = "Failed to allocate memory for w in shortest_words";
static const char __pyx_k_Warning_Ignore_S_since_there_is[] = "Warning: Ignore S since there is no state.";
static const char __pyx_k_Warning_Ignore_i_since_there_is[] = "Warning: Ignore i since there is no state.";
static const char __pyx_k_d_is_not_the_index_of_a_state_i[] = "%d is not the index of a state (i.e. it is not between 0 and %s)!";
static const char __pyx_k_i_s_is_not_the_index_of_a_state[] = "i=%s is not the index of a state (i.e. between 0 and %s).";
static const char __pyx_k_r_is_not_a_letter_of_the_alphab[] = "%r is not a letter of the alphabet %s";
static const char __pyx_k_s_is_not_a_state_should_be_betw[] = "%s is not a state (should be between 0 and %s)";
static const char __pyx_k_s_is_not_an_index_of_a_state_mu[] = "%s is not an index of a state (must be between ";
static const char __pyx_k_A_label_of_a_transition_is_not_i[] = "A label of a transition is not in the alphabet %s";
static const char __pyx_k_A_state_of_the_list_appears_seve[] = "A state of the list appears several times";
static const char __pyx_k_Cannot_convert_the_input_to_CAut[] = "Cannot convert the input to CAutomaton.";
static const char __pyx_k_Cannot_convert_the_input_to_Dete[] = "Cannot convert the input to DeterministicAutomaton.";
static const char __pyx_k_Comparaison_or_not_implemented_f[] = "Comparaison <, >, <= or >= not implemented for DetAutomata.";
static const char __pyx_k_Could_not_allocate_the_transitio[] = "Could not allocate the transition (size %s)";
static const char __pyx_k_DeterministicAutomatonGenerators[] = "DeterministicAutomatonGenerators";
static const char __pyx_k_DeterministicAutomaton_with_d_st[] = "DeterministicAutomaton with %d state";
static const char __pyx_k_Element_s_of_the_list_given_is_n[] = "Element %s of the list given is not a state (i.e. between 0 and %s).";
static const char __pyx_k_Failed_to_allocate_memory_for_ll[] = "Failed to allocate memory for ll in _latex_";
static const char __pyx_k_Failed_to_allocate_memory_for_vl[] = "Failed to allocate memory for vl in _latex_";
static const char __pyx_k_Letter_r_not_found_in_the_new_al[] = "Letter %r not found in the new alphabet";
static const char __pyx_k_The_automata_must_be_determistic[] = "The automata must be determistic (I=%s)";
static const char __pyx_k_The_dictionnary_is_not_injective[] = "The dictionnary is not injective!";
static const char __pyx_k_The_initial_state_must_be_a_stat[] = "The initial state must be a state of the automaton or -1: ";
static const char __pyx_k_The_label_s_is_not_in_the_alphab[] = "The label %s is not in the alphabet! Use bigger_alphabet() if you want to add it";
static const char __pyx_k_The_size_s_of_the_new_alphabet_h[] = "The size %s of the new alphabet has to be the same (i.e. %s)";
static const char __pyx_k_The_state_s_has_no_edge_number_s[] = "The state %s has no edge number %s !";
static const char __pyx_k_This_transition_s_s_s_starts_fro[] = "This transition %s -%s-> %s starts from a state not in the set of states.";
static const char __pyx_k_Warning_Ignore_final_states_sinc[] = "Warning: Ignore final_states since there is no state.";
static const char __pyx_k_Warning_informations_lost_during[] = "Warning: informations lost during the conversion.";
static const char __pyx_k_Warning_the_automaton_has_severa[] = "Warning: the automaton has several initial states.";
static const char __pyx_k_Warning_the_automaton_was_not_de[] = "Warning: the automaton was not deterministic! (edge %s -%s-> %s and edge %s -%s-> %s)\nThe result lost some informations.";
static const char __pyx_k_You_can_install_it_by_doing_sage[] = "You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.";
static const char __pyx_k_You_cannot_plot_the_CAutomaton_w[] = "You cannot plot the CAutomaton without dot. Install the dot command of the GraphViz package.";
static const char __pyx_k_alloc_r_e_s_a_s_elements_so_tota[] = "alloc r.e[%s].a (%s elements, %so total)";
static const char __pyx_k_dot2tex_must_be_installed_in_ord[] = "dot2tex must be installed in order to have the LaTeX representation of the CAutomaton.\n                You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.";
static const char __pyx_k_index_i_d_must_be_smaller_than_t[] = "index i=%d must be smaller than the dimension of the label %s";
static const char __pyx_k_letter_s_of_the_word_s_is_not_in[] = "letter %s of the word %s is not in the alphabet of self";
static const char __pyx_k_no_default___reduce___due_to_non[] = "no default __reduce__ due to non-trivial __cinit__";
static const char __pyx_k_sage_combinat_finite_state_machi[] = "sage.combinat.finite_state_machine";
static const char __pyx_k_sage_combinat_words_cautomata_ge[] = "sage.combinat.words.cautomata_generators";
static const char __pyx_k_set_successor_s_s_s_index_out_of[] = "set_successor(%s, %s, %s) : index out of bounds !";
static const char __pyx_k_Failed_to_allocate_memory_for_C_2[] = "Failed to allocate memory for C initialization of DeterministicAutomaton.";
static const char __pyx_k_Failed_to_allocate_memory_for_l_2[] = "Failed to allocate memory for l in permut";
static const char __pyx_k_Failed_to_allocate_memory_for_l_3[] = "Failed to allocate memory for l in permut_in_place";
static const char __pyx_k_Failed_to_allocate_memory_for_l_4[] = "Failed to allocate memory for l in strongly_connected_component.";
static const char __pyx_k_Failed_to_allocate_memory_for_ll_2[] = "Failed to allocate memory for ll in plot";
static const char __pyx_k_Failed_to_allocate_memory_for_vl_2[] = "Failed to allocate memory for vl in plot";
static const char __pyx_k_dot2tex_must_be_installed_in_ord_2[] = "dot2tex must be installed in order to have the LaTeX representation of the DeterministicAutomaton.";
static PyObject *__pyx_kp_s_0_and_s;
static PyObject *__pyx_n_s_A;
static PyObject *__pyx_kp_s_A_label_of_a_transition_is_not_i;
static PyObject *__pyx_kp_s_A_s;
static PyObject *__pyx_kp_s_A_s_i_r_final_states_s;
static PyObject *__pyx_kp_s_A_state_of_the_list_appears_seve;
static PyObject *__pyx_n_s_AlgebraicRealField;
static PyObject *__pyx_kp_s_Alloc;
static PyObject *__pyx_kp_s_Alloc_s_s_and_init;
static PyObject *__pyx_n_s_Alphabet;
static PyObject *__pyx_kp_s_Alphabet_Changing_s_s_s;
static PyObject *__pyx_n_s_AttributeError;
static PyObject *__pyx_n_s_Automaton;
static PyObject *__pyx_kp_s_Av_s;
static PyObject *__pyx_n_s_CAutomaton;
static PyObject *__pyx_kp_s_CAutomaton_with_d_state;
static PyObject *__pyx_kp_s_Cannot_convert_the_input_to_CAut;
static PyObject *__pyx_kp_s_Cannot_convert_the_input_to_Dete;
static PyObject *__pyx_kp_s_Comparaison_or_not_implemented_f;
static PyObject *__pyx_kp_s_Could_not_allocate_the_transitio;
static PyObject *__pyx_n_s_DeterministicAutomaton;
static PyObject *__pyx_n_s_DeterministicAutomatonGenerators;
static PyObject *__pyx_kp_s_DeterministicAutomaton_2;
static PyObject *__pyx_kp_s_DeterministicAutomaton_s;
static PyObject *__pyx_kp_s_DeterministicAutomaton_with_d_st;
static PyObject *__pyx_kp_s_Determinize;
static PyObject *__pyx_n_s_DiGraph;
static PyObject *__pyx_kp_s_DiGraph_2;
static PyObject *__pyx_kp_s_Element_s_of_the_list_given_is_n;
static PyObject *__pyx_n_s_F;
static PyObject *__pyx_kp_s_Failed_to_allocate_memory_for_C;
static PyObject *__pyx_kp_s_Failed_to_allocate_memory_for_C_2;
static PyObject *__pyx_kp_s_Failed_to_allocate_memory_for_l;
static PyObject *__pyx_kp_s_Failed_to_allocate_memory_for_l_2;
static PyObject *__pyx_kp_s_Failed_to_allocate_memory_for_l_3;
static PyObject *__pyx_kp_s_Failed_to_allocate_memory_for_l_4;
static PyObject *__pyx_kp_s_Failed_to_allocate_memory_for_ll;
static PyObject *__pyx_kp_s_Failed_to_allocate_memory_for_ll_2;
static PyObject *__pyx_kp_s_Failed_to_allocate_memory_for_vl;
static PyObject *__pyx_kp_s_Failed_to_allocate_memory_for_vl_2;
static PyObject *__pyx_kp_s_Failed_to_allocate_memory_for_w;
static PyObject *__pyx_n_s_I;
static PyObject *__pyx_n_s_Image;
static PyObject *__pyx_n_s_ImportError;
static PyObject *__pyx_kp_s_Incorrect_set_of_final_states;
static PyObject *__pyx_n_s_IntegerRing;
static PyObject *__pyx_kp_s_Keys_s;
static PyObject *__pyx_n_s_LatexExpr;
static PyObject *__pyx_kp_s_Letter_r_not_found_in_the_new_al;
static PyObject *__pyx_kp_s_List;
static PyObject *__pyx_n_s_MemoryError;
static PyObject *__pyx_n_s_ModuleNotFoundError;
static PyObject *__pyx_kp_s_No_vertices_method;
static PyObject *__pyx_n_s_NotImplemented;
static PyObject *__pyx_n_s_NotImplementedError;
static PyObject *__pyx_kp_s_Ouvre_l_image_produite;
static PyObject *__pyx_n_s_PIL;
static PyObject *__pyx_kp_s_Prune_and_minimize;
static PyObject *__pyx_n_s_S;
static PyObject *__pyx_kp_s_Sage_automaton;
static PyObject *__pyx_kp_s_Test_if_dot_exists;
static PyObject *__pyx_kp_s_The_alphabets_are_differents;
static PyObject *__pyx_kp_s_The_automata_must_be_determistic;
static PyObject *__pyx_kp_s_The_dictionnary_is_not_injective;
static PyObject *__pyx_kp_s_The_initial_state_must_be_a_stat;
static PyObject *__pyx_kp_s_The_label_s_is_not_in_the_alphab;
static PyObject *__pyx_kp_s_The_letter_s_doesn_t_exist;
static PyObject *__pyx_kp_s_The_size_s_of_the_new_alphabet_h;
static PyObject *__pyx_kp_s_The_state_s_doesn_t_exist;
static PyObject *__pyx_kp_s_The_state_s_doesn_t_exist_2;
static PyObject *__pyx_kp_s_The_state_s_has_no_edge_number_s;
static PyObject *__pyx_kp_s_There_is_no_state_s;
static PyObject *__pyx_kp_s_This_transition_s_s_s_starts_fro;
static PyObject *__pyx_n_s_TypeError;
static PyObject *__pyx_n_s_ValueError;
static PyObject *__pyx_kp_s_Warning_Ignore_S_since_there_is;
static PyObject *__pyx_kp_s_Warning_Ignore_final_states_sinc;
static PyObject *__pyx_kp_s_Warning_Ignore_i_since_there_is;
static PyObject *__pyx_kp_s_Warning_informations_lost_during;
static PyObject *__pyx_kp_s_Warning_the_automaton_has_severa;
static PyObject *__pyx_kp_s_Warning_the_automaton_was_not_de;
static PyObject *__pyx_n_s_Word;
static PyObject *__pyx_kp_s_You_can_install_it_by_doing_sage;
static PyObject *__pyx_kp_s_You_cannot_plot_the_CAutomaton_w;
static PyObject *__pyx_kp_s__43;
static PyObject *__pyx_kp_s__44;
static PyObject *__pyx_kp_s__45;
static PyObject *__pyx_kp_s__48;
static PyObject *__pyx_kp_s__60;
static PyObject *__pyx_kp_s__68;
static PyObject *__pyx_n_s_a;
static PyObject *__pyx_kp_s_a_is_None;
static PyObject *__pyx_kp_s_a_s_A_s_b_s_A_s;
static PyObject *__pyx_n_s_adjacency_matrix;
static PyObject *__pyx_n_s_algo;
static PyObject *__pyx_kp_s_alloc_ll_size_s;
static PyObject *__pyx_kp_s_alloc_r_e_s_a_s_elements_so_tota;
static PyObject *__pyx_kp_s_alloc_s;
static PyObject *__pyx_n_s_alphabet;
static PyObject *__pyx_kp_s_and_an_alphabet_of_d_letter;
static PyObject *__pyx_n_s_aperiodic;
static PyObject *__pyx_n_s_append;
static PyObject *__pyx_n_s_approx;
static PyObject *__pyx_n_s_automata_cautomata;
static PyObject *__pyx_n_s_b;
static PyObject *__pyx_n_s_bigger_alphabet;
static PyObject *__pyx_kp_s_browse_transitions;
static PyObject *__pyx_n_s_charpoly;
static PyObject *__pyx_n_s_cline_in_traceback;
static PyObject *__pyx_n_s_complementary_in_place;
static PyObject *__pyx_n_s_complete_in_place;
static PyObject *__pyx_kp_s_component_with_s_states;
static PyObject *__pyx_n_s_concatenate;
static PyObject *__pyx_n_s_copy;
static PyObject *__pyx_n_s_couple;
static PyObject *__pyx_n_s_d;
static PyObject *__pyx_kp_s_d1_s_A2_s;
static PyObject *__pyx_kp_s_dC;
static PyObject *__pyx_kp_s_d_d;
static PyObject *__pyx_kp_s_d_is_not_a_state;
static PyObject *__pyx_kp_s_d_is_not_in_1_d;
static PyObject *__pyx_kp_s_d_is_not_the_index_of_a_state_i;
static PyObject *__pyx_kp_s_d_s;
static PyObject *__pyx_kp_s_d_s_s;
static PyObject *__pyx_n_s_dag;
static PyObject *__pyx_n_s_det;
static PyObject *__pyx_n_s_determinize;
static PyObject *__pyx_n_s_difference;
static PyObject *__pyx_kp_s_dot;
static PyObject *__pyx_n_s_dot2tex;
static PyObject *__pyx_kp_s_dot2tex_must_be_installed_in_ord;
static PyObject *__pyx_kp_s_dot2tex_must_be_installed_in_ord_2;
static PyObject *__pyx_n_s_draw;
static PyObject *__pyx_kp_s_dv_s;
static PyObject *__pyx_n_s_e;
static PyObject *__pyx_n_s_edge_labels;
static PyObject *__pyx_n_s_edges;
static PyObject *__pyx_kp_s_end;
static PyObject *__pyx_n_s_enumerate;
static PyObject *__pyx_n_s_f;
static PyObject *__pyx_n_s_factor;
static PyObject *__pyx_n_s_file;
static PyObject *__pyx_kp_s_file_s;
static PyObject *__pyx_n_s_final;
static PyObject *__pyx_kp_s_final_states;
static PyObject *__pyx_n_s_final_states_2;
static PyObject *__pyx_n_s_format;
static PyObject *__pyx_kp_s_free_plot;
static PyObject *__pyx_n_s_from_state;
static PyObject *__pyx_kp_s_g_s;
static PyObject *__pyx_kp_s_getNAutomaton_s_I_s_F_s_A_s;
static PyObject *__pyx_n_s_get_digraph;
static PyObject *__pyx_n_s_getstate;
static PyObject *__pyx_n_s_html;
static PyObject *__pyx_n_s_i;
static PyObject *__pyx_kp_s_i_s_is_not_the_index_of_a_state;
static PyObject *__pyx_kp_s_i_s_s;
static PyObject *__pyx_n_s_import;
static PyObject *__pyx_n_s_index;
static PyObject *__pyx_kp_s_index_i_d_cannot_be_negative;
static PyObject *__pyx_kp_s_index_i_d_must_be_smaller_than_t;
static PyObject *__pyx_kp_s_init;
static PyObject *__pyx_n_s_initial;
static PyObject *__pyx_kp_s_initial_states;
static PyObject *__pyx_n_s_initial_states_2;
static PyObject *__pyx_n_s_is_aperiodic;
static PyObject *__pyx_n_s_issubset;
static PyObject *__pyx_n_s_j;
static PyObject *__pyx_n_s_k;
static PyObject *__pyx_n_s_keep_S;
static PyObject *__pyx_n_s_keep_states_labels;
static PyObject *__pyx_n_s_keep_transitions_labels;
static PyObject *__pyx_n_s_key;
static PyObject *__pyx_n_s_keys;
static PyObject *__pyx_n_s_l;
static PyObject *__pyx_kp_s_l_2;
static PyObject *__pyx_n_s_label;
static PyObject *__pyx_n_s_label_sink;
static PyObject *__pyx_kp_s_len_s_s;
static PyObject *__pyx_kp_s_letter_s_of_the_word_s_is_not_in;
static PyObject *__pyx_n_s_li;
static PyObject *__pyx_kp_s_list;
static PyObject *__pyx_n_s_loops;
static PyObject *__pyx_n_s_main;
static PyObject *__pyx_n_s_matrix;
static PyObject *__pyx_n_s_max;
static PyObject *__pyx_kp_s_minimal_Automata_s;
static PyObject *__pyx_n_s_minimize;
static PyObject *__pyx_n_s_minimized;
static PyObject *__pyx_n_s_multiedges;
static PyObject *__pyx_n_s_name;
static PyObject *__pyx_n_s_nmax;
static PyObject *__pyx_n_s_nmin;
static PyObject *__pyx_kp_s_no;
static PyObject *__pyx_kp_s_no_default___reduce___due_to_non;
static PyObject *__pyx_n_s_no_trivials;
static PyObject *__pyx_kp_s_non_aperiodic;
static PyObject *__pyx_n_s_np;
static PyObject *__pyx_kp_s_np_must_be_positive;
static PyObject *__pyx_n_s_only_non_trivial;
static PyObject *__pyx_n_s_op_EQ;
static PyObject *__pyx_n_s_op_NE;
static PyObject *__pyx_n_s_open;
static PyObject *__pyx_n_s_other;
static PyObject *__pyx_kp_s_plot;
static PyObject *__pyx_n_s_plot_2;
static PyObject *__pyx_kp_s_png;
static PyObject *__pyx_n_s_pop;
static PyObject *__pyx_n_s_print;
static PyObject *__pyx_n_s_product;
static PyObject *__pyx_n_s_project;
static PyObject *__pyx_n_s_prune;
static PyObject *__pyx_n_s_pruned;
static PyObject *__pyx_kp_s_r_e_s_a_s_s_s;
static PyObject *__pyx_kp_s_r_is_not_a_letter_of_the_alphab;
static PyObject *__pyx_kp_s_r_is_not_in_the_alphabet_s;
static PyObject *__pyx_kp_s_r_r_r;
static PyObject *__pyx_n_s_random;
static PyObject *__pyx_n_s_range;
static PyObject *__pyx_n_s_read;
static PyObject *__pyx_n_s_real_part;
static PyObject *__pyx_n_s_real_roots;
static PyObject *__pyx_n_s_reduce;
static PyObject *__pyx_n_s_reduce_cython;
static PyObject *__pyx_n_s_reduce_ex;
static PyObject *__pyx_n_s_ring;
static PyObject *__pyx_n_s_roots;
static PyObject *__pyx_n_s_s;
static PyObject *__pyx_kp_s_s_2;
static PyObject *__pyx_kp_s_s_component_strongly_connex;
static PyObject *__pyx_kp_s_s_is_not_a_state;
static PyObject *__pyx_kp_s_s_is_not_a_state_i_e_between_0;
static PyObject *__pyx_kp_s_s_is_not_a_state_should_be_betw;
static PyObject *__pyx_kp_s_s_is_not_an_index_of_a_state_mu;
static PyObject *__pyx_n_s_sage_combinat_finite_state_machi;
static PyObject *__pyx_n_s_sage_combinat_words_cautomata_ge;
static PyObject *__pyx_n_s_sage_functions_other;
static PyObject *__pyx_n_s_sage_graphs_digraph;
static PyObject *__pyx_n_s_sage_matrix_constructor;
static PyObject *__pyx_n_s_sage_misc_html;
static PyObject *__pyx_n_s_sage_misc_latex;
static PyObject *__pyx_n_s_sage_misc_prandom;
static PyObject *__pyx_n_s_sage_misc_temporary_file;
static PyObject *__pyx_n_s_sage_rings_integer_ring;
static PyObject *__pyx_n_s_sage_rings_qqbar;
static PyObject *__pyx_n_s_sage_structure_richcmp;
static PyObject *__pyx_kp_s_set_successor_s_s_s_index_out_of;
static PyObject *__pyx_n_s_setstate;
static PyObject *__pyx_n_s_setstate_cython;
static PyObject *__pyx_n_s_shift_list_in_place;
static PyObject *__pyx_n_s_simplify;
static PyObject *__pyx_n_s_sink;
static PyObject *__pyx_n_s_sink_state;
static PyObject *__pyx_n_s_sort;
static PyObject *__pyx_kp_s_sp_s;
static PyObject *__pyx_n_s_sparse;
static PyObject *__pyx_n_s_spectral_radius;
static PyObject *__pyx_n_s_spectral_radius_locals_lambda;
static PyObject *__pyx_kp_s_spm_s;
static PyObject *__pyx_n_s_states;
static PyObject *__pyx_n_s_strongly_connected_components;
static PyObject *__pyx_n_s_sub_automaton;
static PyObject *__pyx_n_s_successor;
static PyObject *__pyx_n_s_sx;
static PyObject *__pyx_n_s_sy;
static PyObject *__pyx_n_s_test;
static PyObject *__pyx_n_s_tmp_filename;
static PyObject *__pyx_n_s_to_state;
static PyObject *__pyx_n_s_transitions;
static PyObject *__pyx_n_s_union;
static PyObject *__pyx_n_s_unshift;
static PyObject *__pyx_n_s_values;
static PyObject *__pyx_n_s_verb;
static PyObject *__pyx_n_s_vertices;
static PyObject *__pyx_n_s_vertices_and_edges;
static PyObject *__pyx_kp_s_vertices_s;
static PyObject *__pyx_kp_s_vl_NULL;
static PyObject *__pyx_n_s_vlabels;
static PyObject *__pyx_n_s_w;
static PyObject *__pyx_n_s_word_in;
static PyObject *__pyx_kp_s_word_not_found;
static PyObject *__pyx_n_s_word_out;
static PyObject *__pyx_kp_s_yes;
static PyObject *__pyx_n_s_z;
static int __pyx_pf_8automata_9cautomata_10CAutomaton___cinit__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self); /* proto */
static int __pyx_pf_8automata_9cautomata_10CAutomaton_2__init__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, PyObject *__pyx_v_a, PyObject *__pyx_v_I, PyObject *__pyx_v_F, PyObject *__pyx_v_A, PyObject *__pyx_v_keep_S, PyObject *__pyx_v_verb); /* proto */
static void __pyx_pf_8automata_9cautomata_10CAutomaton_4__dealloc__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_6__repr__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_8_latex_(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_10copy(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_8n_states___get__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_12n_successors(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_14successor(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i, int __pyx_v_j); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_16label(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i, int __pyx_v_j); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_18is_final(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_20is_initial(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_14initial_states___get__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_12final_states___get__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_8alphabet___get__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_22set_final(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i, bool __pyx_v_final); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_24set_initial_state(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i, bool __pyx_v_initial); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_26add_transition(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i, PyObject *__pyx_v_l, int __pyx_v_f); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_28add_state(CYTHON_UNUSED struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, CYTHON_UNUSED bool __pyx_v_final); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_30bigger_alphabet(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, PyObject *__pyx_v_nA); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_32add_path(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_e, int __pyx_v_f, PyObject *__pyx_v_li, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_34determinize(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, PyObject *__pyx_v_sink, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_36plot(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, PyObject *__pyx_v_file, int __pyx_v_sx, int __pyx_v_sy, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_38__reduce_cython__(CYTHON_UNUSED struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_40__setstate_cython__(CYTHON_UNUSED struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v___pyx_state); /* proto */
static int __pyx_pf_8automata_9cautomata_22DeterministicAutomaton___cinit__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static int __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_2__init__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_a, PyObject *__pyx_v_i, PyObject *__pyx_v_final_states, PyObject *__pyx_v_A, PyObject *__pyx_v_S, PyObject *__pyx_v_keep_S, PyObject *__pyx_v_verb); /* proto */
static void __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_4__dealloc__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_6copy(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_8__copy__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_10__repr__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_12_latex_(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static Py_hash_t __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_14__hash__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_16string(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_18is_equal_to(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_other, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_20__richcmp__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_other, int __pyx_v_op); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_22get_automaton(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_24get_digraph(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_keep_transitions_labels); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_26plot(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_sx, int __pyx_v_sy, PyObject *__pyx_v_vlabels, PyObject *__pyx_v_html, PyObject *__pyx_v_file, bool __pyx_v_draw, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_8alphabet___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_28set_alphabet(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_A); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_13initial_state___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_30set_initial_state(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_12final_states___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_6states___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_32set_final_states(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_lf); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_34is_final(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_e); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_36set_final(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_e, PyObject *__pyx_v_final); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_38successor(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i, int __pyx_v_j); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_40successors(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_42path(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l, PyObject *__pyx_v_i); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_44set_successor(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i, int __pyx_v_j, int __pyx_v_k); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_46zero_complete_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_z, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_48concatenate_with_zero_star(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_z, PyObject *__pyx_v_sink_state, PyObject *__pyx_v_simplify, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_50left_concatenate_with_zero_star(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_z, PyObject *__pyx_v_simplify); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_52difference(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, bool __pyx_v_det, bool __pyx_v_simplify); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_54prune_stop(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_56prune_non_reachable(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_58prune(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_60product(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_b, PyObject *__pyx_v_d, bool __pyx_v_simplify, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_62intersection(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, PyObject *__pyx_v_simplify, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_64is_complete(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_66complete_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_label_sink); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_68prefix(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_w, PyObject *__pyx_v_i, int __pyx_v_algo); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_70prefix_closure(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_72union(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, PyObject *__pyx_v_simplify, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_74split(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, bool __pyx_v_simplify, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_76shift_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l, int __pyx_v_np, CYTHON_UNUSED PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_78shift_list_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_80unshift(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l, int __pyx_v_np, PyObject *__pyx_v_final); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_82unshift_list(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_84get_cautomaton(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_86concatenate(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_b, PyObject *__pyx_v_det, PyObject *__pyx_v_simplify, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_88project(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_d, bool __pyx_v_det, bool __pyx_v_simplify, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_90project_on_ith(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i, bool __pyx_v_det, bool __pyx_v_simplify, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_92duplicate_transitions(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_d, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_94relabel_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_d); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_96permut(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_A, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_98permut_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_A, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_100mirror_deterministic(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_102mirror(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_104strongly_connected_components(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, bool __pyx_v_no_trivials); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_106sub_automaton(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l, bool __pyx_v_keep_states_labels, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_108simplify(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_110minimize(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_112adjacency_matrix(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_sparse); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_114delete_state(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_116delete_state_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i); /* proto */
static PyObject *__pyx_lambda_funcdef_lambda(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_x); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_118spectral_radius(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, bool __pyx_v_approx, bool __pyx_v_couple, bool __pyx_v_only_non_trivial, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_120has_empty_language(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_122has_same_language_as(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, bool __pyx_v_minimized, bool __pyx_v_pruned, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_124intersect(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_126find_word(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_128shortest_word(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_i, PyObject *__pyx_v_f, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_130shortest_words(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_i, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_132recognized_word(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_w); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_134add_state(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, bool __pyx_v_final, PyObject *__pyx_v_label); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_136add_transition(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i, PyObject *__pyx_v_l, int __pyx_v_j); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_8n_states___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_9n_letters___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_138bigger_alphabet(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_A); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_140complementary_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_142complementary(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_144included(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, bool __pyx_v_pruned, bool __pyx_v_verb); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_146random_word(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_nmin, int __pyx_v_nmax); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_148__reduce_cython__(CYTHON_UNUSED struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self); /* proto */
static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_150__setstate_cython__(CYTHON_UNUSED struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v___pyx_state); /* proto */
static PyObject *__pyx_tp_new_8automata_9cautomata_DeterministicAutomaton(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
static PyObject *__pyx_tp_new_8automata_9cautomata_CAutomaton(PyTypeObject *t, PyObject *a, PyObject *k); /*proto*/
static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_keys = {0, &__pyx_n_s_keys, 0, 0, 0};
static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_pop = {0, &__pyx_n_s_pop, 0, 0, 0};
static __Pyx_CachedCFunction __pyx_umethod_PyDict_Type_values = {0, &__pyx_n_s_values, 0, 0, 0};
static __Pyx_CachedCFunction __pyx_umethod_PySet_Type_issubset = {0, &__pyx_n_s_issubset, 0, 0, 0};
static PyObject *__pyx_int_0;
static PyObject *__pyx_int_1;
static PyObject *__pyx_int_neg_1;
static PyObject *__pyx_k_;
static PyObject *__pyx_k__2;
static PyObject *__pyx_k__3;
static PyObject *__pyx_tuple__4;
static PyObject *__pyx_tuple__5;
static PyObject *__pyx_tuple__6;
static PyObject *__pyx_tuple__7;
static PyObject *__pyx_tuple__8;
static PyObject *__pyx_tuple__9;
static PyObject *__pyx_tuple__10;
static PyObject *__pyx_tuple__11;
static PyObject *__pyx_tuple__12;
static PyObject *__pyx_tuple__13;
static PyObject *__pyx_tuple__14;
static PyObject *__pyx_tuple__15;
static PyObject *__pyx_tuple__16;
static PyObject *__pyx_tuple__17;
static PyObject *__pyx_tuple__18;
static PyObject *__pyx_tuple__19;
static PyObject *__pyx_tuple__20;
static PyObject *__pyx_tuple__21;
static PyObject *__pyx_tuple__22;
static PyObject *__pyx_tuple__23;
static PyObject *__pyx_tuple__24;
static PyObject *__pyx_tuple__25;
static PyObject *__pyx_tuple__26;
static PyObject *__pyx_tuple__27;
static PyObject *__pyx_tuple__28;
static PyObject *__pyx_tuple__29;
static PyObject *__pyx_tuple__30;
static PyObject *__pyx_tuple__31;
static PyObject *__pyx_tuple__32;
static PyObject *__pyx_tuple__33;
static PyObject *__pyx_tuple__34;
static PyObject *__pyx_tuple__35;
static PyObject *__pyx_tuple__36;
static PyObject *__pyx_tuple__37;
static PyObject *__pyx_tuple__38;
static PyObject *__pyx_tuple__39;
static PyObject *__pyx_tuple__40;
static PyObject *__pyx_tuple__41;
static PyObject *__pyx_tuple__42;
static PyObject *__pyx_tuple__46;
static PyObject *__pyx_tuple__47;
static PyObject *__pyx_tuple__49;
static PyObject *__pyx_tuple__50;
static PyObject *__pyx_tuple__51;
static PyObject *__pyx_tuple__52;
static PyObject *__pyx_tuple__53;
static PyObject *__pyx_tuple__54;
static PyObject *__pyx_tuple__55;
static PyObject *__pyx_tuple__56;
static PyObject *__pyx_tuple__57;
static PyObject *__pyx_tuple__58;
static PyObject *__pyx_tuple__59;
static PyObject *__pyx_tuple__61;
static PyObject *__pyx_tuple__62;
static PyObject *__pyx_tuple__63;
static PyObject *__pyx_tuple__64;
static PyObject *__pyx_tuple__65;
static PyObject *__pyx_tuple__66;
static PyObject *__pyx_tuple__67;
static PyObject *__pyx_tuple__69;
static PyObject *__pyx_tuple__70;
/* Late includes */
#include "macros.h"

/* "automata/cautomata.pyx":119
 *     void Test()
 * 
 * cdef imagDict(dict d, list A, list A2=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary which is numbering projected alphabet
 */

static PyObject *__pyx_f_8automata_9cautomata_imagDict(PyObject *__pyx_v_d, PyObject *__pyx_v_A, struct __pyx_opt_args_8automata_9cautomata_imagDict *__pyx_optional_args) {
  PyObject *__pyx_v_A2 = __pyx_k_;
  PyObject *__pyx_v_d1 = NULL;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_a = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("imagDict", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_A2 = __pyx_optional_args->A2;
    }
  }

  /* "automata/cautomata.pyx":123
 *     Dictionary which is numbering projected alphabet
 *     """
 *     d1 = {}             # <<<<<<<<<<<<<<
 *     i = 0
 *     for a in A:
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 123, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_d1 = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":124
 *     """
 *     d1 = {}
 *     i = 0             # <<<<<<<<<<<<<<
 *     for a in A:
 *         if d.has_key(a):
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_v_i = __pyx_int_0;

  /* "automata/cautomata.pyx":125
 *     d1 = {}
 *     i = 0
 *     for a in A:             # <<<<<<<<<<<<<<
 *         if d.has_key(a):
 *             if not d1.has_key(d[a]):
 */
  if (unlikely(__pyx_v_A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 125, __pyx_L1_error)
  }
  __pyx_t_1 = __pyx_v_A; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
  for (;;) {
    if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_3); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 125, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 125, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_a, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":126
 *     i = 0
 *     for a in A:
 *         if d.has_key(a):             # <<<<<<<<<<<<<<
 *             if not d1.has_key(d[a]):
 *                 d1[d[a]] = i
 */
    if (unlikely(__pyx_v_d == Py_None)) {
      PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "has_key");
      __PYX_ERR(0, 126, __pyx_L1_error)
    }
    __pyx_t_4 = PyDict_Contains(__pyx_v_d, __pyx_v_a); if (unlikely(__pyx_t_4 == ((int)-1))) __PYX_ERR(0, 126, __pyx_L1_error)
    __pyx_t_5 = (__pyx_t_4 != 0);
    if (__pyx_t_5) {

      /* "automata/cautomata.pyx":127
 *     for a in A:
 *         if d.has_key(a):
 *             if not d1.has_key(d[a]):             # <<<<<<<<<<<<<<
 *                 d1[d[a]] = i
 *                 A2.append(d[a])
 */
      if (unlikely(__pyx_v_d == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 127, __pyx_L1_error)
      }
      __pyx_t_3 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_a); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 127, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_5 = PyDict_Contains(__pyx_v_d1, __pyx_t_3); if (unlikely(__pyx_t_5 == ((int)-1))) __PYX_ERR(0, 127, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_4 = ((!(__pyx_t_5 != 0)) != 0);
      if (__pyx_t_4) {

        /* "automata/cautomata.pyx":128
 *         if d.has_key(a):
 *             if not d1.has_key(d[a]):
 *                 d1[d[a]] = i             # <<<<<<<<<<<<<<
 *                 A2.append(d[a])
 *                 i += 1
 */
        if (unlikely(__pyx_v_d == Py_None)) {
          PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
          __PYX_ERR(0, 128, __pyx_L1_error)
        }
        __pyx_t_3 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_a); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 128, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        if (unlikely(PyDict_SetItem(__pyx_v_d1, __pyx_t_3, __pyx_v_i) < 0)) __PYX_ERR(0, 128, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

        /* "automata/cautomata.pyx":129
 *             if not d1.has_key(d[a]):
 *                 d1[d[a]] = i
 *                 A2.append(d[a])             # <<<<<<<<<<<<<<
 *                 i += 1
 *     return d1
 */
        if (unlikely(__pyx_v_A2 == Py_None)) {
          PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "append");
          __PYX_ERR(0, 129, __pyx_L1_error)
        }
        if (unlikely(__pyx_v_d == Py_None)) {
          PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
          __PYX_ERR(0, 129, __pyx_L1_error)
        }
        __pyx_t_3 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_a); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 129, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_6 = __Pyx_PyList_Append(__pyx_v_A2, __pyx_t_3); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 129, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

        /* "automata/cautomata.pyx":130
 *                 d1[d[a]] = i
 *                 A2.append(d[a])
 *                 i += 1             # <<<<<<<<<<<<<<
 *     return d1
 * 
 */
        __pyx_t_3 = __Pyx_PyInt_AddObjC(__pyx_v_i, __pyx_int_1, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 130, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_3);
        __pyx_t_3 = 0;

        /* "automata/cautomata.pyx":127
 *     for a in A:
 *         if d.has_key(a):
 *             if not d1.has_key(d[a]):             # <<<<<<<<<<<<<<
 *                 d1[d[a]] = i
 *                 A2.append(d[a])
 */
      }

      /* "automata/cautomata.pyx":126
 *     i = 0
 *     for a in A:
 *         if d.has_key(a):             # <<<<<<<<<<<<<<
 *             if not d1.has_key(d[a]):
 *                 d1[d[a]] = i
 */
    }

    /* "automata/cautomata.pyx":125
 *     d1 = {}
 *     i = 0
 *     for a in A:             # <<<<<<<<<<<<<<
 *         if d.has_key(a):
 *             if not d1.has_key(d[a]):
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":131
 *                 A2.append(d[a])
 *                 i += 1
 *     return d1             # <<<<<<<<<<<<<<
 * 
 * cdef imagDict2(dict d, list A, list A2=[]):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_d1);
  __pyx_r = __pyx_v_d1;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":119
 *     void Test()
 * 
 * cdef imagDict(dict d, list A, list A2=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary which is numbering projected alphabet
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.imagDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_d1);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_a);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":133
 *     return d1
 * 
 * cdef imagDict2(dict d, list A, list A2=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary which is numbering a new alphabet
 */

static PyObject *__pyx_f_8automata_9cautomata_imagDict2(PyObject *__pyx_v_d, PyObject *__pyx_v_A, struct __pyx_opt_args_8automata_9cautomata_imagDict2 *__pyx_optional_args) {
  PyObject *__pyx_v_A2 = __pyx_k__2;
  PyObject *__pyx_v_d1 = NULL;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_a = NULL;
  PyObject *__pyx_v_v = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  Py_ssize_t __pyx_t_7;
  PyObject *(*__pyx_t_8)(PyObject *);
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("imagDict2", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_A2 = __pyx_optional_args->A2;
    }
  }

  /* "automata/cautomata.pyx":138
 *     """
 *     # print("d=%s, A=%s"%(d,A))
 *     d1 = {}             # <<<<<<<<<<<<<<
 *     i = 0
 *     for a in A:
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 138, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_d1 = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":139
 *     # print("d=%s, A=%s"%(d,A))
 *     d1 = {}
 *     i = 0             # <<<<<<<<<<<<<<
 *     for a in A:
 *         if d.has_key(a):
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_v_i = __pyx_int_0;

  /* "automata/cautomata.pyx":140
 *     d1 = {}
 *     i = 0
 *     for a in A:             # <<<<<<<<<<<<<<
 *         if d.has_key(a):
 *             for v in d[a]:
 */
  if (unlikely(__pyx_v_A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 140, __pyx_L1_error)
  }
  __pyx_t_1 = __pyx_v_A; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
  for (;;) {
    if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_3); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 140, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 140, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_a, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":141
 *     i = 0
 *     for a in A:
 *         if d.has_key(a):             # <<<<<<<<<<<<<<
 *             for v in d[a]:
 *                 if not d1.has_key(v):
 */
    if (unlikely(__pyx_v_d == Py_None)) {
      PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "has_key");
      __PYX_ERR(0, 141, __pyx_L1_error)
    }
    __pyx_t_4 = PyDict_Contains(__pyx_v_d, __pyx_v_a); if (unlikely(__pyx_t_4 == ((int)-1))) __PYX_ERR(0, 141, __pyx_L1_error)
    __pyx_t_5 = (__pyx_t_4 != 0);
    if (__pyx_t_5) {

      /* "automata/cautomata.pyx":142
 *     for a in A:
 *         if d.has_key(a):
 *             for v in d[a]:             # <<<<<<<<<<<<<<
 *                 if not d1.has_key(v):
 *                     d1[v] = i
 */
      if (unlikely(__pyx_v_d == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 142, __pyx_L1_error)
      }
      __pyx_t_3 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_a); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 142, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (likely(PyList_CheckExact(__pyx_t_3)) || PyTuple_CheckExact(__pyx_t_3)) {
        __pyx_t_6 = __pyx_t_3; __Pyx_INCREF(__pyx_t_6); __pyx_t_7 = 0;
        __pyx_t_8 = NULL;
      } else {
        __pyx_t_7 = -1; __pyx_t_6 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 142, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __pyx_t_8 = Py_TYPE(__pyx_t_6)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 142, __pyx_L1_error)
      }
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      for (;;) {
        if (likely(!__pyx_t_8)) {
          if (likely(PyList_CheckExact(__pyx_t_6))) {
            if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_6)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_3 = PyList_GET_ITEM(__pyx_t_6, __pyx_t_7); __Pyx_INCREF(__pyx_t_3); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 142, __pyx_L1_error)
            #else
            __pyx_t_3 = PySequence_ITEM(__pyx_t_6, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 142, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_3);
            #endif
          } else {
            if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_6)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_6, __pyx_t_7); __Pyx_INCREF(__pyx_t_3); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 142, __pyx_L1_error)
            #else
            __pyx_t_3 = PySequence_ITEM(__pyx_t_6, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 142, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_3);
            #endif
          }
        } else {
          __pyx_t_3 = __pyx_t_8(__pyx_t_6);
          if (unlikely(!__pyx_t_3)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 142, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_3);
        }
        __Pyx_XDECREF_SET(__pyx_v_v, __pyx_t_3);
        __pyx_t_3 = 0;

        /* "automata/cautomata.pyx":143
 *         if d.has_key(a):
 *             for v in d[a]:
 *                 if not d1.has_key(v):             # <<<<<<<<<<<<<<
 *                     d1[v] = i
 *                     A2.append(v)
 */
        __pyx_t_5 = PyDict_Contains(__pyx_v_d1, __pyx_v_v); if (unlikely(__pyx_t_5 == ((int)-1))) __PYX_ERR(0, 143, __pyx_L1_error)
        __pyx_t_4 = ((!(__pyx_t_5 != 0)) != 0);
        if (__pyx_t_4) {

          /* "automata/cautomata.pyx":144
 *             for v in d[a]:
 *                 if not d1.has_key(v):
 *                     d1[v] = i             # <<<<<<<<<<<<<<
 *                     A2.append(v)
 *                     i += 1
 */
          if (unlikely(PyDict_SetItem(__pyx_v_d1, __pyx_v_v, __pyx_v_i) < 0)) __PYX_ERR(0, 144, __pyx_L1_error)

          /* "automata/cautomata.pyx":145
 *                 if not d1.has_key(v):
 *                     d1[v] = i
 *                     A2.append(v)             # <<<<<<<<<<<<<<
 *                     i += 1
 *     return d1
 */
          if (unlikely(__pyx_v_A2 == Py_None)) {
            PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "append");
            __PYX_ERR(0, 145, __pyx_L1_error)
          }
          __pyx_t_9 = __Pyx_PyList_Append(__pyx_v_A2, __pyx_v_v); if (unlikely(__pyx_t_9 == ((int)-1))) __PYX_ERR(0, 145, __pyx_L1_error)

          /* "automata/cautomata.pyx":146
 *                     d1[v] = i
 *                     A2.append(v)
 *                     i += 1             # <<<<<<<<<<<<<<
 *     return d1
 * 
 */
          __pyx_t_3 = __Pyx_PyInt_AddObjC(__pyx_v_i, __pyx_int_1, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 146, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_3);
          __pyx_t_3 = 0;

          /* "automata/cautomata.pyx":143
 *         if d.has_key(a):
 *             for v in d[a]:
 *                 if not d1.has_key(v):             # <<<<<<<<<<<<<<
 *                     d1[v] = i
 *                     A2.append(v)
 */
        }

        /* "automata/cautomata.pyx":142
 *     for a in A:
 *         if d.has_key(a):
 *             for v in d[a]:             # <<<<<<<<<<<<<<
 *                 if not d1.has_key(v):
 *                     d1[v] = i
 */
      }
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

      /* "automata/cautomata.pyx":141
 *     i = 0
 *     for a in A:
 *         if d.has_key(a):             # <<<<<<<<<<<<<<
 *             for v in d[a]:
 *                 if not d1.has_key(v):
 */
    }

    /* "automata/cautomata.pyx":140
 *     d1 = {}
 *     i = 0
 *     for a in A:             # <<<<<<<<<<<<<<
 *         if d.has_key(a):
 *             for v in d[a]:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":147
 *                     A2.append(v)
 *                     i += 1
 *     return d1             # <<<<<<<<<<<<<<
 * 
 * cdef Dict getDict(dict d, list A, dict d1=None):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_d1);
  __pyx_r = __pyx_v_d1;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":133
 *     return d1
 * 
 * cdef imagDict2(dict d, list A, list A2=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary which is numbering a new alphabet
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("automata.cautomata.imagDict2", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_d1);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_a);
  __Pyx_XDECREF(__pyx_v_v);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":149
 *     return d1
 * 
 * cdef Dict getDict(dict d, list A, dict d1=None):             # <<<<<<<<<<<<<<
 *     A = list(A)
 *     cdef Dict r
 */

static Dict __pyx_f_8automata_9cautomata_getDict(PyObject *__pyx_v_d, PyObject *__pyx_v_A, struct __pyx_opt_args_8automata_9cautomata_getDict *__pyx_optional_args) {
  PyObject *__pyx_v_d1 = ((PyObject*)Py_None);
  Dict __pyx_v_r;
  int __pyx_v_i;
  Dict __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  Py_ssize_t __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("getDict", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_d1 = __pyx_optional_args->d1;
    }
  }
  __Pyx_INCREF(__pyx_v_A);
  __Pyx_INCREF(__pyx_v_d1);

  /* "automata/cautomata.pyx":150
 * 
 * cdef Dict getDict(dict d, list A, dict d1=None):
 *     A = list(A)             # <<<<<<<<<<<<<<
 *     cdef Dict r
 *     sig_on()
 */
  __pyx_t_1 = PySequence_List(__pyx_v_A); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 150, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF_SET(__pyx_v_A, ((PyObject*)__pyx_t_1));
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":152
 *     A = list(A)
 *     cdef Dict r
 *     sig_on()             # <<<<<<<<<<<<<<
 *     r = NewDict(len(A))
 *     sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 152, __pyx_L1_error)

  /* "automata/cautomata.pyx":153
 *     cdef Dict r
 *     sig_on()
 *     r = NewDict(len(A))             # <<<<<<<<<<<<<<
 *     sig_off()
 *     cdef int i
 */
  __pyx_t_3 = PyList_GET_SIZE(__pyx_v_A); if (unlikely(__pyx_t_3 == ((Py_ssize_t)-1))) __PYX_ERR(0, 153, __pyx_L1_error)
  __pyx_v_r = NewDict(__pyx_t_3);

  /* "automata/cautomata.pyx":154
 *     sig_on()
 *     r = NewDict(len(A))
 *     sig_off()             # <<<<<<<<<<<<<<
 *     cdef int i
 *     if d1 is None:
 */
  sig_off();

  /* "automata/cautomata.pyx":156
 *     sig_off()
 *     cdef int i
 *     if d1 is None:             # <<<<<<<<<<<<<<
 *         d1 = imagDict(d, A)
 *     # print d1
 */
  __pyx_t_4 = (__pyx_v_d1 == ((PyObject*)Py_None));
  __pyx_t_5 = (__pyx_t_4 != 0);
  if (__pyx_t_5) {

    /* "automata/cautomata.pyx":157
 *     cdef int i
 *     if d1 is None:
 *         d1 = imagDict(d, A)             # <<<<<<<<<<<<<<
 *     # print d1
 *     for i in range(r.n):
 */
    __pyx_t_1 = __pyx_f_8automata_9cautomata_imagDict(__pyx_v_d, __pyx_v_A, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 157, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!(likely(PyDict_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_t_1)->tp_name), 0))) __PYX_ERR(0, 157, __pyx_L1_error)
    __Pyx_DECREF_SET(__pyx_v_d1, ((PyObject*)__pyx_t_1));
    __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":156
 *     sig_off()
 *     cdef int i
 *     if d1 is None:             # <<<<<<<<<<<<<<
 *         d1 = imagDict(d, A)
 *     # print d1
 */
  }

  /* "automata/cautomata.pyx":159
 *         d1 = imagDict(d, A)
 *     # print d1
 *     for i in range(r.n):             # <<<<<<<<<<<<<<
 *         if d.has_key(A[i]):
 *             r.e[i] = d1[d[A[i]]]
 */
  __pyx_t_2 = __pyx_v_r.n;
  __pyx_t_6 = __pyx_t_2;
  for (__pyx_t_7 = 0; __pyx_t_7 < __pyx_t_6; __pyx_t_7+=1) {
    __pyx_v_i = __pyx_t_7;

    /* "automata/cautomata.pyx":160
 *     # print d1
 *     for i in range(r.n):
 *         if d.has_key(A[i]):             # <<<<<<<<<<<<<<
 *             r.e[i] = d1[d[A[i]]]
 *         else:
 */
    if (unlikely(__pyx_v_d == Py_None)) {
      PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "has_key");
      __PYX_ERR(0, 160, __pyx_L1_error)
    }
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 160, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = PyDict_Contains(__pyx_v_d, __pyx_t_1); if (unlikely(__pyx_t_5 == ((int)-1))) __PYX_ERR(0, 160, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_4 = (__pyx_t_5 != 0);
    if (__pyx_t_4) {

      /* "automata/cautomata.pyx":161
 *     for i in range(r.n):
 *         if d.has_key(A[i]):
 *             r.e[i] = d1[d[A[i]]]             # <<<<<<<<<<<<<<
 *         else:
 *             r.e[i] = -1
 */
      if (unlikely(__pyx_v_d1 == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 161, __pyx_L1_error)
      }
      if (unlikely(__pyx_v_d == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 161, __pyx_L1_error)
      }
      __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 161, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_8 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_t_1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 161, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_d1, __pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 161, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_9 = __Pyx_PyInt_As_int(__pyx_t_1); if (unlikely((__pyx_t_9 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 161, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      (__pyx_v_r.e[__pyx_v_i]) = __pyx_t_9;

      /* "automata/cautomata.pyx":160
 *     # print d1
 *     for i in range(r.n):
 *         if d.has_key(A[i]):             # <<<<<<<<<<<<<<
 *             r.e[i] = d1[d[A[i]]]
 *         else:
 */
      goto __pyx_L6;
    }

    /* "automata/cautomata.pyx":163
 *             r.e[i] = d1[d[A[i]]]
 *         else:
 *             r.e[i] = -1             # <<<<<<<<<<<<<<
 *     return r
 * 
 */
    /*else*/ {
      (__pyx_v_r.e[__pyx_v_i]) = -1;
    }
    __pyx_L6:;
  }

  /* "automata/cautomata.pyx":164
 *         else:
 *             r.e[i] = -1
 *     return r             # <<<<<<<<<<<<<<
 * 
 * cdef Dict list_to_Dict(list l):
 */
  __pyx_r = __pyx_v_r;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":149
 *     return d1
 * 
 * cdef Dict getDict(dict d, list A, dict d1=None):             # <<<<<<<<<<<<<<
 *     A = list(A)
 *     cdef Dict r
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_WriteUnraisable("automata.cautomata.getDict", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __Pyx_pretend_to_initialize(&__pyx_r);
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_A);
  __Pyx_XDECREF(__pyx_v_d1);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":166
 *     return r
 * 
 * cdef Dict list_to_Dict(list l):             # <<<<<<<<<<<<<<
 *     cdef Dict d = NewDict(len(l))
 *     cdef int i
 */

static Dict __pyx_f_8automata_9cautomata_list_to_Dict(PyObject *__pyx_v_l) {
  Dict __pyx_v_d;
  int __pyx_v_i;
  Dict __pyx_r;
  __Pyx_RefNannyDeclarations
  Py_ssize_t __pyx_t_1;
  Py_ssize_t __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("list_to_Dict", 0);

  /* "automata/cautomata.pyx":167
 * 
 * cdef Dict list_to_Dict(list l):
 *     cdef Dict d = NewDict(len(l))             # <<<<<<<<<<<<<<
 *     cdef int i
 *     for i in range(len(l)):
 */
  if (unlikely(__pyx_v_l == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 167, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_GET_SIZE(__pyx_v_l); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 167, __pyx_L1_error)
  __pyx_v_d = NewDict(__pyx_t_1);

  /* "automata/cautomata.pyx":169
 *     cdef Dict d = NewDict(len(l))
 *     cdef int i
 *     for i in range(len(l)):             # <<<<<<<<<<<<<<
 *         d.e[i] = l[i]
 *     return d
 */
  if (unlikely(__pyx_v_l == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 169, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_GET_SIZE(__pyx_v_l); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 169, __pyx_L1_error)
  __pyx_t_2 = __pyx_t_1;
  for (__pyx_t_3 = 0; __pyx_t_3 < __pyx_t_2; __pyx_t_3+=1) {
    __pyx_v_i = __pyx_t_3;

    /* "automata/cautomata.pyx":170
 *     cdef int i
 *     for i in range(len(l)):
 *         d.e[i] = l[i]             # <<<<<<<<<<<<<<
 *     return d
 * 
 */
    if (unlikely(__pyx_v_l == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 170, __pyx_L1_error)
    }
    __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_l, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 170, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyInt_As_int(__pyx_t_4); if (unlikely((__pyx_t_5 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 170, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    (__pyx_v_d.e[__pyx_v_i]) = __pyx_t_5;
  }

  /* "automata/cautomata.pyx":171
 *     for i in range(len(l)):
 *         d.e[i] = l[i]
 *     return d             # <<<<<<<<<<<<<<
 * 
 * cdef InvertDict getDict2(dict d, list A, dict d1=None):
 */
  __pyx_r = __pyx_v_d;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":166
 *     return r
 * 
 * cdef Dict list_to_Dict(list l):             # <<<<<<<<<<<<<<
 *     cdef Dict d = NewDict(len(l))
 *     cdef int i
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_WriteUnraisable("automata.cautomata.list_to_Dict", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __Pyx_pretend_to_initialize(&__pyx_r);
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":173
 *     return d
 * 
 * cdef InvertDict getDict2(dict d, list A, dict d1=None):             # <<<<<<<<<<<<<<
 *     A = list(A)
 *     cdef InvertDict r
 */

static InvertDict __pyx_f_8automata_9cautomata_getDict2(PyObject *__pyx_v_d, PyObject *__pyx_v_A, struct __pyx_opt_args_8automata_9cautomata_getDict2 *__pyx_optional_args) {
  PyObject *__pyx_v_d1 = ((PyObject*)Py_None);
  InvertDict __pyx_v_r;
  int __pyx_v_i;
  int __pyx_v_j;
  InvertDict __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  Py_ssize_t __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  int __pyx_t_11;
  int __pyx_t_12;
  __Pyx_RefNannySetupContext("getDict2", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_d1 = __pyx_optional_args->d1;
    }
  }
  __Pyx_INCREF(__pyx_v_A);
  __Pyx_INCREF(__pyx_v_d1);

  /* "automata/cautomata.pyx":174
 * 
 * cdef InvertDict getDict2(dict d, list A, dict d1=None):
 *     A = list(A)             # <<<<<<<<<<<<<<
 *     cdef InvertDict r
 *     sig_on()
 */
  __pyx_t_1 = PySequence_List(__pyx_v_A); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 174, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF_SET(__pyx_v_A, ((PyObject*)__pyx_t_1));
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":176
 *     A = list(A)
 *     cdef InvertDict r
 *     sig_on()             # <<<<<<<<<<<<<<
 *     r = NewInvertDict(len(A))
 *     sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 176, __pyx_L1_error)

  /* "automata/cautomata.pyx":177
 *     cdef InvertDict r
 *     sig_on()
 *     r = NewInvertDict(len(A))             # <<<<<<<<<<<<<<
 *     sig_off()
 *     cdef int i
 */
  __pyx_t_3 = PyList_GET_SIZE(__pyx_v_A); if (unlikely(__pyx_t_3 == ((Py_ssize_t)-1))) __PYX_ERR(0, 177, __pyx_L1_error)
  __pyx_v_r = NewInvertDict(__pyx_t_3);

  /* "automata/cautomata.pyx":178
 *     sig_on()
 *     r = NewInvertDict(len(A))
 *     sig_off()             # <<<<<<<<<<<<<<
 *     cdef int i
 *     if d1 is None:
 */
  sig_off();

  /* "automata/cautomata.pyx":180
 *     sig_off()
 *     cdef int i
 *     if d1 is None:             # <<<<<<<<<<<<<<
 *         d1 = imagDict2(d, A)
 *     # print(d1)
 */
  __pyx_t_4 = (__pyx_v_d1 == ((PyObject*)Py_None));
  __pyx_t_5 = (__pyx_t_4 != 0);
  if (__pyx_t_5) {

    /* "automata/cautomata.pyx":181
 *     cdef int i
 *     if d1 is None:
 *         d1 = imagDict2(d, A)             # <<<<<<<<<<<<<<
 *     # print(d1)
 *     for i in range(r.n):
 */
    __pyx_t_1 = __pyx_f_8automata_9cautomata_imagDict2(__pyx_v_d, __pyx_v_A, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 181, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!(likely(PyDict_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_t_1)->tp_name), 0))) __PYX_ERR(0, 181, __pyx_L1_error)
    __Pyx_DECREF_SET(__pyx_v_d1, ((PyObject*)__pyx_t_1));
    __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":180
 *     sig_off()
 *     cdef int i
 *     if d1 is None:             # <<<<<<<<<<<<<<
 *         d1 = imagDict2(d, A)
 *     # print(d1)
 */
  }

  /* "automata/cautomata.pyx":183
 *         d1 = imagDict2(d, A)
 *     # print(d1)
 *     for i in range(r.n):             # <<<<<<<<<<<<<<
 *         if d.has_key(A[i]):
 *             sig_on()
 */
  __pyx_t_2 = __pyx_v_r.n;
  __pyx_t_6 = __pyx_t_2;
  for (__pyx_t_7 = 0; __pyx_t_7 < __pyx_t_6; __pyx_t_7+=1) {
    __pyx_v_i = __pyx_t_7;

    /* "automata/cautomata.pyx":184
 *     # print(d1)
 *     for i in range(r.n):
 *         if d.has_key(A[i]):             # <<<<<<<<<<<<<<
 *             sig_on()
 *             r.d[i] = NewDict(len(d[A[i]]))
 */
    if (unlikely(__pyx_v_d == Py_None)) {
      PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "has_key");
      __PYX_ERR(0, 184, __pyx_L1_error)
    }
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 184, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = PyDict_Contains(__pyx_v_d, __pyx_t_1); if (unlikely(__pyx_t_5 == ((int)-1))) __PYX_ERR(0, 184, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_4 = (__pyx_t_5 != 0);
    if (__pyx_t_4) {

      /* "automata/cautomata.pyx":185
 *     for i in range(r.n):
 *         if d.has_key(A[i]):
 *             sig_on()             # <<<<<<<<<<<<<<
 *             r.d[i] = NewDict(len(d[A[i]]))
 *             sig_off()
 */
      __pyx_t_8 = sig_on(); if (unlikely(__pyx_t_8 == ((int)0))) __PYX_ERR(0, 185, __pyx_L1_error)

      /* "automata/cautomata.pyx":186
 *         if d.has_key(A[i]):
 *             sig_on()
 *             r.d[i] = NewDict(len(d[A[i]]))             # <<<<<<<<<<<<<<
 *             sig_off()
 *             for j in range(r.d[i].n):
 */
      if (unlikely(__pyx_v_d == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 186, __pyx_L1_error)
      }
      __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 186, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_9 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_t_1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 186, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_3 = PyObject_Length(__pyx_t_9); if (unlikely(__pyx_t_3 == ((Py_ssize_t)-1))) __PYX_ERR(0, 186, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      (__pyx_v_r.d[__pyx_v_i]) = NewDict(__pyx_t_3);

      /* "automata/cautomata.pyx":187
 *             sig_on()
 *             r.d[i] = NewDict(len(d[A[i]]))
 *             sig_off()             # <<<<<<<<<<<<<<
 *             for j in range(r.d[i].n):
 *                 r.d[i].e[j] = d1[d[A[i]][j]]
 */
      sig_off();

      /* "automata/cautomata.pyx":188
 *             r.d[i] = NewDict(len(d[A[i]]))
 *             sig_off()
 *             for j in range(r.d[i].n):             # <<<<<<<<<<<<<<
 *                 r.d[i].e[j] = d1[d[A[i]][j]]
 *         else:
 */
      __pyx_t_8 = (__pyx_v_r.d[__pyx_v_i]).n;
      __pyx_t_10 = __pyx_t_8;
      for (__pyx_t_11 = 0; __pyx_t_11 < __pyx_t_10; __pyx_t_11+=1) {
        __pyx_v_j = __pyx_t_11;

        /* "automata/cautomata.pyx":189
 *             sig_off()
 *             for j in range(r.d[i].n):
 *                 r.d[i].e[j] = d1[d[A[i]][j]]             # <<<<<<<<<<<<<<
 *         else:
 *             r.d[i].n = 0
 */
        if (unlikely(__pyx_v_d1 == Py_None)) {
          PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
          __PYX_ERR(0, 189, __pyx_L1_error)
        }
        if (unlikely(__pyx_v_d == Py_None)) {
          PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
          __PYX_ERR(0, 189, __pyx_L1_error)
        }
        __pyx_t_9 = __Pyx_GetItemInt_List(__pyx_v_A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 189, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_t_9); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 189, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_t_1, __pyx_v_j, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 189, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_d1, __pyx_t_9); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 189, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_12 = __Pyx_PyInt_As_int(__pyx_t_1); if (unlikely((__pyx_t_12 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 189, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        ((__pyx_v_r.d[__pyx_v_i]).e[__pyx_v_j]) = __pyx_t_12;
      }

      /* "automata/cautomata.pyx":184
 *     # print(d1)
 *     for i in range(r.n):
 *         if d.has_key(A[i]):             # <<<<<<<<<<<<<<
 *             sig_on()
 *             r.d[i] = NewDict(len(d[A[i]]))
 */
      goto __pyx_L6;
    }

    /* "automata/cautomata.pyx":191
 *                 r.d[i].e[j] = d1[d[A[i]][j]]
 *         else:
 *             r.d[i].n = 0             # <<<<<<<<<<<<<<
 *     return r
 * 
 */
    /*else*/ {
      (__pyx_v_r.d[__pyx_v_i]).n = 0;
    }
    __pyx_L6:;
  }

  /* "automata/cautomata.pyx":192
 *         else:
 *             r.d[i].n = 0
 *     return r             # <<<<<<<<<<<<<<
 * 
 * cdef imagProductDict(dict d, list A1, list A2, list Av=[]):
 */
  __pyx_r = __pyx_v_r;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":173
 *     return d
 * 
 * cdef InvertDict getDict2(dict d, list A, dict d1=None):             # <<<<<<<<<<<<<<
 *     A = list(A)
 *     cdef InvertDict r
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_WriteUnraisable("automata.cautomata.getDict2", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __Pyx_pretend_to_initialize(&__pyx_r);
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_A);
  __Pyx_XDECREF(__pyx_v_d1);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":194
 *     return r
 * 
 * cdef imagProductDict(dict d, list A1, list A2, list Av=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary numbering the projected alphabet
 */

static PyObject *__pyx_f_8automata_9cautomata_imagProductDict(PyObject *__pyx_v_d, PyObject *__pyx_v_A1, PyObject *__pyx_v_A2, struct __pyx_opt_args_8automata_9cautomata_imagProductDict *__pyx_optional_args) {
  PyObject *__pyx_v_Av = __pyx_k__3;
  PyObject *__pyx_v_dv = NULL;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_a1 = NULL;
  PyObject *__pyx_v_a2 = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  __Pyx_RefNannySetupContext("imagProductDict", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_Av = __pyx_optional_args->Av;
    }
  }

  /* "automata/cautomata.pyx":198
 *     Dictionary numbering the projected alphabet
 *     """
 *     dv = {}             # <<<<<<<<<<<<<<
 *     i = 0
 *     for a1 in A1:
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 198, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_dv = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":199
 *     """
 *     dv = {}
 *     i = 0             # <<<<<<<<<<<<<<
 *     for a1 in A1:
 *         for a2 in A2:
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_v_i = __pyx_int_0;

  /* "automata/cautomata.pyx":200
 *     dv = {}
 *     i = 0
 *     for a1 in A1:             # <<<<<<<<<<<<<<
 *         for a2 in A2:
 *             if d.has_key((a1, a2)):
 */
  if (unlikely(__pyx_v_A1 == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 200, __pyx_L1_error)
  }
  __pyx_t_1 = __pyx_v_A1; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
  for (;;) {
    if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_3); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 200, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 200, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_a1, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":201
 *     i = 0
 *     for a1 in A1:
 *         for a2 in A2:             # <<<<<<<<<<<<<<
 *             if d.has_key((a1, a2)):
 *                 if not dv.has_key(d[(a1, a2)]):
 */
    if (unlikely(__pyx_v_A2 == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
      __PYX_ERR(0, 201, __pyx_L1_error)
    }
    __pyx_t_3 = __pyx_v_A2; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
    for (;;) {
      if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_5 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_5); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 201, __pyx_L1_error)
      #else
      __pyx_t_5 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 201, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      #endif
      __Pyx_XDECREF_SET(__pyx_v_a2, __pyx_t_5);
      __pyx_t_5 = 0;

      /* "automata/cautomata.pyx":202
 *     for a1 in A1:
 *         for a2 in A2:
 *             if d.has_key((a1, a2)):             # <<<<<<<<<<<<<<
 *                 if not dv.has_key(d[(a1, a2)]):
 *                     dv[d[(a1, a2)]] = i
 */
      if (unlikely(__pyx_v_d == Py_None)) {
        PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "has_key");
        __PYX_ERR(0, 202, __pyx_L1_error)
      }
      __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 202, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_v_a1);
      __Pyx_GIVEREF(__pyx_v_a1);
      PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_a1);
      __Pyx_INCREF(__pyx_v_a2);
      __Pyx_GIVEREF(__pyx_v_a2);
      PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_v_a2);
      __pyx_t_6 = PyDict_Contains(__pyx_v_d, __pyx_t_5); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 202, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_7 = (__pyx_t_6 != 0);
      if (__pyx_t_7) {

        /* "automata/cautomata.pyx":203
 *         for a2 in A2:
 *             if d.has_key((a1, a2)):
 *                 if not dv.has_key(d[(a1, a2)]):             # <<<<<<<<<<<<<<
 *                     dv[d[(a1, a2)]] = i
 *                     Av.append(d[(a1, a2)])
 */
        if (unlikely(__pyx_v_d == Py_None)) {
          PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
          __PYX_ERR(0, 203, __pyx_L1_error)
        }
        __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 203, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_INCREF(__pyx_v_a1);
        __Pyx_GIVEREF(__pyx_v_a1);
        PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_a1);
        __Pyx_INCREF(__pyx_v_a2);
        __Pyx_GIVEREF(__pyx_v_a2);
        PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_v_a2);
        __pyx_t_8 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_t_5); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 203, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __pyx_t_7 = PyDict_Contains(__pyx_v_dv, __pyx_t_8); if (unlikely(__pyx_t_7 == ((int)-1))) __PYX_ERR(0, 203, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_6 = ((!(__pyx_t_7 != 0)) != 0);
        if (__pyx_t_6) {

          /* "automata/cautomata.pyx":204
 *             if d.has_key((a1, a2)):
 *                 if not dv.has_key(d[(a1, a2)]):
 *                     dv[d[(a1, a2)]] = i             # <<<<<<<<<<<<<<
 *                     Av.append(d[(a1, a2)])
 *                     i += 1
 */
          if (unlikely(__pyx_v_d == Py_None)) {
            PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
            __PYX_ERR(0, 204, __pyx_L1_error)
          }
          __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 204, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_INCREF(__pyx_v_a1);
          __Pyx_GIVEREF(__pyx_v_a1);
          PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_v_a1);
          __Pyx_INCREF(__pyx_v_a2);
          __Pyx_GIVEREF(__pyx_v_a2);
          PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_v_a2);
          __pyx_t_5 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 204, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
          if (unlikely(PyDict_SetItem(__pyx_v_dv, __pyx_t_5, __pyx_v_i) < 0)) __PYX_ERR(0, 204, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

          /* "automata/cautomata.pyx":205
 *                 if not dv.has_key(d[(a1, a2)]):
 *                     dv[d[(a1, a2)]] = i
 *                     Av.append(d[(a1, a2)])             # <<<<<<<<<<<<<<
 *                     i += 1
 *     return dv
 */
          if (unlikely(__pyx_v_Av == Py_None)) {
            PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "append");
            __PYX_ERR(0, 205, __pyx_L1_error)
          }
          if (unlikely(__pyx_v_d == Py_None)) {
            PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
            __PYX_ERR(0, 205, __pyx_L1_error)
          }
          __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 205, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_INCREF(__pyx_v_a1);
          __Pyx_GIVEREF(__pyx_v_a1);
          PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_v_a1);
          __Pyx_INCREF(__pyx_v_a2);
          __Pyx_GIVEREF(__pyx_v_a2);
          PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_v_a2);
          __pyx_t_8 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_t_5); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 205, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
          __pyx_t_9 = __Pyx_PyList_Append(__pyx_v_Av, __pyx_t_8); if (unlikely(__pyx_t_9 == ((int)-1))) __PYX_ERR(0, 205, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;

          /* "automata/cautomata.pyx":206
 *                     dv[d[(a1, a2)]] = i
 *                     Av.append(d[(a1, a2)])
 *                     i += 1             # <<<<<<<<<<<<<<
 *     return dv
 * 
 */
          __pyx_t_8 = __Pyx_PyInt_AddObjC(__pyx_v_i, __pyx_int_1, 1, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 206, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_8);
          __pyx_t_8 = 0;

          /* "automata/cautomata.pyx":203
 *         for a2 in A2:
 *             if d.has_key((a1, a2)):
 *                 if not dv.has_key(d[(a1, a2)]):             # <<<<<<<<<<<<<<
 *                     dv[d[(a1, a2)]] = i
 *                     Av.append(d[(a1, a2)])
 */
        }

        /* "automata/cautomata.pyx":202
 *     for a1 in A1:
 *         for a2 in A2:
 *             if d.has_key((a1, a2)):             # <<<<<<<<<<<<<<
 *                 if not dv.has_key(d[(a1, a2)]):
 *                     dv[d[(a1, a2)]] = i
 */
      }

      /* "automata/cautomata.pyx":201
 *     i = 0
 *     for a1 in A1:
 *         for a2 in A2:             # <<<<<<<<<<<<<<
 *             if d.has_key((a1, a2)):
 *                 if not dv.has_key(d[(a1, a2)]):
 */
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":200
 *     dv = {}
 *     i = 0
 *     for a1 in A1:             # <<<<<<<<<<<<<<
 *         for a2 in A2:
 *             if d.has_key((a1, a2)):
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":207
 *                     Av.append(d[(a1, a2)])
 *                     i += 1
 *     return dv             # <<<<<<<<<<<<<<
 * 
 * cdef Dict getProductDict(dict d, list A1, list A2, dict dv=None, verb=True):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_dv);
  __pyx_r = __pyx_v_dv;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":194
 *     return r
 * 
 * cdef imagProductDict(dict d, list A1, list A2, list Av=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary numbering the projected alphabet
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("automata.cautomata.imagProductDict", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_dv);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_a1);
  __Pyx_XDECREF(__pyx_v_a2);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":209
 *     return dv
 * 
 * cdef Dict getProductDict(dict d, list A1, list A2, dict dv=None, verb=True):             # <<<<<<<<<<<<<<
 *     cdef Dict r
 *     d1 = {}
 */

static Dict __pyx_f_8automata_9cautomata_getProductDict(PyObject *__pyx_v_d, PyObject *__pyx_v_A1, PyObject *__pyx_v_A2, struct __pyx_opt_args_8automata_9cautomata_getProductDict *__pyx_optional_args) {
  PyObject *__pyx_v_dv = ((PyObject*)Py_None);
  PyObject *__pyx_v_verb = ((PyObject *)Py_True);
  Dict __pyx_v_r;
  PyObject *__pyx_v_d1 = NULL;
  PyObject *__pyx_v_d2 = NULL;
  int __pyx_v_i;
  int __pyx_v_n1;
  int __pyx_v_n2;
  PyObject *__pyx_v_Keys = NULL;
  PyObject *__pyx_v_a1 = NULL;
  PyObject *__pyx_v_a2 = NULL;
  Dict __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  int __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  int __pyx_t_8;
  PyObject *(*__pyx_t_9)(PyObject *);
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  PyObject *__pyx_t_12 = NULL;
  PyObject *(*__pyx_t_13)(PyObject *);
  int __pyx_t_14;
  Py_ssize_t __pyx_t_15;
  __Pyx_RefNannySetupContext("getProductDict", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_dv = __pyx_optional_args->dv;
      if (__pyx_optional_args->__pyx_n > 1) {
        __pyx_v_verb = __pyx_optional_args->verb;
      }
    }
  }
  __Pyx_INCREF(__pyx_v_dv);

  /* "automata/cautomata.pyx":211
 * cdef Dict getProductDict(dict d, list A1, list A2, dict dv=None, verb=True):
 *     cdef Dict r
 *     d1 = {}             # <<<<<<<<<<<<<<
 *     d2 = {}
 *     cdef int i, n1, n2
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 211, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_d1 = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":212
 *     cdef Dict r
 *     d1 = {}
 *     d2 = {}             # <<<<<<<<<<<<<<
 *     cdef int i, n1, n2
 *     n1 = len(A1)
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 212, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_d2 = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":214
 *     d2 = {}
 *     cdef int i, n1, n2
 *     n1 = len(A1)             # <<<<<<<<<<<<<<
 *     for i in range(n1):
 *         d1[A1[i]] = i
 */
  if (unlikely(__pyx_v_A1 == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 214, __pyx_L1_error)
  }
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_A1); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 214, __pyx_L1_error)
  __pyx_v_n1 = __pyx_t_2;

  /* "automata/cautomata.pyx":215
 *     cdef int i, n1, n2
 *     n1 = len(A1)
 *     for i in range(n1):             # <<<<<<<<<<<<<<
 *         d1[A1[i]] = i
 *     if verb:
 */
  __pyx_t_3 = __pyx_v_n1;
  __pyx_t_4 = __pyx_t_3;
  for (__pyx_t_5 = 0; __pyx_t_5 < __pyx_t_4; __pyx_t_5+=1) {
    __pyx_v_i = __pyx_t_5;

    /* "automata/cautomata.pyx":216
 *     n1 = len(A1)
 *     for i in range(n1):
 *         d1[A1[i]] = i             # <<<<<<<<<<<<<<
 *     if verb:
 *         print(d1)
 */
    __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 216, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (unlikely(__pyx_v_A1 == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 216, __pyx_L1_error)
    }
    __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_A1, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 216, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    if (unlikely(PyDict_SetItem(__pyx_v_d1, __pyx_t_6, __pyx_t_1) < 0)) __PYX_ERR(0, 216, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "automata/cautomata.pyx":217
 *     for i in range(n1):
 *         d1[A1[i]] = i
 *     if verb:             # <<<<<<<<<<<<<<
 *         print(d1)
 *     n2 = len(A2)
 */
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 217, __pyx_L1_error)
  if (__pyx_t_7) {

    /* "automata/cautomata.pyx":218
 *         d1[A1[i]] = i
 *     if verb:
 *         print(d1)             # <<<<<<<<<<<<<<
 *     n2 = len(A2)
 *     for i in range(n2):
 */
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_d1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 218, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":217
 *     for i in range(n1):
 *         d1[A1[i]] = i
 *     if verb:             # <<<<<<<<<<<<<<
 *         print(d1)
 *     n2 = len(A2)
 */
  }

  /* "automata/cautomata.pyx":219
 *     if verb:
 *         print(d1)
 *     n2 = len(A2)             # <<<<<<<<<<<<<<
 *     for i in range(n2):
 *         d2[A2[i]] = i
 */
  if (unlikely(__pyx_v_A2 == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 219, __pyx_L1_error)
  }
  __pyx_t_2 = PyList_GET_SIZE(__pyx_v_A2); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 219, __pyx_L1_error)
  __pyx_v_n2 = __pyx_t_2;

  /* "automata/cautomata.pyx":220
 *         print(d1)
 *     n2 = len(A2)
 *     for i in range(n2):             # <<<<<<<<<<<<<<
 *         d2[A2[i]] = i
 *     if verb:
 */
  __pyx_t_3 = __pyx_v_n2;
  __pyx_t_4 = __pyx_t_3;
  for (__pyx_t_5 = 0; __pyx_t_5 < __pyx_t_4; __pyx_t_5+=1) {
    __pyx_v_i = __pyx_t_5;

    /* "automata/cautomata.pyx":221
 *     n2 = len(A2)
 *     for i in range(n2):
 *         d2[A2[i]] = i             # <<<<<<<<<<<<<<
 *     if verb:
 *         print(d2)
 */
    __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 221, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (unlikely(__pyx_v_A2 == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 221, __pyx_L1_error)
    }
    __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_A2, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 221, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    if (unlikely(PyDict_SetItem(__pyx_v_d2, __pyx_t_6, __pyx_t_1) < 0)) __PYX_ERR(0, 221, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "automata/cautomata.pyx":222
 *     for i in range(n2):
 *         d2[A2[i]] = i
 *     if verb:             # <<<<<<<<<<<<<<
 *         print(d2)
 *     if dv is None:
 */
  __pyx_t_7 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_7 < 0)) __PYX_ERR(0, 222, __pyx_L1_error)
  if (__pyx_t_7) {

    /* "automata/cautomata.pyx":223
 *         d2[A2[i]] = i
 *     if verb:
 *         print(d2)             # <<<<<<<<<<<<<<
 *     if dv is None:
 *         dv = imagProductDict(d, A1, A2)
 */
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_d2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 223, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":222
 *     for i in range(n2):
 *         d2[A2[i]] = i
 *     if verb:             # <<<<<<<<<<<<<<
 *         print(d2)
 *     if dv is None:
 */
  }

  /* "automata/cautomata.pyx":224
 *     if verb:
 *         print(d2)
 *     if dv is None:             # <<<<<<<<<<<<<<
 *         dv = imagProductDict(d, A1, A2)
 *     sig_on()
 */
  __pyx_t_7 = (__pyx_v_dv == ((PyObject*)Py_None));
  __pyx_t_8 = (__pyx_t_7 != 0);
  if (__pyx_t_8) {

    /* "automata/cautomata.pyx":225
 *         print(d2)
 *     if dv is None:
 *         dv = imagProductDict(d, A1, A2)             # <<<<<<<<<<<<<<
 *     sig_on()
 *     r = NewDict(n1*n2)
 */
    __pyx_t_1 = __pyx_f_8automata_9cautomata_imagProductDict(__pyx_v_d, __pyx_v_A1, __pyx_v_A2, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 225, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (!(likely(PyDict_CheckExact(__pyx_t_1))||((__pyx_t_1) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_t_1)->tp_name), 0))) __PYX_ERR(0, 225, __pyx_L1_error)
    __Pyx_DECREF_SET(__pyx_v_dv, ((PyObject*)__pyx_t_1));
    __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":224
 *     if verb:
 *         print(d2)
 *     if dv is None:             # <<<<<<<<<<<<<<
 *         dv = imagProductDict(d, A1, A2)
 *     sig_on()
 */
  }

  /* "automata/cautomata.pyx":226
 *     if dv is None:
 *         dv = imagProductDict(d, A1, A2)
 *     sig_on()             # <<<<<<<<<<<<<<
 *     r = NewDict(n1*n2)
 *     sig_off()
 */
  __pyx_t_3 = sig_on(); if (unlikely(__pyx_t_3 == ((int)0))) __PYX_ERR(0, 226, __pyx_L1_error)

  /* "automata/cautomata.pyx":227
 *         dv = imagProductDict(d, A1, A2)
 *     sig_on()
 *     r = NewDict(n1*n2)             # <<<<<<<<<<<<<<
 *     sig_off()
 *     Keys = d.keys()
 */
  __pyx_v_r = NewDict((__pyx_v_n1 * __pyx_v_n2));

  /* "automata/cautomata.pyx":228
 *     sig_on()
 *     r = NewDict(n1*n2)
 *     sig_off()             # <<<<<<<<<<<<<<
 *     Keys = d.keys()
 *     if verb:
 */
  sig_off();

  /* "automata/cautomata.pyx":229
 *     r = NewDict(n1*n2)
 *     sig_off()
 *     Keys = d.keys()             # <<<<<<<<<<<<<<
 *     if verb:
 *         print("Keys=%s" % Keys)
 */
  if (unlikely(__pyx_v_d == Py_None)) {
    PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "keys");
    __PYX_ERR(0, 229, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_PyDict_Keys(__pyx_v_d); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 229, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_Keys = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":230
 *     sig_off()
 *     Keys = d.keys()
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("Keys=%s" % Keys)
 *     for (a1, a2) in Keys:
 */
  __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 230, __pyx_L1_error)
  if (__pyx_t_8) {

    /* "automata/cautomata.pyx":231
 *     Keys = d.keys()
 *     if verb:
 *         print("Keys=%s" % Keys)             # <<<<<<<<<<<<<<
 *     for (a1, a2) in Keys:
 *         if d1.has_key(a1) and d2.has_key(a2):
 */
    __pyx_t_1 = __Pyx_PyString_FormatSafe(__pyx_kp_s_Keys_s, __pyx_v_Keys); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_6 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

    /* "automata/cautomata.pyx":230
 *     sig_off()
 *     Keys = d.keys()
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("Keys=%s" % Keys)
 *     for (a1, a2) in Keys:
 */
  }

  /* "automata/cautomata.pyx":232
 *     if verb:
 *         print("Keys=%s" % Keys)
 *     for (a1, a2) in Keys:             # <<<<<<<<<<<<<<
 *         if d1.has_key(a1) and d2.has_key(a2):
 *             r.e[d1[a1]+d2[a2]*n1] = dv[d[(a1, a2)]]
 */
  if (likely(PyList_CheckExact(__pyx_v_Keys)) || PyTuple_CheckExact(__pyx_v_Keys)) {
    __pyx_t_6 = __pyx_v_Keys; __Pyx_INCREF(__pyx_t_6); __pyx_t_2 = 0;
    __pyx_t_9 = NULL;
  } else {
    __pyx_t_2 = -1; __pyx_t_6 = PyObject_GetIter(__pyx_v_Keys); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 232, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_9 = Py_TYPE(__pyx_t_6)->tp_iternext; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 232, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_9)) {
      if (likely(PyList_CheckExact(__pyx_t_6))) {
        if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_6, __pyx_t_2); __Pyx_INCREF(__pyx_t_1); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 232, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_6, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 232, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_2 >= PyTuple_GET_SIZE(__pyx_t_6)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_6, __pyx_t_2); __Pyx_INCREF(__pyx_t_1); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 232, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_6, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 232, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_9(__pyx_t_6);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 232, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
      PyObject* sequence = __pyx_t_1;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 2)) {
        if (size > 2) __Pyx_RaiseTooManyValuesError(2);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 232, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      if (likely(PyTuple_CheckExact(sequence))) {
        __pyx_t_10 = PyTuple_GET_ITEM(sequence, 0); 
        __pyx_t_11 = PyTuple_GET_ITEM(sequence, 1); 
      } else {
        __pyx_t_10 = PyList_GET_ITEM(sequence, 0); 
        __pyx_t_11 = PyList_GET_ITEM(sequence, 1); 
      }
      __Pyx_INCREF(__pyx_t_10);
      __Pyx_INCREF(__pyx_t_11);
      #else
      __pyx_t_10 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 232, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_11 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 232, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      #endif
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    } else {
      Py_ssize_t index = -1;
      __pyx_t_12 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 232, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_13 = Py_TYPE(__pyx_t_12)->tp_iternext;
      index = 0; __pyx_t_10 = __pyx_t_13(__pyx_t_12); if (unlikely(!__pyx_t_10)) goto __pyx_L13_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_10);
      index = 1; __pyx_t_11 = __pyx_t_13(__pyx_t_12); if (unlikely(!__pyx_t_11)) goto __pyx_L13_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_11);
      if (__Pyx_IternextUnpackEndCheck(__pyx_t_13(__pyx_t_12), 2) < 0) __PYX_ERR(0, 232, __pyx_L1_error)
      __pyx_t_13 = NULL;
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      goto __pyx_L14_unpacking_done;
      __pyx_L13_unpacking_failed:;
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_13 = NULL;
      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
      __PYX_ERR(0, 232, __pyx_L1_error)
      __pyx_L14_unpacking_done:;
    }
    __Pyx_XDECREF_SET(__pyx_v_a1, __pyx_t_10);
    __pyx_t_10 = 0;
    __Pyx_XDECREF_SET(__pyx_v_a2, __pyx_t_11);
    __pyx_t_11 = 0;

    /* "automata/cautomata.pyx":233
 *         print("Keys=%s" % Keys)
 *     for (a1, a2) in Keys:
 *         if d1.has_key(a1) and d2.has_key(a2):             # <<<<<<<<<<<<<<
 *             r.e[d1[a1]+d2[a2]*n1] = dv[d[(a1, a2)]]
 *     return r
 */
    __pyx_t_7 = PyDict_Contains(__pyx_v_d1, __pyx_v_a1); if (unlikely(__pyx_t_7 == ((int)-1))) __PYX_ERR(0, 233, __pyx_L1_error)
    __pyx_t_14 = (__pyx_t_7 != 0);
    if (__pyx_t_14) {
    } else {
      __pyx_t_8 = __pyx_t_14;
      goto __pyx_L16_bool_binop_done;
    }
    __pyx_t_14 = PyDict_Contains(__pyx_v_d2, __pyx_v_a2); if (unlikely(__pyx_t_14 == ((int)-1))) __PYX_ERR(0, 233, __pyx_L1_error)
    __pyx_t_7 = (__pyx_t_14 != 0);
    __pyx_t_8 = __pyx_t_7;
    __pyx_L16_bool_binop_done:;
    if (__pyx_t_8) {

      /* "automata/cautomata.pyx":234
 *     for (a1, a2) in Keys:
 *         if d1.has_key(a1) and d2.has_key(a2):
 *             r.e[d1[a1]+d2[a2]*n1] = dv[d[(a1, a2)]]             # <<<<<<<<<<<<<<
 *     return r
 * 
 */
      if (unlikely(__pyx_v_dv == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 234, __pyx_L1_error)
      }
      if (unlikely(__pyx_v_d == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 234, __pyx_L1_error)
      }
      __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 234, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_INCREF(__pyx_v_a1);
      __Pyx_GIVEREF(__pyx_v_a1);
      PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_a1);
      __Pyx_INCREF(__pyx_v_a2);
      __Pyx_GIVEREF(__pyx_v_a2);
      PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_a2);
      __pyx_t_11 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_t_1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 234, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_dv, __pyx_t_11); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 234, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __pyx_t_3 = __Pyx_PyInt_As_int(__pyx_t_1); if (unlikely((__pyx_t_3 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 234, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_d1, __pyx_v_a1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 234, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_11 = __Pyx_PyDict_GetItem(__pyx_v_d2, __pyx_v_a2); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 234, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __pyx_t_10 = __Pyx_PyInt_From_int(__pyx_v_n1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 234, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_12 = PyNumber_Multiply(__pyx_t_11, __pyx_t_10); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 234, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = PyNumber_Add(__pyx_t_1, __pyx_t_12); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 234, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_10); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 234, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      (__pyx_v_r.e[__pyx_t_15]) = __pyx_t_3;

      /* "automata/cautomata.pyx":233
 *         print("Keys=%s" % Keys)
 *     for (a1, a2) in Keys:
 *         if d1.has_key(a1) and d2.has_key(a2):             # <<<<<<<<<<<<<<
 *             r.e[d1[a1]+d2[a2]*n1] = dv[d[(a1, a2)]]
 *     return r
 */
    }

    /* "automata/cautomata.pyx":232
 *     if verb:
 *         print("Keys=%s" % Keys)
 *     for (a1, a2) in Keys:             # <<<<<<<<<<<<<<
 *         if d1.has_key(a1) and d2.has_key(a2):
 *             r.e[d1[a1]+d2[a2]*n1] = dv[d[(a1, a2)]]
 */
  }
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

  /* "automata/cautomata.pyx":235
 *         if d1.has_key(a1) and d2.has_key(a2):
 *             r.e[d1[a1]+d2[a2]*n1] = dv[d[(a1, a2)]]
 *     return r             # <<<<<<<<<<<<<<
 * 
 * cdef Automaton getAutomaton(a, initial=None, F=None, A=None):
 */
  __pyx_r = __pyx_v_r;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":209
 *     return dv
 * 
 * cdef Dict getProductDict(dict d, list A1, list A2, dict dv=None, verb=True):             # <<<<<<<<<<<<<<
 *     cdef Dict r
 *     d1 = {}
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_WriteUnraisable("automata.cautomata.getProductDict", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __Pyx_pretend_to_initialize(&__pyx_r);
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_d1);
  __Pyx_XDECREF(__pyx_v_d2);
  __Pyx_XDECREF(__pyx_v_Keys);
  __Pyx_XDECREF(__pyx_v_a1);
  __Pyx_XDECREF(__pyx_v_a2);
  __Pyx_XDECREF(__pyx_v_dv);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":237
 *     return r
 * 
 * cdef Automaton getAutomaton(a, initial=None, F=None, A=None):             # <<<<<<<<<<<<<<
 *     d = {}
 *     da = {}
 */

static Automaton __pyx_f_8automata_9cautomata_getAutomaton(PyObject *__pyx_v_a, struct __pyx_opt_args_8automata_9cautomata_getAutomaton *__pyx_optional_args) {
  PyObject *__pyx_v_initial = ((PyObject *)Py_None);
  PyObject *__pyx_v_F = ((PyObject *)Py_None);
  PyObject *__pyx_v_A = ((PyObject *)Py_None);
  PyObject *__pyx_v_d = NULL;
  PyObject *__pyx_v_da = NULL;
  Automaton __pyx_v_r;
  PyObject *__pyx_v_V = NULL;
  int __pyx_v_n;
  int __pyx_v_na;
  int __pyx_v_i;
  PyObject *__pyx_v_v = NULL;
  PyObject *__pyx_v_I = NULL;
  int __pyx_v_w;
  PyObject *__pyx_v_e = NULL;
  PyObject *__pyx_v_f = NULL;
  PyObject *__pyx_v_l = NULL;
  Automaton __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  Py_ssize_t __pyx_t_11;
  int __pyx_t_12;
  int __pyx_t_13;
  PyObject *(*__pyx_t_14)(PyObject *);
  Py_ssize_t __pyx_t_15;
  PyObject *__pyx_t_16 = NULL;
  PyObject *__pyx_t_17 = NULL;
  PyObject *(*__pyx_t_18)(PyObject *);
  Py_ssize_t __pyx_t_19;
  __Pyx_RefNannySetupContext("getAutomaton", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_initial = __pyx_optional_args->initial;
      if (__pyx_optional_args->__pyx_n > 1) {
        __pyx_v_F = __pyx_optional_args->F;
        if (__pyx_optional_args->__pyx_n > 2) {
          __pyx_v_A = __pyx_optional_args->A;
        }
      }
    }
  }
  __Pyx_INCREF(__pyx_v_F);
  __Pyx_INCREF(__pyx_v_A);

  /* "automata/cautomata.pyx":238
 * 
 * cdef Automaton getAutomaton(a, initial=None, F=None, A=None):
 *     d = {}             # <<<<<<<<<<<<<<
 *     da = {}
 *     if F is None:
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_d = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":239
 * cdef Automaton getAutomaton(a, initial=None, F=None, A=None):
 *     d = {}
 *     da = {}             # <<<<<<<<<<<<<<
 *     if F is None:
 *         if not hasattr(a, 'F'):
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 239, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_da = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":240
 *     d = {}
 *     da = {}
 *     if F is None:             # <<<<<<<<<<<<<<
 *         if not hasattr(a, 'F'):
 *             try:
 */
  __pyx_t_2 = (__pyx_v_F == Py_None);
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":241
 *     da = {}
 *     if F is None:
 *         if not hasattr(a, 'F'):             # <<<<<<<<<<<<<<
 *             try:
 *                 F = a.vertices()
 */
    __pyx_t_3 = __Pyx_HasAttr(__pyx_v_a, __pyx_n_s_F); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 241, __pyx_L1_error)
    __pyx_t_2 = ((!(__pyx_t_3 != 0)) != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":242
 *     if F is None:
 *         if not hasattr(a, 'F'):
 *             try:             # <<<<<<<<<<<<<<
 *                 F = a.vertices()
 *             except AttributeError:
 */
      {
        __Pyx_PyThreadState_declare
        __Pyx_PyThreadState_assign
        __Pyx_ExceptionSave(&__pyx_t_4, &__pyx_t_5, &__pyx_t_6);
        __Pyx_XGOTREF(__pyx_t_4);
        __Pyx_XGOTREF(__pyx_t_5);
        __Pyx_XGOTREF(__pyx_t_6);
        /*try:*/ {

          /* "automata/cautomata.pyx":243
 *         if not hasattr(a, 'F'):
 *             try:
 *                 F = a.vertices()             # <<<<<<<<<<<<<<
 *             except AttributeError:
 *                     raise AttributeError("No vertices() method")
 */
          __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_vertices); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 243, __pyx_L5_error)
          __Pyx_GOTREF(__pyx_t_7);
          __pyx_t_8 = NULL;
          if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
            __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_7);
            if (likely(__pyx_t_8)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
              __Pyx_INCREF(__pyx_t_8);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_7, function);
            }
          }
          __pyx_t_1 = (__pyx_t_8) ? __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_t_8) : __Pyx_PyObject_CallNoArg(__pyx_t_7);
          __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 243, __pyx_L5_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
          __Pyx_DECREF_SET(__pyx_v_F, __pyx_t_1);
          __pyx_t_1 = 0;

          /* "automata/cautomata.pyx":242
 *     if F is None:
 *         if not hasattr(a, 'F'):
 *             try:             # <<<<<<<<<<<<<<
 *                 F = a.vertices()
 *             except AttributeError:
 */
        }
        __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        goto __pyx_L10_try_end;
        __pyx_L5_error:;
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;

        /* "automata/cautomata.pyx":244
 *             try:
 *                 F = a.vertices()
 *             except AttributeError:             # <<<<<<<<<<<<<<
 *                     raise AttributeError("No vertices() method")
 *         else:
 */
        __pyx_t_9 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_AttributeError);
        if (__pyx_t_9) {
          __Pyx_AddTraceback("automata.cautomata.getAutomaton", __pyx_clineno, __pyx_lineno, __pyx_filename);
          if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_7, &__pyx_t_8) < 0) __PYX_ERR(0, 244, __pyx_L7_except_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_GOTREF(__pyx_t_7);
          __Pyx_GOTREF(__pyx_t_8);

          /* "automata/cautomata.pyx":245
 *                 F = a.vertices()
 *             except AttributeError:
 *                     raise AttributeError("No vertices() method")             # <<<<<<<<<<<<<<
 *         else:
 *             F = a.F
 */
          __pyx_t_10 = __Pyx_PyObject_Call(__pyx_builtin_AttributeError, __pyx_tuple__4, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 245, __pyx_L7_except_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_Raise(__pyx_t_10, 0, 0, 0);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
          __PYX_ERR(0, 245, __pyx_L7_except_error)
        }
        goto __pyx_L7_except_error;
        __pyx_L7_except_error:;

        /* "automata/cautomata.pyx":242
 *     if F is None:
 *         if not hasattr(a, 'F'):
 *             try:             # <<<<<<<<<<<<<<
 *                 F = a.vertices()
 *             except AttributeError:
 */
        __Pyx_XGIVEREF(__pyx_t_4);
        __Pyx_XGIVEREF(__pyx_t_5);
        __Pyx_XGIVEREF(__pyx_t_6);
        __Pyx_ExceptionReset(__pyx_t_4, __pyx_t_5, __pyx_t_6);
        goto __pyx_L1_error;
        __pyx_L10_try_end:;
      }

      /* "automata/cautomata.pyx":241
 *     da = {}
 *     if F is None:
 *         if not hasattr(a, 'F'):             # <<<<<<<<<<<<<<
 *             try:
 *                 F = a.vertices()
 */
      goto __pyx_L4;
    }

    /* "automata/cautomata.pyx":247
 *                     raise AttributeError("No vertices() method")
 *         else:
 *             F = a.F             # <<<<<<<<<<<<<<
 *     cdef Automaton r
 * 
 */
    /*else*/ {
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_F); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 247, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF_SET(__pyx_v_F, __pyx_t_8);
      __pyx_t_8 = 0;
    }
    __pyx_L4:;

    /* "automata/cautomata.pyx":240
 *     d = {}
 *     da = {}
 *     if F is None:             # <<<<<<<<<<<<<<
 *         if not hasattr(a, 'F'):
 *             try:
 */
  }

  /* "automata/cautomata.pyx":250
 *     cdef Automaton r
 * 
 *     if A is None:             # <<<<<<<<<<<<<<
 *         A = list(set(a.edge_labels()))
 *     V = list(a.vertices())
 */
  __pyx_t_2 = (__pyx_v_A == Py_None);
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":251
 * 
 *     if A is None:
 *         A = list(set(a.edge_labels()))             # <<<<<<<<<<<<<<
 *     V = list(a.vertices())
 * 
 */
    __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_edge_labels); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 251, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_1 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_7);
      if (likely(__pyx_t_1)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
        __Pyx_INCREF(__pyx_t_1);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_7, function);
      }
    }
    __pyx_t_8 = (__pyx_t_1) ? __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_t_1) : __Pyx_PyObject_CallNoArg(__pyx_t_7);
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 251, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = PySet_New(__pyx_t_8); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 251, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = PySequence_List(__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 251, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF_SET(__pyx_v_A, __pyx_t_8);
    __pyx_t_8 = 0;

    /* "automata/cautomata.pyx":250
 *     cdef Automaton r
 * 
 *     if A is None:             # <<<<<<<<<<<<<<
 *         A = list(set(a.edge_labels()))
 *     V = list(a.vertices())
 */
  }

  /* "automata/cautomata.pyx":252
 *     if A is None:
 *         A = list(set(a.edge_labels()))
 *     V = list(a.vertices())             # <<<<<<<<<<<<<<
 * 
 *     cdef int n = len(V)
 */
  __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_vertices); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 252, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_t_1 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
    __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_7);
    if (likely(__pyx_t_1)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
      __Pyx_INCREF(__pyx_t_1);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_7, function);
    }
  }
  __pyx_t_8 = (__pyx_t_1) ? __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_t_1) : __Pyx_PyObject_CallNoArg(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 252, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_8);
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = PySequence_List(__pyx_t_8); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 252, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_v_V = ((PyObject*)__pyx_t_7);
  __pyx_t_7 = 0;

  /* "automata/cautomata.pyx":254
 *     V = list(a.vertices())
 * 
 *     cdef int n = len(V)             # <<<<<<<<<<<<<<
 *     cdef int na = len(A)
 * 
 */
  __pyx_t_11 = PyList_GET_SIZE(__pyx_v_V); if (unlikely(__pyx_t_11 == ((Py_ssize_t)-1))) __PYX_ERR(0, 254, __pyx_L1_error)
  __pyx_v_n = __pyx_t_11;

  /* "automata/cautomata.pyx":255
 * 
 *     cdef int n = len(V)
 *     cdef int na = len(A)             # <<<<<<<<<<<<<<
 * 
 *     sig_on()
 */
  __pyx_t_11 = PyObject_Length(__pyx_v_A); if (unlikely(__pyx_t_11 == ((Py_ssize_t)-1))) __PYX_ERR(0, 255, __pyx_L1_error)
  __pyx_v_na = __pyx_t_11;

  /* "automata/cautomata.pyx":257
 *     cdef int na = len(A)
 * 
 *     sig_on()             # <<<<<<<<<<<<<<
 *     r = NewAutomaton(n, na)
 *     initAutomaton(&r)
 */
  __pyx_t_9 = sig_on(); if (unlikely(__pyx_t_9 == ((int)0))) __PYX_ERR(0, 257, __pyx_L1_error)

  /* "automata/cautomata.pyx":258
 * 
 *     sig_on()
 *     r = NewAutomaton(n, na)             # <<<<<<<<<<<<<<
 *     initAutomaton(&r)
 *     sig_off()
 */
  __pyx_v_r = NewAutomaton(__pyx_v_n, __pyx_v_na);

  /* "automata/cautomata.pyx":259
 *     sig_on()
 *     r = NewAutomaton(n, na)
 *     initAutomaton(&r)             # <<<<<<<<<<<<<<
 *     sig_off()
 *     for i in range(na):
 */
  initAutomaton((&__pyx_v_r));

  /* "automata/cautomata.pyx":260
 *     r = NewAutomaton(n, na)
 *     initAutomaton(&r)
 *     sig_off()             # <<<<<<<<<<<<<<
 *     for i in range(na):
 *         da[A[i]] = i
 */
  sig_off();

  /* "automata/cautomata.pyx":261
 *     initAutomaton(&r)
 *     sig_off()
 *     for i in range(na):             # <<<<<<<<<<<<<<
 *         da[A[i]] = i
 *     for i in range(n):
 */
  __pyx_t_9 = __pyx_v_na;
  __pyx_t_12 = __pyx_t_9;
  for (__pyx_t_13 = 0; __pyx_t_13 < __pyx_t_12; __pyx_t_13+=1) {
    __pyx_v_i = __pyx_t_13;

    /* "automata/cautomata.pyx":262
 *     sig_off()
 *     for i in range(na):
 *         da[A[i]] = i             # <<<<<<<<<<<<<<
 *     for i in range(n):
 *         r.e[i].final = 0
 */
    __pyx_t_7 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 262, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_8 = __Pyx_GetItemInt(__pyx_v_A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 262, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    if (unlikely(PyDict_SetItem(__pyx_v_da, __pyx_t_8, __pyx_t_7) < 0)) __PYX_ERR(0, 262, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  }

  /* "automata/cautomata.pyx":263
 *     for i in range(na):
 *         da[A[i]] = i
 *     for i in range(n):             # <<<<<<<<<<<<<<
 *         r.e[i].final = 0
 *         d[V[i]] = i
 */
  __pyx_t_9 = __pyx_v_n;
  __pyx_t_12 = __pyx_t_9;
  for (__pyx_t_13 = 0; __pyx_t_13 < __pyx_t_12; __pyx_t_13+=1) {
    __pyx_v_i = __pyx_t_13;

    /* "automata/cautomata.pyx":264
 *         da[A[i]] = i
 *     for i in range(n):
 *         r.e[i].final = 0             # <<<<<<<<<<<<<<
 *         d[V[i]] = i
 *     for v in F:
 */
    (__pyx_v_r.e[__pyx_v_i]).final = 0;

    /* "automata/cautomata.pyx":265
 *     for i in range(n):
 *         r.e[i].final = 0
 *         d[V[i]] = i             # <<<<<<<<<<<<<<
 *     for v in F:
 *         #if not d.has_key(v):
 */
    __pyx_t_7 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 265, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_8 = __Pyx_GetItemInt_List(__pyx_v_V, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 265, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_t_8, __pyx_t_7) < 0)) __PYX_ERR(0, 265, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  }

  /* "automata/cautomata.pyx":266
 *         r.e[i].final = 0
 *         d[V[i]] = i
 *     for v in F:             # <<<<<<<<<<<<<<
 *         #if not d.has_key(v):
 *         #    sig_on()
 */
  if (likely(PyList_CheckExact(__pyx_v_F)) || PyTuple_CheckExact(__pyx_v_F)) {
    __pyx_t_7 = __pyx_v_F; __Pyx_INCREF(__pyx_t_7); __pyx_t_11 = 0;
    __pyx_t_14 = NULL;
  } else {
    __pyx_t_11 = -1; __pyx_t_7 = PyObject_GetIter(__pyx_v_F); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 266, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_14 = Py_TYPE(__pyx_t_7)->tp_iternext; if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 266, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_14)) {
      if (likely(PyList_CheckExact(__pyx_t_7))) {
        if (__pyx_t_11 >= PyList_GET_SIZE(__pyx_t_7)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_8 = PyList_GET_ITEM(__pyx_t_7, __pyx_t_11); __Pyx_INCREF(__pyx_t_8); __pyx_t_11++; if (unlikely(0 < 0)) __PYX_ERR(0, 266, __pyx_L1_error)
        #else
        __pyx_t_8 = PySequence_ITEM(__pyx_t_7, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 266, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        #endif
      } else {
        if (__pyx_t_11 >= PyTuple_GET_SIZE(__pyx_t_7)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_8 = PyTuple_GET_ITEM(__pyx_t_7, __pyx_t_11); __Pyx_INCREF(__pyx_t_8); __pyx_t_11++; if (unlikely(0 < 0)) __PYX_ERR(0, 266, __pyx_L1_error)
        #else
        __pyx_t_8 = PySequence_ITEM(__pyx_t_7, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 266, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        #endif
      }
    } else {
      __pyx_t_8 = __pyx_t_14(__pyx_t_7);
      if (unlikely(!__pyx_t_8)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 266, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_8);
    }
    __Pyx_XDECREF_SET(__pyx_v_v, __pyx_t_8);
    __pyx_t_8 = 0;

    /* "automata/cautomata.pyx":273
 *         #    sig_off()
 *         #    raise ValueError("Incorrect set of final states.")
 *         if d.has_key(v):             # <<<<<<<<<<<<<<
 *             r.e[d[v]].final = 1
 * 
 */
    __pyx_t_3 = PyDict_Contains(__pyx_v_d, __pyx_v_v); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 273, __pyx_L1_error)
    __pyx_t_2 = (__pyx_t_3 != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":274
 *         #    raise ValueError("Incorrect set of final states.")
 *         if d.has_key(v):
 *             r.e[d[v]].final = 1             # <<<<<<<<<<<<<<
 * 
 *     if initial is None:
 */
      __pyx_t_8 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_v); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 274, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_8); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 274, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      (__pyx_v_r.e[__pyx_t_15]).final = 1;

      /* "automata/cautomata.pyx":273
 *         #    sig_off()
 *         #    raise ValueError("Incorrect set of final states.")
 *         if d.has_key(v):             # <<<<<<<<<<<<<<
 *             r.e[d[v]].final = 1
 * 
 */
    }

    /* "automata/cautomata.pyx":266
 *         r.e[i].final = 0
 *         d[V[i]] = i
 *     for v in F:             # <<<<<<<<<<<<<<
 *         #if not d.has_key(v):
 *         #    sig_on()
 */
  }
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

  /* "automata/cautomata.pyx":276
 *             r.e[d[v]].final = 1
 * 
 *     if initial is None:             # <<<<<<<<<<<<<<
 *         if not hasattr(a, 'I'):
 *             I = []
 */
  __pyx_t_2 = (__pyx_v_initial == Py_None);
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":277
 * 
 *     if initial is None:
 *         if not hasattr(a, 'I'):             # <<<<<<<<<<<<<<
 *             I = []
 *         else:
 */
    __pyx_t_3 = __Pyx_HasAttr(__pyx_v_a, __pyx_n_s_I); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 277, __pyx_L1_error)
    __pyx_t_2 = ((!(__pyx_t_3 != 0)) != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":278
 *     if initial is None:
 *         if not hasattr(a, 'I'):
 *             I = []             # <<<<<<<<<<<<<<
 *         else:
 *             I = list(a.I)
 */
      __pyx_t_7 = PyList_New(0); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 278, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_v_I = ((PyObject*)__pyx_t_7);
      __pyx_t_7 = 0;

      /* "automata/cautomata.pyx":277
 * 
 *     if initial is None:
 *         if not hasattr(a, 'I'):             # <<<<<<<<<<<<<<
 *             I = []
 *         else:
 */
      goto __pyx_L22;
    }

    /* "automata/cautomata.pyx":280
 *             I = []
 *         else:
 *             I = list(a.I)             # <<<<<<<<<<<<<<
 *         if len(I) > 1:
 *             raise ValueError("The automata must be determistic (I=%s)" % I)
 */
    /*else*/ {
      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_I); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 280, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_8 = PySequence_List(__pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 280, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_v_I = ((PyObject*)__pyx_t_8);
      __pyx_t_8 = 0;
    }
    __pyx_L22:;

    /* "automata/cautomata.pyx":281
 *         else:
 *             I = list(a.I)
 *         if len(I) > 1:             # <<<<<<<<<<<<<<
 *             raise ValueError("The automata must be determistic (I=%s)" % I)
 *         if len(I) >= 1:
 */
    __pyx_t_11 = PyList_GET_SIZE(__pyx_v_I); if (unlikely(__pyx_t_11 == ((Py_ssize_t)-1))) __PYX_ERR(0, 281, __pyx_L1_error)
    __pyx_t_2 = ((__pyx_t_11 > 1) != 0);
    if (unlikely(__pyx_t_2)) {

      /* "automata/cautomata.pyx":282
 *             I = list(a.I)
 *         if len(I) > 1:
 *             raise ValueError("The automata must be determistic (I=%s)" % I)             # <<<<<<<<<<<<<<
 *         if len(I) >= 1:
 *             r.i = d[I[0]]
 */
      __pyx_t_8 = __Pyx_PyString_Format(__pyx_kp_s_The_automata_must_be_determistic, __pyx_v_I); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 282, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_7 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_8); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 282, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_Raise(__pyx_t_7, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __PYX_ERR(0, 282, __pyx_L1_error)

      /* "automata/cautomata.pyx":281
 *         else:
 *             I = list(a.I)
 *         if len(I) > 1:             # <<<<<<<<<<<<<<
 *             raise ValueError("The automata must be determistic (I=%s)" % I)
 *         if len(I) >= 1:
 */
    }

    /* "automata/cautomata.pyx":283
 *         if len(I) > 1:
 *             raise ValueError("The automata must be determistic (I=%s)" % I)
 *         if len(I) >= 1:             # <<<<<<<<<<<<<<
 *             r.i = d[I[0]]
 *         else:
 */
    __pyx_t_11 = PyList_GET_SIZE(__pyx_v_I); if (unlikely(__pyx_t_11 == ((Py_ssize_t)-1))) __PYX_ERR(0, 283, __pyx_L1_error)
    __pyx_t_2 = ((__pyx_t_11 >= 1) != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":284
 *             raise ValueError("The automata must be determistic (I=%s)" % I)
 *         if len(I) >= 1:
 *             r.i = d[I[0]]             # <<<<<<<<<<<<<<
 *         else:
 *             r.i = -1
 */
      __pyx_t_7 = __Pyx_GetItemInt_List(__pyx_v_I, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 284, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_8 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 284, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_9 = __Pyx_PyInt_As_int(__pyx_t_8); if (unlikely((__pyx_t_9 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 284, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_v_r.i = __pyx_t_9;

      /* "automata/cautomata.pyx":283
 *         if len(I) > 1:
 *             raise ValueError("The automata must be determistic (I=%s)" % I)
 *         if len(I) >= 1:             # <<<<<<<<<<<<<<
 *             r.i = d[I[0]]
 *         else:
 */
      goto __pyx_L24;
    }

    /* "automata/cautomata.pyx":286
 *             r.i = d[I[0]]
 *         else:
 *             r.i = -1             # <<<<<<<<<<<<<<
 *     else:
 *         if d.has_key(initial):
 */
    /*else*/ {
      __pyx_v_r.i = -1;
    }
    __pyx_L24:;

    /* "automata/cautomata.pyx":276
 *             r.e[d[v]].final = 1
 * 
 *     if initial is None:             # <<<<<<<<<<<<<<
 *         if not hasattr(a, 'I'):
 *             I = []
 */
    goto __pyx_L21;
  }

  /* "automata/cautomata.pyx":288
 *             r.i = -1
 *     else:
 *         if d.has_key(initial):             # <<<<<<<<<<<<<<
 *             r.i = d[initial]
 *         else:
 */
  /*else*/ {
    __pyx_t_2 = PyDict_Contains(__pyx_v_d, __pyx_v_initial); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 288, __pyx_L1_error)
    __pyx_t_3 = (__pyx_t_2 != 0);
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":289
 *     else:
 *         if d.has_key(initial):
 *             r.i = d[initial]             # <<<<<<<<<<<<<<
 *         else:
 *             r.i = -1
 */
      __pyx_t_8 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_initial); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 289, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = __Pyx_PyInt_As_int(__pyx_t_8); if (unlikely((__pyx_t_9 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 289, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_v_r.i = __pyx_t_9;

      /* "automata/cautomata.pyx":288
 *             r.i = -1
 *     else:
 *         if d.has_key(initial):             # <<<<<<<<<<<<<<
 *             r.i = d[initial]
 *         else:
 */
      goto __pyx_L25;
    }

    /* "automata/cautomata.pyx":291
 *             r.i = d[initial]
 *         else:
 *             r.i = -1             # <<<<<<<<<<<<<<
 * 
 *     w = False
 */
    /*else*/ {
      __pyx_v_r.i = -1;
    }
    __pyx_L25:;
  }
  __pyx_L21:;

  /* "automata/cautomata.pyx":293
 *             r.i = -1
 * 
 *     w = False             # <<<<<<<<<<<<<<
 *     for e, f, l in a.edges(sort=False):
 *         if r.e[d[e]].f[da[l]] != -1:
 */
  __pyx_v_w = 0;

  /* "automata/cautomata.pyx":294
 * 
 *     w = False
 *     for e, f, l in a.edges(sort=False):             # <<<<<<<<<<<<<<
 *         if r.e[d[e]].f[da[l]] != -1:
 *             if not w:
 */
  __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_edges); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 294, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_8);
  __pyx_t_7 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 294, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  if (PyDict_SetItem(__pyx_t_7, __pyx_n_s_sort, Py_False) < 0) __PYX_ERR(0, 294, __pyx_L1_error)
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_8, __pyx_empty_tuple, __pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 294, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
    __pyx_t_7 = __pyx_t_1; __Pyx_INCREF(__pyx_t_7); __pyx_t_11 = 0;
    __pyx_t_14 = NULL;
  } else {
    __pyx_t_11 = -1; __pyx_t_7 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 294, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_14 = Py_TYPE(__pyx_t_7)->tp_iternext; if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 294, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  for (;;) {
    if (likely(!__pyx_t_14)) {
      if (likely(PyList_CheckExact(__pyx_t_7))) {
        if (__pyx_t_11 >= PyList_GET_SIZE(__pyx_t_7)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_7, __pyx_t_11); __Pyx_INCREF(__pyx_t_1); __pyx_t_11++; if (unlikely(0 < 0)) __PYX_ERR(0, 294, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_7, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 294, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_11 >= PyTuple_GET_SIZE(__pyx_t_7)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_7, __pyx_t_11); __Pyx_INCREF(__pyx_t_1); __pyx_t_11++; if (unlikely(0 < 0)) __PYX_ERR(0, 294, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_7, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 294, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_14(__pyx_t_7);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 294, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    if ((likely(PyTuple_CheckExact(__pyx_t_1))) || (PyList_CheckExact(__pyx_t_1))) {
      PyObject* sequence = __pyx_t_1;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 3)) {
        if (size > 3) __Pyx_RaiseTooManyValuesError(3);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 294, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      if (likely(PyTuple_CheckExact(sequence))) {
        __pyx_t_8 = PyTuple_GET_ITEM(sequence, 0); 
        __pyx_t_10 = PyTuple_GET_ITEM(sequence, 1); 
        __pyx_t_16 = PyTuple_GET_ITEM(sequence, 2); 
      } else {
        __pyx_t_8 = PyList_GET_ITEM(sequence, 0); 
        __pyx_t_10 = PyList_GET_ITEM(sequence, 1); 
        __pyx_t_16 = PyList_GET_ITEM(sequence, 2); 
      }
      __Pyx_INCREF(__pyx_t_8);
      __Pyx_INCREF(__pyx_t_10);
      __Pyx_INCREF(__pyx_t_16);
      #else
      __pyx_t_8 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 294, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_10 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 294, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_16 = PySequence_ITEM(sequence, 2); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 294, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_16);
      #endif
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    } else {
      Py_ssize_t index = -1;
      __pyx_t_17 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 294, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_17);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_18 = Py_TYPE(__pyx_t_17)->tp_iternext;
      index = 0; __pyx_t_8 = __pyx_t_18(__pyx_t_17); if (unlikely(!__pyx_t_8)) goto __pyx_L28_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_8);
      index = 1; __pyx_t_10 = __pyx_t_18(__pyx_t_17); if (unlikely(!__pyx_t_10)) goto __pyx_L28_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_10);
      index = 2; __pyx_t_16 = __pyx_t_18(__pyx_t_17); if (unlikely(!__pyx_t_16)) goto __pyx_L28_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_16);
      if (__Pyx_IternextUnpackEndCheck(__pyx_t_18(__pyx_t_17), 3) < 0) __PYX_ERR(0, 294, __pyx_L1_error)
      __pyx_t_18 = NULL;
      __Pyx_DECREF(__pyx_t_17); __pyx_t_17 = 0;
      goto __pyx_L29_unpacking_done;
      __pyx_L28_unpacking_failed:;
      __Pyx_DECREF(__pyx_t_17); __pyx_t_17 = 0;
      __pyx_t_18 = NULL;
      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
      __PYX_ERR(0, 294, __pyx_L1_error)
      __pyx_L29_unpacking_done:;
    }
    __Pyx_XDECREF_SET(__pyx_v_e, __pyx_t_8);
    __pyx_t_8 = 0;
    __Pyx_XDECREF_SET(__pyx_v_f, __pyx_t_10);
    __pyx_t_10 = 0;
    __Pyx_XDECREF_SET(__pyx_v_l, __pyx_t_16);
    __pyx_t_16 = 0;

    /* "automata/cautomata.pyx":295
 *     w = False
 *     for e, f, l in a.edges(sort=False):
 *         if r.e[d[e]].f[da[l]] != -1:             # <<<<<<<<<<<<<<
 *             if not w:
 *                 print("Warning: the automaton was not deterministic! (edge %s -%s-> %s and edge %s -%s-> %s)\nThe result lost some informations."% (d[e], l, r.e[d[e]].f[da[l]], d[e], l, d[f]))
 */
    __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 295, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_1); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 295, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_da, __pyx_v_l); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 295, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_19 = __Pyx_PyIndex_AsSsize_t(__pyx_t_1); if (unlikely((__pyx_t_19 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 295, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_3 = ((((__pyx_v_r.e[__pyx_t_15]).f[__pyx_t_19]) != -1L) != 0);
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":296
 *     for e, f, l in a.edges(sort=False):
 *         if r.e[d[e]].f[da[l]] != -1:
 *             if not w:             # <<<<<<<<<<<<<<
 *                 print("Warning: the automaton was not deterministic! (edge %s -%s-> %s and edge %s -%s-> %s)\nThe result lost some informations."% (d[e], l, r.e[d[e]].f[da[l]], d[e], l, d[f]))
 *             w = True
 */
      __pyx_t_3 = ((!(__pyx_v_w != 0)) != 0);
      if (__pyx_t_3) {

        /* "automata/cautomata.pyx":297
 *         if r.e[d[e]].f[da[l]] != -1:
 *             if not w:
 *                 print("Warning: the automaton was not deterministic! (edge %s -%s-> %s and edge %s -%s-> %s)\nThe result lost some informations."% (d[e], l, r.e[d[e]].f[da[l]], d[e], l, d[f]))             # <<<<<<<<<<<<<<
 *             w = True
 *         r.e[d[e]].f[da[l]] = d[f]
 */
        __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 297, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_16 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 297, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_16);
        __pyx_t_19 = __Pyx_PyIndex_AsSsize_t(__pyx_t_16); if (unlikely((__pyx_t_19 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 297, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
        __pyx_t_16 = __Pyx_PyDict_GetItem(__pyx_v_da, __pyx_v_l); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 297, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_16);
        __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_16); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 297, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
        __pyx_t_16 = __Pyx_PyInt_From_int(((__pyx_v_r.e[__pyx_t_19]).f[__pyx_t_15])); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 297, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_16);
        __pyx_t_10 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 297, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_8 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_f); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 297, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __pyx_t_17 = PyTuple_New(6); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 297, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_17);
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_17, 0, __pyx_t_1);
        __Pyx_INCREF(__pyx_v_l);
        __Pyx_GIVEREF(__pyx_v_l);
        PyTuple_SET_ITEM(__pyx_t_17, 1, __pyx_v_l);
        __Pyx_GIVEREF(__pyx_t_16);
        PyTuple_SET_ITEM(__pyx_t_17, 2, __pyx_t_16);
        __Pyx_GIVEREF(__pyx_t_10);
        PyTuple_SET_ITEM(__pyx_t_17, 3, __pyx_t_10);
        __Pyx_INCREF(__pyx_v_l);
        __Pyx_GIVEREF(__pyx_v_l);
        PyTuple_SET_ITEM(__pyx_t_17, 4, __pyx_v_l);
        __Pyx_GIVEREF(__pyx_t_8);
        PyTuple_SET_ITEM(__pyx_t_17, 5, __pyx_t_8);
        __pyx_t_1 = 0;
        __pyx_t_16 = 0;
        __pyx_t_10 = 0;
        __pyx_t_8 = 0;
        __pyx_t_8 = __Pyx_PyString_Format(__pyx_kp_s_Warning_the_automaton_was_not_de, __pyx_t_17); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 297, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_DECREF(__pyx_t_17); __pyx_t_17 = 0;
        __pyx_t_17 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_8); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 297, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_17);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_DECREF(__pyx_t_17); __pyx_t_17 = 0;

        /* "automata/cautomata.pyx":296
 *     for e, f, l in a.edges(sort=False):
 *         if r.e[d[e]].f[da[l]] != -1:
 *             if not w:             # <<<<<<<<<<<<<<
 *                 print("Warning: the automaton was not deterministic! (edge %s -%s-> %s and edge %s -%s-> %s)\nThe result lost some informations."% (d[e], l, r.e[d[e]].f[da[l]], d[e], l, d[f]))
 *             w = True
 */
      }

      /* "automata/cautomata.pyx":298
 *             if not w:
 *                 print("Warning: the automaton was not deterministic! (edge %s -%s-> %s and edge %s -%s-> %s)\nThe result lost some informations."% (d[e], l, r.e[d[e]].f[da[l]], d[e], l, d[f]))
 *             w = True             # <<<<<<<<<<<<<<
 *         r.e[d[e]].f[da[l]] = d[f]
 *     #a.dA = da
 */
      __pyx_v_w = 1;

      /* "automata/cautomata.pyx":295
 *     w = False
 *     for e, f, l in a.edges(sort=False):
 *         if r.e[d[e]].f[da[l]] != -1:             # <<<<<<<<<<<<<<
 *             if not w:
 *                 print("Warning: the automaton was not deterministic! (edge %s -%s-> %s and edge %s -%s-> %s)\nThe result lost some informations."% (d[e], l, r.e[d[e]].f[da[l]], d[e], l, d[f]))
 */
    }

    /* "automata/cautomata.pyx":299
 *                 print("Warning: the automaton was not deterministic! (edge %s -%s-> %s and edge %s -%s-> %s)\nThe result lost some informations."% (d[e], l, r.e[d[e]].f[da[l]], d[e], l, d[f]))
 *             w = True
 *         r.e[d[e]].f[da[l]] = d[f]             # <<<<<<<<<<<<<<
 *     #a.dA = da
 *     a.S = V
 */
    __pyx_t_17 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_f); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 299, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_17);
    __pyx_t_9 = __Pyx_PyInt_As_int(__pyx_t_17); if (unlikely((__pyx_t_9 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 299, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_17); __pyx_t_17 = 0;
    __pyx_t_17 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 299, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_17);
    __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_17); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 299, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_17); __pyx_t_17 = 0;
    __pyx_t_17 = __Pyx_PyDict_GetItem(__pyx_v_da, __pyx_v_l); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 299, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_17);
    __pyx_t_19 = __Pyx_PyIndex_AsSsize_t(__pyx_t_17); if (unlikely((__pyx_t_19 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 299, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_17); __pyx_t_17 = 0;
    ((__pyx_v_r.e[__pyx_t_15]).f[__pyx_t_19]) = __pyx_t_9;

    /* "automata/cautomata.pyx":294
 * 
 *     w = False
 *     for e, f, l in a.edges(sort=False):             # <<<<<<<<<<<<<<
 *         if r.e[d[e]].f[da[l]] != -1:
 *             if not w:
 */
  }
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

  /* "automata/cautomata.pyx":301
 *         r.e[d[e]].f[da[l]] = d[f]
 *     #a.dA = da
 *     a.S = V             # <<<<<<<<<<<<<<
 *     #a.dS = d
 *     return r
 */
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_a, __pyx_n_s_S, __pyx_v_V) < 0) __PYX_ERR(0, 301, __pyx_L1_error)

  /* "automata/cautomata.pyx":303
 *     a.S = V
 *     #a.dS = d
 *     return r             # <<<<<<<<<<<<<<
 * 
 * cdef NAutomaton getNAutomaton(a, I=None, F=None, A=None, verb=False):
 */
  __pyx_r = __pyx_v_r;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":237
 *     return r
 * 
 * cdef Automaton getAutomaton(a, initial=None, F=None, A=None):             # <<<<<<<<<<<<<<
 *     d = {}
 *     da = {}
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_16);
  __Pyx_XDECREF(__pyx_t_17);
  __Pyx_WriteUnraisable("automata.cautomata.getAutomaton", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __Pyx_pretend_to_initialize(&__pyx_r);
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF(__pyx_v_da);
  __Pyx_XDECREF(__pyx_v_V);
  __Pyx_XDECREF(__pyx_v_v);
  __Pyx_XDECREF(__pyx_v_I);
  __Pyx_XDECREF(__pyx_v_e);
  __Pyx_XDECREF(__pyx_v_f);
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XDECREF(__pyx_v_F);
  __Pyx_XDECREF(__pyx_v_A);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":305
 *     return r
 * 
 * cdef NAutomaton getNAutomaton(a, I=None, F=None, A=None, verb=False):             # <<<<<<<<<<<<<<
 *     d = {}
 *     da = {}
 */

static NAutomaton __pyx_f_8automata_9cautomata_getNAutomaton(PyObject *__pyx_v_a, struct __pyx_opt_args_8automata_9cautomata_getNAutomaton *__pyx_optional_args) {
  PyObject *__pyx_v_I = ((PyObject *)Py_None);
  PyObject *__pyx_v_F = ((PyObject *)Py_None);
  PyObject *__pyx_v_A = ((PyObject *)Py_None);
  PyObject *__pyx_v_verb = ((PyObject *)Py_False);
  PyObject *__pyx_v_d = NULL;
  PyObject *__pyx_v_da = NULL;
  PyObject *__pyx_v_dt = NULL;
  NAutomaton __pyx_v_r;
  PyObject *__pyx_v_V = NULL;
  int __pyx_v_n;
  int __pyx_v_na;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_v = NULL;
  PyObject *__pyx_v_e = NULL;
  PyObject *__pyx_v_f = NULL;
  PyObject *__pyx_v_l = NULL;
  NAutomaton __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  Py_ssize_t __pyx_t_6;
  int __pyx_t_7;
  PyObject *(*__pyx_t_8)(PyObject *);
  Py_ssize_t __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  PyObject *__pyx_t_12 = NULL;
  PyObject *(*__pyx_t_13)(PyObject *);
  int __pyx_t_14;
  Py_ssize_t __pyx_t_15;
  PyObject *__pyx_t_16 = NULL;
  Py_ssize_t __pyx_t_17;
  __Pyx_RefNannySetupContext("getNAutomaton", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_I = __pyx_optional_args->I;
      if (__pyx_optional_args->__pyx_n > 1) {
        __pyx_v_F = __pyx_optional_args->F;
        if (__pyx_optional_args->__pyx_n > 2) {
          __pyx_v_A = __pyx_optional_args->A;
          if (__pyx_optional_args->__pyx_n > 3) {
            __pyx_v_verb = __pyx_optional_args->verb;
          }
        }
      }
    }
  }
  __Pyx_INCREF(__pyx_v_I);
  __Pyx_INCREF(__pyx_v_F);
  __Pyx_INCREF(__pyx_v_A);

  /* "automata/cautomata.pyx":306
 * 
 * cdef NAutomaton getNAutomaton(a, I=None, F=None, A=None, verb=False):
 *     d = {}             # <<<<<<<<<<<<<<
 *     da = {}
 *     dt = {}
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 306, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_d = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":307
 * cdef NAutomaton getNAutomaton(a, I=None, F=None, A=None, verb=False):
 *     d = {}
 *     da = {}             # <<<<<<<<<<<<<<
 *     dt = {}
 *     if F is None:
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 307, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_da = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":308
 *     d = {}
 *     da = {}
 *     dt = {}             # <<<<<<<<<<<<<<
 *     if F is None:
 *         if not hasattr(a, 'F'):
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 308, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_dt = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":309
 *     da = {}
 *     dt = {}
 *     if F is None:             # <<<<<<<<<<<<<<
 *         if not hasattr(a, 'F'):
 *             F = a.vertices()
 */
  __pyx_t_2 = (__pyx_v_F == Py_None);
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":310
 *     dt = {}
 *     if F is None:
 *         if not hasattr(a, 'F'):             # <<<<<<<<<<<<<<
 *             F = a.vertices()
 *         else:
 */
    __pyx_t_3 = __Pyx_HasAttr(__pyx_v_a, __pyx_n_s_F); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 310, __pyx_L1_error)
    __pyx_t_2 = ((!(__pyx_t_3 != 0)) != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":311
 *     if F is None:
 *         if not hasattr(a, 'F'):
 *             F = a.vertices()             # <<<<<<<<<<<<<<
 *         else:
 *             F = a.F
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_vertices); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 311, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      __pyx_t_1 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 311, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF_SET(__pyx_v_F, __pyx_t_1);
      __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":310
 *     dt = {}
 *     if F is None:
 *         if not hasattr(a, 'F'):             # <<<<<<<<<<<<<<
 *             F = a.vertices()
 *         else:
 */
      goto __pyx_L4;
    }

    /* "automata/cautomata.pyx":313
 *             F = a.vertices()
 *         else:
 *             F = a.F             # <<<<<<<<<<<<<<
 *     if I is None:
 *         if not hasattr(a, 'I'):
 */
    /*else*/ {
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_F); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 313, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF_SET(__pyx_v_F, __pyx_t_1);
      __pyx_t_1 = 0;
    }
    __pyx_L4:;

    /* "automata/cautomata.pyx":309
 *     da = {}
 *     dt = {}
 *     if F is None:             # <<<<<<<<<<<<<<
 *         if not hasattr(a, 'F'):
 *             F = a.vertices()
 */
  }

  /* "automata/cautomata.pyx":314
 *         else:
 *             F = a.F
 *     if I is None:             # <<<<<<<<<<<<<<
 *         if not hasattr(a, 'I'):
 *             I = a.vertices()
 */
  __pyx_t_2 = (__pyx_v_I == Py_None);
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":315
 *             F = a.F
 *     if I is None:
 *         if not hasattr(a, 'I'):             # <<<<<<<<<<<<<<
 *             I = a.vertices()
 *         else:
 */
    __pyx_t_3 = __Pyx_HasAttr(__pyx_v_a, __pyx_n_s_I); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 315, __pyx_L1_error)
    __pyx_t_2 = ((!(__pyx_t_3 != 0)) != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":316
 *     if I is None:
 *         if not hasattr(a, 'I'):
 *             I = a.vertices()             # <<<<<<<<<<<<<<
 *         else:
 *             I = a.I
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_vertices); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 316, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      __pyx_t_1 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 316, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF_SET(__pyx_v_I, __pyx_t_1);
      __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":315
 *             F = a.F
 *     if I is None:
 *         if not hasattr(a, 'I'):             # <<<<<<<<<<<<<<
 *             I = a.vertices()
 *         else:
 */
      goto __pyx_L6;
    }

    /* "automata/cautomata.pyx":318
 *             I = a.vertices()
 *         else:
 *             I = a.I             # <<<<<<<<<<<<<<
 *     cdef NAutomaton r
 * 
 */
    /*else*/ {
      __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_I); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 318, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF_SET(__pyx_v_I, __pyx_t_1);
      __pyx_t_1 = 0;
    }
    __pyx_L6:;

    /* "automata/cautomata.pyx":314
 *         else:
 *             F = a.F
 *     if I is None:             # <<<<<<<<<<<<<<
 *         if not hasattr(a, 'I'):
 *             I = a.vertices()
 */
  }

  /* "automata/cautomata.pyx":321
 *     cdef NAutomaton r
 * 
 *     if A is None:             # <<<<<<<<<<<<<<
 *         A = list(a.Alphabet)
 * 
 */
  __pyx_t_2 = (__pyx_v_A == Py_None);
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":322
 * 
 *     if A is None:
 *         A = list(a.Alphabet)             # <<<<<<<<<<<<<<
 * 
 *     V = list(a.vertices())
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_Alphabet); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 322, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = PySequence_List(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 322, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF_SET(__pyx_v_A, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":321
 *     cdef NAutomaton r
 * 
 *     if A is None:             # <<<<<<<<<<<<<<
 *         A = list(a.Alphabet)
 * 
 */
  }

  /* "automata/cautomata.pyx":324
 *         A = list(a.Alphabet)
 * 
 *     V = list(a.vertices())             # <<<<<<<<<<<<<<
 *     cdef int n = len(V)
 *     cdef int na = len(A)
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_vertices); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 324, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_5 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
    __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_1);
    if (likely(__pyx_t_5)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_5);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_1, function);
    }
  }
  __pyx_t_4 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 324, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PySequence_List(__pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 324, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_V = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":325
 * 
 *     V = list(a.vertices())
 *     cdef int n = len(V)             # <<<<<<<<<<<<<<
 *     cdef int na = len(A)
 * 
 */
  __pyx_t_6 = PyList_GET_SIZE(__pyx_v_V); if (unlikely(__pyx_t_6 == ((Py_ssize_t)-1))) __PYX_ERR(0, 325, __pyx_L1_error)
  __pyx_v_n = __pyx_t_6;

  /* "automata/cautomata.pyx":326
 *     V = list(a.vertices())
 *     cdef int n = len(V)
 *     cdef int na = len(A)             # <<<<<<<<<<<<<<
 * 
 *     if verb:
 */
  __pyx_t_6 = PyObject_Length(__pyx_v_A); if (unlikely(__pyx_t_6 == ((Py_ssize_t)-1))) __PYX_ERR(0, 326, __pyx_L1_error)
  __pyx_v_na = __pyx_t_6;

  /* "automata/cautomata.pyx":328
 *     cdef int na = len(A)
 * 
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("vertices=%s" % V)
 * 
 */
  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 328, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":329
 * 
 *     if verb:
 *         print("vertices=%s" % V)             # <<<<<<<<<<<<<<
 * 
 *     if verb:
 */
    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_vertices_s, __pyx_v_V); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 329, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 329, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":328
 *     cdef int na = len(A)
 * 
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("vertices=%s" % V)
 * 
 */
  }

  /* "automata/cautomata.pyx":331
 *         print("vertices=%s" % V)
 * 
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("Alloc(%s, %s) and init..." % (n, na))
 *     sig_on()
 */
  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 331, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":332
 * 
 *     if verb:
 *         print("Alloc(%s, %s) and init..." % (n, na))             # <<<<<<<<<<<<<<
 *     sig_on()
 *     r = NewNAutomaton(n, na)
 */
    __pyx_t_4 = __Pyx_PyInt_From_int(__pyx_v_n); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 332, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_na); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 332, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 332, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_1);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_1);
    __pyx_t_4 = 0;
    __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_Alloc_s_s_and_init, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 332, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 332, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":331
 *         print("vertices=%s" % V)
 * 
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("Alloc(%s, %s) and init..." % (n, na))
 *     sig_on()
 */
  }

  /* "automata/cautomata.pyx":333
 *     if verb:
 *         print("Alloc(%s, %s) and init..." % (n, na))
 *     sig_on()             # <<<<<<<<<<<<<<
 *     r = NewNAutomaton(n, na)
 *     # initNAutomaton(&r)
 */
  __pyx_t_7 = sig_on(); if (unlikely(__pyx_t_7 == ((int)0))) __PYX_ERR(0, 333, __pyx_L1_error)

  /* "automata/cautomata.pyx":334
 *         print("Alloc(%s, %s) and init..." % (n, na))
 *     sig_on()
 *     r = NewNAutomaton(n, na)             # <<<<<<<<<<<<<<
 *     # initNAutomaton(&r)
 *     sig_off()
 */
  __pyx_v_r = NewNAutomaton(__pyx_v_n, __pyx_v_na);

  /* "automata/cautomata.pyx":336
 *     r = NewNAutomaton(n, na)
 *     # initNAutomaton(&r)
 *     sig_off()             # <<<<<<<<<<<<<<
 *     if verb:
 *         print("init...")
 */
  sig_off();

  /* "automata/cautomata.pyx":337
 *     # initNAutomaton(&r)
 *     sig_off()
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("init...")
 *     for i in range(n):
 */
  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 337, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":338
 *     sig_off()
 *     if verb:
 *         print("init...")             # <<<<<<<<<<<<<<
 *     for i in range(n):
 *         d[V[i]] = i
 */
    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__5, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 338, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":337
 *     # initNAutomaton(&r)
 *     sig_off()
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("init...")
 *     for i in range(n):
 */
  }

  /* "automata/cautomata.pyx":339
 *     if verb:
 *         print("init...")
 *     for i in range(n):             # <<<<<<<<<<<<<<
 *         d[V[i]] = i
 *         dt[V[i]] = []
 */
  __pyx_t_5 = __Pyx_PyInt_From_int(__pyx_v_n); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 339, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 339, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
    __pyx_t_5 = __pyx_t_1; __Pyx_INCREF(__pyx_t_5); __pyx_t_6 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_6 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 339, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = Py_TYPE(__pyx_t_5)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 339, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(PyList_CheckExact(__pyx_t_5))) {
        if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_5)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 339, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 339, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 339, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 339, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_8(__pyx_t_5);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 339, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":340
 *         print("init...")
 *     for i in range(n):
 *         d[V[i]] = i             # <<<<<<<<<<<<<<
 *         dt[V[i]] = []
 *     for i in range(na):
 */
    __pyx_t_1 = __Pyx_PyObject_GetItem(__pyx_v_V, __pyx_v_i); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 340, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_t_1, __pyx_v_i) < 0)) __PYX_ERR(0, 340, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":341
 *     for i in range(n):
 *         d[V[i]] = i
 *         dt[V[i]] = []             # <<<<<<<<<<<<<<
 *     for i in range(na):
 *         da[A[i]] = i
 */
    __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_PyObject_GetItem(__pyx_v_V, __pyx_v_i); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if (unlikely(PyDict_SetItem(__pyx_v_dt, __pyx_t_4, __pyx_t_1) < 0)) __PYX_ERR(0, 341, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":339
 *     if verb:
 *         print("init...")
 *     for i in range(n):             # <<<<<<<<<<<<<<
 *         d[V[i]] = i
 *         dt[V[i]] = []
 */
  }
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "automata/cautomata.pyx":342
 *         d[V[i]] = i
 *         dt[V[i]] = []
 *     for i in range(na):             # <<<<<<<<<<<<<<
 *         da[A[i]] = i
 *     if verb:
 */
  __pyx_t_5 = __Pyx_PyInt_From_int(__pyx_v_na); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 342, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 342, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
    __pyx_t_5 = __pyx_t_1; __Pyx_INCREF(__pyx_t_5); __pyx_t_6 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_6 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 342, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = Py_TYPE(__pyx_t_5)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 342, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(PyList_CheckExact(__pyx_t_5))) {
        if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_5)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 342, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 342, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 342, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 342, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_8(__pyx_t_5);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 342, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":343
 *         dt[V[i]] = []
 *     for i in range(na):
 *         da[A[i]] = i             # <<<<<<<<<<<<<<
 *     if verb:
 *         print("final states...")
 */
    __pyx_t_1 = __Pyx_PyObject_GetItem(__pyx_v_A, __pyx_v_i); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 343, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    if (unlikely(PyDict_SetItem(__pyx_v_da, __pyx_t_1, __pyx_v_i) < 0)) __PYX_ERR(0, 343, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":342
 *         d[V[i]] = i
 *         dt[V[i]] = []
 *     for i in range(na):             # <<<<<<<<<<<<<<
 *         da[A[i]] = i
 *     if verb:
 */
  }
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "automata/cautomata.pyx":344
 *     for i in range(na):
 *         da[A[i]] = i
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("final states...")
 *     for v in F:
 */
  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 344, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":345
 *         da[A[i]] = i
 *     if verb:
 *         print("final states...")             # <<<<<<<<<<<<<<
 *     for v in F:
 *         if not d.has_key(v):
 */
    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__6, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 345, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":344
 *     for i in range(na):
 *         da[A[i]] = i
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("final states...")
 *     for v in F:
 */
  }

  /* "automata/cautomata.pyx":346
 *     if verb:
 *         print("final states...")
 *     for v in F:             # <<<<<<<<<<<<<<
 *         if not d.has_key(v):
 *             sig_on()
 */
  if (likely(PyList_CheckExact(__pyx_v_F)) || PyTuple_CheckExact(__pyx_v_F)) {
    __pyx_t_5 = __pyx_v_F; __Pyx_INCREF(__pyx_t_5); __pyx_t_6 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_6 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_v_F); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 346, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = Py_TYPE(__pyx_t_5)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 346, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(PyList_CheckExact(__pyx_t_5))) {
        if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_5)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 346, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 346, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_1); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 346, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 346, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_8(__pyx_t_5);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 346, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    __Pyx_XDECREF_SET(__pyx_v_v, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":347
 *         print("final states...")
 *     for v in F:
 *         if not d.has_key(v):             # <<<<<<<<<<<<<<
 *             sig_on()
 *             FreeNAutomaton(&r)
 */
    __pyx_t_3 = PyDict_Contains(__pyx_v_d, __pyx_v_v); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 347, __pyx_L1_error)
    __pyx_t_2 = ((!(__pyx_t_3 != 0)) != 0);
    if (unlikely(__pyx_t_2)) {

      /* "automata/cautomata.pyx":348
 *     for v in F:
 *         if not d.has_key(v):
 *             sig_on()             # <<<<<<<<<<<<<<
 *             FreeNAutomaton(&r)
 *             sig_off()
 */
      __pyx_t_7 = sig_on(); if (unlikely(__pyx_t_7 == ((int)0))) __PYX_ERR(0, 348, __pyx_L1_error)

      /* "automata/cautomata.pyx":349
 *         if not d.has_key(v):
 *             sig_on()
 *             FreeNAutomaton(&r)             # <<<<<<<<<<<<<<
 *             sig_off()
 *             raise ValueError("Incorrect set of final states.")
 */
      FreeNAutomaton((&__pyx_v_r));

      /* "automata/cautomata.pyx":350
 *             sig_on()
 *             FreeNAutomaton(&r)
 *             sig_off()             # <<<<<<<<<<<<<<
 *             raise ValueError("Incorrect set of final states.")
 *         if verb:
 */
      sig_off();

      /* "automata/cautomata.pyx":351
 *             FreeNAutomaton(&r)
 *             sig_off()
 *             raise ValueError("Incorrect set of final states.")             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("d[%s]=%s" % (v, d[v]))
 */
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__7, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 351, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_Raise(__pyx_t_1, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __PYX_ERR(0, 351, __pyx_L1_error)

      /* "automata/cautomata.pyx":347
 *         print("final states...")
 *     for v in F:
 *         if not d.has_key(v):             # <<<<<<<<<<<<<<
 *             sig_on()
 *             FreeNAutomaton(&r)
 */
    }

    /* "automata/cautomata.pyx":352
 *             sig_off()
 *             raise ValueError("Incorrect set of final states.")
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("d[%s]=%s" % (v, d[v]))
 *         r.e[d[v]].final = 1
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 352, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":353
 *             raise ValueError("Incorrect set of final states.")
 *         if verb:
 *             print("d[%s]=%s" % (v, d[v]))             # <<<<<<<<<<<<<<
 *         r.e[d[v]].final = 1
 *     if verb:
 */
      __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_v); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 353, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 353, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_v_v);
      __Pyx_GIVEREF(__pyx_v_v);
      PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_v);
      __Pyx_GIVEREF(__pyx_t_1);
      PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_1);
      __pyx_t_1 = 0;
      __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_d_s_s, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 353, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 353, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":352
 *             sig_off()
 *             raise ValueError("Incorrect set of final states.")
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("d[%s]=%s" % (v, d[v]))
 *         r.e[d[v]].final = 1
 */
    }

    /* "automata/cautomata.pyx":354
 *         if verb:
 *             print("d[%s]=%s" % (v, d[v]))
 *         r.e[d[v]].final = 1             # <<<<<<<<<<<<<<
 *     if verb:
 *         print("initial states...")
 */
    __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_v); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 354, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_9 = __Pyx_PyIndex_AsSsize_t(__pyx_t_4); if (unlikely((__pyx_t_9 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 354, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    (__pyx_v_r.e[__pyx_t_9]).final = 1;

    /* "automata/cautomata.pyx":346
 *     if verb:
 *         print("final states...")
 *     for v in F:             # <<<<<<<<<<<<<<
 *         if not d.has_key(v):
 *             sig_on()
 */
  }
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "automata/cautomata.pyx":355
 *             print("d[%s]=%s" % (v, d[v]))
 *         r.e[d[v]].final = 1
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("initial states...")
 *     for v in I:
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 355, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":356
 *         r.e[d[v]].final = 1
 *     if verb:
 *         print("initial states...")             # <<<<<<<<<<<<<<
 *     for v in I:
 *         if not d.has_key(v):
 */
    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__8, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 356, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":355
 *             print("d[%s]=%s" % (v, d[v]))
 *         r.e[d[v]].final = 1
 *     if verb:             # <<<<<<<<<<<<<<
 *         print("initial states...")
 *     for v in I:
 */
  }

  /* "automata/cautomata.pyx":357
 *     if verb:
 *         print("initial states...")
 *     for v in I:             # <<<<<<<<<<<<<<
 *         if not d.has_key(v):
 *             sig_on()
 */
  if (likely(PyList_CheckExact(__pyx_v_I)) || PyTuple_CheckExact(__pyx_v_I)) {
    __pyx_t_5 = __pyx_v_I; __Pyx_INCREF(__pyx_t_5); __pyx_t_6 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_6 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_v_I); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 357, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = Py_TYPE(__pyx_t_5)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 357, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(PyList_CheckExact(__pyx_t_5))) {
        if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_5)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_4); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 357, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 357, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_4); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 357, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 357, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_8(__pyx_t_5);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 357, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_XDECREF_SET(__pyx_v_v, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":358
 *         print("initial states...")
 *     for v in I:
 *         if not d.has_key(v):             # <<<<<<<<<<<<<<
 *             sig_on()
 *             FreeNAutomaton(&r)
 */
    __pyx_t_2 = PyDict_Contains(__pyx_v_d, __pyx_v_v); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 358, __pyx_L1_error)
    __pyx_t_3 = ((!(__pyx_t_2 != 0)) != 0);
    if (unlikely(__pyx_t_3)) {

      /* "automata/cautomata.pyx":359
 *     for v in I:
 *         if not d.has_key(v):
 *             sig_on()             # <<<<<<<<<<<<<<
 *             FreeNAutomaton(&r)
 *             sig_off()
 */
      __pyx_t_7 = sig_on(); if (unlikely(__pyx_t_7 == ((int)0))) __PYX_ERR(0, 359, __pyx_L1_error)

      /* "automata/cautomata.pyx":360
 *         if not d.has_key(v):
 *             sig_on()
 *             FreeNAutomaton(&r)             # <<<<<<<<<<<<<<
 *             sig_off()
 *             raise ValueError("Incorrect set of final states.")
 */
      FreeNAutomaton((&__pyx_v_r));

      /* "automata/cautomata.pyx":361
 *             sig_on()
 *             FreeNAutomaton(&r)
 *             sig_off()             # <<<<<<<<<<<<<<
 *             raise ValueError("Incorrect set of final states.")
 *         if verb:
 */
      sig_off();

      /* "automata/cautomata.pyx":362
 *             FreeNAutomaton(&r)
 *             sig_off()
 *             raise ValueError("Incorrect set of final states.")             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("d[%s]=%s" % (v, d[v]))
 */
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__7, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 362, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_Raise(__pyx_t_4, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __PYX_ERR(0, 362, __pyx_L1_error)

      /* "automata/cautomata.pyx":358
 *         print("initial states...")
 *     for v in I:
 *         if not d.has_key(v):             # <<<<<<<<<<<<<<
 *             sig_on()
 *             FreeNAutomaton(&r)
 */
    }

    /* "automata/cautomata.pyx":363
 *             sig_off()
 *             raise ValueError("Incorrect set of final states.")
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("d[%s]=%s" % (v, d[v]))
 *         r.e[d[v]].initial = 1
 */
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 363, __pyx_L1_error)
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":364
 *             raise ValueError("Incorrect set of final states.")
 *         if verb:
 *             print("d[%s]=%s" % (v, d[v]))             # <<<<<<<<<<<<<<
 *         r.e[d[v]].initial = 1
 * 
 */
      __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_v); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 364, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 364, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_INCREF(__pyx_v_v);
      __Pyx_GIVEREF(__pyx_v_v);
      PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_v_v);
      __Pyx_GIVEREF(__pyx_t_4);
      PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_4);
      __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_d_s_s, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 364, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 364, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":363
 *             sig_off()
 *             raise ValueError("Incorrect set of final states.")
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("d[%s]=%s" % (v, d[v]))
 *         r.e[d[v]].initial = 1
 */
    }

    /* "automata/cautomata.pyx":365
 *         if verb:
 *             print("d[%s]=%s" % (v, d[v]))
 *         r.e[d[v]].initial = 1             # <<<<<<<<<<<<<<
 * 
 *     if verb:
 */
    __pyx_t_1 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_v); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 365, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_9 = __Pyx_PyIndex_AsSsize_t(__pyx_t_1); if (unlikely((__pyx_t_9 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 365, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    (__pyx_v_r.e[__pyx_t_9]).initial = 1;

    /* "automata/cautomata.pyx":357
 *     if verb:
 *         print("initial states...")
 *     for v in I:             # <<<<<<<<<<<<<<
 *         if not d.has_key(v):
 *             sig_on()
 */
  }
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "automata/cautomata.pyx":367
 *         r.e[d[v]].initial = 1
 * 
 *     if verb:             # <<<<<<<<<<<<<<
 *         print(dt)
 *         print("browse transitions...")
 */
  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 367, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":368
 * 
 *     if verb:
 *         print(dt)             # <<<<<<<<<<<<<<
 *         print("browse transitions...")
 * 
 */
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_dt); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 368, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":369
 *     if verb:
 *         print(dt)
 *         print("browse transitions...")             # <<<<<<<<<<<<<<
 * 
 *     for e, f, l in a.edges():
 */
    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__9, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 369, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":367
 *         r.e[d[v]].initial = 1
 * 
 *     if verb:             # <<<<<<<<<<<<<<
 *         print(dt)
 *         print("browse transitions...")
 */
  }

  /* "automata/cautomata.pyx":371
 *         print("browse transitions...")
 * 
 *     for e, f, l in a.edges():             # <<<<<<<<<<<<<<
 *         if dt.has_key(e):
 *             dt[e].append((f, l))
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_edges); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 371, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_1);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_1, function);
    }
  }
  __pyx_t_5 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 371, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (likely(PyList_CheckExact(__pyx_t_5)) || PyTuple_CheckExact(__pyx_t_5)) {
    __pyx_t_1 = __pyx_t_5; __Pyx_INCREF(__pyx_t_1); __pyx_t_6 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_6 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_5); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 371, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_8 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 371, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_6); __Pyx_INCREF(__pyx_t_5); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 371, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_1, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 371, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_6); __Pyx_INCREF(__pyx_t_5); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 371, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_1, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 371, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_8(__pyx_t_1);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 371, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    if ((likely(PyTuple_CheckExact(__pyx_t_5))) || (PyList_CheckExact(__pyx_t_5))) {
      PyObject* sequence = __pyx_t_5;
      Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
      if (unlikely(size != 3)) {
        if (size > 3) __Pyx_RaiseTooManyValuesError(3);
        else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
        __PYX_ERR(0, 371, __pyx_L1_error)
      }
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      if (likely(PyTuple_CheckExact(sequence))) {
        __pyx_t_4 = PyTuple_GET_ITEM(sequence, 0); 
        __pyx_t_10 = PyTuple_GET_ITEM(sequence, 1); 
        __pyx_t_11 = PyTuple_GET_ITEM(sequence, 2); 
      } else {
        __pyx_t_4 = PyList_GET_ITEM(sequence, 0); 
        __pyx_t_10 = PyList_GET_ITEM(sequence, 1); 
        __pyx_t_11 = PyList_GET_ITEM(sequence, 2); 
      }
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_10);
      __Pyx_INCREF(__pyx_t_11);
      #else
      __pyx_t_4 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 371, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_10 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 371, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_11 = PySequence_ITEM(sequence, 2); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 371, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      #endif
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    } else {
      Py_ssize_t index = -1;
      __pyx_t_12 = PyObject_GetIter(__pyx_t_5); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 371, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_13 = Py_TYPE(__pyx_t_12)->tp_iternext;
      index = 0; __pyx_t_4 = __pyx_t_13(__pyx_t_12); if (unlikely(!__pyx_t_4)) goto __pyx_L28_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_4);
      index = 1; __pyx_t_10 = __pyx_t_13(__pyx_t_12); if (unlikely(!__pyx_t_10)) goto __pyx_L28_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_10);
      index = 2; __pyx_t_11 = __pyx_t_13(__pyx_t_12); if (unlikely(!__pyx_t_11)) goto __pyx_L28_unpacking_failed;
      __Pyx_GOTREF(__pyx_t_11);
      if (__Pyx_IternextUnpackEndCheck(__pyx_t_13(__pyx_t_12), 3) < 0) __PYX_ERR(0, 371, __pyx_L1_error)
      __pyx_t_13 = NULL;
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      goto __pyx_L29_unpacking_done;
      __pyx_L28_unpacking_failed:;
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_13 = NULL;
      if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
      __PYX_ERR(0, 371, __pyx_L1_error)
      __pyx_L29_unpacking_done:;
    }
    __Pyx_XDECREF_SET(__pyx_v_e, __pyx_t_4);
    __pyx_t_4 = 0;
    __Pyx_XDECREF_SET(__pyx_v_f, __pyx_t_10);
    __pyx_t_10 = 0;
    __Pyx_XDECREF_SET(__pyx_v_l, __pyx_t_11);
    __pyx_t_11 = 0;

    /* "automata/cautomata.pyx":372
 * 
 *     for e, f, l in a.edges():
 *         if dt.has_key(e):             # <<<<<<<<<<<<<<
 *             dt[e].append((f, l))
 *         else:
 */
    __pyx_t_3 = PyDict_Contains(__pyx_v_dt, __pyx_v_e); if (unlikely(__pyx_t_3 == ((int)-1))) __PYX_ERR(0, 372, __pyx_L1_error)
    __pyx_t_2 = (__pyx_t_3 != 0);
    if (likely(__pyx_t_2)) {

      /* "automata/cautomata.pyx":373
 *     for e, f, l in a.edges():
 *         if dt.has_key(e):
 *             dt[e].append((f, l))             # <<<<<<<<<<<<<<
 *         else:
 *             raise MemoryError("This transition %s -%s-> %s starts from a state not in the set of states."%(e, l, f))
 */
      __pyx_t_5 = __Pyx_PyDict_GetItem(__pyx_v_dt, __pyx_v_e); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 373, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_11 = PyTuple_New(2); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 373, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_INCREF(__pyx_v_f);
      __Pyx_GIVEREF(__pyx_v_f);
      PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_v_f);
      __Pyx_INCREF(__pyx_v_l);
      __Pyx_GIVEREF(__pyx_v_l);
      PyTuple_SET_ITEM(__pyx_t_11, 1, __pyx_v_l);
      __pyx_t_14 = __Pyx_PyObject_Append(__pyx_t_5, __pyx_t_11); if (unlikely(__pyx_t_14 == ((int)-1))) __PYX_ERR(0, 373, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;

      /* "automata/cautomata.pyx":372
 * 
 *     for e, f, l in a.edges():
 *         if dt.has_key(e):             # <<<<<<<<<<<<<<
 *             dt[e].append((f, l))
 *         else:
 */
      goto __pyx_L30;
    }

    /* "automata/cautomata.pyx":375
 *             dt[e].append((f, l))
 *         else:
 *             raise MemoryError("This transition %s -%s-> %s starts from a state not in the set of states."%(e, l, f))             # <<<<<<<<<<<<<<
 *     if verb:
 *         print(dt)
 */
    /*else*/ {
      __pyx_t_11 = PyTuple_New(3); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 375, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_INCREF(__pyx_v_e);
      __Pyx_GIVEREF(__pyx_v_e);
      PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_v_e);
      __Pyx_INCREF(__pyx_v_l);
      __Pyx_GIVEREF(__pyx_v_l);
      PyTuple_SET_ITEM(__pyx_t_11, 1, __pyx_v_l);
      __Pyx_INCREF(__pyx_v_f);
      __Pyx_GIVEREF(__pyx_v_f);
      PyTuple_SET_ITEM(__pyx_t_11, 2, __pyx_v_f);
      __pyx_t_5 = __Pyx_PyString_Format(__pyx_kp_s_This_transition_s_s_s_starts_fro, __pyx_t_11); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 375, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __pyx_t_11 = __Pyx_PyObject_CallOneArg(__pyx_builtin_MemoryError, __pyx_t_5); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 375, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_Raise(__pyx_t_11, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __PYX_ERR(0, 375, __pyx_L1_error)
    }
    __pyx_L30:;

    /* "automata/cautomata.pyx":371
 *         print("browse transitions...")
 * 
 *     for e, f, l in a.edges():             # <<<<<<<<<<<<<<
 *         if dt.has_key(e):
 *             dt[e].append((f, l))
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":376
 *         else:
 *             raise MemoryError("This transition %s -%s-> %s starts from a state not in the set of states."%(e, l, f))
 *     if verb:             # <<<<<<<<<<<<<<
 *         print(dt)
 *         print("Alloc...")
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 376, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":377
 *             raise MemoryError("This transition %s -%s-> %s starts from a state not in the set of states."%(e, l, f))
 *     if verb:
 *         print(dt)             # <<<<<<<<<<<<<<
 *         print("Alloc...")
 *     for e in V:
 */
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_dt); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 377, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":378
 *     if verb:
 *         print(dt)
 *         print("Alloc...")             # <<<<<<<<<<<<<<
 *     for e in V:
 *         r.e[d[e]].n = len(dt[e])
 */
    __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__10, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 378, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":376
 *         else:
 *             raise MemoryError("This transition %s -%s-> %s starts from a state not in the set of states."%(e, l, f))
 *     if verb:             # <<<<<<<<<<<<<<
 *         print(dt)
 *         print("Alloc...")
 */
  }

  /* "automata/cautomata.pyx":379
 *         print(dt)
 *         print("Alloc...")
 *     for e in V:             # <<<<<<<<<<<<<<
 *         r.e[d[e]].n = len(dt[e])
 *         if verb:
 */
  __pyx_t_1 = __pyx_v_V; __Pyx_INCREF(__pyx_t_1); __pyx_t_6 = 0;
  for (;;) {
    if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_11 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_6); __Pyx_INCREF(__pyx_t_11); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 379, __pyx_L1_error)
    #else
    __pyx_t_11 = PySequence_ITEM(__pyx_t_1, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 379, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_e, __pyx_t_11);
    __pyx_t_11 = 0;

    /* "automata/cautomata.pyx":380
 *         print("Alloc...")
 *     for e in V:
 *         r.e[d[e]].n = len(dt[e])             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("alloc r.e[%s].a (%s elements, %so total)" % (d[e], r.e[d[e]].n, sizeof(Transition)*r.e[d[e]].n))
 */
    __pyx_t_11 = __Pyx_PyDict_GetItem(__pyx_v_dt, __pyx_v_e); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 380, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __pyx_t_9 = PyObject_Length(__pyx_t_11); if (unlikely(__pyx_t_9 == ((Py_ssize_t)-1))) __PYX_ERR(0, 380, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_11 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 380, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_11); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 380, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    (__pyx_v_r.e[__pyx_t_15]).n = __pyx_t_9;

    /* "automata/cautomata.pyx":381
 *     for e in V:
 *         r.e[d[e]].n = len(dt[e])
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("alloc r.e[%s].a (%s elements, %so total)" % (d[e], r.e[d[e]].n, sizeof(Transition)*r.e[d[e]].n))
 *         if r.e[d[e]].n > 0:
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 381, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":382
 *         r.e[d[e]].n = len(dt[e])
 *         if verb:
 *             print("alloc r.e[%s].a (%s elements, %so total)" % (d[e], r.e[d[e]].n, sizeof(Transition)*r.e[d[e]].n))             # <<<<<<<<<<<<<<
 *         if r.e[d[e]].n > 0:
 *             r.e[d[e]].a = <Transition *>malloc(sizeof(Transition)*r.e[d[e]].n)
 */
      __pyx_t_11 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 382, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __pyx_t_5 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 382, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_5); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 382, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_PyInt_From_int((__pyx_v_r.e[__pyx_t_15]).n); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 382, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_10 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 382, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_10); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 382, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = __Pyx_PyInt_FromSize_t(((sizeof(Transition)) * (__pyx_v_r.e[__pyx_t_15]).n)); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 382, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_4 = PyTuple_New(3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 382, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_11);
      PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_11);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_5);
      __Pyx_GIVEREF(__pyx_t_10);
      PyTuple_SET_ITEM(__pyx_t_4, 2, __pyx_t_10);
      __pyx_t_11 = 0;
      __pyx_t_5 = 0;
      __pyx_t_10 = 0;
      __pyx_t_10 = __Pyx_PyString_Format(__pyx_kp_s_alloc_r_e_s_a_s_elements_so_tota, __pyx_t_4); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 382, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_10); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 382, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":381
 *     for e in V:
 *         r.e[d[e]].n = len(dt[e])
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("alloc r.e[%s].a (%s elements, %so total)" % (d[e], r.e[d[e]].n, sizeof(Transition)*r.e[d[e]].n))
 *         if r.e[d[e]].n > 0:
 */
    }

    /* "automata/cautomata.pyx":383
 *         if verb:
 *             print("alloc r.e[%s].a (%s elements, %so total)" % (d[e], r.e[d[e]].n, sizeof(Transition)*r.e[d[e]].n))
 *         if r.e[d[e]].n > 0:             # <<<<<<<<<<<<<<
 *             r.e[d[e]].a = <Transition *>malloc(sizeof(Transition)*r.e[d[e]].n)
 *             if r.e[d[e]].a is NULL:
 */
    __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 383, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_4); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 383, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_2 = (((__pyx_v_r.e[__pyx_t_15]).n > 0) != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":384
 *             print("alloc r.e[%s].a (%s elements, %so total)" % (d[e], r.e[d[e]].n, sizeof(Transition)*r.e[d[e]].n))
 *         if r.e[d[e]].n > 0:
 *             r.e[d[e]].a = <Transition *>malloc(sizeof(Transition)*r.e[d[e]].n)             # <<<<<<<<<<<<<<
 *             if r.e[d[e]].a is NULL:
 *                 raise MemoryError("Could not allocate the transition (size %s)"%(sizeof(Transition)*len(dt[e])))
 */
      __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 384, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_4); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 384, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 384, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_9 = __Pyx_PyIndex_AsSsize_t(__pyx_t_4); if (unlikely((__pyx_t_9 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 384, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      (__pyx_v_r.e[__pyx_t_9]).a = ((Transition *)malloc(((sizeof(Transition)) * (__pyx_v_r.e[__pyx_t_15]).n)));

      /* "automata/cautomata.pyx":385
 *         if r.e[d[e]].n > 0:
 *             r.e[d[e]].a = <Transition *>malloc(sizeof(Transition)*r.e[d[e]].n)
 *             if r.e[d[e]].a is NULL:             # <<<<<<<<<<<<<<
 *                 raise MemoryError("Could not allocate the transition (size %s)"%(sizeof(Transition)*len(dt[e])))
 *             for i, (f, l) in enumerate(dt[e]):
 */
      __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 385, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_9 = __Pyx_PyIndex_AsSsize_t(__pyx_t_4); if (unlikely((__pyx_t_9 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 385, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_2 = (((__pyx_v_r.e[__pyx_t_9]).a == NULL) != 0);
      if (unlikely(__pyx_t_2)) {

        /* "automata/cautomata.pyx":386
 *             r.e[d[e]].a = <Transition *>malloc(sizeof(Transition)*r.e[d[e]].n)
 *             if r.e[d[e]].a is NULL:
 *                 raise MemoryError("Could not allocate the transition (size %s)"%(sizeof(Transition)*len(dt[e])))             # <<<<<<<<<<<<<<
 *             for i, (f, l) in enumerate(dt[e]):
 *                 if verb:
 */
        __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_dt, __pyx_v_e); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 386, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_t_9 = PyObject_Length(__pyx_t_4); if (unlikely(__pyx_t_9 == ((Py_ssize_t)-1))) __PYX_ERR(0, 386, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __pyx_t_4 = __Pyx_PyInt_FromSize_t(((sizeof(Transition)) * __pyx_t_9)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 386, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_t_10 = __Pyx_PyString_Format(__pyx_kp_s_Could_not_allocate_the_transitio, __pyx_t_4); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 386, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_MemoryError, __pyx_t_10); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 386, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_Raise(__pyx_t_4, 0, 0, 0);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __PYX_ERR(0, 386, __pyx_L1_error)

        /* "automata/cautomata.pyx":385
 *         if r.e[d[e]].n > 0:
 *             r.e[d[e]].a = <Transition *>malloc(sizeof(Transition)*r.e[d[e]].n)
 *             if r.e[d[e]].a is NULL:             # <<<<<<<<<<<<<<
 *                 raise MemoryError("Could not allocate the transition (size %s)"%(sizeof(Transition)*len(dt[e])))
 *             for i, (f, l) in enumerate(dt[e]):
 */
      }

      /* "automata/cautomata.pyx":387
 *             if r.e[d[e]].a is NULL:
 *                 raise MemoryError("Could not allocate the transition (size %s)"%(sizeof(Transition)*len(dt[e])))
 *             for i, (f, l) in enumerate(dt[e]):             # <<<<<<<<<<<<<<
 *                 if verb:
 *                     print("r.e[%s].a[%s] = %s,%s" % (d[e], i, l, f))
 */
      __Pyx_INCREF(__pyx_int_0);
      __pyx_t_4 = __pyx_int_0;
      __pyx_t_10 = __Pyx_PyDict_GetItem(__pyx_v_dt, __pyx_v_e); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 387, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      if (likely(PyList_CheckExact(__pyx_t_10)) || PyTuple_CheckExact(__pyx_t_10)) {
        __pyx_t_5 = __pyx_t_10; __Pyx_INCREF(__pyx_t_5); __pyx_t_9 = 0;
        __pyx_t_8 = NULL;
      } else {
        __pyx_t_9 = -1; __pyx_t_5 = PyObject_GetIter(__pyx_t_10); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 387, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __pyx_t_8 = Py_TYPE(__pyx_t_5)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 387, __pyx_L1_error)
      }
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      for (;;) {
        if (likely(!__pyx_t_8)) {
          if (likely(PyList_CheckExact(__pyx_t_5))) {
            if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_5)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_10 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_9); __Pyx_INCREF(__pyx_t_10); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 387, __pyx_L1_error)
            #else
            __pyx_t_10 = PySequence_ITEM(__pyx_t_5, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 387, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_10);
            #endif
          } else {
            if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_5)) break;
            #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
            __pyx_t_10 = PyTuple_GET_ITEM(__pyx_t_5, __pyx_t_9); __Pyx_INCREF(__pyx_t_10); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 387, __pyx_L1_error)
            #else
            __pyx_t_10 = PySequence_ITEM(__pyx_t_5, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 387, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_10);
            #endif
          }
        } else {
          __pyx_t_10 = __pyx_t_8(__pyx_t_5);
          if (unlikely(!__pyx_t_10)) {
            PyObject* exc_type = PyErr_Occurred();
            if (exc_type) {
              if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
              else __PYX_ERR(0, 387, __pyx_L1_error)
            }
            break;
          }
          __Pyx_GOTREF(__pyx_t_10);
        }
        if ((likely(PyTuple_CheckExact(__pyx_t_10))) || (PyList_CheckExact(__pyx_t_10))) {
          PyObject* sequence = __pyx_t_10;
          Py_ssize_t size = __Pyx_PySequence_SIZE(sequence);
          if (unlikely(size != 2)) {
            if (size > 2) __Pyx_RaiseTooManyValuesError(2);
            else if (size >= 0) __Pyx_RaiseNeedMoreValuesError(size);
            __PYX_ERR(0, 387, __pyx_L1_error)
          }
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          if (likely(PyTuple_CheckExact(sequence))) {
            __pyx_t_11 = PyTuple_GET_ITEM(sequence, 0); 
            __pyx_t_12 = PyTuple_GET_ITEM(sequence, 1); 
          } else {
            __pyx_t_11 = PyList_GET_ITEM(sequence, 0); 
            __pyx_t_12 = PyList_GET_ITEM(sequence, 1); 
          }
          __Pyx_INCREF(__pyx_t_11);
          __Pyx_INCREF(__pyx_t_12);
          #else
          __pyx_t_11 = PySequence_ITEM(sequence, 0); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 387, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __pyx_t_12 = PySequence_ITEM(sequence, 1); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 387, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          #endif
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        } else {
          Py_ssize_t index = -1;
          __pyx_t_16 = PyObject_GetIter(__pyx_t_10); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 387, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_16);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
          __pyx_t_13 = Py_TYPE(__pyx_t_16)->tp_iternext;
          index = 0; __pyx_t_11 = __pyx_t_13(__pyx_t_16); if (unlikely(!__pyx_t_11)) goto __pyx_L39_unpacking_failed;
          __Pyx_GOTREF(__pyx_t_11);
          index = 1; __pyx_t_12 = __pyx_t_13(__pyx_t_16); if (unlikely(!__pyx_t_12)) goto __pyx_L39_unpacking_failed;
          __Pyx_GOTREF(__pyx_t_12);
          if (__Pyx_IternextUnpackEndCheck(__pyx_t_13(__pyx_t_16), 2) < 0) __PYX_ERR(0, 387, __pyx_L1_error)
          __pyx_t_13 = NULL;
          __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
          goto __pyx_L40_unpacking_done;
          __pyx_L39_unpacking_failed:;
          __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
          __pyx_t_13 = NULL;
          if (__Pyx_IterFinish() == 0) __Pyx_RaiseNeedMoreValuesError(index);
          __PYX_ERR(0, 387, __pyx_L1_error)
          __pyx_L40_unpacking_done:;
        }
        __Pyx_XDECREF_SET(__pyx_v_f, __pyx_t_11);
        __pyx_t_11 = 0;
        __Pyx_XDECREF_SET(__pyx_v_l, __pyx_t_12);
        __pyx_t_12 = 0;
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_4);
        __pyx_t_10 = __Pyx_PyInt_AddObjC(__pyx_t_4, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 387, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_4);
        __pyx_t_4 = __pyx_t_10;
        __pyx_t_10 = 0;

        /* "automata/cautomata.pyx":388
 *                 raise MemoryError("Could not allocate the transition (size %s)"%(sizeof(Transition)*len(dt[e])))
 *             for i, (f, l) in enumerate(dt[e]):
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("r.e[%s].a[%s] = %s,%s" % (d[e], i, l, f))
 *                 r.e[d[e]].a[i].l = da[l]
 */
        __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 388, __pyx_L1_error)
        if (__pyx_t_2) {

          /* "automata/cautomata.pyx":389
 *             for i, (f, l) in enumerate(dt[e]):
 *                 if verb:
 *                     print("r.e[%s].a[%s] = %s,%s" % (d[e], i, l, f))             # <<<<<<<<<<<<<<
 *                 r.e[d[e]].a[i].l = da[l]
 *                 r.e[d[e]].a[i].e = d[f]
 */
          __pyx_t_10 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 389, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __pyx_t_12 = PyTuple_New(4); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 389, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          __Pyx_GIVEREF(__pyx_t_10);
          PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_t_10);
          __Pyx_INCREF(__pyx_v_i);
          __Pyx_GIVEREF(__pyx_v_i);
          PyTuple_SET_ITEM(__pyx_t_12, 1, __pyx_v_i);
          __Pyx_INCREF(__pyx_v_l);
          __Pyx_GIVEREF(__pyx_v_l);
          PyTuple_SET_ITEM(__pyx_t_12, 2, __pyx_v_l);
          __Pyx_INCREF(__pyx_v_f);
          __Pyx_GIVEREF(__pyx_v_f);
          PyTuple_SET_ITEM(__pyx_t_12, 3, __pyx_v_f);
          __pyx_t_10 = 0;
          __pyx_t_10 = __Pyx_PyString_Format(__pyx_kp_s_r_e_s_a_s_s_s, __pyx_t_12); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 389, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
          __pyx_t_12 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_10); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 389, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_12);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
          __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;

          /* "automata/cautomata.pyx":388
 *                 raise MemoryError("Could not allocate the transition (size %s)"%(sizeof(Transition)*len(dt[e])))
 *             for i, (f, l) in enumerate(dt[e]):
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("r.e[%s].a[%s] = %s,%s" % (d[e], i, l, f))
 *                 r.e[d[e]].a[i].l = da[l]
 */
        }

        /* "automata/cautomata.pyx":390
 *                 if verb:
 *                     print("r.e[%s].a[%s] = %s,%s" % (d[e], i, l, f))
 *                 r.e[d[e]].a[i].l = da[l]             # <<<<<<<<<<<<<<
 *                 r.e[d[e]].a[i].e = d[f]
 *         else:
 */
        __pyx_t_12 = __Pyx_PyDict_GetItem(__pyx_v_da, __pyx_v_l); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 390, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __pyx_t_7 = __Pyx_PyInt_As_int(__pyx_t_12); if (unlikely((__pyx_t_7 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 390, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_12 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 390, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_12); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 390, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_17 = __Pyx_PyIndex_AsSsize_t(__pyx_v_i); if (unlikely((__pyx_t_17 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 390, __pyx_L1_error)
        ((__pyx_v_r.e[__pyx_t_15]).a[__pyx_t_17]).l = __pyx_t_7;

        /* "automata/cautomata.pyx":391
 *                     print("r.e[%s].a[%s] = %s,%s" % (d[e], i, l, f))
 *                 r.e[d[e]].a[i].l = da[l]
 *                 r.e[d[e]].a[i].e = d[f]             # <<<<<<<<<<<<<<
 *         else:
 *             r.e[d[e]].a = NULL
 */
        __pyx_t_12 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_f); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 391, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __pyx_t_7 = __Pyx_PyInt_As_int(__pyx_t_12); if (unlikely((__pyx_t_7 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 391, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_12 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 391, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        __pyx_t_17 = __Pyx_PyIndex_AsSsize_t(__pyx_t_12); if (unlikely((__pyx_t_17 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 391, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_v_i); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 391, __pyx_L1_error)
        ((__pyx_v_r.e[__pyx_t_17]).a[__pyx_t_15]).e = __pyx_t_7;

        /* "automata/cautomata.pyx":387
 *             if r.e[d[e]].a is NULL:
 *                 raise MemoryError("Could not allocate the transition (size %s)"%(sizeof(Transition)*len(dt[e])))
 *             for i, (f, l) in enumerate(dt[e]):             # <<<<<<<<<<<<<<
 *                 if verb:
 *                     print("r.e[%s].a[%s] = %s,%s" % (d[e], i, l, f))
 */
      }
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":383
 *         if verb:
 *             print("alloc r.e[%s].a (%s elements, %so total)" % (d[e], r.e[d[e]].n, sizeof(Transition)*r.e[d[e]].n))
 *         if r.e[d[e]].n > 0:             # <<<<<<<<<<<<<<
 *             r.e[d[e]].a = <Transition *>malloc(sizeof(Transition)*r.e[d[e]].n)
 *             if r.e[d[e]].a is NULL:
 */
      goto __pyx_L35;
    }

    /* "automata/cautomata.pyx":393
 *                 r.e[d[e]].a[i].e = d[f]
 *         else:
 *             r.e[d[e]].a = NULL             # <<<<<<<<<<<<<<
 *             r.e[d[e]].n = 0
 *     a.S = V
 */
    /*else*/ {
      __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 393, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_9 = __Pyx_PyIndex_AsSsize_t(__pyx_t_4); if (unlikely((__pyx_t_9 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 393, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      (__pyx_v_r.e[__pyx_t_9]).a = NULL;

      /* "automata/cautomata.pyx":394
 *         else:
 *             r.e[d[e]].a = NULL
 *             r.e[d[e]].n = 0             # <<<<<<<<<<<<<<
 *     a.S = V
 *     return r
 */
      __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_e); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 394, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_9 = __Pyx_PyIndex_AsSsize_t(__pyx_t_4); if (unlikely((__pyx_t_9 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 394, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      (__pyx_v_r.e[__pyx_t_9]).n = 0;
    }
    __pyx_L35:;

    /* "automata/cautomata.pyx":379
 *         print(dt)
 *         print("Alloc...")
 *     for e in V:             # <<<<<<<<<<<<<<
 *         r.e[d[e]].n = len(dt[e])
 *         if verb:
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":395
 *             r.e[d[e]].a = NULL
 *             r.e[d[e]].n = 0
 *     a.S = V             # <<<<<<<<<<<<<<
 *     return r
 * 
 */
  if (__Pyx_PyObject_SetAttrStr(__pyx_v_a, __pyx_n_s_S, __pyx_v_V) < 0) __PYX_ERR(0, 395, __pyx_L1_error)

  /* "automata/cautomata.pyx":396
 *             r.e[d[e]].n = 0
 *     a.S = V
 *     return r             # <<<<<<<<<<<<<<
 * 
 * #cdef AutomatonGet(Automaton a, A):
 */
  __pyx_r = __pyx_v_r;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":305
 *     return r
 * 
 * cdef NAutomaton getNAutomaton(a, I=None, F=None, A=None, verb=False):             # <<<<<<<<<<<<<<
 *     d = {}
 *     da = {}
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_XDECREF(__pyx_t_16);
  __Pyx_WriteUnraisable("automata.cautomata.getNAutomaton", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __Pyx_pretend_to_initialize(&__pyx_r);
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF(__pyx_v_da);
  __Pyx_XDECREF(__pyx_v_dt);
  __Pyx_XDECREF(__pyx_v_V);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_v);
  __Pyx_XDECREF(__pyx_v_e);
  __Pyx_XDECREF(__pyx_v_f);
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XDECREF(__pyx_v_I);
  __Pyx_XDECREF(__pyx_v_F);
  __Pyx_XDECREF(__pyx_v_A);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":415
 * #    return r
 * 
 * cdef AutomatonToSageAutomaton(Automaton a, A):             # <<<<<<<<<<<<<<
 *     from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *     L = []
 */

static PyObject *__pyx_f_8automata_9cautomata_AutomatonToSageAutomaton(Automaton __pyx_v_a, PyObject *__pyx_v_A) {
  PyObject *__pyx_v_SageAutomaton = NULL;
  PyObject *__pyx_v_L = NULL;
  PyObject *__pyx_v_I = NULL;
  PyObject *__pyx_v_F = NULL;
  int __pyx_v_i;
  int __pyx_v_j;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  __Pyx_RefNannySetupContext("AutomatonToSageAutomaton", 0);

  /* "automata/cautomata.pyx":416
 * 
 * cdef AutomatonToSageAutomaton(Automaton a, A):
 *     from sage.combinat.finite_state_machine import Automaton as SageAutomaton             # <<<<<<<<<<<<<<
 *     L = []
 *     if a.i == -1:
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 416, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_Automaton);
  __Pyx_GIVEREF(__pyx_n_s_Automaton);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_Automaton);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_sage_combinat_finite_state_machi, __pyx_t_1, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 416, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Automaton); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 416, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_SageAutomaton = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":417
 * cdef AutomatonToSageAutomaton(Automaton a, A):
 *     from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *     L = []             # <<<<<<<<<<<<<<
 *     if a.i == -1:
 *         I = []
 */
  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 417, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_L = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":418
 *     from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *     L = []
 *     if a.i == -1:             # <<<<<<<<<<<<<<
 *         I = []
 *     else:
 */
  __pyx_t_3 = ((__pyx_v_a.i == -1L) != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":419
 *     L = []
 *     if a.i == -1:
 *         I = []             # <<<<<<<<<<<<<<
 *     else:
 *         I = [a.i]
 */
    __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 419, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_v_I = ((PyObject*)__pyx_t_2);
    __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":418
 *     from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *     L = []
 *     if a.i == -1:             # <<<<<<<<<<<<<<
 *         I = []
 *     else:
 */
    goto __pyx_L3;
  }

  /* "automata/cautomata.pyx":421
 *         I = []
 *     else:
 *         I = [a.i]             # <<<<<<<<<<<<<<
 *     F = []
 *     cdef int i, j
 */
  /*else*/ {
    __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_a.i); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 421, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 421, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_2);
    PyList_SET_ITEM(__pyx_t_1, 0, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_v_I = ((PyObject*)__pyx_t_1);
    __pyx_t_1 = 0;
  }
  __pyx_L3:;

  /* "automata/cautomata.pyx":422
 *     else:
 *         I = [a.i]
 *     F = []             # <<<<<<<<<<<<<<
 *     cdef int i, j
 *     for i in range(a.n):
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 422, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_F = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":424
 *     F = []
 *     cdef int i, j
 *     for i in range(a.n):             # <<<<<<<<<<<<<<
 *         for j in range(a.na):
 *             if a.e[i].f[j] != -1:
 */
  __pyx_t_4 = __pyx_v_a.n;
  __pyx_t_5 = __pyx_t_4;
  for (__pyx_t_6 = 0; __pyx_t_6 < __pyx_t_5; __pyx_t_6+=1) {
    __pyx_v_i = __pyx_t_6;

    /* "automata/cautomata.pyx":425
 *     cdef int i, j
 *     for i in range(a.n):
 *         for j in range(a.na):             # <<<<<<<<<<<<<<
 *             if a.e[i].f[j] != -1:
 *                 L.append((i, a.e[i].f[j], A[j]))
 */
    __pyx_t_7 = __pyx_v_a.na;
    __pyx_t_8 = __pyx_t_7;
    for (__pyx_t_9 = 0; __pyx_t_9 < __pyx_t_8; __pyx_t_9+=1) {
      __pyx_v_j = __pyx_t_9;

      /* "automata/cautomata.pyx":426
 *     for i in range(a.n):
 *         for j in range(a.na):
 *             if a.e[i].f[j] != -1:             # <<<<<<<<<<<<<<
 *                 L.append((i, a.e[i].f[j], A[j]))
 *         if a.e[i].final:
 */
      __pyx_t_3 = ((((__pyx_v_a.e[__pyx_v_i]).f[__pyx_v_j]) != -1L) != 0);
      if (__pyx_t_3) {

        /* "automata/cautomata.pyx":427
 *         for j in range(a.na):
 *             if a.e[i].f[j] != -1:
 *                 L.append((i, a.e[i].f[j], A[j]))             # <<<<<<<<<<<<<<
 *         if a.e[i].final:
 *             F.append(i)
 */
        __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 427, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_2 = __Pyx_PyInt_From_int(((__pyx_v_a.e[__pyx_v_i]).f[__pyx_v_j])); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 427, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_A, __pyx_v_j, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 427, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_11 = PyTuple_New(3); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 427, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_1);
        __Pyx_GIVEREF(__pyx_t_2);
        PyTuple_SET_ITEM(__pyx_t_11, 1, __pyx_t_2);
        __Pyx_GIVEREF(__pyx_t_10);
        PyTuple_SET_ITEM(__pyx_t_11, 2, __pyx_t_10);
        __pyx_t_1 = 0;
        __pyx_t_2 = 0;
        __pyx_t_10 = 0;
        __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_L, __pyx_t_11); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 427, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;

        /* "automata/cautomata.pyx":426
 *     for i in range(a.n):
 *         for j in range(a.na):
 *             if a.e[i].f[j] != -1:             # <<<<<<<<<<<<<<
 *                 L.append((i, a.e[i].f[j], A[j]))
 *         if a.e[i].final:
 */
      }
    }

    /* "automata/cautomata.pyx":428
 *             if a.e[i].f[j] != -1:
 *                 L.append((i, a.e[i].f[j], A[j]))
 *         if a.e[i].final:             # <<<<<<<<<<<<<<
 *             F.append(i)
 *     return SageAutomaton(L, initial_states=I, final_states=F)
 */
    __pyx_t_3 = ((__pyx_v_a.e[__pyx_v_i]).final != 0);
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":429
 *                 L.append((i, a.e[i].f[j], A[j]))
 *         if a.e[i].final:
 *             F.append(i)             # <<<<<<<<<<<<<<
 *     return SageAutomaton(L, initial_states=I, final_states=F)
 * 
 */
      __pyx_t_11 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 429, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_F, __pyx_t_11); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 429, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;

      /* "automata/cautomata.pyx":428
 *             if a.e[i].f[j] != -1:
 *                 L.append((i, a.e[i].f[j], A[j]))
 *         if a.e[i].final:             # <<<<<<<<<<<<<<
 *             F.append(i)
 *     return SageAutomaton(L, initial_states=I, final_states=F)
 */
    }
  }

  /* "automata/cautomata.pyx":430
 *         if a.e[i].final:
 *             F.append(i)
 *     return SageAutomaton(L, initial_states=I, final_states=F)             # <<<<<<<<<<<<<<
 * 
 * cdef AutomatonToDiGraph(Automaton a, A, keep_edges_labels=True):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_11 = PyTuple_New(1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 430, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_11);
  __Pyx_INCREF(__pyx_v_L);
  __Pyx_GIVEREF(__pyx_v_L);
  PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_v_L);
  __pyx_t_10 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 430, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  if (PyDict_SetItem(__pyx_t_10, __pyx_n_s_initial_states_2, __pyx_v_I) < 0) __PYX_ERR(0, 430, __pyx_L1_error)
  if (PyDict_SetItem(__pyx_t_10, __pyx_n_s_final_states_2, __pyx_v_F) < 0) __PYX_ERR(0, 430, __pyx_L1_error)
  __pyx_t_2 = __Pyx_PyObject_Call(__pyx_v_SageAutomaton, __pyx_t_11, __pyx_t_10); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 430, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
  __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":415
 * #    return r
 * 
 * cdef AutomatonToSageAutomaton(Automaton a, A):             # <<<<<<<<<<<<<<
 *     from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *     L = []
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("automata.cautomata.AutomatonToSageAutomaton", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_SageAutomaton);
  __Pyx_XDECREF(__pyx_v_L);
  __Pyx_XDECREF(__pyx_v_I);
  __Pyx_XDECREF(__pyx_v_F);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":432
 *     return SageAutomaton(L, initial_states=I, final_states=F)
 * 
 * cdef AutomatonToDiGraph(Automaton a, A, keep_edges_labels=True):             # <<<<<<<<<<<<<<
 *     from sage.graphs.digraph import DiGraph
 *     cdef int i, j
 */

static PyObject *__pyx_f_8automata_9cautomata_AutomatonToDiGraph(Automaton __pyx_v_a, PyObject *__pyx_v_A, struct __pyx_opt_args_8automata_9cautomata_AutomatonToDiGraph *__pyx_optional_args) {
  PyObject *__pyx_v_keep_edges_labels = ((PyObject *)Py_True);
  PyObject *__pyx_v_DiGraph = NULL;
  int __pyx_v_i;
  int __pyx_v_j;
  PyObject *__pyx_v_L = 0;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  __Pyx_RefNannySetupContext("AutomatonToDiGraph", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args->__pyx_n > 0) {
      __pyx_v_keep_edges_labels = __pyx_optional_args->keep_edges_labels;
    }
  }

  /* "automata/cautomata.pyx":433
 * 
 * cdef AutomatonToDiGraph(Automaton a, A, keep_edges_labels=True):
 *     from sage.graphs.digraph import DiGraph             # <<<<<<<<<<<<<<
 *     cdef int i, j
 *     cdef list L
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 433, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_DiGraph);
  __Pyx_GIVEREF(__pyx_n_s_DiGraph);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_DiGraph);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_sage_graphs_digraph, __pyx_t_1, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 433, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_DiGraph); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 433, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_DiGraph = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":436
 *     cdef int i, j
 *     cdef list L
 *     L = []             # <<<<<<<<<<<<<<
 *     for i in range(a.n):
 *         for j in range(a.na):
 */
  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 436, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_L = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":437
 *     cdef list L
 *     L = []
 *     for i in range(a.n):             # <<<<<<<<<<<<<<
 *         for j in range(a.na):
 *             if a.e[i].f[j] != -1:
 */
  __pyx_t_3 = __pyx_v_a.n;
  __pyx_t_4 = __pyx_t_3;
  for (__pyx_t_5 = 0; __pyx_t_5 < __pyx_t_4; __pyx_t_5+=1) {
    __pyx_v_i = __pyx_t_5;

    /* "automata/cautomata.pyx":438
 *     L = []
 *     for i in range(a.n):
 *         for j in range(a.na):             # <<<<<<<<<<<<<<
 *             if a.e[i].f[j] != -1:
 *                 if keep_edges_labels:
 */
    __pyx_t_6 = __pyx_v_a.na;
    __pyx_t_7 = __pyx_t_6;
    for (__pyx_t_8 = 0; __pyx_t_8 < __pyx_t_7; __pyx_t_8+=1) {
      __pyx_v_j = __pyx_t_8;

      /* "automata/cautomata.pyx":439
 *     for i in range(a.n):
 *         for j in range(a.na):
 *             if a.e[i].f[j] != -1:             # <<<<<<<<<<<<<<
 *                 if keep_edges_labels:
 *                     L.append((i, a.e[i].f[j], A[j]))
 */
      __pyx_t_9 = ((((__pyx_v_a.e[__pyx_v_i]).f[__pyx_v_j]) != -1L) != 0);
      if (__pyx_t_9) {

        /* "automata/cautomata.pyx":440
 *         for j in range(a.na):
 *             if a.e[i].f[j] != -1:
 *                 if keep_edges_labels:             # <<<<<<<<<<<<<<
 *                     L.append((i, a.e[i].f[j], A[j]))
 *                 else:
 */
        __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_v_keep_edges_labels); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 440, __pyx_L1_error)
        if (__pyx_t_9) {

          /* "automata/cautomata.pyx":441
 *             if a.e[i].f[j] != -1:
 *                 if keep_edges_labels:
 *                     L.append((i, a.e[i].f[j], A[j]))             # <<<<<<<<<<<<<<
 *                 else:
 *                     L.append((i, a.e[i].f[j]))
 */
          __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 441, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __pyx_t_1 = __Pyx_PyInt_From_int(((__pyx_v_a.e[__pyx_v_i]).f[__pyx_v_j])); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 441, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_A, __pyx_v_j, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 441, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __pyx_t_11 = PyTuple_New(3); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 441, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_GIVEREF(__pyx_t_2);
          PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_2);
          __Pyx_GIVEREF(__pyx_t_1);
          PyTuple_SET_ITEM(__pyx_t_11, 1, __pyx_t_1);
          __Pyx_GIVEREF(__pyx_t_10);
          PyTuple_SET_ITEM(__pyx_t_11, 2, __pyx_t_10);
          __pyx_t_2 = 0;
          __pyx_t_1 = 0;
          __pyx_t_10 = 0;
          __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_L, __pyx_t_11); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 441, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;

          /* "automata/cautomata.pyx":440
 *         for j in range(a.na):
 *             if a.e[i].f[j] != -1:
 *                 if keep_edges_labels:             # <<<<<<<<<<<<<<
 *                     L.append((i, a.e[i].f[j], A[j]))
 *                 else:
 */
          goto __pyx_L8;
        }

        /* "automata/cautomata.pyx":443
 *                     L.append((i, a.e[i].f[j], A[j]))
 *                 else:
 *                     L.append((i, a.e[i].f[j]))             # <<<<<<<<<<<<<<
 *     return DiGraph([range(a.n), L], loops=True, multiedges=True)
 * 
 */
        /*else*/ {
          __pyx_t_11 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 443, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __pyx_t_10 = __Pyx_PyInt_From_int(((__pyx_v_a.e[__pyx_v_i]).f[__pyx_v_j])); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 443, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 443, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_GIVEREF(__pyx_t_11);
          PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_11);
          __Pyx_GIVEREF(__pyx_t_10);
          PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_10);
          __pyx_t_11 = 0;
          __pyx_t_10 = 0;
          __pyx_t_12 = __Pyx_PyList_Append(__pyx_v_L, __pyx_t_1); if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 443, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        }
        __pyx_L8:;

        /* "automata/cautomata.pyx":439
 *     for i in range(a.n):
 *         for j in range(a.na):
 *             if a.e[i].f[j] != -1:             # <<<<<<<<<<<<<<
 *                 if keep_edges_labels:
 *                     L.append((i, a.e[i].f[j], A[j]))
 */
      }
    }
  }

  /* "automata/cautomata.pyx":444
 *                 else:
 *                     L.append((i, a.e[i].f[j]))
 *     return DiGraph([range(a.n), L], loops=True, multiedges=True)             # <<<<<<<<<<<<<<
 * 
 * 
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_a.n); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 444, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_10 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 444, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyList_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 444, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_10);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_t_10);
  __Pyx_INCREF(__pyx_v_L);
  __Pyx_GIVEREF(__pyx_v_L);
  PyList_SET_ITEM(__pyx_t_1, 1, __pyx_v_L);
  __pyx_t_10 = 0;
  __pyx_t_10 = PyTuple_New(1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 444, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __Pyx_GIVEREF(__pyx_t_1);
  PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 444, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_t_1, __pyx_n_s_loops, Py_True) < 0) __PYX_ERR(0, 444, __pyx_L1_error)
  if (PyDict_SetItem(__pyx_t_1, __pyx_n_s_multiedges, Py_True) < 0) __PYX_ERR(0, 444, __pyx_L1_error)
  __pyx_t_11 = __Pyx_PyObject_Call(__pyx_v_DiGraph, __pyx_t_10, __pyx_t_1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 444, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_11);
  __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_11;
  __pyx_t_11 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":432
 *     return SageAutomaton(L, initial_states=I, final_states=F)
 * 
 * cdef AutomatonToDiGraph(Automaton a, A, keep_edges_labels=True):             # <<<<<<<<<<<<<<
 *     from sage.graphs.digraph import DiGraph
 *     cdef int i, j
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("automata.cautomata.AutomatonToDiGraph", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = 0;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_DiGraph);
  __Pyx_XDECREF(__pyx_v_L);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":494
 * 
 *     """
 *     def __cinit__(self):             # <<<<<<<<<<<<<<
 *         sig_on()
 *         self.a = <NAutomaton *>malloc(sizeof(NAutomaton))
 */

/* Python wrapper */
static int __pyx_pw_8automata_9cautomata_10CAutomaton_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_pw_8automata_9cautomata_10CAutomaton_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__cinit__ (wrapper)", 0);
  if (unlikely(PyTuple_GET_SIZE(__pyx_args) > 0)) {
    __Pyx_RaiseArgtupleInvalid("__cinit__", 1, 0, 0, PyTuple_GET_SIZE(__pyx_args)); return -1;}
  if (unlikely(__pyx_kwds) && unlikely(PyDict_Size(__pyx_kwds) > 0) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__cinit__", 0))) return -1;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton___cinit__(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_8automata_9cautomata_10CAutomaton___cinit__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("__cinit__", 0);

  /* "automata/cautomata.pyx":495
 *     """
 *     def __cinit__(self):
 *         sig_on()             # <<<<<<<<<<<<<<
 *         self.a = <NAutomaton *>malloc(sizeof(NAutomaton))
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 495, __pyx_L1_error)

  /* "automata/cautomata.pyx":496
 *     def __cinit__(self):
 *         sig_on()
 *         self.a = <NAutomaton *>malloc(sizeof(NAutomaton))             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if self.a is NULL:
 */
  __pyx_v_self->a = ((NAutomaton *)malloc((sizeof(NAutomaton))));

  /* "automata/cautomata.pyx":497
 *         sig_on()
 *         self.a = <NAutomaton *>malloc(sizeof(NAutomaton))
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if self.a is NULL:
 *             raise MemoryError("Failed to allocate memory for "
 */
  sig_off();

  /* "automata/cautomata.pyx":498
 *         self.a = <NAutomaton *>malloc(sizeof(NAutomaton))
 *         sig_off()
 *         if self.a is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for "
 *                               "C initialization of CAutomaton.")
 */
  __pyx_t_2 = ((__pyx_v_self->a == NULL) != 0);
  if (unlikely(__pyx_t_2)) {

    /* "automata/cautomata.pyx":499
 *         sig_off()
 *         if self.a is NULL:
 *             raise MemoryError("Failed to allocate memory for "             # <<<<<<<<<<<<<<
 *                               "C initialization of CAutomaton.")
 *         self.a.e = NULL
 */
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__11, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 499, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 499, __pyx_L1_error)

    /* "automata/cautomata.pyx":498
 *         self.a = <NAutomaton *>malloc(sizeof(NAutomaton))
 *         sig_off()
 *         if self.a is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for "
 *                               "C initialization of CAutomaton.")
 */
  }

  /* "automata/cautomata.pyx":501
 *             raise MemoryError("Failed to allocate memory for "
 *                               "C initialization of CAutomaton.")
 *         self.a.e = NULL             # <<<<<<<<<<<<<<
 *         self.a.n = 0
 *         self.a.na = 0
 */
  __pyx_v_self->a->e = NULL;

  /* "automata/cautomata.pyx":502
 *                               "C initialization of CAutomaton.")
 *         self.a.e = NULL
 *         self.a.n = 0             # <<<<<<<<<<<<<<
 *         self.a.na = 0
 *         self.A = []
 */
  __pyx_v_self->a->n = 0;

  /* "automata/cautomata.pyx":503
 *         self.a.e = NULL
 *         self.a.n = 0
 *         self.a.na = 0             # <<<<<<<<<<<<<<
 *         self.A = []
 *         self.S = None
 */
  __pyx_v_self->a->na = 0;

  /* "automata/cautomata.pyx":504
 *         self.a.n = 0
 *         self.a.na = 0
 *         self.A = []             # <<<<<<<<<<<<<<
 *         self.S = None
 * 
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 504, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_3);
  __Pyx_GOTREF(__pyx_v_self->A);
  __Pyx_DECREF(__pyx_v_self->A);
  __pyx_v_self->A = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":505
 *         self.a.na = 0
 *         self.A = []
 *         self.S = None             # <<<<<<<<<<<<<<
 * 
 *     def __init__(self, a, I=None, F=None, A=None, keep_S=True, verb=False):
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->S);
  __Pyx_DECREF(__pyx_v_self->S);
  __pyx_v_self->S = ((PyObject*)Py_None);

  /* "automata/cautomata.pyx":494
 * 
 *     """
 *     def __cinit__(self):             # <<<<<<<<<<<<<<
 *         sig_on()
 *         self.a = <NAutomaton *>malloc(sizeof(NAutomaton))
 */

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.__cinit__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":507
 *         self.S = None
 * 
 *     def __init__(self, a, I=None, F=None, A=None, keep_S=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         TESTS::
 */

/* Python wrapper */
static int __pyx_pw_8automata_9cautomata_10CAutomaton_3__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_2__init__[] = "\n        TESTS::\n\n            sage: CAutomaton([(0, 1, 'a'), (2, 3, 'b')], I=[1])\n            CAutomaton with 4 states and an alphabet of 2 letters\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=1)\n            sage: a = CAutomaton(a)\n            sage: a\n            CAutomaton with 4 states and an alphabet of 2 letters\n            sage: CAutomaton(a)\n            CAutomaton with 4 states and an alphabet of 2 letters\n\n        ";
#if CYTHON_COMPILING_IN_CPYTHON
struct wrapperbase __pyx_wrapperbase_8automata_9cautomata_10CAutomaton_2__init__;
#endif
static int __pyx_pw_8automata_9cautomata_10CAutomaton_3__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a = 0;
  PyObject *__pyx_v_I = 0;
  PyObject *__pyx_v_F = 0;
  PyObject *__pyx_v_A = 0;
  PyObject *__pyx_v_keep_S = 0;
  PyObject *__pyx_v_verb = 0;
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a,&__pyx_n_s_I,&__pyx_n_s_F,&__pyx_n_s_A,&__pyx_n_s_keep_S,&__pyx_n_s_verb,0};
    PyObject* values[6] = {0,0,0,0,0,0};
    values[1] = ((PyObject *)Py_None);
    values[2] = ((PyObject *)Py_None);
    values[3] = ((PyObject *)Py_None);
    values[4] = ((PyObject *)Py_True);
    values[5] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_I);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_F);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_A);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_keep_S);
          if (value) { values[4] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  5:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[5] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__init__") < 0)) __PYX_ERR(0, 507, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a = values[0];
    __pyx_v_I = values[1];
    __pyx_v_F = values[2];
    __pyx_v_A = values[3];
    __pyx_v_keep_S = values[4];
    __pyx_v_verb = values[5];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("__init__", 0, 1, 6, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 507, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_2__init__(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), __pyx_v_a, __pyx_v_I, __pyx_v_F, __pyx_v_A, __pyx_v_keep_S, __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_8automata_9cautomata_10CAutomaton_2__init__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, PyObject *__pyx_v_a, PyObject *__pyx_v_I, PyObject *__pyx_v_F, PyObject *__pyx_v_A, PyObject *__pyx_v_keep_S, PyObject *__pyx_v_verb) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_da = 0;
  struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_na = 0;
  PyObject *__pyx_v_DiGraph = NULL;
  PyObject *__pyx_v_SageAutomaton = NULL;
  PyObject *__pyx_v_L = NULL;
  PyObject *__pyx_v_t = NULL;
  PyObject *__pyx_v_SL = NULL;
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  Py_ssize_t __pyx_t_6;
  PyObject *(*__pyx_t_7)(PyObject *);
  Py_ssize_t __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  NAutomaton __pyx_t_12;
  struct __pyx_opt_args_8automata_9cautomata_getNAutomaton __pyx_t_13;
  int __pyx_t_14;
  bool __pyx_t_15;
  __Pyx_RefNannySetupContext("__init__", 0);
  __Pyx_INCREF(__pyx_v_a);
  __Pyx_INCREF(__pyx_v_I);
  __Pyx_INCREF(__pyx_v_F);
  __Pyx_INCREF(__pyx_v_A);

  /* "automata/cautomata.pyx":523
 *         cdef DeterministicAutomaton da
 *         cdef CAutomaton na
 *         if a is None:             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("a is None")
 */
  __pyx_t_1 = (__pyx_v_a == Py_None);
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":524
 *         cdef CAutomaton na
 *         if a is None:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("a is None")
 *             return
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 524, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":525
 *         if a is None:
 *             if verb:
 *                 print("a is None")             # <<<<<<<<<<<<<<
 *             return
 *         from sage.graphs.digraph import DiGraph
 */
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__12, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 525, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":524
 *         cdef CAutomaton na
 *         if a is None:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("a is None")
 *             return
 */
    }

    /* "automata/cautomata.pyx":526
 *             if verb:
 *                 print("a is None")
 *             return             # <<<<<<<<<<<<<<
 *         from sage.graphs.digraph import DiGraph
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 */
    __pyx_r = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":523
 *         cdef DeterministicAutomaton da
 *         cdef CAutomaton na
 *         if a is None:             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("a is None")
 */
  }

  /* "automata/cautomata.pyx":527
 *                 print("a is None")
 *             return
 *         from sage.graphs.digraph import DiGraph             # <<<<<<<<<<<<<<
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *         if isinstance(a, SageAutomaton):
 */
  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 527, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_n_s_DiGraph);
  __Pyx_GIVEREF(__pyx_n_s_DiGraph);
  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_DiGraph);
  __pyx_t_4 = __Pyx_Import(__pyx_n_s_sage_graphs_digraph, __pyx_t_3, -1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 527, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_4, __pyx_n_s_DiGraph); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 527, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_t_3);
  __pyx_v_DiGraph = __pyx_t_3;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "automata/cautomata.pyx":528
 *             return
 *         from sage.graphs.digraph import DiGraph
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton             # <<<<<<<<<<<<<<
 *         if isinstance(a, SageAutomaton):
 *             if verb:
 */
  __pyx_t_4 = PyList_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 528, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_INCREF(__pyx_n_s_Automaton);
  __Pyx_GIVEREF(__pyx_n_s_Automaton);
  PyList_SET_ITEM(__pyx_t_4, 0, __pyx_n_s_Automaton);
  __pyx_t_3 = __Pyx_Import(__pyx_n_s_sage_combinat_finite_state_machi, __pyx_t_4, -1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 528, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_Automaton); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 528, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_INCREF(__pyx_t_4);
  __pyx_v_SageAutomaton = __pyx_t_4;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":529
 *         from sage.graphs.digraph import DiGraph
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *         if isinstance(a, SageAutomaton):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("Sage automaton...")
 */
  __pyx_t_2 = PyObject_IsInstance(__pyx_v_a, __pyx_v_SageAutomaton); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 529, __pyx_L1_error)
  __pyx_t_1 = (__pyx_t_2 != 0);
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":530
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *         if isinstance(a, SageAutomaton):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("Sage automaton...")
 *             L = []
 */
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 530, __pyx_L1_error)
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":531
 *         if isinstance(a, SageAutomaton):
 *             if verb:
 *                 print("Sage automaton...")             # <<<<<<<<<<<<<<
 *             L = []
 *             for t in a.transitions():
 */
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__13, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 531, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":530
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *         if isinstance(a, SageAutomaton):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("Sage automaton...")
 *             L = []
 */
    }

    /* "automata/cautomata.pyx":532
 *             if verb:
 *                 print("Sage automaton...")
 *             L = []             # <<<<<<<<<<<<<<
 *             for t in a.transitions():
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:
 */
    __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 532, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_v_L = ((PyObject*)__pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":533
 *                 print("Sage automaton...")
 *             L = []
 *             for t in a.transitions():             # <<<<<<<<<<<<<<
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:
 *                     print("Warning: informations lost during the conversion.")
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_transitions); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 533, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_3 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 533, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (likely(PyList_CheckExact(__pyx_t_3)) || PyTuple_CheckExact(__pyx_t_3)) {
      __pyx_t_4 = __pyx_t_3; __Pyx_INCREF(__pyx_t_4); __pyx_t_6 = 0;
      __pyx_t_7 = NULL;
    } else {
      __pyx_t_6 = -1; __pyx_t_4 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 533, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_7 = Py_TYPE(__pyx_t_4)->tp_iternext; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 533, __pyx_L1_error)
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    for (;;) {
      if (likely(!__pyx_t_7)) {
        if (likely(PyList_CheckExact(__pyx_t_4))) {
          if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 533, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_4, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 533, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        } else {
          if (__pyx_t_6 >= PyTuple_GET_SIZE(__pyx_t_4)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_4, __pyx_t_6); __Pyx_INCREF(__pyx_t_3); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 533, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_4, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 533, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        }
      } else {
        __pyx_t_3 = __pyx_t_7(__pyx_t_4);
        if (unlikely(!__pyx_t_3)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 533, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_3);
      }
      __Pyx_XDECREF_SET(__pyx_v_t, __pyx_t_3);
      __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":534
 *             L = []
 *             for t in a.transitions():
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:             # <<<<<<<<<<<<<<
 *                     print("Warning: informations lost during the conversion.")
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 */
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_word_in); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 534, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_8 = PyObject_Length(__pyx_t_3); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1))) __PYX_ERR(0, 534, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_2 = ((__pyx_t_8 != 1) != 0);
      if (!__pyx_t_2) {
      } else {
        __pyx_t_1 = __pyx_t_2;
        goto __pyx_L10_bool_binop_done;
      }
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_word_out); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 534, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_8 = PyObject_Length(__pyx_t_3); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1))) __PYX_ERR(0, 534, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_2 = ((__pyx_t_8 != 0) != 0);
      __pyx_t_1 = __pyx_t_2;
      __pyx_L10_bool_binop_done:;
      if (__pyx_t_1) {

        /* "automata/cautomata.pyx":535
 *             for t in a.transitions():
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:
 *                     print("Warning: informations lost during the conversion.")             # <<<<<<<<<<<<<<
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 *             if I is None:
 */
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__14, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 535, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

        /* "automata/cautomata.pyx":534
 *             L = []
 *             for t in a.transitions():
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:             # <<<<<<<<<<<<<<
 *                     print("Warning: informations lost during the conversion.")
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 */
      }

      /* "automata/cautomata.pyx":536
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:
 *                     print("Warning: informations lost during the conversion.")
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))             # <<<<<<<<<<<<<<
 *             if I is None:
 *                 I = a.initial_states()
 */
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_from_state); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 536, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_to_state); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 536, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_word_in); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 536, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_10 = __Pyx_GetItemInt(__pyx_t_9, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 536, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = PyTuple_New(3); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 536, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_GIVEREF(__pyx_t_3);
      PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_3);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_t_5);
      __Pyx_GIVEREF(__pyx_t_10);
      PyTuple_SET_ITEM(__pyx_t_9, 2, __pyx_t_10);
      __pyx_t_3 = 0;
      __pyx_t_5 = 0;
      __pyx_t_10 = 0;
      __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_L, __pyx_t_9); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 536, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;

      /* "automata/cautomata.pyx":533
 *                 print("Sage automaton...")
 *             L = []
 *             for t in a.transitions():             # <<<<<<<<<<<<<<
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:
 *                     print("Warning: informations lost during the conversion.")
 */
    }
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":537
 *                     print("Warning: informations lost during the conversion.")
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 *             if I is None:             # <<<<<<<<<<<<<<
 *                 I = a.initial_states()
 *             if F is None:
 */
    __pyx_t_1 = (__pyx_v_I == Py_None);
    __pyx_t_2 = (__pyx_t_1 != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":538
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 *             if I is None:
 *                 I = a.initial_states()             # <<<<<<<<<<<<<<
 *             if F is None:
 *                 F = a.final_states()
 */
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_initial_states_2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 538, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_10 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_9))) {
        __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_9);
        if (likely(__pyx_t_10)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
          __Pyx_INCREF(__pyx_t_10);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_9, function);
        }
      }
      __pyx_t_4 = (__pyx_t_10) ? __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_10) : __Pyx_PyObject_CallNoArg(__pyx_t_9);
      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 538, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_DECREF_SET(__pyx_v_I, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":537
 *                     print("Warning: informations lost during the conversion.")
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 *             if I is None:             # <<<<<<<<<<<<<<
 *                 I = a.initial_states()
 *             if F is None:
 */
    }

    /* "automata/cautomata.pyx":539
 *             if I is None:
 *                 I = a.initial_states()
 *             if F is None:             # <<<<<<<<<<<<<<
 *                 F = a.final_states()
 *             a = L
 */
    __pyx_t_2 = (__pyx_v_F == Py_None);
    __pyx_t_1 = (__pyx_t_2 != 0);
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":540
 *                 I = a.initial_states()
 *             if F is None:
 *                 F = a.final_states()             # <<<<<<<<<<<<<<
 *             a = L
 *         if isinstance(a, list):
 */
      __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_final_states_2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 540, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_10 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_9))) {
        __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_9);
        if (likely(__pyx_t_10)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
          __Pyx_INCREF(__pyx_t_10);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_9, function);
        }
      }
      __pyx_t_4 = (__pyx_t_10) ? __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_10) : __Pyx_PyObject_CallNoArg(__pyx_t_9);
      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 540, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_DECREF_SET(__pyx_v_F, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":539
 *             if I is None:
 *                 I = a.initial_states()
 *             if F is None:             # <<<<<<<<<<<<<<
 *                 F = a.final_states()
 *             a = L
 */
    }

    /* "automata/cautomata.pyx":541
 *             if F is None:
 *                 F = a.final_states()
 *             a = L             # <<<<<<<<<<<<<<
 *         if isinstance(a, list):
 *             if verb:
 */
    __Pyx_INCREF(__pyx_v_L);
    __Pyx_DECREF_SET(__pyx_v_a, __pyx_v_L);

    /* "automata/cautomata.pyx":529
 *         from sage.graphs.digraph import DiGraph
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *         if isinstance(a, SageAutomaton):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("Sage automaton...")
 */
  }

  /* "automata/cautomata.pyx":542
 *                 F = a.final_states()
 *             a = L
 *         if isinstance(a, list):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("List...")
 */
  __pyx_t_1 = PyList_Check(__pyx_v_a); 
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":543
 *             a = L
 *         if isinstance(a, list):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("List...")
 *             a = DiGraph(a, multiedges=True, loops=True)
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 543, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":544
 *         if isinstance(a, list):
 *             if verb:
 *                 print("List...")             # <<<<<<<<<<<<<<
 *             a = DiGraph(a, multiedges=True, loops=True)
 *         if isinstance(a, DiGraph):
 */
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__15, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 544, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":543
 *             a = L
 *         if isinstance(a, list):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("List...")
 *             a = DiGraph(a, multiedges=True, loops=True)
 */
    }

    /* "automata/cautomata.pyx":545
 *             if verb:
 *                 print("List...")
 *             a = DiGraph(a, multiedges=True, loops=True)             # <<<<<<<<<<<<<<
 *         if isinstance(a, DiGraph):
 *             if verb:
 */
    __pyx_t_4 = PyTuple_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 545, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_v_a);
    __Pyx_GIVEREF(__pyx_v_a);
    PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_a);
    __pyx_t_9 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 545, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    if (PyDict_SetItem(__pyx_t_9, __pyx_n_s_multiedges, Py_True) < 0) __PYX_ERR(0, 545, __pyx_L1_error)
    if (PyDict_SetItem(__pyx_t_9, __pyx_n_s_loops, Py_True) < 0) __PYX_ERR(0, 545, __pyx_L1_error)
    __pyx_t_10 = __Pyx_PyObject_Call(__pyx_v_DiGraph, __pyx_t_4, __pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 545, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __Pyx_DECREF_SET(__pyx_v_a, __pyx_t_10);
    __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":542
 *                 F = a.final_states()
 *             a = L
 *         if isinstance(a, list):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("List...")
 */
  }

  /* "automata/cautomata.pyx":546
 *                 print("List...")
 *             a = DiGraph(a, multiedges=True, loops=True)
 *         if isinstance(a, DiGraph):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("DiGraph...")
 */
  __pyx_t_2 = PyObject_IsInstance(__pyx_v_a, __pyx_v_DiGraph); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 546, __pyx_L1_error)
  __pyx_t_1 = (__pyx_t_2 != 0);
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":547
 *             a = DiGraph(a, multiedges=True, loops=True)
 *         if isinstance(a, DiGraph):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("DiGraph...")
 *             SL = set(a.edge_labels())
 */
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 547, __pyx_L1_error)
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":548
 *         if isinstance(a, DiGraph):
 *             if verb:
 *                 print("DiGraph...")             # <<<<<<<<<<<<<<
 *             SL = set(a.edge_labels())
 *             if A is None:
 */
      __pyx_t_10 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__16, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 548, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

      /* "automata/cautomata.pyx":547
 *             a = DiGraph(a, multiedges=True, loops=True)
 *         if isinstance(a, DiGraph):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("DiGraph...")
 *             SL = set(a.edge_labels())
 */
    }

    /* "automata/cautomata.pyx":549
 *             if verb:
 *                 print("DiGraph...")
 *             SL = set(a.edge_labels())             # <<<<<<<<<<<<<<
 *             if A is None:
 *                 A = list(SL)
 */
    __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_edge_labels); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 549, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_9))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_9);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_9, function);
      }
    }
    __pyx_t_10 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_9);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 549, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = PySet_New(__pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 549, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    __pyx_v_SL = ((PyObject*)__pyx_t_9);
    __pyx_t_9 = 0;

    /* "automata/cautomata.pyx":550
 *                 print("DiGraph...")
 *             SL = set(a.edge_labels())
 *             if A is None:             # <<<<<<<<<<<<<<
 *                 A = list(SL)
 *             else:
 */
    __pyx_t_1 = (__pyx_v_A == Py_None);
    __pyx_t_2 = (__pyx_t_1 != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":551
 *             SL = set(a.edge_labels())
 *             if A is None:
 *                 A = list(SL)             # <<<<<<<<<<<<<<
 *             else:
 *                 # test that A contains the labels
 */
      __pyx_t_9 = PySequence_List(__pyx_v_SL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 551, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF_SET(__pyx_v_A, __pyx_t_9);
      __pyx_t_9 = 0;

      /* "automata/cautomata.pyx":550
 *                 print("DiGraph...")
 *             SL = set(a.edge_labels())
 *             if A is None:             # <<<<<<<<<<<<<<
 *                 A = list(SL)
 *             else:
 */
      goto __pyx_L18;
    }

    /* "automata/cautomata.pyx":554
 *             else:
 *                 # test that A contains the labels
 *                 if not SL.issubset(A):             # <<<<<<<<<<<<<<
 *                     raise ValueError("A label of a transition is not in the alphabet %s"%A)
 *             self.A = A
 */
    /*else*/ {
      __pyx_t_9 = __Pyx_CallUnboundCMethod1(&__pyx_umethod_PySet_Type_issubset, __pyx_v_SL, __pyx_v_A); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 554, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 554, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_1 = ((!__pyx_t_2) != 0);
      if (unlikely(__pyx_t_1)) {

        /* "automata/cautomata.pyx":555
 *                 # test that A contains the labels
 *                 if not SL.issubset(A):
 *                     raise ValueError("A label of a transition is not in the alphabet %s"%A)             # <<<<<<<<<<<<<<
 *             self.A = A
 *             if verb:
 */
        __pyx_t_9 = __Pyx_PyString_FormatSafe(__pyx_kp_s_A_label_of_a_transition_is_not_i, __pyx_v_A); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 555, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_10 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 555, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_Raise(__pyx_t_10, 0, 0, 0);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __PYX_ERR(0, 555, __pyx_L1_error)

        /* "automata/cautomata.pyx":554
 *             else:
 *                 # test that A contains the labels
 *                 if not SL.issubset(A):             # <<<<<<<<<<<<<<
 *                     raise ValueError("A label of a transition is not in the alphabet %s"%A)
 *             self.A = A
 */
      }
    }
    __pyx_L18:;

    /* "automata/cautomata.pyx":556
 *                 if not SL.issubset(A):
 *                     raise ValueError("A label of a transition is not in the alphabet %s"%A)
 *             self.A = A             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("getNAutomaton(%s, I=%s, F=%s, A=%s)" % (a, I, F, self.A))
 */
    if (!(likely(PyList_CheckExact(__pyx_v_A))||((__pyx_v_A) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_v_A)->tp_name), 0))) __PYX_ERR(0, 556, __pyx_L1_error)
    __pyx_t_10 = __pyx_v_A;
    __Pyx_INCREF(__pyx_t_10);
    __Pyx_GIVEREF(__pyx_t_10);
    __Pyx_GOTREF(__pyx_v_self->A);
    __Pyx_DECREF(__pyx_v_self->A);
    __pyx_v_self->A = ((PyObject*)__pyx_t_10);
    __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":557
 *                     raise ValueError("A label of a transition is not in the alphabet %s"%A)
 *             self.A = A
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("getNAutomaton(%s, I=%s, F=%s, A=%s)" % (a, I, F, self.A))
 *             self.a[0] = getNAutomaton(a, I=I, F=F, A=self.A, verb=verb)
 */
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 557, __pyx_L1_error)
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":558
 *             self.A = A
 *             if verb:
 *                 print("getNAutomaton(%s, I=%s, F=%s, A=%s)" % (a, I, F, self.A))             # <<<<<<<<<<<<<<
 *             self.a[0] = getNAutomaton(a, I=I, F=F, A=self.A, verb=verb)
 *             if keep_S:
 */
      __pyx_t_10 = PyTuple_New(4); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 558, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_INCREF(__pyx_v_a);
      __Pyx_GIVEREF(__pyx_v_a);
      PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_v_a);
      __Pyx_INCREF(__pyx_v_I);
      __Pyx_GIVEREF(__pyx_v_I);
      PyTuple_SET_ITEM(__pyx_t_10, 1, __pyx_v_I);
      __Pyx_INCREF(__pyx_v_F);
      __Pyx_GIVEREF(__pyx_v_F);
      PyTuple_SET_ITEM(__pyx_t_10, 2, __pyx_v_F);
      __Pyx_INCREF(__pyx_v_self->A);
      __Pyx_GIVEREF(__pyx_v_self->A);
      PyTuple_SET_ITEM(__pyx_t_10, 3, __pyx_v_self->A);
      __pyx_t_9 = __Pyx_PyString_Format(__pyx_kp_s_getNAutomaton_s_I_s_F_s_A_s, __pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 558, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 558, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

      /* "automata/cautomata.pyx":557
 *                     raise ValueError("A label of a transition is not in the alphabet %s"%A)
 *             self.A = A
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("getNAutomaton(%s, I=%s, F=%s, A=%s)" % (a, I, F, self.A))
 *             self.a[0] = getNAutomaton(a, I=I, F=F, A=self.A, verb=verb)
 */
    }

    /* "automata/cautomata.pyx":559
 *             if verb:
 *                 print("getNAutomaton(%s, I=%s, F=%s, A=%s)" % (a, I, F, self.A))
 *             self.a[0] = getNAutomaton(a, I=I, F=F, A=self.A, verb=verb)             # <<<<<<<<<<<<<<
 *             if keep_S:
 *                 self.S = a.S
 */
    __pyx_t_10 = __pyx_v_self->A;
    __Pyx_INCREF(__pyx_t_10);
    __pyx_t_13.__pyx_n = 4;
    __pyx_t_13.I = __pyx_v_I;
    __pyx_t_13.F = __pyx_v_F;
    __pyx_t_13.A = __pyx_t_10;
    __pyx_t_13.verb = __pyx_v_verb;
    __pyx_t_12 = __pyx_f_8automata_9cautomata_getNAutomaton(__pyx_v_a, &__pyx_t_13); 
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    (__pyx_v_self->a[0]) = __pyx_t_12;

    /* "automata/cautomata.pyx":560
 *                 print("getNAutomaton(%s, I=%s, F=%s, A=%s)" % (a, I, F, self.A))
 *             self.a[0] = getNAutomaton(a, I=I, F=F, A=self.A, verb=verb)
 *             if keep_S:             # <<<<<<<<<<<<<<
 *                 self.S = a.S
 *         elif isinstance(a, CAutomaton):
 */
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_keep_S); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 560, __pyx_L1_error)
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":561
 *             self.a[0] = getNAutomaton(a, I=I, F=F, A=self.A, verb=verb)
 *             if keep_S:
 *                 self.S = a.S             # <<<<<<<<<<<<<<
 *         elif isinstance(a, CAutomaton):
 *             if verb:
 */
      __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_S); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 561, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      if (!(likely(PyList_CheckExact(__pyx_t_10))||((__pyx_t_10) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_10)->tp_name), 0))) __PYX_ERR(0, 561, __pyx_L1_error)
      __Pyx_GIVEREF(__pyx_t_10);
      __Pyx_GOTREF(__pyx_v_self->S);
      __Pyx_DECREF(__pyx_v_self->S);
      __pyx_v_self->S = ((PyObject*)__pyx_t_10);
      __pyx_t_10 = 0;

      /* "automata/cautomata.pyx":560
 *                 print("getNAutomaton(%s, I=%s, F=%s, A=%s)" % (a, I, F, self.A))
 *             self.a[0] = getNAutomaton(a, I=I, F=F, A=self.A, verb=verb)
 *             if keep_S:             # <<<<<<<<<<<<<<
 *                 self.S = a.S
 *         elif isinstance(a, CAutomaton):
 */
    }

    /* "automata/cautomata.pyx":546
 *                 print("List...")
 *             a = DiGraph(a, multiedges=True, loops=True)
 *         if isinstance(a, DiGraph):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("DiGraph...")
 */
    goto __pyx_L16;
  }

  /* "automata/cautomata.pyx":562
 *             if keep_S:
 *                 self.S = a.S
 *         elif isinstance(a, CAutomaton):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("CAutomaton")
 */
  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_a, __pyx_ptype_8automata_9cautomata_CAutomaton); 
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":563
 *                 self.S = a.S
 *         elif isinstance(a, CAutomaton):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("CAutomaton")
 *             na = a
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 563, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":564
 *         elif isinstance(a, CAutomaton):
 *             if verb:
 *                 print("CAutomaton")             # <<<<<<<<<<<<<<
 *             na = a
 *             sig_on()
 */
      __pyx_t_10 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__17, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 564, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

      /* "automata/cautomata.pyx":563
 *                 self.S = a.S
 *         elif isinstance(a, CAutomaton):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("CAutomaton")
 *             na = a
 */
    }

    /* "automata/cautomata.pyx":565
 *             if verb:
 *                 print("CAutomaton")
 *             na = a             # <<<<<<<<<<<<<<
 *             sig_on()
 *             self.a[0] = CopyNAutomaton(na.a[0], na.a.n, na.a.na)
 */
    if (!(likely(((__pyx_v_a) == Py_None) || likely(__Pyx_TypeTest(__pyx_v_a, __pyx_ptype_8automata_9cautomata_CAutomaton))))) __PYX_ERR(0, 565, __pyx_L1_error)
    __pyx_t_10 = __pyx_v_a;
    __Pyx_INCREF(__pyx_t_10);
    __pyx_v_na = ((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_t_10);
    __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":566
 *                 print("CAutomaton")
 *             na = a
 *             sig_on()             # <<<<<<<<<<<<<<
 *             self.a[0] = CopyNAutomaton(na.a[0], na.a.n, na.a.na)
 *             sig_off()
 */
    __pyx_t_14 = sig_on(); if (unlikely(__pyx_t_14 == ((int)0))) __PYX_ERR(0, 566, __pyx_L1_error)

    /* "automata/cautomata.pyx":567
 *             na = a
 *             sig_on()
 *             self.a[0] = CopyNAutomaton(na.a[0], na.a.n, na.a.na)             # <<<<<<<<<<<<<<
 *             sig_off()
 *             self.A = na.A
 */
    (__pyx_v_self->a[0]) = CopyNAutomaton((__pyx_v_na->a[0]), __pyx_v_na->a->n, __pyx_v_na->a->na);

    /* "automata/cautomata.pyx":568
 *             sig_on()
 *             self.a[0] = CopyNAutomaton(na.a[0], na.a.n, na.a.na)
 *             sig_off()             # <<<<<<<<<<<<<<
 *             self.A = na.A
 *             self.S = na.S
 */
    sig_off();

    /* "automata/cautomata.pyx":569
 *             self.a[0] = CopyNAutomaton(na.a[0], na.a.n, na.a.na)
 *             sig_off()
 *             self.A = na.A             # <<<<<<<<<<<<<<
 *             self.S = na.S
 *         elif isinstance(a, DeterministicAutomaton):
 */
    __pyx_t_10 = __pyx_v_na->A;
    __Pyx_INCREF(__pyx_t_10);
    __Pyx_GIVEREF(__pyx_t_10);
    __Pyx_GOTREF(__pyx_v_self->A);
    __Pyx_DECREF(__pyx_v_self->A);
    __pyx_v_self->A = ((PyObject*)__pyx_t_10);
    __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":570
 *             sig_off()
 *             self.A = na.A
 *             self.S = na.S             # <<<<<<<<<<<<<<
 *         elif isinstance(a, DeterministicAutomaton):
 *             if verb:
 */
    __pyx_t_10 = __pyx_v_na->S;
    __Pyx_INCREF(__pyx_t_10);
    __Pyx_GIVEREF(__pyx_t_10);
    __Pyx_GOTREF(__pyx_v_self->S);
    __Pyx_DECREF(__pyx_v_self->S);
    __pyx_v_self->S = ((PyObject*)__pyx_t_10);
    __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":562
 *             if keep_S:
 *                 self.S = a.S
 *         elif isinstance(a, CAutomaton):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("CAutomaton")
 */
    goto __pyx_L16;
  }

  /* "automata/cautomata.pyx":571
 *             self.A = na.A
 *             self.S = na.S
 *         elif isinstance(a, DeterministicAutomaton):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("DeterministicAutomaton")
 */
  __pyx_t_2 = __Pyx_TypeCheck(__pyx_v_a, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton); 
  __pyx_t_1 = (__pyx_t_2 != 0);
  if (likely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":572
 *             self.S = na.S
 *         elif isinstance(a, DeterministicAutomaton):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("DeterministicAutomaton")
 *             da = a
 */
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 572, __pyx_L1_error)
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":573
 *         elif isinstance(a, DeterministicAutomaton):
 *             if verb:
 *                 print("DeterministicAutomaton")             # <<<<<<<<<<<<<<
 *             da = a
 *             self.a[0] = CopyN(da.a[0], verb=verb)
 */
      __pyx_t_10 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__18, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 573, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

      /* "automata/cautomata.pyx":572
 *             self.S = na.S
 *         elif isinstance(a, DeterministicAutomaton):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("DeterministicAutomaton")
 *             da = a
 */
    }

    /* "automata/cautomata.pyx":574
 *             if verb:
 *                 print("DeterministicAutomaton")
 *             da = a             # <<<<<<<<<<<<<<
 *             self.a[0] = CopyN(da.a[0], verb=verb)
 *             self.A = da.A
 */
    if (!(likely(((__pyx_v_a) == Py_None) || likely(__Pyx_TypeTest(__pyx_v_a, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 574, __pyx_L1_error)
    __pyx_t_10 = __pyx_v_a;
    __Pyx_INCREF(__pyx_t_10);
    __pyx_v_da = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_10);
    __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":575
 *                 print("DeterministicAutomaton")
 *             da = a
 *             self.a[0] = CopyN(da.a[0], verb=verb)             # <<<<<<<<<<<<<<
 *             self.A = da.A
 *         else:
 */
    __pyx_t_15 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_15 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 575, __pyx_L1_error)
    (__pyx_v_self->a[0]) = CopyN((__pyx_v_da->a[0]), __pyx_t_15);

    /* "automata/cautomata.pyx":576
 *             da = a
 *             self.a[0] = CopyN(da.a[0], verb=verb)
 *             self.A = da.A             # <<<<<<<<<<<<<<
 *         else:
 *             raise ValueError("Cannot convert the input to CAutomaton.")
 */
    __pyx_t_10 = __pyx_v_da->A;
    __Pyx_INCREF(__pyx_t_10);
    __Pyx_GIVEREF(__pyx_t_10);
    __Pyx_GOTREF(__pyx_v_self->A);
    __Pyx_DECREF(__pyx_v_self->A);
    __pyx_v_self->A = ((PyObject*)__pyx_t_10);
    __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":571
 *             self.A = na.A
 *             self.S = na.S
 *         elif isinstance(a, DeterministicAutomaton):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("DeterministicAutomaton")
 */
    goto __pyx_L16;
  }

  /* "automata/cautomata.pyx":578
 *             self.A = da.A
 *         else:
 *             raise ValueError("Cannot convert the input to CAutomaton.")             # <<<<<<<<<<<<<<
 * 
 *     def __dealloc__(self):
 */
  /*else*/ {
    __pyx_t_10 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__19, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 578, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __Pyx_Raise(__pyx_t_10, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    __PYX_ERR(0, 578, __pyx_L1_error)
  }
  __pyx_L16:;

  /* "automata/cautomata.pyx":507
 *         self.S = None
 * 
 *     def __init__(self, a, I=None, F=None, A=None, keep_S=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         TESTS::
 */

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_da);
  __Pyx_XDECREF((PyObject *)__pyx_v_na);
  __Pyx_XDECREF(__pyx_v_DiGraph);
  __Pyx_XDECREF(__pyx_v_SageAutomaton);
  __Pyx_XDECREF(__pyx_v_L);
  __Pyx_XDECREF(__pyx_v_t);
  __Pyx_XDECREF(__pyx_v_SL);
  __Pyx_XDECREF(__pyx_v_a);
  __Pyx_XDECREF(__pyx_v_I);
  __Pyx_XDECREF(__pyx_v_F);
  __Pyx_XDECREF(__pyx_v_A);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":580
 *             raise ValueError("Cannot convert the input to CAutomaton.")
 * 
 *     def __dealloc__(self):             # <<<<<<<<<<<<<<
 *         sig_on()
 *         if self.a is not NULL:
 */

/* Python wrapper */
static void __pyx_pw_8automata_9cautomata_10CAutomaton_5__dealloc__(PyObject *__pyx_v_self); /*proto*/
static void __pyx_pw_8automata_9cautomata_10CAutomaton_5__dealloc__(PyObject *__pyx_v_self) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__dealloc__ (wrapper)", 0);
  __pyx_pf_8automata_9cautomata_10CAutomaton_4__dealloc__(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
}

static void __pyx_pf_8automata_9cautomata_10CAutomaton_4__dealloc__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self) {
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  __Pyx_RefNannySetupContext("__dealloc__", 0);

  /* "automata/cautomata.pyx":581
 * 
 *     def __dealloc__(self):
 *         sig_on()             # <<<<<<<<<<<<<<
 *         if self.a is not NULL:
 *             FreeNAutomaton(self.a)
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 581, __pyx_L1_error)

  /* "automata/cautomata.pyx":582
 *     def __dealloc__(self):
 *         sig_on()
 *         if self.a is not NULL:             # <<<<<<<<<<<<<<
 *             FreeNAutomaton(self.a)
 *             free(self.a)
 */
  __pyx_t_2 = ((__pyx_v_self->a != NULL) != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":583
 *         sig_on()
 *         if self.a is not NULL:
 *             FreeNAutomaton(self.a)             # <<<<<<<<<<<<<<
 *             free(self.a)
 *         sig_off()
 */
    FreeNAutomaton(__pyx_v_self->a);

    /* "automata/cautomata.pyx":584
 *         if self.a is not NULL:
 *             FreeNAutomaton(self.a)
 *             free(self.a)             # <<<<<<<<<<<<<<
 *         sig_off()
 * 
 */
    free(__pyx_v_self->a);

    /* "automata/cautomata.pyx":582
 *     def __dealloc__(self):
 *         sig_on()
 *         if self.a is not NULL:             # <<<<<<<<<<<<<<
 *             FreeNAutomaton(self.a)
 *             free(self.a)
 */
  }

  /* "automata/cautomata.pyx":585
 *             FreeNAutomaton(self.a)
 *             free(self.a)
 *         sig_off()             # <<<<<<<<<<<<<<
 * 
 *     def __repr__(self):
 */
  sig_off();

  /* "automata/cautomata.pyx":580
 *             raise ValueError("Cannot convert the input to CAutomaton.")
 * 
 *     def __dealloc__(self):             # <<<<<<<<<<<<<<
 *         sig_on()
 *         if self.a is not NULL:
 */

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_WriteUnraisable("automata.cautomata.CAutomaton.__dealloc__", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
}

/* "automata/cautomata.pyx":587
 *         sig_off()
 * 
 *     def __repr__(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Return a representation of the automaton.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_7__repr__(PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_6__repr__[] = "\n        Return a representation of the automaton.\n\n        OUTPUT:\n\n        A string.\n\n        EXAMPLES::\n\n            sage: CAutomaton(dag.AnyWord([0,1]))\n            CAutomaton with 1 state and an alphabet of 2 letters\n\n        ";
#if CYTHON_COMPILING_IN_CPYTHON
struct wrapperbase __pyx_wrapperbase_8automata_9cautomata_10CAutomaton_6__repr__;
#endif
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_7__repr__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__repr__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_6__repr__(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_6__repr__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self) {
  PyObject *__pyx_v_str = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  __Pyx_RefNannySetupContext("__repr__", 0);

  /* "automata/cautomata.pyx":601
 * 
 *         """
 *         str = "CAutomaton with %d state"%self.a.n             # <<<<<<<<<<<<<<
 *         if self.a.n > 1:
 *             str += 's'
 */
  __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 601, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyString_Format(__pyx_kp_s_CAutomaton_with_d_state, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 601, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_str = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":602
 *         """
 *         str = "CAutomaton with %d state"%self.a.n
 *         if self.a.n > 1:             # <<<<<<<<<<<<<<
 *             str += 's'
 *         str += " and an alphabet of %d letter"%self.a.na
 */
  __pyx_t_3 = ((__pyx_v_self->a->n > 1) != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":603
 *         str = "CAutomaton with %d state"%self.a.n
 *         if self.a.n > 1:
 *             str += 's'             # <<<<<<<<<<<<<<
 *         str += " and an alphabet of %d letter"%self.a.na
 *         if self.a.na > 1:
 */
    __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_v_str, __pyx_n_s_s); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 603, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF_SET(__pyx_v_str, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":602
 *         """
 *         str = "CAutomaton with %d state"%self.a.n
 *         if self.a.n > 1:             # <<<<<<<<<<<<<<
 *             str += 's'
 *         str += " and an alphabet of %d letter"%self.a.na
 */
  }

  /* "automata/cautomata.pyx":604
 *         if self.a.n > 1:
 *             str += 's'
 *         str += " and an alphabet of %d letter"%self.a.na             # <<<<<<<<<<<<<<
 *         if self.a.na > 1:
 *             str += 's'
 */
  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_self->a->na); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 604, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_and_an_alphabet_of_d_letter, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 604, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_v_str, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 604, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF_SET(__pyx_v_str, __pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":605
 *             str += 's'
 *         str += " and an alphabet of %d letter"%self.a.na
 *         if self.a.na > 1:             # <<<<<<<<<<<<<<
 *             str += 's'
 *         return str
 */
  __pyx_t_3 = ((__pyx_v_self->a->na > 1) != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":606
 *         str += " and an alphabet of %d letter"%self.a.na
 *         if self.a.na > 1:
 *             str += 's'             # <<<<<<<<<<<<<<
 *         return str
 * 
 */
    __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_v_str, __pyx_n_s_s); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 606, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF_SET(__pyx_v_str, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":605
 *             str += 's'
 *         str += " and an alphabet of %d letter"%self.a.na
 *         if self.a.na > 1:             # <<<<<<<<<<<<<<
 *             str += 's'
 *         return str
 */
  }

  /* "automata/cautomata.pyx":607
 *         if self.a.na > 1:
 *             str += 's'
 *         return str             # <<<<<<<<<<<<<<
 * 
 *     def _latex_(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_str);
  __pyx_r = __pyx_v_str;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":587
 *         sig_off()
 * 
 *     def __repr__(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Return a representation of the automaton.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.__repr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_str);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":609
 *         return str
 * 
 *     def _latex_(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Return a latex representation of the automaton.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_9_latex_(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_8_latex_[] = "\n        Return a latex representation of the automaton.\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: b = CAutomaton(a)\n            sage: latex(b)     # optional -  dot2tex\n            \\documentclass{article}\n            \\usepackage[x11names, rgb]{xcolor}\n            \\usepackage[utf8]{inputenc}\n            \\usepackage{tikz}\n            \\usetikzlibrary{snakes,arrows,shapes}\n            \\usepackage{amsmath}\n            %\n            %\n            <BLANKLINE>\n            %\n            <BLANKLINE>\n            %\n            <BLANKLINE>\n            \\begin{document}\n            \\pagestyle{empty}\n            %\n            %\n            %\n            <BLANKLINE>\n            \\enlargethispage{100cm}\n            % Start of code\n            % \\begin{tikzpicture}[anchor=mid,>=latex',line join=bevel,]\n            \\begin{tikzpicture}[>=latex',line join=bevel,]\n              \\pgfsetlinewidth{1bp}\n            %%\n            \\pgfsetcolor{black}\n              % Edge: 0 -> 1\n              \\draw [-stealth'] (44.247bp,22.0bp) .. controls (54.848bp,22.0bp) and (67.736bp,22.0bp)  .. (89.697bp,22.0bp);\n              \\definecolor{strokecol}{rgb}{0.0,0.0,0.0};\n              \\pgfsetstrokecolor{strokecol}\n              \\draw (67.0bp,33.0bp) node {a};\n              % Edge: 2 -> 3\n              \\draw [-stealth'] (44.247bp,80.0bp) .. controls (54.848bp,80.0bp) and (67.736bp,80.0bp)  .. (89.697bp,80.0bp);\n              \\draw (67.0bp,91.0bp) node {b};\n              % Node: 1\n            \\begin{scope}\n              \\definecolor{strokecol}{rgb}{0.0,0.0,0.0};\n              \\pgfsetstrokecolor{strokecol}\n              \\draw [solid] (112.0bp,22.0bp) ellipse (18.0bp and 18.0bp);\n              \\draw [solid] (112.0bp,22.0bp) ellipse (22.0bp and 22.0bp);\n              \\draw (112.0bp,22.0bp) node {1};\n            \\end{scope}\n              % Node: 0\n            \\begin{scope}""\n              \\definecolor{strokecol}{rgb}{0.0,0.0,0.0};\n              \\pgfsetstrokecolor{strokecol}\n              \\draw [solid] (22.0bp,22.0bp) ellipse (18.0bp and 18.0bp);\n              \\draw [solid] (22.0bp,22.0bp) ellipse (22.0bp and 22.0bp);\n              \\draw (22.0bp,22.0bp) node {0};\n            \\end{scope}\n              % Node: 3\n            \\begin{scope}\n              \\definecolor{strokecol}{rgb}{0.0,0.0,0.0};\n              \\pgfsetstrokecolor{strokecol}\n              \\draw [solid] (112.0bp,80.0bp) ellipse (18.0bp and 18.0bp);\n              \\draw [solid] (112.0bp,80.0bp) ellipse (22.0bp and 22.0bp);\n              \\draw (112.0bp,80.0bp) node {3};\n            \\end{scope}\n              % Node: 2\n            \\begin{scope}\n              \\definecolor{strokecol}{rgb}{0.0,0.0,0.0};\n              \\pgfsetstrokecolor{strokecol}\n              \\draw [solid] (22.0bp,80.0bp) ellipse (18.0bp and 18.0bp);\n              \\draw [solid] (22.0bp,80.0bp) ellipse (22.0bp and 22.0bp);\n              \\draw (22.0bp,80.0bp) node {2};\n            \\end{scope}\n            %\n            \\end{tikzpicture}\n            % End of code\n            <BLANKLINE>\n            %\n            \\end{document}\n            %\n            <BLANKLINE>\n            <BLANKLINE>\n            <BLANKLINE>\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_9_latex_(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("_latex_ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_8_latex_(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_8_latex_(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self) {
  long __pyx_v_sx;
  long __pyx_v_sy;
  PyObject *__pyx_v_LatexExpr = NULL;
  char *__pyx_v_file;
  PyObject *__pyx_v_tmp_filename = NULL;
  PyObject *__pyx_v_file_name = NULL;
  PyObject *__pyx_v_dot2tex = NULL;
  char **__pyx_v_ll;
  int __pyx_v_i;
  PyObject *__pyx_v_strA = NULL;
  PyObject *__pyx_v_dotfile = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  char *__pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  int __pyx_t_12;
  int __pyx_t_13;
  int __pyx_t_14;
  __Pyx_RefNannySetupContext("_latex_", 0);

  /* "automata/cautomata.pyx":695
 *             <BLANKLINE>
 *         """
 *         sx = 800             # <<<<<<<<<<<<<<
 *         sy = 600
 *         from sage.misc.latex import LatexExpr
 */
  __pyx_v_sx = 0x320;

  /* "automata/cautomata.pyx":696
 *         """
 *         sx = 800
 *         sy = 600             # <<<<<<<<<<<<<<
 *         from sage.misc.latex import LatexExpr
 *         cdef char *file
 */
  __pyx_v_sy = 0x258;

  /* "automata/cautomata.pyx":697
 *         sx = 800
 *         sy = 600
 *         from sage.misc.latex import LatexExpr             # <<<<<<<<<<<<<<
 *         cdef char *file
 *         from sage.misc.temporary_file import tmp_filename
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 697, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_LatexExpr);
  __Pyx_GIVEREF(__pyx_n_s_LatexExpr);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_LatexExpr);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_sage_misc_latex, __pyx_t_1, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 697, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_LatexExpr); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 697, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_LatexExpr = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":699
 *         from sage.misc.latex import LatexExpr
 *         cdef char *file
 *         from sage.misc.temporary_file import tmp_filename             # <<<<<<<<<<<<<<
 *         file_name = tmp_filename()+".dot"
 *         file = file_name
 */
  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 699, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_INCREF(__pyx_n_s_tmp_filename);
  __Pyx_GIVEREF(__pyx_n_s_tmp_filename);
  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_tmp_filename);
  __pyx_t_1 = __Pyx_Import(__pyx_n_s_sage_misc_temporary_file, __pyx_t_2, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 699, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_1, __pyx_n_s_tmp_filename); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 699, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_INCREF(__pyx_t_2);
  __pyx_v_tmp_filename = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":700
 *         cdef char *file
 *         from sage.misc.temporary_file import tmp_filename
 *         file_name = tmp_filename()+".dot"             # <<<<<<<<<<<<<<
 *         file = file_name
 *         try:
 */
  __Pyx_INCREF(__pyx_v_tmp_filename);
  __pyx_t_2 = __pyx_v_tmp_filename; __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 700, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_kp_s_dot); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 700, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_file_name = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":701
 *         from sage.misc.temporary_file import tmp_filename
 *         file_name = tmp_filename()+".dot"
 *         file = file_name             # <<<<<<<<<<<<<<
 *         try:
 *             from dot2tex import dot2tex
 */
  __pyx_t_4 = __Pyx_PyObject_AsWritableString(__pyx_v_file_name); if (unlikely((!__pyx_t_4) && PyErr_Occurred())) __PYX_ERR(0, 701, __pyx_L1_error)
  __pyx_v_file = __pyx_t_4;

  /* "automata/cautomata.pyx":702
 *         file_name = tmp_filename()+".dot"
 *         file = file_name
 *         try:             # <<<<<<<<<<<<<<
 *             from dot2tex import dot2tex
 *         except ImportError:
 */
  {
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ExceptionSave(&__pyx_t_5, &__pyx_t_6, &__pyx_t_7);
    __Pyx_XGOTREF(__pyx_t_5);
    __Pyx_XGOTREF(__pyx_t_6);
    __Pyx_XGOTREF(__pyx_t_7);
    /*try:*/ {

      /* "automata/cautomata.pyx":703
 *         file = file_name
 *         try:
 *             from dot2tex import dot2tex             # <<<<<<<<<<<<<<
 *         except ImportError:
 *             raise ModuleNotFoundError("dot2tex must be installed in order to have the LaTeX representation of the CAutomaton.\n\
 */
      __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 703, __pyx_L3_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_INCREF(__pyx_n_s_dot2tex);
      __Pyx_GIVEREF(__pyx_n_s_dot2tex);
      PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_dot2tex);
      __pyx_t_1 = __Pyx_Import(__pyx_n_s_dot2tex, __pyx_t_2, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 703, __pyx_L3_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_1, __pyx_n_s_dot2tex); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 703, __pyx_L3_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_2);
      __pyx_v_dot2tex = __pyx_t_2;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":702
 *         file_name = tmp_filename()+".dot"
 *         file = file_name
 *         try:             # <<<<<<<<<<<<<<
 *             from dot2tex import dot2tex
 *         except ImportError:
 */
    }
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    goto __pyx_L8_try_end;
    __pyx_L3_error:;
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":704
 *         try:
 *             from dot2tex import dot2tex
 *         except ImportError:             # <<<<<<<<<<<<<<
 *             raise ModuleNotFoundError("dot2tex must be installed in order to have the LaTeX representation of the CAutomaton.\n\
 *                 You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.")
 */
    __pyx_t_8 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_ImportError);
    if (__pyx_t_8) {
      __Pyx_AddTraceback("automata.cautomata.CAutomaton._latex_", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_2, &__pyx_t_3) < 0) __PYX_ERR(0, 704, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_GOTREF(__pyx_t_3);

      /* "automata/cautomata.pyx":705
 *             from dot2tex import dot2tex
 *         except ImportError:
 *             raise ModuleNotFoundError("dot2tex must be installed in order to have the LaTeX representation of the CAutomaton.\n\             # <<<<<<<<<<<<<<
 *                 You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.")
 *         cdef char** ll
 */
      __Pyx_GetModuleGlobalName(__pyx_t_9, __pyx_n_s_ModuleNotFoundError); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 705, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_10 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_tuple__20, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 705, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_Raise(__pyx_t_10, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __PYX_ERR(0, 705, __pyx_L5_except_error)
    }
    goto __pyx_L5_except_error;
    __pyx_L5_except_error:;

    /* "automata/cautomata.pyx":702
 *         file_name = tmp_filename()+".dot"
 *         file = file_name
 *         try:             # <<<<<<<<<<<<<<
 *             from dot2tex import dot2tex
 *         except ImportError:
 */
    __Pyx_XGIVEREF(__pyx_t_5);
    __Pyx_XGIVEREF(__pyx_t_6);
    __Pyx_XGIVEREF(__pyx_t_7);
    __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
    goto __pyx_L1_error;
    __pyx_L8_try_end:;
  }

  /* "automata/cautomata.pyx":708
 *                 You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.")
 *         cdef char** ll
 *         ll = <char **> malloc(sizeof(char*) * self.a.na)             # <<<<<<<<<<<<<<
 *         if ll is NULL:
 *             raise MemoryError("Failed to allocate memory for ll in "
 */
  __pyx_v_ll = ((char **)malloc(((sizeof(char *)) * __pyx_v_self->a->na)));

  /* "automata/cautomata.pyx":709
 *         cdef char** ll
 *         ll = <char **> malloc(sizeof(char*) * self.a.na)
 *         if ll is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for ll in "
 *                               "_latex_")
 */
  __pyx_t_11 = ((__pyx_v_ll == NULL) != 0);
  if (unlikely(__pyx_t_11)) {

    /* "automata/cautomata.pyx":710
 *         ll = <char **> malloc(sizeof(char*) * self.a.na)
 *         if ll is NULL:
 *             raise MemoryError("Failed to allocate memory for ll in "             # <<<<<<<<<<<<<<
 *                               "_latex_")
 *         cdef int i
 */
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__21, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 710, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 710, __pyx_L1_error)

    /* "automata/cautomata.pyx":709
 *         cdef char** ll
 *         ll = <char **> malloc(sizeof(char*) * self.a.na)
 *         if ll is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for ll in "
 *                               "_latex_")
 */
  }

  /* "automata/cautomata.pyx":713
 *                               "_latex_")
 *         cdef int i
 *         strA = []             # <<<<<<<<<<<<<<
 *         for i in range(self.a.na):
 *             strA.append(str(self.A[i]))
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 713, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_strA = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":714
 *         cdef int i
 *         strA = []
 *         for i in range(self.a.na):             # <<<<<<<<<<<<<<
 *             strA.append(str(self.A[i]))
 *             ll[i] = strA[i]
 */
  __pyx_t_8 = __pyx_v_self->a->na;
  __pyx_t_12 = __pyx_t_8;
  for (__pyx_t_13 = 0; __pyx_t_13 < __pyx_t_12; __pyx_t_13+=1) {
    __pyx_v_i = __pyx_t_13;

    /* "automata/cautomata.pyx":715
 *         strA = []
 *         for i in range(self.a.na):
 *             strA.append(str(self.A[i]))             # <<<<<<<<<<<<<<
 *             ll[i] = strA[i]
 *         sig_on()
 */
    if (unlikely(__pyx_v_self->A == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 715, __pyx_L1_error)
    }
    __pyx_t_3 = __Pyx_GetItemInt_List(__pyx_v_self->A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 715, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)(&PyString_Type)), __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 715, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_14 = __Pyx_PyList_Append(__pyx_v_strA, __pyx_t_2); if (unlikely(__pyx_t_14 == ((int)-1))) __PYX_ERR(0, 715, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":716
 *         for i in range(self.a.na):
 *             strA.append(str(self.A[i]))
 *             ll[i] = strA[i]             # <<<<<<<<<<<<<<
 *         sig_on()
 *         NplotDot(file, self.a[0], ll, "Automaton", sx, sy, False)
 */
    __pyx_t_2 = __Pyx_GetItemInt_List(__pyx_v_strA, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 716, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_PyObject_AsWritableString(__pyx_t_2); if (unlikely((!__pyx_t_4) && PyErr_Occurred())) __PYX_ERR(0, 716, __pyx_L1_error)
    (__pyx_v_ll[__pyx_v_i]) = __pyx_t_4;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  }

  /* "automata/cautomata.pyx":717
 *             strA.append(str(self.A[i]))
 *             ll[i] = strA[i]
 *         sig_on()             # <<<<<<<<<<<<<<
 *         NplotDot(file, self.a[0], ll, "Automaton", sx, sy, False)
 *         free(ll)
 */
  __pyx_t_8 = sig_on(); if (unlikely(__pyx_t_8 == ((int)0))) __PYX_ERR(0, 717, __pyx_L1_error)

  /* "automata/cautomata.pyx":718
 *             ll[i] = strA[i]
 *         sig_on()
 *         NplotDot(file, self.a[0], ll, "Automaton", sx, sy, False)             # <<<<<<<<<<<<<<
 *         free(ll)
 *         sig_off()
 */
  NplotDot(__pyx_v_file, (__pyx_v_self->a[0]), __pyx_v_ll, ((char const *)"Automaton"), __pyx_v_sx, __pyx_v_sy, 0);

  /* "automata/cautomata.pyx":719
 *         sig_on()
 *         NplotDot(file, self.a[0], ll, "Automaton", sx, sy, False)
 *         free(ll)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         dotfile = open(file_name)
 */
  free(__pyx_v_ll);

  /* "automata/cautomata.pyx":720
 *         NplotDot(file, self.a[0], ll, "Automaton", sx, sy, False)
 *         free(ll)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         dotfile = open(file_name)
 *         return LatexExpr(dot2tex(dotfile.read()))
 */
  sig_off();

  /* "automata/cautomata.pyx":721
 *         free(ll)
 *         sig_off()
 *         dotfile = open(file_name)             # <<<<<<<<<<<<<<
 *         return LatexExpr(dot2tex(dotfile.read()))
 * 
 */
  __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_open, __pyx_v_file_name); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_dotfile = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":722
 *         sig_off()
 *         dotfile = open(file_name)
 *         return LatexExpr(dot2tex(dotfile.read()))             # <<<<<<<<<<<<<<
 * 
 *     def copy(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_dotfile, __pyx_n_s_read); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 722, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __pyx_t_9 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_10))) {
    __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_10);
    if (likely(__pyx_t_9)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
      __Pyx_INCREF(__pyx_t_9);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_10, function);
    }
  }
  __pyx_t_1 = (__pyx_t_9) ? __Pyx_PyObject_CallOneArg(__pyx_t_10, __pyx_t_9) : __Pyx_PyObject_CallNoArg(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 722, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
  __Pyx_INCREF(__pyx_v_dot2tex);
  __pyx_t_10 = __pyx_v_dot2tex; __pyx_t_9 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
    __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_10);
    if (likely(__pyx_t_9)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
      __Pyx_INCREF(__pyx_t_9);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_10, function);
    }
  }
  __pyx_t_3 = (__pyx_t_9) ? __Pyx_PyObject_Call2Args(__pyx_t_10, __pyx_t_9, __pyx_t_1) : __Pyx_PyObject_CallOneArg(__pyx_t_10, __pyx_t_1);
  __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 722, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
  __Pyx_INCREF(__pyx_v_LatexExpr);
  __pyx_t_10 = __pyx_v_LatexExpr; __pyx_t_1 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_10))) {
    __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_10);
    if (likely(__pyx_t_1)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
      __Pyx_INCREF(__pyx_t_1);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_10, function);
    }
  }
  __pyx_t_2 = (__pyx_t_1) ? __Pyx_PyObject_Call2Args(__pyx_t_10, __pyx_t_1, __pyx_t_3) : __Pyx_PyObject_CallOneArg(__pyx_t_10, __pyx_t_3);
  __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 722, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":609
 *         return str
 * 
 *     def _latex_(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Return a latex representation of the automaton.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton._latex_", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_LatexExpr);
  __Pyx_XDECREF(__pyx_v_tmp_filename);
  __Pyx_XDECREF(__pyx_v_file_name);
  __Pyx_XDECREF(__pyx_v_dot2tex);
  __Pyx_XDECREF(__pyx_v_strA);
  __Pyx_XDECREF(__pyx_v_dotfile);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":724
 *         return LatexExpr(dot2tex(dotfile.read()))
 * 
 *     def copy(self):             # <<<<<<<<<<<<<<
 *         """
 *         Do a copy of the :class:`CAutomaton`.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_11copy(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_10copy[] = "\n        Do a copy of the :class:`CAutomaton`.\n\n        OUTPUT:\n\n        Return a copy of the :class:`CAutomaton`\n\n        EXAMPLES::\n\n            sage: a = CAutomaton([(0, 1, 'a'), (2, 3, 'b')], I=[0])\n            sage: a.copy()\n            CAutomaton with 4 states and an alphabet of 2 letters\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_11copy(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("copy (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_10copy(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_10copy(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self) {
  struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_r = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  __Pyx_RefNannySetupContext("copy", 0);

  /* "automata/cautomata.pyx":739
 * 
 *         """
 *         r = CAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r.a[0] = CopyNAutomaton(self.a[0], self.a.n, self.a.na)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_CAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 739, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":740
 *         """
 *         r = CAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         r.a[0] = CopyNAutomaton(self.a[0], self.a.n, self.a.na)
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 740, __pyx_L1_error)

  /* "automata/cautomata.pyx":741
 *         r = CAutomaton(None)
 *         sig_on()
 *         r.a[0] = CopyNAutomaton(self.a[0], self.a.n, self.a.na)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.A = self.A[:]
 */
  (__pyx_v_r->a[0]) = CopyNAutomaton((__pyx_v_self->a[0]), __pyx_v_self->a->n, __pyx_v_self->a->na);

  /* "automata/cautomata.pyx":742
 *         sig_on()
 *         r.a[0] = CopyNAutomaton(self.a[0], self.a.n, self.a.na)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.A = self.A[:]
 *         return r
 */
  sig_off();

  /* "automata/cautomata.pyx":743
 *         r.a[0] = CopyNAutomaton(self.a[0], self.a.n, self.a.na)
 *         sig_off()
 *         r.A = self.A[:]             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  if (unlikely(__pyx_v_self->A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(0, 743, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_PyList_GetSlice(__pyx_v_self->A, 0, PY_SSIZE_T_MAX); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 743, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":744
 *         sig_off()
 *         r.A = self.A[:]
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     @property
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":724
 *         return LatexExpr(dot2tex(dotfile.read()))
 * 
 *     def copy(self):             # <<<<<<<<<<<<<<
 *         """
 *         Do a copy of the :class:`CAutomaton`.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.copy", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":747
 * 
 *     @property
 *     def n_states(self):             # <<<<<<<<<<<<<<
 *         """
 *         return the numbers of states
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_8n_states_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_8n_states_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_8n_states___get__(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_8n_states___get__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);

  /* "automata/cautomata.pyx":762
 *             4
 *         """
 *         return self.a.n             # <<<<<<<<<<<<<<
 * 
 *     def n_successors(self, int i):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 762, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":747
 * 
 *     @property
 *     def n_states(self):             # <<<<<<<<<<<<<<
 *         """
 *         return the numbers of states
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.n_states.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":764
 *         return self.a.n
 * 
 *     def n_successors(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         INPUT:
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_13n_successors(PyObject *__pyx_v_self, PyObject *__pyx_arg_i); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_12n_successors[] = "\n        INPUT:\n\n        - ``i`` -- int successor number\n\n        OUTPUT:\n\n        return the numbers of successor of state ``i``\n        (i.e. the number of leaving transitions from state ``i``)\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = CAutomaton(a)\n            sage: b.n_successors(0)\n            1\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_13n_successors(PyObject *__pyx_v_self, PyObject *__pyx_arg_i) {
  int __pyx_v_i;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("n_successors (wrapper)", 0);
  assert(__pyx_arg_i); {
    __pyx_v_i = __Pyx_PyInt_As_int(__pyx_arg_i); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 764, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.n_successors", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_12n_successors(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), ((int)__pyx_v_i));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_12n_successors(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("n_successors", 0);

  /* "automata/cautomata.pyx":782
 *             1
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("There is no state %s !" % i)
 *         return self.a.e[i].n
 */
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":783
 *         """
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)             # <<<<<<<<<<<<<<
 *         return self.a.e[i].n
 * 
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 783, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_There_is_no_state_s, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 783, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 783, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 783, __pyx_L1_error)

    /* "automata/cautomata.pyx":782
 *             1
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("There is no state %s !" % i)
 *         return self.a.e[i].n
 */
  }

  /* "automata/cautomata.pyx":784
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)
 *         return self.a.e[i].n             # <<<<<<<<<<<<<<
 * 
 *     def successor(self, int i, int j):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_3 = __Pyx_PyInt_From_int((__pyx_v_self->a->e[__pyx_v_i]).n); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 784, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":764
 *         return self.a.n
 * 
 *     def n_successors(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         INPUT:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.n_successors", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":786
 *         return self.a.e[i].n
 * 
 *     def successor(self, int i, int j):             # <<<<<<<<<<<<<<
 *         """
 *         Give the state at end of the ``j`` th edge from the state ``i``
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_15successor(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_14successor[] = "\n        Give the state at end of the ``j`` th edge from the state ``i``\n\n        INPUT:\n\n        - ``i`` int state number\n        - ``j`` int edge number\n\n        OUTPUT:\n\n        return the state at end of the ``j``th edge of the state ``i``\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'),(1, 2, 'c'), (2, 3, 'b')], i=0)\n            sage: b = CAutomaton(a)\n            sage: b.successor(1, 0)\n            2\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_15successor(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_i;
  int __pyx_v_j;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("successor (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_i,&__pyx_n_s_j,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_j)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("successor", 1, 2, 2, 1); __PYX_ERR(0, 786, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "successor") < 0)) __PYX_ERR(0, 786, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_i = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 786, __pyx_L3_error)
    __pyx_v_j = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_j == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 786, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("successor", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 786, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.successor", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_14successor(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), __pyx_v_i, __pyx_v_j);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_14successor(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i, int __pyx_v_j) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("successor", 0);

  /* "automata/cautomata.pyx":806
 *             2
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("There is no state %s !" % i)
 *         if j >= self.a.e[i].n or j < 0:
 */
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":807
 *         """
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)             # <<<<<<<<<<<<<<
 *         if j >= self.a.e[i].n or j < 0:
 *             raise ValueError("The state %s has no edge number %s !" % (i, j))
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 807, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_There_is_no_state_s, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 807, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 807, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 807, __pyx_L1_error)

    /* "automata/cautomata.pyx":806
 *             2
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("There is no state %s !" % i)
 *         if j >= self.a.e[i].n or j < 0:
 */
  }

  /* "automata/cautomata.pyx":808
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)
 *         if j >= self.a.e[i].n or j < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state %s has no edge number %s !" % (i, j))
 *         return self.a.e[i].a[j].e
 */
  __pyx_t_2 = ((__pyx_v_j >= (__pyx_v_self->a->e[__pyx_v_i]).n) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_j < 0) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L7_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":809
 *             raise ValueError("There is no state %s !" % i)
 *         if j >= self.a.e[i].n or j < 0:
 *             raise ValueError("The state %s has no edge number %s !" % (i, j))             # <<<<<<<<<<<<<<
 *         return self.a.e[i].a[j].e
 * 
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyInt_From_int(__pyx_v_j); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_The_state_s_has_no_edge_number_s, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 809, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_5, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __PYX_ERR(0, 809, __pyx_L1_error)

    /* "automata/cautomata.pyx":808
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)
 *         if j >= self.a.e[i].n or j < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state %s has no edge number %s !" % (i, j))
 *         return self.a.e[i].a[j].e
 */
  }

  /* "automata/cautomata.pyx":810
 *         if j >= self.a.e[i].n or j < 0:
 *             raise ValueError("The state %s has no edge number %s !" % (i, j))
 *         return self.a.e[i].a[j].e             # <<<<<<<<<<<<<<
 * 
 *     def label(self, int i, int j):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_5 = __Pyx_PyInt_From_int(((__pyx_v_self->a->e[__pyx_v_i]).a[__pyx_v_j]).e); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 810, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_r = __pyx_t_5;
  __pyx_t_5 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":786
 *         return self.a.e[i].n
 * 
 *     def successor(self, int i, int j):             # <<<<<<<<<<<<<<
 *         """
 *         Give the state at end of the ``j`` th edge from the state ``i``
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.successor", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":812
 *         return self.a.e[i].a[j].e
 * 
 *     def label(self, int i, int j):             # <<<<<<<<<<<<<<
 *         """
 *         Give the label of the ``j``th edge of the state ``i``
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_17label(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_16label[] = "\n        Give the label of the ``j``th edge of the state ``i``\n\n        INPUT:\n\n        -``i`` -- int state number\n        -``j`` -- int edge number\n\n        OUTPUT:\n\n        return the label index of the ``j``th edge of the state ``i``\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'),(1, 2, 'c'), (2, 3, 'b')], i=0)\n            sage: b = CAutomaton(a)\n            sage: b.label(1, 0)\n            1\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_17label(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_i;
  int __pyx_v_j;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("label (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_i,&__pyx_n_s_j,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_j)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("label", 1, 2, 2, 1); __PYX_ERR(0, 812, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "label") < 0)) __PYX_ERR(0, 812, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_i = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 812, __pyx_L3_error)
    __pyx_v_j = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_j == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 812, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("label", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 812, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.label", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_16label(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), __pyx_v_i, __pyx_v_j);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_16label(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i, int __pyx_v_j) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("label", 0);

  /* "automata/cautomata.pyx":832
 *             1
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("There is no state %s !" % i)
 *         if j >= self.a.e[i].n or j < 0:
 */
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":833
 *         """
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)             # <<<<<<<<<<<<<<
 *         if j >= self.a.e[i].n or j < 0:
 *             raise ValueError("The state %s has no edge number %s !" % (i, j))
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 833, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_There_is_no_state_s, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 833, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 833, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 833, __pyx_L1_error)

    /* "automata/cautomata.pyx":832
 *             1
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("There is no state %s !" % i)
 *         if j >= self.a.e[i].n or j < 0:
 */
  }

  /* "automata/cautomata.pyx":834
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)
 *         if j >= self.a.e[i].n or j < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state %s has no edge number %s !" % (i, j))
 *         return self.a.e[i].a[j].l
 */
  __pyx_t_2 = ((__pyx_v_j >= (__pyx_v_self->a->e[__pyx_v_i]).n) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_j < 0) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L7_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":835
 *             raise ValueError("There is no state %s !" % i)
 *         if j >= self.a.e[i].n or j < 0:
 *             raise ValueError("The state %s has no edge number %s !" % (i, j))             # <<<<<<<<<<<<<<
 *         return self.a.e[i].a[j].l
 * 
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 835, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyInt_From_int(__pyx_v_j); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 835, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 835, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_The_state_s_has_no_edge_number_s, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 835, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 835, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_5, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __PYX_ERR(0, 835, __pyx_L1_error)

    /* "automata/cautomata.pyx":834
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)
 *         if j >= self.a.e[i].n or j < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state %s has no edge number %s !" % (i, j))
 *         return self.a.e[i].a[j].l
 */
  }

  /* "automata/cautomata.pyx":836
 *         if j >= self.a.e[i].n or j < 0:
 *             raise ValueError("The state %s has no edge number %s !" % (i, j))
 *         return self.a.e[i].a[j].l             # <<<<<<<<<<<<<<
 * 
 *     def is_final(self, int i):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_5 = __Pyx_PyInt_From_int(((__pyx_v_self->a->e[__pyx_v_i]).a[__pyx_v_j]).l); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 836, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_r = __pyx_t_5;
  __pyx_t_5 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":812
 *         return self.a.e[i].a[j].e
 * 
 *     def label(self, int i, int j):             # <<<<<<<<<<<<<<
 *         """
 *         Give the label of the ``j``th edge of the state ``i``
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.label", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":838
 *         return self.a.e[i].a[j].l
 * 
 *     def is_final(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Return ``True`` if the state``i`` is  final, ``False`` otherwise.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_19is_final(PyObject *__pyx_v_self, PyObject *__pyx_arg_i); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_18is_final[] = "\n        Return ``True`` if the state``i`` is  final, ``False`` otherwise.\n\n        INPUT:\n\n        -``i`` -- int state number\n\n        OUTPUT:\n\n        Return ``True`` if the state``i`` is  final, ``False`` otherwise.\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'),(1, 2, 'c'), (2, 3, 'b')], i=0)\n            sage: b = CAutomaton(a)\n            sage: b.is_final(1)\n            True\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_19is_final(PyObject *__pyx_v_self, PyObject *__pyx_arg_i) {
  int __pyx_v_i;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_final (wrapper)", 0);
  assert(__pyx_arg_i); {
    __pyx_v_i = __Pyx_PyInt_As_int(__pyx_arg_i); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 838, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.is_final", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_18is_final(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), ((int)__pyx_v_i));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_18is_final(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i) {
  PyObject *__pyx_v_ans = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("is_final", 0);

  /* "automata/cautomata.pyx":857
 *             True
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("There is no state %s !" % i)
 *         sig_on()
 */
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":858
 *         """
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         ans = c_bool(self.a.e[i].final)
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 858, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_There_is_no_state_s, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 858, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 858, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 858, __pyx_L1_error)

    /* "automata/cautomata.pyx":857
 *             True
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("There is no state %s !" % i)
 *         sig_on()
 */
  }

  /* "automata/cautomata.pyx":859
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         ans = c_bool(self.a.e[i].final)
 *         sig_off()
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 859, __pyx_L1_error)

  /* "automata/cautomata.pyx":860
 *             raise ValueError("There is no state %s !" % i)
 *         sig_on()
 *         ans = c_bool(self.a.e[i].final)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return ans
 */
  __pyx_t_3 = __Pyx_PyInt_From_bool((__pyx_v_self->a->e[__pyx_v_i]).final); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 860, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 860, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_ans = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "automata/cautomata.pyx":861
 *         sig_on()
 *         ans = c_bool(self.a.e[i].final)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return ans
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":862
 *         ans = c_bool(self.a.e[i].final)
 *         sig_off()
 *         return ans             # <<<<<<<<<<<<<<
 * 
 *     def is_initial(self, int i):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_ans);
  __pyx_r = __pyx_v_ans;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":838
 *         return self.a.e[i].a[j].l
 * 
 *     def is_final(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Return ``True`` if the state``i`` is  final, ``False`` otherwise.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.is_final", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_ans);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":864
 *         return ans
 * 
 *     def is_initial(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Return `True`` if state ``i`` is initial, ``False`` otherwise.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_21is_initial(PyObject *__pyx_v_self, PyObject *__pyx_arg_i); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_20is_initial[] = "\n        Return `True`` if state ``i`` is initial, ``False`` otherwise.\n\n        INPUT:\n\n        -``i`` -- int state number\n\n        OUTPUT:\n\n        Return `True`` if state ``i`` is initial, ``False`` otherwise.\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'),(1, 2, 'c'), (2, 3, 'b')], i=0)\n            sage: b = CAutomaton(a)\n            sage: b.is_initial(1)\n            False\n\n        TESTS::\n\n            sage: a = CAutomaton(dag.AnyWord([0,1]))\n            sage: a.is_initial(2)\n            Traceback (most recent call last):\n            ...\n            ValueError: There is no state 2 !\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_21is_initial(PyObject *__pyx_v_self, PyObject *__pyx_arg_i) {
  int __pyx_v_i;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_initial (wrapper)", 0);
  assert(__pyx_arg_i); {
    __pyx_v_i = __Pyx_PyInt_As_int(__pyx_arg_i); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 864, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.is_initial", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_20is_initial(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), ((int)__pyx_v_i));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_20is_initial(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i) {
  PyObject *__pyx_v_answ = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("is_initial", 0);

  /* "automata/cautomata.pyx":891
 *             ValueError: There is no state 2 !
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("There is no state %s !" % i)
 *         sig_on()
 */
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":892
 *         """
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         answ = c_bool(self.a.e[i].initial)
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 892, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_There_is_no_state_s, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 892, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 892, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 892, __pyx_L1_error)

    /* "automata/cautomata.pyx":891
 *             ValueError: There is no state 2 !
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("There is no state %s !" % i)
 *         sig_on()
 */
  }

  /* "automata/cautomata.pyx":893
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("There is no state %s !" % i)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         answ = c_bool(self.a.e[i].initial)
 *         sig_off()
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 893, __pyx_L1_error)

  /* "automata/cautomata.pyx":894
 *             raise ValueError("There is no state %s !" % i)
 *         sig_on()
 *         answ = c_bool(self.a.e[i].initial)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return answ
 */
  __pyx_t_3 = __Pyx_PyInt_From_bool((__pyx_v_self->a->e[__pyx_v_i]).initial); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 894, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 894, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_answ = __pyx_t_4;
  __pyx_t_4 = 0;

  /* "automata/cautomata.pyx":895
 *         sig_on()
 *         answ = c_bool(self.a.e[i].initial)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return answ
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":896
 *         answ = c_bool(self.a.e[i].initial)
 *         sig_off()
 *         return answ             # <<<<<<<<<<<<<<
 * 
 *     @property
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_answ);
  __pyx_r = __pyx_v_answ;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":864
 *         return ans
 * 
 *     def is_initial(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Return `True`` if state ``i`` is initial, ``False`` otherwise.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.is_initial", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_answ);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":899
 * 
 *     @property
 *     def initial_states(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return the set of initial states of the :class:`CAutomaton`
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_14initial_states_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_14initial_states_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_14initial_states___get__(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_14initial_states___get__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self) {
  int __pyx_v_i;
  PyObject *__pyx_v_l = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("__get__", 0);

  /* "automata/cautomata.pyx":922
 *         """
 *         cdef int i
 *         l = []             # <<<<<<<<<<<<<<
 *         for i in range(self.a.n):
 *             if self.a.e[i].initial:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 922, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_l = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":923
 *         cdef int i
 *         l = []
 *         for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *             if self.a.e[i].initial:
 *                 l.append(i)
 */
  __pyx_t_2 = __pyx_v_self->a->n;
  __pyx_t_3 = __pyx_t_2;
  for (__pyx_t_4 = 0; __pyx_t_4 < __pyx_t_3; __pyx_t_4+=1) {
    __pyx_v_i = __pyx_t_4;

    /* "automata/cautomata.pyx":924
 *         l = []
 *         for i in range(self.a.n):
 *             if self.a.e[i].initial:             # <<<<<<<<<<<<<<
 *                 l.append(i)
 *         return l
 */
    __pyx_t_5 = ((__pyx_v_self->a->e[__pyx_v_i]).initial != 0);
    if (__pyx_t_5) {

      /* "automata/cautomata.pyx":925
 *         for i in range(self.a.n):
 *             if self.a.e[i].initial:
 *                 l.append(i)             # <<<<<<<<<<<<<<
 *         return l
 * 
 */
      __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 925, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_6 = __Pyx_PyList_Append(__pyx_v_l, __pyx_t_1); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 925, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":924
 *         l = []
 *         for i in range(self.a.n):
 *             if self.a.e[i].initial:             # <<<<<<<<<<<<<<
 *                 l.append(i)
 *         return l
 */
    }
  }

  /* "automata/cautomata.pyx":926
 *             if self.a.e[i].initial:
 *                 l.append(i)
 *         return l             # <<<<<<<<<<<<<<
 * 
 *     @property
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_l);
  __pyx_r = __pyx_v_l;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":899
 * 
 *     @property
 *     def initial_states(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return the set of initial states of the :class:`CAutomaton`
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.initial_states.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":929
 * 
 *     @property
 *     def final_states(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return the set of final states
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_12final_states_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_12final_states_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_12final_states___get__(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_12final_states___get__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self) {
  PyObject *__pyx_v_l = NULL;
  int __pyx_v_i;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("__get__", 0);

  /* "automata/cautomata.pyx":957
 *             [0, 1, 2]
 *         """
 *         l = []             # <<<<<<<<<<<<<<
 *         for i in range(self.a.n):
 *             if self.a.e[i].final:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 957, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_l = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":958
 *         """
 *         l = []
 *         for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *             if self.a.e[i].final:
 *                 l.append(i)
 */
  __pyx_t_2 = __pyx_v_self->a->n;
  __pyx_t_3 = __pyx_t_2;
  for (__pyx_t_4 = 0; __pyx_t_4 < __pyx_t_3; __pyx_t_4+=1) {
    __pyx_v_i = __pyx_t_4;

    /* "automata/cautomata.pyx":959
 *         l = []
 *         for i in range(self.a.n):
 *             if self.a.e[i].final:             # <<<<<<<<<<<<<<
 *                 l.append(i)
 *         return l
 */
    __pyx_t_5 = ((__pyx_v_self->a->e[__pyx_v_i]).final != 0);
    if (__pyx_t_5) {

      /* "automata/cautomata.pyx":960
 *         for i in range(self.a.n):
 *             if self.a.e[i].final:
 *                 l.append(i)             # <<<<<<<<<<<<<<
 *         return l
 * 
 */
      __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 960, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_6 = __Pyx_PyList_Append(__pyx_v_l, __pyx_t_1); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 960, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":959
 *         l = []
 *         for i in range(self.a.n):
 *             if self.a.e[i].final:             # <<<<<<<<<<<<<<
 *                 l.append(i)
 *         return l
 */
    }
  }

  /* "automata/cautomata.pyx":961
 *             if self.a.e[i].final:
 *                 l.append(i)
 *         return l             # <<<<<<<<<<<<<<
 * 
 *     @property
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_l);
  __pyx_r = __pyx_v_l;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":929
 * 
 *     @property
 *     def final_states(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return the set of final states
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.final_states.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":964
 * 
 *     @property
 *     def alphabet(self):             # <<<<<<<<<<<<<<
 *         """
 *         To get the :class:`CAutomaton` attribut alphabet
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_8alphabet_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_8alphabet_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_8alphabet___get__(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_8alphabet___get__(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);

  /* "automata/cautomata.pyx":985
 *             ['y', 'x', 'z']
 *         """
 *         return self.A             # <<<<<<<<<<<<<<
 * 
 *     def set_final(self, int i, bool final=True):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->A);
  __pyx_r = __pyx_v_self->A;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":964
 * 
 *     @property
 *     def alphabet(self):             # <<<<<<<<<<<<<<
 *         """
 *         To get the :class:`CAutomaton` attribut alphabet
 */

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":987
 *         return self.A
 * 
 *     def set_final(self, int i, bool final=True):             # <<<<<<<<<<<<<<
 *         """
 *         Set the state as a final/non-final state.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_23set_final(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_22set_final[] = "\n        Set the state as a final/non-final state.\n\n        INPUT:\n\n        - ``i`` -- int - the index of the state\n        - ``final`` -- (default: ``True``) - if True set this state as final set, otherwise set this state as non-final.\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(10,11,'a') ,(12,13,'b')], i=10, final_states=[])\n            sage: b = CAutomaton(a)\n            sage: b.set_final(2)\n            sage: b.final_states\n            [2]\n\n        TESTS::\n\n            sage: b.set_final(6)\n            Traceback (most recent call last):\n            ...\n            ValueError: 6 is not an index of a state (must be between 0 and 3)\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_23set_final(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_i;
  bool __pyx_v_final;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("set_final (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_i,&__pyx_n_s_final,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_final);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "set_final") < 0)) __PYX_ERR(0, 987, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_i = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 987, __pyx_L3_error)
    if (values[1]) {
      __pyx_v_final = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_final == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 987, __pyx_L3_error)
    } else {
      __pyx_v_final = ((bool)1);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("set_final", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 987, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.set_final", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_22set_final(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), __pyx_v_i, __pyx_v_final);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_22set_final(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i, bool __pyx_v_final) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("set_final", 0);

  /* "automata/cautomata.pyx":1012
 * 
 *         """
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("%s is not an index of a state (must be between "%i +
 *                              "0 and %s)" % (self.a.n - 1))
 */
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":1013
 *         """
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("%s is not an index of a state (must be between "%i +             # <<<<<<<<<<<<<<
 *                              "0 and %s)" % (self.a.n - 1))
 *         self.a.e[i].final = final
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1013, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_s_is_not_an_index_of_a_state_mu, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1013, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":1014
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("%s is not an index of a state (must be between "%i +
 *                              "0 and %s)" % (self.a.n - 1))             # <<<<<<<<<<<<<<
 *         self.a.e[i].final = final
 * 
 */
    __pyx_t_3 = __Pyx_PyInt_From_long((__pyx_v_self->a->n - 1)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1014, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = __Pyx_PyString_Format(__pyx_kp_s_0_and_s, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1014, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":1013
 *         """
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("%s is not an index of a state (must be between "%i +             # <<<<<<<<<<<<<<
 *                              "0 and %s)" % (self.a.n - 1))
 *         self.a.e[i].final = final
 */
    __pyx_t_3 = PyNumber_Add(__pyx_t_4, __pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1013, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1013, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_Raise(__pyx_t_5, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __PYX_ERR(0, 1013, __pyx_L1_error)

    /* "automata/cautomata.pyx":1012
 * 
 *         """
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("%s is not an index of a state (must be between "%i +
 *                              "0 and %s)" % (self.a.n - 1))
 */
  }

  /* "automata/cautomata.pyx":1015
 *             raise ValueError("%s is not an index of a state (must be between "%i +
 *                              "0 and %s)" % (self.a.n - 1))
 *         self.a.e[i].final = final             # <<<<<<<<<<<<<<
 * 
 *     def set_initial_state(self, int i, bool initial=True):
 */
  (__pyx_v_self->a->e[__pyx_v_i]).final = __pyx_v_final;

  /* "automata/cautomata.pyx":987
 *         return self.A
 * 
 *     def set_final(self, int i, bool final=True):             # <<<<<<<<<<<<<<
 *         """
 *         Set the state as a final/non-final state.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.set_final", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1017
 *         self.a.e[i].final = final
 * 
 *     def set_initial_state(self, int i, bool initial=True):             # <<<<<<<<<<<<<<
 *         """
 *         Set the state as an initial/non initial state.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_25set_initial_state(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_24set_initial_state[] = "\n        Set the state as an initial/non initial state.\n\n        INPUT:\n\n        - ``i`` -- int - the index of the state\n        - ``initial`` -- (default: ``True``) - if True set this state as initial set,\n          otherwise set this state as non-initial.\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: b = CAutomaton(a)\n            sage: b.set_initial_state(2)\n            sage: b.initial_states\n            [2]\n            sage: b.set_initial_state(6)\n            Traceback (most recent call last):\n            ...\n            ValueError: i=6 is not the index of a state (i.e. between 0 and 3).\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_25set_initial_state(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_i;
  bool __pyx_v_initial;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("set_initial_state (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_i,&__pyx_n_s_initial,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_initial);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "set_initial_state") < 0)) __PYX_ERR(0, 1017, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_i = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1017, __pyx_L3_error)
    if (values[1]) {
      __pyx_v_initial = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_initial == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 1017, __pyx_L3_error)
    } else {
      __pyx_v_initial = ((bool)1);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("set_initial_state", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1017, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.set_initial_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_24set_initial_state(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), __pyx_v_i, __pyx_v_initial);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_24set_initial_state(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i, bool __pyx_v_initial) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("set_initial_state", 0);

  /* "automata/cautomata.pyx":1040
 * 
 *         """
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("i=%s is not the index of a state (i.e. between 0 and %s)."
 *                              % (i, self.a.n - 1))
 */
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":1042
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("i=%s is not the index of a state (i.e. between 0 and %s)."
 *                              % (i, self.a.n - 1))             # <<<<<<<<<<<<<<
 *         self.a.e[i].initial = initial
 * 
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1042, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyInt_From_long((__pyx_v_self->a->n - 1)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1042, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1042, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_i_s_is_not_the_index_of_a_state, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1042, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":1041
 *         """
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("i=%s is not the index of a state (i.e. between 0 and %s)."             # <<<<<<<<<<<<<<
 *                              % (i, self.a.n - 1))
 *         self.a.e[i].initial = initial
 */
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1041, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_5, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __PYX_ERR(0, 1041, __pyx_L1_error)

    /* "automata/cautomata.pyx":1040
 * 
 *         """
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("i=%s is not the index of a state (i.e. between 0 and %s)."
 *                              % (i, self.a.n - 1))
 */
  }

  /* "automata/cautomata.pyx":1043
 *             raise ValueError("i=%s is not the index of a state (i.e. between 0 and %s)."
 *                              % (i, self.a.n - 1))
 *         self.a.e[i].initial = initial             # <<<<<<<<<<<<<<
 * 
 *     def add_transition(self, int i, l, int f):
 */
  (__pyx_v_self->a->e[__pyx_v_i]).initial = __pyx_v_initial;

  /* "automata/cautomata.pyx":1017
 *         self.a.e[i].final = final
 * 
 *     def set_initial_state(self, int i, bool initial=True):             # <<<<<<<<<<<<<<
 *         """
 *         Set the state as an initial/non initial state.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.set_initial_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1045
 *         self.a.e[i].initial = initial
 * 
 *     def add_transition(self, int i, l, int f):             # <<<<<<<<<<<<<<
 *         """
 *         Add a transition from ``i`` to ``f`` labeled by ``l`` in the automaton.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_27add_transition(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_26add_transition[] = "\n        Add a transition from ``i`` to ``f`` labeled by ``l`` in the automaton.\n        The states ``i`` and ``f`` must exist, and the label ``l`` must be in the alphabet.\n        To add new states, use add_state(). To add letters in the alphabet use bigger_alphabet().\n\n        INPUT:\n\n        - ``i`` -- the first state\n        - ``l`` -- the label of the edge\n        - ``f`` -- the second state\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(10, 11, 'a'), (12, 13, 'b')], i=10)\n            sage: b = CAutomaton(a)\n            sage: b.add_transition(2,'a',1)\n            sage: b.plot()  # random\n            \n        TESTS::\n            \n            sage: b.add_transition(2,'v',1)\n            Traceback (most recent call last):\n            ...\n            ValueError: The letter v doesn't exist.\n            sage: b.add_transition(2,'v',6)\n            Traceback (most recent call last):\n            ...\n            ValueError: The state  6 doesn't exist.\n            sage: b.add_transition(5,'v',6)\n            Traceback (most recent call last):\n            ...\n            ValueError: The state  5 doesn't exist.\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_27add_transition(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_i;
  PyObject *__pyx_v_l = 0;
  int __pyx_v_f;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("add_transition (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_i,&__pyx_n_s_l,&__pyx_n_s_f,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_l)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("add_transition", 1, 3, 3, 1); __PYX_ERR(0, 1045, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_f)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("add_transition", 1, 3, 3, 2); __PYX_ERR(0, 1045, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "add_transition") < 0)) __PYX_ERR(0, 1045, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_i = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1045, __pyx_L3_error)
    __pyx_v_l = values[1];
    __pyx_v_f = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_f == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1045, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("add_transition", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1045, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.add_transition", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_26add_transition(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), __pyx_v_i, __pyx_v_l, __pyx_v_f);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_26add_transition(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_i, PyObject *__pyx_v_l, int __pyx_v_f) {
  PyObject *__pyx_v_k = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  __Pyx_RefNannySetupContext("add_transition", 0);

  /* "automata/cautomata.pyx":1080
 * 
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state %s doesn't exist." % i)
 *         if f >= self.a.n or f < 0:
 */
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":1081
 *         """
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("The state %s doesn't exist." % i)             # <<<<<<<<<<<<<<
 *         if f >= self.a.n or f < 0:
 *             raise ValueError("The state  %s doesn't exist." % f)
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1081, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_The_state_s_doesn_t_exist, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1081, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1081, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 1081, __pyx_L1_error)

    /* "automata/cautomata.pyx":1080
 * 
 *         """
 *         if i >= self.a.n or i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state %s doesn't exist." % i)
 *         if f >= self.a.n or f < 0:
 */
  }

  /* "automata/cautomata.pyx":1082
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("The state %s doesn't exist." % i)
 *         if f >= self.a.n or f < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state  %s doesn't exist." % f)
 *         try:
 */
  __pyx_t_2 = ((__pyx_v_f >= __pyx_v_self->a->n) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_f < 0) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L7_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":1083
 *             raise ValueError("The state %s doesn't exist." % i)
 *         if f >= self.a.n or f < 0:
 *             raise ValueError("The state  %s doesn't exist." % f)             # <<<<<<<<<<<<<<
 *         try:
 *             k = self.A.index(l)
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_f); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1083, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_The_state_s_doesn_t_exist_2, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1083, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1083, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 1083, __pyx_L1_error)

    /* "automata/cautomata.pyx":1082
 *         if i >= self.a.n or i < 0:
 *             raise ValueError("The state %s doesn't exist." % i)
 *         if f >= self.a.n or f < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state  %s doesn't exist." % f)
 *         try:
 */
  }

  /* "automata/cautomata.pyx":1084
 *         if f >= self.a.n or f < 0:
 *             raise ValueError("The state  %s doesn't exist." % f)
 *         try:             # <<<<<<<<<<<<<<
 *             k = self.A.index(l)
 *         except Exception:
 */
  {
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ExceptionSave(&__pyx_t_5, &__pyx_t_6, &__pyx_t_7);
    __Pyx_XGOTREF(__pyx_t_5);
    __Pyx_XGOTREF(__pyx_t_6);
    __Pyx_XGOTREF(__pyx_t_7);
    /*try:*/ {

      /* "automata/cautomata.pyx":1085
 *             raise ValueError("The state  %s doesn't exist." % f)
 *         try:
 *             k = self.A.index(l)             # <<<<<<<<<<<<<<
 *         except Exception:
 *             # La lettre %s n'existe pas.
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->A, __pyx_n_s_index); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1085, __pyx_L9_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      __pyx_t_3 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_8, __pyx_v_l) : __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_v_l);
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1085, __pyx_L9_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_v_k = __pyx_t_3;
      __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":1084
 *         if f >= self.a.n or f < 0:
 *             raise ValueError("The state  %s doesn't exist." % f)
 *         try:             # <<<<<<<<<<<<<<
 *             k = self.A.index(l)
 *         except Exception:
 */
    }
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    goto __pyx_L14_try_end;
    __pyx_L9_error:;
    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":1086
 *         try:
 *             k = self.A.index(l)
 *         except Exception:             # <<<<<<<<<<<<<<
 *             # La lettre %s n'existe pas.
 *             raise ValueError("The letter %s doesn't exist." % l)
 */
    __pyx_t_9 = __Pyx_PyErr_ExceptionMatches(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])));
    if (__pyx_t_9) {
      __Pyx_AddTraceback("automata.cautomata.CAutomaton.add_transition", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (__Pyx_GetException(&__pyx_t_3, &__pyx_t_4, &__pyx_t_8) < 0) __PYX_ERR(0, 1086, __pyx_L11_except_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GOTREF(__pyx_t_8);

      /* "automata/cautomata.pyx":1088
 *         except Exception:
 *             # La lettre %s n'existe pas.
 *             raise ValueError("The letter %s doesn't exist." % l)             # <<<<<<<<<<<<<<
 * 
 *         sig_on()
 */
      __pyx_t_10 = __Pyx_PyString_FormatSafe(__pyx_kp_s_The_letter_s_doesn_t_exist, __pyx_v_l); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1088, __pyx_L11_except_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_11 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1088, __pyx_L11_except_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_Raise(__pyx_t_11, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __PYX_ERR(0, 1088, __pyx_L11_except_error)
    }
    goto __pyx_L11_except_error;
    __pyx_L11_except_error:;

    /* "automata/cautomata.pyx":1084
 *         if f >= self.a.n or f < 0:
 *             raise ValueError("The state  %s doesn't exist." % f)
 *         try:             # <<<<<<<<<<<<<<
 *             k = self.A.index(l)
 *         except Exception:
 */
    __Pyx_XGIVEREF(__pyx_t_5);
    __Pyx_XGIVEREF(__pyx_t_6);
    __Pyx_XGIVEREF(__pyx_t_7);
    __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
    goto __pyx_L1_error;
    __pyx_L14_try_end:;
  }

  /* "automata/cautomata.pyx":1090
 *             raise ValueError("The letter %s doesn't exist." % l)
 * 
 *         sig_on()             # <<<<<<<<<<<<<<
 *         AddTransitionN(self.a, i, f, k)
 *         sig_off()
 */
  __pyx_t_9 = sig_on(); if (unlikely(__pyx_t_9 == ((int)0))) __PYX_ERR(0, 1090, __pyx_L1_error)

  /* "automata/cautomata.pyx":1091
 * 
 *         sig_on()
 *         AddTransitionN(self.a, i, f, k)             # <<<<<<<<<<<<<<
 *         sig_off()
 * 
 */
  __pyx_t_9 = __Pyx_PyInt_As_int(__pyx_v_k); if (unlikely((__pyx_t_9 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1091, __pyx_L1_error)
  AddTransitionN(__pyx_v_self->a, __pyx_v_i, __pyx_v_f, __pyx_t_9);

  /* "automata/cautomata.pyx":1092
 *         sig_on()
 *         AddTransitionN(self.a, i, f, k)
 *         sig_off()             # <<<<<<<<<<<<<<
 * 
 *     def add_state(self, bool final):
 */
  sig_off();

  /* "automata/cautomata.pyx":1045
 *         self.a.e[i].initial = initial
 * 
 *     def add_transition(self, int i, l, int f):             # <<<<<<<<<<<<<<
 *         """
 *         Add a transition from ``i`` to ``f`` labeled by ``l`` in the automaton.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.add_transition", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_k);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1094
 *         sig_off()
 * 
 *     def add_state(self, bool final):             # <<<<<<<<<<<<<<
 *         """
 *         Add a state in the automaton
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_29add_state(PyObject *__pyx_v_self, PyObject *__pyx_arg_final); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_28add_state[] = "\n        Add a state in the automaton\n\n        INPUT:\n\n        - ``final`` -- boolean indicate if the added state is final\n\n        OUTPUT:\n\n        return the numbers of states\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = CAutomaton(a)\n            sage: b.add_state(True)  # not implemented\n            TypeError                                 Traceback (most recent call last)\n            ...\n            TypeError: 'NotImplementedType' object is not callable\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_29add_state(PyObject *__pyx_v_self, PyObject *__pyx_arg_final) {
  CYTHON_UNUSED bool __pyx_v_final;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("add_state (wrapper)", 0);
  assert(__pyx_arg_final); {
    __pyx_v_final = __Pyx_PyInt_As_bool(__pyx_arg_final); if (unlikely((__pyx_v_final == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 1094, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.add_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_28add_state(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), ((bool)__pyx_v_final));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_28add_state(CYTHON_UNUSED struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, CYTHON_UNUSED bool __pyx_v_final) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("add_state", 0);

  /* "automata/cautomata.pyx":1115
 *             TypeError: 'NotImplementedType' object is not callable
 *         """
 *         raise NotImplemented()             # <<<<<<<<<<<<<<
 * 
 *     def bigger_alphabet(self, list nA):
 */
  __pyx_t_1 = __Pyx_PyObject_CallNoArg(__pyx_builtin_NotImplemented); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1115, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_Raise(__pyx_t_1, 0, 0, 0);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __PYX_ERR(0, 1115, __pyx_L1_error)

  /* "automata/cautomata.pyx":1094
 *         sig_off()
 * 
 *     def add_state(self, bool final):             # <<<<<<<<<<<<<<
 *         """
 *         Add a state in the automaton
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.add_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1117
 *         raise NotImplemented()
 * 
 *     def bigger_alphabet(self, list nA):             # <<<<<<<<<<<<<<
 *         """
 *         Increase the size of the alphabet
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_31bigger_alphabet(PyObject *__pyx_v_self, PyObject *__pyx_v_nA); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_30bigger_alphabet[] = "\n        Increase the size of the alphabet\n\n        INPUT:\n\n        - ``nA`` -- list - new alphabet or new letters to add\n\n        EXAMPLES::\n\n            sage: a = CAutomaton(dag.AnyLetter([0, 1, 'a']))\n            sage: a.alphabet\n            ['a', 1, 0]\n            sage: a.bigger_alphabet(['b', 'c'])\n            sage: a.alphabet\n            ['a', 1, 0, 'c', 'b']\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_31bigger_alphabet(PyObject *__pyx_v_self, PyObject *__pyx_v_nA) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("bigger_alphabet (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_nA), (&PyList_Type), 1, "nA", 1))) __PYX_ERR(0, 1117, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_30bigger_alphabet(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), ((PyObject*)__pyx_v_nA));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_30bigger_alphabet(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, PyObject *__pyx_v_nA) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("bigger_alphabet", 0);

  /* "automata/cautomata.pyx":1134
 *             ['a', 1, 0, 'c', 'b']
 *         """
 *         self.A = self.A+list(set(nA).difference(self.A))             # <<<<<<<<<<<<<<
 * 
 *     def add_path(self, int e, int f, list li, verb=False):
 */
  __pyx_t_2 = PySet_New(__pyx_v_nA); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1134, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_difference); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1134, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
    }
  }
  __pyx_t_1 = (__pyx_t_2) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_2, __pyx_v_self->A) : __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_self->A);
  __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1134, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = PySequence_List(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1134, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyNumber_Add(__pyx_v_self->A, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1134, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->A);
  __Pyx_DECREF(__pyx_v_self->A);
  __pyx_v_self->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":1117
 *         raise NotImplemented()
 * 
 *     def bigger_alphabet(self, list nA):             # <<<<<<<<<<<<<<
 *         """
 *         Increase the size of the alphabet
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.bigger_alphabet", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1136
 *         self.A = self.A+list(set(nA).difference(self.A))
 * 
 *     def add_path(self, int e, int f, list li, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Add a path labeled by the list ``li`` from
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_33add_path(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_32add_path[] = "\n        Add a path labeled by the list ``li`` from\n        state ``e`` to state ``f`` of :class:`CAutomaton`\n\n        INPUT:\n\n        - ``e`` -- int the starting state\n        - ``f`` -- int the ending state\n        - ``li`` -- list of labels\n        - ``verb`` -- boolean (default: ``False``) if True, print debugging informations\n\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a'), (2,3,'b')], i=2)\n            sage: b = CAutomaton(a)\n            sage: b.add_path(1, 2, ['a'])\n            sage: b.plot()  # random\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_33add_path(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_e;
  int __pyx_v_f;
  PyObject *__pyx_v_li = 0;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("add_path (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_e,&__pyx_n_s_f,&__pyx_n_s_li,&__pyx_n_s_verb,0};
    PyObject* values[4] = {0,0,0,0};
    values[3] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_e)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_f)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("add_path", 0, 3, 4, 1); __PYX_ERR(0, 1136, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_li)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("add_path", 0, 3, 4, 2); __PYX_ERR(0, 1136, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "add_path") < 0)) __PYX_ERR(0, 1136, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_e = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_e == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1136, __pyx_L3_error)
    __pyx_v_f = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_f == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1136, __pyx_L3_error)
    __pyx_v_li = ((PyObject*)values[2]);
    __pyx_v_verb = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("add_path", 0, 3, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1136, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.add_path", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_li), (&PyList_Type), 1, "li", 1))) __PYX_ERR(0, 1136, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_32add_path(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), __pyx_v_e, __pyx_v_f, __pyx_v_li, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_32add_path(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, int __pyx_v_e, int __pyx_v_f, PyObject *__pyx_v_li, PyObject *__pyx_v_verb) {
  int *__pyx_v_l;
  Py_ssize_t __pyx_v_i;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  Py_ssize_t __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  Py_ssize_t __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  PyObject *__pyx_t_13 = NULL;
  bool __pyx_t_14;
  __Pyx_RefNannySetupContext("add_path", 0);

  /* "automata/cautomata.pyx":1157
 * 
 *         """
 *         cdef int *l = <int *>malloc(sizeof(int)*len(li))             # <<<<<<<<<<<<<<
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "
 */
  if (unlikely(__pyx_v_li == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 1157, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_GET_SIZE(__pyx_v_li); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 1157, __pyx_L1_error)
  __pyx_v_l = ((int *)malloc(((sizeof(int)) * __pyx_t_1)));

  /* "automata/cautomata.pyx":1158
 *         """
 *         cdef int *l = <int *>malloc(sizeof(int)*len(li))
 *         if l is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "add_path")
 */
  __pyx_t_2 = ((__pyx_v_l == NULL) != 0);
  if (unlikely(__pyx_t_2)) {

    /* "automata/cautomata.pyx":1159
 *         cdef int *l = <int *>malloc(sizeof(int)*len(li))
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "             # <<<<<<<<<<<<<<
 *                               "add_path")
 *         for i in range(len(li)):
 */
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__23, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1159, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 1159, __pyx_L1_error)

    /* "automata/cautomata.pyx":1158
 *         """
 *         cdef int *l = <int *>malloc(sizeof(int)*len(li))
 *         if l is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "add_path")
 */
  }

  /* "automata/cautomata.pyx":1161
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "add_path")
 *         for i in range(len(li)):             # <<<<<<<<<<<<<<
 *             try:
 *                 l[i] = self.A.index(li[i])
 */
  if (unlikely(__pyx_v_li == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 1161, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_GET_SIZE(__pyx_v_li); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 1161, __pyx_L1_error)
  __pyx_t_4 = __pyx_t_1;
  for (__pyx_t_5 = 0; __pyx_t_5 < __pyx_t_4; __pyx_t_5+=1) {
    __pyx_v_i = __pyx_t_5;

    /* "automata/cautomata.pyx":1162
 *                               "add_path")
 *         for i in range(len(li)):
 *             try:             # <<<<<<<<<<<<<<
 *                 l[i] = self.A.index(li[i])
 *             except:
 */
    {
      __Pyx_PyThreadState_declare
      __Pyx_PyThreadState_assign
      __Pyx_ExceptionSave(&__pyx_t_6, &__pyx_t_7, &__pyx_t_8);
      __Pyx_XGOTREF(__pyx_t_6);
      __Pyx_XGOTREF(__pyx_t_7);
      __Pyx_XGOTREF(__pyx_t_8);
      /*try:*/ {

        /* "automata/cautomata.pyx":1163
 *         for i in range(len(li)):
 *             try:
 *                 l[i] = self.A.index(li[i])             # <<<<<<<<<<<<<<
 *             except:
 *                 raise ValueError("The label %s is not in the alphabet! Use bigger_alphabet() if you want to add it"%li[i])
 */
        __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->A, __pyx_n_s_index); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1163, __pyx_L6_error)
        __Pyx_GOTREF(__pyx_t_9);
        if (unlikely(__pyx_v_li == Py_None)) {
          PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
          __PYX_ERR(0, 1163, __pyx_L6_error)
        }
        __pyx_t_10 = __Pyx_GetItemInt_List(__pyx_v_li, __pyx_v_i, Py_ssize_t, 1, PyInt_FromSsize_t, 1, 1, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1163, __pyx_L6_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_11 = NULL;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_9))) {
          __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_9);
          if (likely(__pyx_t_11)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
            __Pyx_INCREF(__pyx_t_11);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_9, function);
          }
        }
        __pyx_t_3 = (__pyx_t_11) ? __Pyx_PyObject_Call2Args(__pyx_t_9, __pyx_t_11, __pyx_t_10) : __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_10);
        __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1163, __pyx_L6_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_12 = __Pyx_PyInt_As_int(__pyx_t_3); if (unlikely((__pyx_t_12 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1163, __pyx_L6_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        (__pyx_v_l[__pyx_v_i]) = __pyx_t_12;

        /* "automata/cautomata.pyx":1162
 *                               "add_path")
 *         for i in range(len(li)):
 *             try:             # <<<<<<<<<<<<<<
 *                 l[i] = self.A.index(li[i])
 *             except:
 */
      }
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      goto __pyx_L13_try_end;
      __pyx_L6_error:;
      __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":1164
 *             try:
 *                 l[i] = self.A.index(li[i])
 *             except:             # <<<<<<<<<<<<<<
 *                 raise ValueError("The label %s is not in the alphabet! Use bigger_alphabet() if you want to add it"%li[i])
 *         sig_on()
 */
      /*except:*/ {
        __Pyx_AddTraceback("automata.cautomata.CAutomaton.add_path", __pyx_clineno, __pyx_lineno, __pyx_filename);
        if (__Pyx_GetException(&__pyx_t_3, &__pyx_t_9, &__pyx_t_10) < 0) __PYX_ERR(0, 1164, __pyx_L8_except_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_GOTREF(__pyx_t_10);

        /* "automata/cautomata.pyx":1165
 *                 l[i] = self.A.index(li[i])
 *             except:
 *                 raise ValueError("The label %s is not in the alphabet! Use bigger_alphabet() if you want to add it"%li[i])             # <<<<<<<<<<<<<<
 *         sig_on()
 *         AddPathN(self.a, e, f, l, len(li), verb)
 */
        if (unlikely(__pyx_v_li == Py_None)) {
          PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
          __PYX_ERR(0, 1165, __pyx_L8_except_error)
        }
        __pyx_t_11 = __Pyx_GetItemInt_List(__pyx_v_li, __pyx_v_i, Py_ssize_t, 1, PyInt_FromSsize_t, 1, 1, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1165, __pyx_L8_except_error)
        __Pyx_GOTREF(__pyx_t_11);
        __pyx_t_13 = __Pyx_PyString_FormatSafe(__pyx_kp_s_The_label_s_is_not_in_the_alphab, __pyx_t_11); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 1165, __pyx_L8_except_error)
        __Pyx_GOTREF(__pyx_t_13);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_11 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_13); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1165, __pyx_L8_except_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
        __Pyx_Raise(__pyx_t_11, 0, 0, 0);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __PYX_ERR(0, 1165, __pyx_L8_except_error)
      }
      __pyx_L8_except_error:;

      /* "automata/cautomata.pyx":1162
 *                               "add_path")
 *         for i in range(len(li)):
 *             try:             # <<<<<<<<<<<<<<
 *                 l[i] = self.A.index(li[i])
 *             except:
 */
      __Pyx_XGIVEREF(__pyx_t_6);
      __Pyx_XGIVEREF(__pyx_t_7);
      __Pyx_XGIVEREF(__pyx_t_8);
      __Pyx_ExceptionReset(__pyx_t_6, __pyx_t_7, __pyx_t_8);
      goto __pyx_L1_error;
      __pyx_L13_try_end:;
    }
  }

  /* "automata/cautomata.pyx":1166
 *             except:
 *                 raise ValueError("The label %s is not in the alphabet! Use bigger_alphabet() if you want to add it"%li[i])
 *         sig_on()             # <<<<<<<<<<<<<<
 *         AddPathN(self.a, e, f, l, len(li), verb)
 *         free(l)
 */
  __pyx_t_12 = sig_on(); if (unlikely(__pyx_t_12 == ((int)0))) __PYX_ERR(0, 1166, __pyx_L1_error)

  /* "automata/cautomata.pyx":1167
 *                 raise ValueError("The label %s is not in the alphabet! Use bigger_alphabet() if you want to add it"%li[i])
 *         sig_on()
 *         AddPathN(self.a, e, f, l, len(li), verb)             # <<<<<<<<<<<<<<
 *         free(l)
 *         sig_off()
 */
  if (unlikely(__pyx_v_li == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 1167, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_GET_SIZE(__pyx_v_li); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 1167, __pyx_L1_error)
  __pyx_t_14 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_14 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 1167, __pyx_L1_error)
  AddPathN(__pyx_v_self->a, __pyx_v_e, __pyx_v_f, __pyx_v_l, __pyx_t_1, __pyx_t_14);

  /* "automata/cautomata.pyx":1168
 *         sig_on()
 *         AddPathN(self.a, e, f, l, len(li), verb)
 *         free(l)             # <<<<<<<<<<<<<<
 *         sig_off()
 * 
 */
  free(__pyx_v_l);

  /* "automata/cautomata.pyx":1169
 *         AddPathN(self.a, e, f, l, len(li), verb)
 *         free(l)
 *         sig_off()             # <<<<<<<<<<<<<<
 * 
 *     def determinize(self, sink=False, verb=0):
 */
  sig_off();

  /* "automata/cautomata.pyx":1136
 *         self.A = self.A+list(set(nA).difference(self.A))
 * 
 *     def add_path(self, int e, int f, list li, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Add a path labeled by the list ``li`` from
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.add_path", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1171
 *         sig_off()
 * 
 *     def determinize(self, sink=False, verb=0):             # <<<<<<<<<<<<<<
 *         """
 *         Compute a deterministic automaton that recognizes the same language as self.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_35determinize(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_34determinize[] = "\n        Compute a deterministic automaton that recognizes the same language as self.\n\n        INPUT:\n\n        - ``sink``  -- (default: ``False``) - give a complete automaton, with a sink state\n        - ``verb`` -- boolean (default: ``False``) if True, print debugging informations\n\n        OUTPUT:\n\n        Return a non determinist automaton  :class:`CAutomaton`\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = CAutomaton(a)\n            sage: b.determinize()\n            DeterministicAutomaton with 2 states and an alphabet of 2 letters\n\n            sage: a = CAutomaton([(0,0,0),(0,0,1),(0,1,1),(1,2,0),(1,2,1),(2,3,0),(2,3,1),(3,4,0),(3,4,1)], I=[0], F=[4])\n            sage: a.determinize()\n            DeterministicAutomaton with 16 states and an alphabet of 2 letters\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_35determinize(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_sink = 0;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("determinize (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_sink,&__pyx_n_s_verb,0};
    PyObject* values[2] = {0,0};
    values[0] = ((PyObject *)Py_False);
    values[1] = ((PyObject *)__pyx_int_0);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_sink);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "determinize") < 0)) __PYX_ERR(0, 1171, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_sink = values[0];
    __pyx_v_verb = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("determinize", 0, 0, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1171, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.determinize", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_34determinize(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), __pyx_v_sink, __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_34determinize(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, PyObject *__pyx_v_sink, PyObject *__pyx_v_verb) {
  Automaton __pyx_v_a;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  bool __pyx_t_3;
  __Pyx_RefNannySetupContext("determinize", 0);

  /* "automata/cautomata.pyx":1197
 *         """
 *         cdef Automaton a
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         a = DeterminizeN(self.a[0], sink, verb)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1197, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":1198
 *         cdef Automaton a
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         a = DeterminizeN(self.a[0], sink, verb)
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 1198, __pyx_L1_error)

  /* "automata/cautomata.pyx":1199
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         a = DeterminizeN(self.a[0], sink, verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = a
 */
  __pyx_t_3 = __Pyx_PyInt_As_bool(__pyx_v_sink); if (unlikely((__pyx_t_3 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 1199, __pyx_L1_error)
  __pyx_t_2 = __Pyx_PyInt_As_int(__pyx_v_verb); if (unlikely((__pyx_t_2 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1199, __pyx_L1_error)
  __pyx_v_a = DeterminizeN((__pyx_v_self->a[0]), __pyx_t_3, __pyx_t_2);

  /* "automata/cautomata.pyx":1200
 *         sig_on()
 *         a = DeterminizeN(self.a[0], sink, verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = a
 *         r.A = self.A
 */
  sig_off();

  /* "automata/cautomata.pyx":1201
 *         a = DeterminizeN(self.a[0], sink, verb)
 *         sig_off()
 *         r.a[0] = a             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         r.S = None
 */
  (__pyx_v_r->a[0]) = __pyx_v_a;

  /* "automata/cautomata.pyx":1202
 *         sig_off()
 *         r.a[0] = a
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         r.S = None
 *         return r
 */
  __pyx_t_1 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":1203
 *         r.a[0] = a
 *         r.A = self.A
 *         r.S = None             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_r->S);
  __Pyx_DECREF(__pyx_v_r->S);
  __pyx_v_r->S = ((PyObject*)Py_None);

  /* "automata/cautomata.pyx":1204
 *         r.A = self.A
 *         r.S = None
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def plot(self, file=None, int sx=10, int sy=8, verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":1171
 *         sig_off()
 * 
 *     def determinize(self, sink=False, verb=0):             # <<<<<<<<<<<<<<
 *         """
 *         Compute a deterministic automaton that recognizes the same language as self.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.determinize", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1206
 *         return r
 * 
 *     def plot(self, file=None, int sx=10, int sy=8, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         plot a representation of the :class:`CAutomaton`.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_37plot(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_10CAutomaton_36plot[] = "\n        plot a representation of the :class:`CAutomaton`.\n\n        INPUT:\n\n        - ``sx`` -- int (default: 10) - width given to dot command\n        - ``sy`` -- int (default: 8) - height given to dot command\n        - ``verb`` -- boolean (default: ``False``) if True, print debugging informations\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = CAutomaton(a)\n            sage: b.plot()   # random\n\n            sage: a = CAutomaton([(0,0,0),(0,0,1),(0,1,1),(1,2,0),(1,2,1),(2,3,0),(2,3,1),(3,4,0),(3,4,1)], I=[0], F=[4])\n            sage: a.plot()   # random\n            <PIL.PngImagePlugin.PngImageFile image mode=RGBA size=189x147 at 0x7F6711E442D0>\n            \n        .. PLOT::\n           :width: 50%\n\n            a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            b = CAutomaton(a)\n            sphinx_plot(b)\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_37plot(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_file = 0;
  int __pyx_v_sx;
  int __pyx_v_sy;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("plot (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_file,&__pyx_n_s_sx,&__pyx_n_s_sy,&__pyx_n_s_verb,0};
    PyObject* values[4] = {0,0,0,0};
    values[0] = ((PyObject *)Py_None);
    values[3] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_file);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_sx);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_sy);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "plot") < 0)) __PYX_ERR(0, 1206, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_file = values[0];
    if (values[1]) {
      __pyx_v_sx = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_sx == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1206, __pyx_L3_error)
    } else {
      __pyx_v_sx = ((int)10);
    }
    if (values[2]) {
      __pyx_v_sy = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_sy == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1206, __pyx_L3_error)
    } else {
      __pyx_v_sy = ((int)8);
    }
    __pyx_v_verb = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("plot", 0, 0, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1206, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.plot", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_36plot(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), __pyx_v_file, __pyx_v_sx, __pyx_v_sy, __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_36plot(struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, PyObject *__pyx_v_file, int __pyx_v_sx, int __pyx_v_sy, PyObject *__pyx_v_verb) {
  char **__pyx_v_ll;
  int __pyx_v_i;
  char *__pyx_v_cfile;
  bool __pyx_v_de;
  PyObject *__pyx_v_strA = NULL;
  PyObject *__pyx_v_tmp_filename = NULL;
  PyObject *__pyx_v_Image = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  char *__pyx_t_8;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  __Pyx_RefNannySetupContext("plot", 0);
  __Pyx_INCREF(__pyx_v_file);

  /* "automata/cautomata.pyx":1238
 *         cdef char *cfile
 *         cdef bool de
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("Test if dot exists...")
 *         sig_on()
 */
  __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1238, __pyx_L1_error)
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":1239
 *         cdef bool de
 *         if verb:
 *             print("Test if dot exists...")             # <<<<<<<<<<<<<<
 *         sig_on()
 *         de = DotExists ()
 */
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__24, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1239, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":1238
 *         cdef char *cfile
 *         cdef bool de
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("Test if dot exists...")
 *         sig_on()
 */
  }

  /* "automata/cautomata.pyx":1240
 *         if verb:
 *             print("Test if dot exists...")
 *         sig_on()             # <<<<<<<<<<<<<<
 *         de = DotExists ()
 *         sig_off()
 */
  __pyx_t_3 = sig_on(); if (unlikely(__pyx_t_3 == ((int)0))) __PYX_ERR(0, 1240, __pyx_L1_error)

  /* "automata/cautomata.pyx":1241
 *             print("Test if dot exists...")
 *         sig_on()
 *         de = DotExists ()             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if de:
 */
  __pyx_v_de = DotExists();

  /* "automata/cautomata.pyx":1242
 *         sig_on()
 *         de = DotExists ()
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if de:
 *             if verb:
 */
  sig_off();

  /* "automata/cautomata.pyx":1243
 *         de = DotExists ()
 *         sig_off()
 *         if de:             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print(" -> yes !")
 */
  __pyx_t_1 = (__pyx_v_de != 0);
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":1244
 *         sig_off()
 *         if de:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print(" -> yes !")
 *                 print("alloc ll (size=%s)..." % self.a.na)
 */
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1244, __pyx_L1_error)
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":1245
 *         if de:
 *             if verb:
 *                 print(" -> yes !")             # <<<<<<<<<<<<<<
 *                 print("alloc ll (size=%s)..." % self.a.na)
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 */
      __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__25, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1245, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

      /* "automata/cautomata.pyx":1246
 *             if verb:
 *                 print(" -> yes !")
 *                 print("alloc ll (size=%s)..." % self.a.na)             # <<<<<<<<<<<<<<
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 *             if ll is NULL:
 */
      __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_self->a->na); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1246, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_alloc_ll_size_s, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1246, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_4); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1246, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

      /* "automata/cautomata.pyx":1244
 *         sig_off()
 *         if de:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print(" -> yes !")
 *                 print("alloc ll (size=%s)..." % self.a.na)
 */
    }

    /* "automata/cautomata.pyx":1247
 *                 print(" -> yes !")
 *                 print("alloc ll (size=%s)..." % self.a.na)
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)             # <<<<<<<<<<<<<<
 *             if ll is NULL:
 *                 raise MemoryError("Failed to allocate memory for ll in "
 */
    __pyx_v_ll = ((char **)malloc(((sizeof(char *)) * __pyx_v_self->a->na)));

    /* "automata/cautomata.pyx":1248
 *                 print("alloc ll (size=%s)..." % self.a.na)
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 *             if ll is NULL:             # <<<<<<<<<<<<<<
 *                 raise MemoryError("Failed to allocate memory for ll in "
 *                                   "plot")
 */
    __pyx_t_1 = ((__pyx_v_ll == NULL) != 0);
    if (unlikely(__pyx_t_1)) {

      /* "automata/cautomata.pyx":1249
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 *             if ll is NULL:
 *                 raise MemoryError("Failed to allocate memory for ll in "             # <<<<<<<<<<<<<<
 *                                   "plot")
 *             strA = []
 */
      __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__26, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1249, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_Raise(__pyx_t_2, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __PYX_ERR(0, 1249, __pyx_L1_error)

      /* "automata/cautomata.pyx":1248
 *                 print("alloc ll (size=%s)..." % self.a.na)
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 *             if ll is NULL:             # <<<<<<<<<<<<<<
 *                 raise MemoryError("Failed to allocate memory for ll in "
 *                                   "plot")
 */
    }

    /* "automata/cautomata.pyx":1251
 *                 raise MemoryError("Failed to allocate memory for ll in "
 *                                   "plot")
 *             strA = []             # <<<<<<<<<<<<<<
 *             for i in range(self.a.na):
 *                 strA.append(str(self.A[i]))
 */
    __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1251, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_v_strA = ((PyObject*)__pyx_t_2);
    __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":1252
 *                                   "plot")
 *             strA = []
 *             for i in range(self.a.na):             # <<<<<<<<<<<<<<
 *                 strA.append(str(self.A[i]))
 *                 ll[i] = strA[i]
 */
    __pyx_t_3 = __pyx_v_self->a->na;
    __pyx_t_5 = __pyx_t_3;
    for (__pyx_t_6 = 0; __pyx_t_6 < __pyx_t_5; __pyx_t_6+=1) {
      __pyx_v_i = __pyx_t_6;

      /* "automata/cautomata.pyx":1253
 *             strA = []
 *             for i in range(self.a.na):
 *                 strA.append(str(self.A[i]))             # <<<<<<<<<<<<<<
 *                 ll[i] = strA[i]
 *             if file is None:
 */
      if (unlikely(__pyx_v_self->A == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 1253, __pyx_L1_error)
      }
      __pyx_t_2 = __Pyx_GetItemInt_List(__pyx_v_self->A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1253, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = __Pyx_PyObject_CallOneArg(((PyObject *)(&PyString_Type)), __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1253, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_7 = __Pyx_PyList_Append(__pyx_v_strA, __pyx_t_4); if (unlikely(__pyx_t_7 == ((int)-1))) __PYX_ERR(0, 1253, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":1254
 *             for i in range(self.a.na):
 *                 strA.append(str(self.A[i]))
 *                 ll[i] = strA[i]             # <<<<<<<<<<<<<<
 *             if file is None:
 *                 from sage.misc.temporary_file import tmp_filename
 */
      __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_strA, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1254, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = __Pyx_PyObject_AsWritableString(__pyx_t_4); if (unlikely((!__pyx_t_8) && PyErr_Occurred())) __PYX_ERR(0, 1254, __pyx_L1_error)
      (__pyx_v_ll[__pyx_v_i]) = __pyx_t_8;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }

    /* "automata/cautomata.pyx":1255
 *                 strA.append(str(self.A[i]))
 *                 ll[i] = strA[i]
 *             if file is None:             # <<<<<<<<<<<<<<
 *                 from sage.misc.temporary_file import tmp_filename
 *                 file = tmp_filename()
 */
    __pyx_t_1 = (__pyx_v_file == Py_None);
    __pyx_t_9 = (__pyx_t_1 != 0);
    if (__pyx_t_9) {

      /* "automata/cautomata.pyx":1256
 *                 ll[i] = strA[i]
 *             if file is None:
 *                 from sage.misc.temporary_file import tmp_filename             # <<<<<<<<<<<<<<
 *                 file = tmp_filename()
 *             cfile = file
 */
      __pyx_t_4 = PyList_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1256, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_n_s_tmp_filename);
      __Pyx_GIVEREF(__pyx_n_s_tmp_filename);
      PyList_SET_ITEM(__pyx_t_4, 0, __pyx_n_s_tmp_filename);
      __pyx_t_2 = __Pyx_Import(__pyx_n_s_sage_misc_temporary_file, __pyx_t_4, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1256, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_tmp_filename); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1256, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_4);
      __pyx_v_tmp_filename = __pyx_t_4;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

      /* "automata/cautomata.pyx":1257
 *             if file is None:
 *                 from sage.misc.temporary_file import tmp_filename
 *                 file = tmp_filename()             # <<<<<<<<<<<<<<
 *             cfile = file
 *             if verb:
 */
      __Pyx_INCREF(__pyx_v_tmp_filename);
      __pyx_t_4 = __pyx_v_tmp_filename; __pyx_t_10 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_10)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_10);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      __pyx_t_2 = (__pyx_t_10) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_10) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1257, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF_SET(__pyx_v_file, __pyx_t_2);
      __pyx_t_2 = 0;

      /* "automata/cautomata.pyx":1255
 *                 strA.append(str(self.A[i]))
 *                 ll[i] = strA[i]
 *             if file is None:             # <<<<<<<<<<<<<<
 *                 from sage.misc.temporary_file import tmp_filename
 *                 file = tmp_filename()
 */
    }

    /* "automata/cautomata.pyx":1258
 *                 from sage.misc.temporary_file import tmp_filename
 *                 file = tmp_filename()
 *             cfile = file             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("file=%s" % file)
 */
    __pyx_t_8 = __Pyx_PyObject_AsWritableString(__pyx_v_file); if (unlikely((!__pyx_t_8) && PyErr_Occurred())) __PYX_ERR(0, 1258, __pyx_L1_error)
    __pyx_v_cfile = __pyx_t_8;

    /* "automata/cautomata.pyx":1259
 *                 file = tmp_filename()
 *             cfile = file
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("file=%s" % file)
 *             sig_on()
 */
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1259, __pyx_L1_error)
    if (__pyx_t_9) {

      /* "automata/cautomata.pyx":1260
 *             cfile = file
 *             if verb:
 *                 print("file=%s" % file)             # <<<<<<<<<<<<<<
 *             sig_on()
 *             NplotDot(cfile, self.a[0], ll, "Automaton", sx, sy, True)
 */
      __pyx_t_2 = __Pyx_PyString_FormatSafe(__pyx_kp_s_file_s, __pyx_v_file); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1260, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1260, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":1259
 *                 file = tmp_filename()
 *             cfile = file
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("file=%s" % file)
 *             sig_on()
 */
    }

    /* "automata/cautomata.pyx":1261
 *             if verb:
 *                 print("file=%s" % file)
 *             sig_on()             # <<<<<<<<<<<<<<
 *             NplotDot(cfile, self.a[0], ll, "Automaton", sx, sy, True)
 *             free(ll)
 */
    __pyx_t_3 = sig_on(); if (unlikely(__pyx_t_3 == ((int)0))) __PYX_ERR(0, 1261, __pyx_L1_error)

    /* "automata/cautomata.pyx":1262
 *                 print("file=%s" % file)
 *             sig_on()
 *             NplotDot(cfile, self.a[0], ll, "Automaton", sx, sy, True)             # <<<<<<<<<<<<<<
 *             free(ll)
 *             sig_off()
 */
    NplotDot(__pyx_v_cfile, (__pyx_v_self->a[0]), __pyx_v_ll, ((char const *)"Automaton"), __pyx_v_sx, __pyx_v_sy, 1);

    /* "automata/cautomata.pyx":1263
 *             sig_on()
 *             NplotDot(cfile, self.a[0], ll, "Automaton", sx, sy, True)
 *             free(ll)             # <<<<<<<<<<<<<<
 *             sig_off()
 *             if verb:
 */
    free(__pyx_v_ll);

    /* "automata/cautomata.pyx":1264
 *             NplotDot(cfile, self.a[0], ll, "Automaton", sx, sy, True)
 *             free(ll)
 *             sig_off()             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("Ouvre l'image produite...")
 */
    sig_off();

    /* "automata/cautomata.pyx":1265
 *             free(ll)
 *             sig_off()
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("Ouvre l'image produite...")
 *             from PIL import Image
 */
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1265, __pyx_L1_error)
    if (__pyx_t_9) {

      /* "automata/cautomata.pyx":1266
 *             sig_off()
 *             if verb:
 *                 print("Ouvre l'image produite...")             # <<<<<<<<<<<<<<
 *             from PIL import Image
 *             return Image.open(file+'.png')
 */
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__27, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1266, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":1265
 *             free(ll)
 *             sig_off()
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("Ouvre l'image produite...")
 *             from PIL import Image
 */
    }

    /* "automata/cautomata.pyx":1267
 *             if verb:
 *                 print("Ouvre l'image produite...")
 *             from PIL import Image             # <<<<<<<<<<<<<<
 *             return Image.open(file+'.png')
 * #            import ipywidgets as widgets
 */
    __pyx_t_4 = PyList_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1267, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_n_s_Image);
    __Pyx_GIVEREF(__pyx_n_s_Image);
    PyList_SET_ITEM(__pyx_t_4, 0, __pyx_n_s_Image);
    __pyx_t_2 = __Pyx_Import(__pyx_n_s_PIL, __pyx_t_4, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1267, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_Image); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1267, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(__pyx_t_4);
    __pyx_v_Image = __pyx_t_4;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":1268
 *                 print("Ouvre l'image produite...")
 *             from PIL import Image
 *             return Image.open(file+'.png')             # <<<<<<<<<<<<<<
 * #            import ipywidgets as widgets
 * #            file = open(file+'.png', "rb")
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_Image, __pyx_n_s_open); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1268, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_10 = PyNumber_Add(__pyx_v_file, __pyx_kp_s_png); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1268, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __pyx_t_11 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_11)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_11);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_2 = (__pyx_t_11) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_11, __pyx_t_10) : __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_10);
    __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1268, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_r = __pyx_t_2;
    __pyx_t_2 = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":1243
 *         de = DotExists ()
 *         sig_off()
 *         if de:             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print(" -> yes !")
 */
  }

  /* "automata/cautomata.pyx":1280
 * #            return w
 *         else:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print(" -> no.")
 *             raise NotImplementedError("You cannot plot the CAutomaton without dot. Install the dot command of the GraphViz package.")
 */
  /*else*/ {
    __pyx_t_9 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_9 < 0)) __PYX_ERR(0, 1280, __pyx_L1_error)
    if (__pyx_t_9) {

      /* "automata/cautomata.pyx":1281
 *         else:
 *             if verb:
 *                 print(" -> no.")             # <<<<<<<<<<<<<<
 *             raise NotImplementedError("You cannot plot the CAutomaton without dot. Install the dot command of the GraphViz package.")
 * 
 */
      __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__28, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1281, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

      /* "automata/cautomata.pyx":1280
 * #            return w
 *         else:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print(" -> no.")
 *             raise NotImplementedError("You cannot plot the CAutomaton without dot. Install the dot command of the GraphViz package.")
 */
    }

    /* "automata/cautomata.pyx":1282
 *             if verb:
 *                 print(" -> no.")
 *             raise NotImplementedError("You cannot plot the CAutomaton without dot. Install the dot command of the GraphViz package.")             # <<<<<<<<<<<<<<
 * 
 * 
 */
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_NotImplementedError, __pyx_tuple__29, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1282, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_ERR(0, 1282, __pyx_L1_error)
  }

  /* "automata/cautomata.pyx":1206
 *         return r
 * 
 *     def plot(self, file=None, int sx=10, int sy=8, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         plot a representation of the :class:`CAutomaton`.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.plot", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_strA);
  __Pyx_XDECREF(__pyx_v_tmp_filename);
  __Pyx_XDECREF(__pyx_v_Image);
  __Pyx_XDECREF(__pyx_v_file);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_39__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_39__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__reduce_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_38__reduce_cython__(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_38__reduce_cython__(CYTHON_UNUSED struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__reduce_cython__", 0);

  /* "(tree fragment)":2
 * def __reduce_cython__(self):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")             # <<<<<<<<<<<<<<
 * def __setstate_cython__(self, __pyx_state):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 */
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_TypeError, __pyx_tuple__30, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 2, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_Raise(__pyx_t_1, 0, 0, 0);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __PYX_ERR(1, 2, __pyx_L1_error)

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":3
 * def __reduce_cython__(self):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_41__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_10CAutomaton_41__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__setstate_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_10CAutomaton_40__setstate_cython__(((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_v_self), ((PyObject *)__pyx_v___pyx_state));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_10CAutomaton_40__setstate_cython__(CYTHON_UNUSED struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__setstate_cython__", 0);

  /* "(tree fragment)":4
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")             # <<<<<<<<<<<<<<
 */
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_TypeError, __pyx_tuple__31, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 4, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_Raise(__pyx_t_1, 0, 0, 0);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __PYX_ERR(1, 4, __pyx_L1_error)

  /* "(tree fragment)":3
 * def __reduce_cython__(self):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.CAutomaton.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1324
 * #    cdef list A
 * 
 *     def __cinit__(self):             # <<<<<<<<<<<<<<
 *         """
 * 
 */

/* Python wrapper */
static int __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_1__cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__cinit__ (wrapper)", 0);
  if (unlikely(PyTuple_GET_SIZE(__pyx_args) > 0)) {
    __Pyx_RaiseArgtupleInvalid("__cinit__", 1, 0, 0, PyTuple_GET_SIZE(__pyx_args)); return -1;}
  if (unlikely(__pyx_kwds) && unlikely(PyDict_Size(__pyx_kwds) > 0) && unlikely(!__Pyx_CheckKeywordStrings(__pyx_kwds, "__cinit__", 0))) return -1;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton___cinit__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_8automata_9cautomata_22DeterministicAutomaton___cinit__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("__cinit__", 0);

  /* "automata/cautomata.pyx":1329
 *         """
 *         # print("cinit")
 *         self.a = <Automaton *>malloc(sizeof(Automaton))             # <<<<<<<<<<<<<<
 *         if self.a is NULL:
 *             raise MemoryError("Failed to allocate memory for "
 */
  __pyx_v_self->a = ((Automaton *)malloc((sizeof(Automaton))));

  /* "automata/cautomata.pyx":1330
 *         # print("cinit")
 *         self.a = <Automaton *>malloc(sizeof(Automaton))
 *         if self.a is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for "
 *                               "C initialization of DeterministicAutomaton.")
 */
  __pyx_t_1 = ((__pyx_v_self->a == NULL) != 0);
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":1331
 *         self.a = <Automaton *>malloc(sizeof(Automaton))
 *         if self.a is NULL:
 *             raise MemoryError("Failed to allocate memory for "             # <<<<<<<<<<<<<<
 *                               "C initialization of DeterministicAutomaton.")
 *         # initialise
 */
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__32, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1331, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_ERR(0, 1331, __pyx_L1_error)

    /* "automata/cautomata.pyx":1330
 *         # print("cinit")
 *         self.a = <Automaton *>malloc(sizeof(Automaton))
 *         if self.a is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for "
 *                               "C initialization of DeterministicAutomaton.")
 */
  }

  /* "automata/cautomata.pyx":1334
 *                               "C initialization of DeterministicAutomaton.")
 *         # initialise
 *         self.a.e = NULL             # <<<<<<<<<<<<<<
 *         self.a.n = 0
 *         self.a.na = 0
 */
  __pyx_v_self->a->e = NULL;

  /* "automata/cautomata.pyx":1335
 *         # initialise
 *         self.a.e = NULL
 *         self.a.n = 0             # <<<<<<<<<<<<<<
 *         self.a.na = 0
 *         self.a.i = -1
 */
  __pyx_v_self->a->n = 0;

  /* "automata/cautomata.pyx":1336
 *         self.a.e = NULL
 *         self.a.n = 0
 *         self.a.na = 0             # <<<<<<<<<<<<<<
 *         self.a.i = -1
 *         self.A = []
 */
  __pyx_v_self->a->na = 0;

  /* "automata/cautomata.pyx":1337
 *         self.a.n = 0
 *         self.a.na = 0
 *         self.a.i = -1             # <<<<<<<<<<<<<<
 *         self.A = []
 *         self.S = None
 */
  __pyx_v_self->a->i = -1;

  /* "automata/cautomata.pyx":1338
 *         self.a.na = 0
 *         self.a.i = -1
 *         self.A = []             # <<<<<<<<<<<<<<
 *         self.S = None
 *         #self.dA = None
 */
  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1338, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_2);
  __Pyx_GOTREF(__pyx_v_self->A);
  __Pyx_DECREF(__pyx_v_self->A);
  __pyx_v_self->A = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":1339
 *         self.a.i = -1
 *         self.A = []
 *         self.S = None             # <<<<<<<<<<<<<<
 *         #self.dA = None
 *         #self.dS = None
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_self->S);
  __Pyx_DECREF(__pyx_v_self->S);
  __pyx_v_self->S = ((PyObject*)Py_None);

  /* "automata/cautomata.pyx":1324
 * #    cdef list A
 * 
 *     def __cinit__(self):             # <<<<<<<<<<<<<<
 *         """
 * 
 */

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.__cinit__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1343
 *         #self.dS = None
 * 
 *     def __init__(self, a, i=None, final_states=None,             # <<<<<<<<<<<<<<
 *                  A=None, S=None, keep_S=True, verb=False):
 *         r"""
 */

/* Python wrapper */
static int __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_3__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_2__init__[] = "\n        INPUT:\n\n        -``a`` - a list, a DiGraph, an Automaton, or a ``DeterministicAutomaton``\n\n        - ``i`` - (default: None) - initial state\n\n        - ``final_states`` - (default: None) - list of final states\n\n        - ``A`` - (default: None) - alphabet\n\n        - ``keep_S``- (default: `True`) - Keep labels of states or not\n\n        OUTPUT:\n\n        Return a instance of :class:`DeterministicAutomaton`.\n\n        TESTS::\n\n            sage: DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            DeterministicAutomaton with 4 states and an alphabet of 2 letters\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: DeterministicAutomaton(a)\n            DeterministicAutomaton with 4 states and an alphabet of 2 letters\n        ";
#if CYTHON_COMPILING_IN_CPYTHON
struct wrapperbase __pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_2__init__;
#endif
static int __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_3__init__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_a = 0;
  PyObject *__pyx_v_i = 0;
  PyObject *__pyx_v_final_states = 0;
  PyObject *__pyx_v_A = 0;
  PyObject *__pyx_v_S = 0;
  PyObject *__pyx_v_keep_S = 0;
  PyObject *__pyx_v_verb = 0;
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__init__ (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a,&__pyx_n_s_i,&__pyx_n_s_final_states_2,&__pyx_n_s_A,&__pyx_n_s_S,&__pyx_n_s_keep_S,&__pyx_n_s_verb,0};
    PyObject* values[7] = {0,0,0,0,0,0,0};
    values[1] = ((PyObject *)Py_None);
    values[2] = ((PyObject *)Py_None);

    /* "automata/cautomata.pyx":1344
 * 
 *     def __init__(self, a, i=None, final_states=None,
 *                  A=None, S=None, keep_S=True, verb=False):             # <<<<<<<<<<<<<<
 *         r"""
 *         INPUT:
 */
    values[3] = ((PyObject *)Py_None);
    values[4] = ((PyObject *)Py_None);
    values[5] = ((PyObject *)Py_True);
    values[6] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  7: values[6] = PyTuple_GET_ITEM(__pyx_args, 6);
        CYTHON_FALLTHROUGH;
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_final_states_2);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_A);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_S);
          if (value) { values[4] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  5:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_keep_S);
          if (value) { values[5] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  6:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[6] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "__init__") < 0)) __PYX_ERR(0, 1343, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  7: values[6] = PyTuple_GET_ITEM(__pyx_args, 6);
        CYTHON_FALLTHROUGH;
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a = values[0];
    __pyx_v_i = values[1];
    __pyx_v_final_states = values[2];
    __pyx_v_A = values[3];
    __pyx_v_S = values[4];
    __pyx_v_keep_S = values[5];
    __pyx_v_verb = values[6];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("__init__", 0, 1, 7, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1343, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return -1;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_2__init__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_a, __pyx_v_i, __pyx_v_final_states, __pyx_v_A, __pyx_v_S, __pyx_v_keep_S, __pyx_v_verb);

  /* "automata/cautomata.pyx":1343
 *         #self.dS = None
 * 
 *     def __init__(self, a, i=None, final_states=None,             # <<<<<<<<<<<<<<
 *                  A=None, S=None, keep_S=True, verb=False):
 *         r"""
 */

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static int __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_2__init__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_a, PyObject *__pyx_v_i, PyObject *__pyx_v_final_states, PyObject *__pyx_v_A, PyObject *__pyx_v_S, PyObject *__pyx_v_keep_S, PyObject *__pyx_v_verb) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_da = 0;
  PyObject *__pyx_v_DiGraph = NULL;
  PyObject *__pyx_v_SageAutomaton = NULL;
  PyObject *__pyx_v_L = NULL;
  PyObject *__pyx_v_t = NULL;
  PyObject *__pyx_v_I = NULL;
  PyObject *__pyx_v_SL = NULL;
  int __pyx_r;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *(*__pyx_t_8)(PyObject *);
  Py_ssize_t __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  Automaton __pyx_t_12;
  struct __pyx_opt_args_8automata_9cautomata_getAutomaton __pyx_t_13;
  int __pyx_t_14;
  __Pyx_RefNannySetupContext("__init__", 0);
  __Pyx_INCREF(__pyx_v_a);
  __Pyx_INCREF(__pyx_v_i);
  __Pyx_INCREF(__pyx_v_final_states);
  __Pyx_INCREF(__pyx_v_A);

  /* "automata/cautomata.pyx":1372
 *         cdef DeterministicAutomaton da
 *         # print("init")
 *         if a is None:             # <<<<<<<<<<<<<<
 *             if A is not None:
 *                 self.A = A
 */
  __pyx_t_1 = (__pyx_v_a == Py_None);
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":1373
 *         # print("init")
 *         if a is None:
 *             if A is not None:             # <<<<<<<<<<<<<<
 *                 self.A = A
 *                 self.a.na = len(A)
 */
    __pyx_t_2 = (__pyx_v_A != Py_None);
    __pyx_t_1 = (__pyx_t_2 != 0);
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":1374
 *         if a is None:
 *             if A is not None:
 *                 self.A = A             # <<<<<<<<<<<<<<
 *                 self.a.na = len(A)
 *             if i is not None:
 */
      if (!(likely(PyList_CheckExact(__pyx_v_A))||((__pyx_v_A) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_v_A)->tp_name), 0))) __PYX_ERR(0, 1374, __pyx_L1_error)
      __pyx_t_3 = __pyx_v_A;
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_GIVEREF(__pyx_t_3);
      __Pyx_GOTREF(__pyx_v_self->A);
      __Pyx_DECREF(__pyx_v_self->A);
      __pyx_v_self->A = ((PyObject*)__pyx_t_3);
      __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":1375
 *             if A is not None:
 *                 self.A = A
 *                 self.a.na = len(A)             # <<<<<<<<<<<<<<
 *             if i is not None:
 *                 print("Warning: Ignore i since there is no state.")
 */
      __pyx_t_4 = PyObject_Length(__pyx_v_A); if (unlikely(__pyx_t_4 == ((Py_ssize_t)-1))) __PYX_ERR(0, 1375, __pyx_L1_error)
      __pyx_v_self->a->na = __pyx_t_4;

      /* "automata/cautomata.pyx":1373
 *         # print("init")
 *         if a is None:
 *             if A is not None:             # <<<<<<<<<<<<<<
 *                 self.A = A
 *                 self.a.na = len(A)
 */
    }

    /* "automata/cautomata.pyx":1376
 *                 self.A = A
 *                 self.a.na = len(A)
 *             if i is not None:             # <<<<<<<<<<<<<<
 *                 print("Warning: Ignore i since there is no state.")
 *             if final_states is not None:
 */
    __pyx_t_1 = (__pyx_v_i != Py_None);
    __pyx_t_2 = (__pyx_t_1 != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":1377
 *                 self.a.na = len(A)
 *             if i is not None:
 *                 print("Warning: Ignore i since there is no state.")             # <<<<<<<<<<<<<<
 *             if final_states is not None:
 *                 print("Warning: Ignore final_states since there is no state.")
 */
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__33, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1377, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":1376
 *                 self.A = A
 *                 self.a.na = len(A)
 *             if i is not None:             # <<<<<<<<<<<<<<
 *                 print("Warning: Ignore i since there is no state.")
 *             if final_states is not None:
 */
    }

    /* "automata/cautomata.pyx":1378
 *             if i is not None:
 *                 print("Warning: Ignore i since there is no state.")
 *             if final_states is not None:             # <<<<<<<<<<<<<<
 *                 print("Warning: Ignore final_states since there is no state.")
 *             if S is not None:
 */
    __pyx_t_2 = (__pyx_v_final_states != Py_None);
    __pyx_t_1 = (__pyx_t_2 != 0);
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":1379
 *                 print("Warning: Ignore i since there is no state.")
 *             if final_states is not None:
 *                 print("Warning: Ignore final_states since there is no state.")             # <<<<<<<<<<<<<<
 *             if S is not None:
 *                 print("Warning: Ignore S since there is no state.")
 */
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__34, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1379, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":1378
 *             if i is not None:
 *                 print("Warning: Ignore i since there is no state.")
 *             if final_states is not None:             # <<<<<<<<<<<<<<
 *                 print("Warning: Ignore final_states since there is no state.")
 *             if S is not None:
 */
    }

    /* "automata/cautomata.pyx":1380
 *             if final_states is not None:
 *                 print("Warning: Ignore final_states since there is no state.")
 *             if S is not None:             # <<<<<<<<<<<<<<
 *                 print("Warning: Ignore S since there is no state.")
 *             return
 */
    __pyx_t_1 = (__pyx_v_S != Py_None);
    __pyx_t_2 = (__pyx_t_1 != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":1381
 *                 print("Warning: Ignore final_states since there is no state.")
 *             if S is not None:
 *                 print("Warning: Ignore S since there is no state.")             # <<<<<<<<<<<<<<
 *             return
 *         from sage.graphs.digraph import DiGraph
 */
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__35, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1381, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":1380
 *             if final_states is not None:
 *                 print("Warning: Ignore final_states since there is no state.")
 *             if S is not None:             # <<<<<<<<<<<<<<
 *                 print("Warning: Ignore S since there is no state.")
 *             return
 */
    }

    /* "automata/cautomata.pyx":1382
 *             if S is not None:
 *                 print("Warning: Ignore S since there is no state.")
 *             return             # <<<<<<<<<<<<<<
 *         from sage.graphs.digraph import DiGraph
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 */
    __pyx_r = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":1372
 *         cdef DeterministicAutomaton da
 *         # print("init")
 *         if a is None:             # <<<<<<<<<<<<<<
 *             if A is not None:
 *                 self.A = A
 */
  }

  /* "automata/cautomata.pyx":1383
 *                 print("Warning: Ignore S since there is no state.")
 *             return
 *         from sage.graphs.digraph import DiGraph             # <<<<<<<<<<<<<<
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *         if isinstance(a, CAutomaton):
 */
  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1383, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_n_s_DiGraph);
  __Pyx_GIVEREF(__pyx_n_s_DiGraph);
  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_DiGraph);
  __pyx_t_5 = __Pyx_Import(__pyx_n_s_sage_graphs_digraph, __pyx_t_3, -1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1383, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_5, __pyx_n_s_DiGraph); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1383, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_t_3);
  __pyx_v_DiGraph = __pyx_t_3;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "automata/cautomata.pyx":1384
 *             return
 *         from sage.graphs.digraph import DiGraph
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton             # <<<<<<<<<<<<<<
 *         if isinstance(a, CAutomaton):
 *             a = a.determinize().minimize()
 */
  __pyx_t_5 = PyList_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1384, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_INCREF(__pyx_n_s_Automaton);
  __Pyx_GIVEREF(__pyx_n_s_Automaton);
  PyList_SET_ITEM(__pyx_t_5, 0, __pyx_n_s_Automaton);
  __pyx_t_3 = __Pyx_Import(__pyx_n_s_sage_combinat_finite_state_machi, __pyx_t_5, -1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1384, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_Automaton); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1384, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_INCREF(__pyx_t_5);
  __pyx_v_SageAutomaton = __pyx_t_5;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":1385
 *         from sage.graphs.digraph import DiGraph
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *         if isinstance(a, CAutomaton):             # <<<<<<<<<<<<<<
 *             a = a.determinize().minimize()
 *         if isinstance(a, SageAutomaton):
 */
  __pyx_t_2 = __Pyx_TypeCheck(__pyx_v_a, __pyx_ptype_8automata_9cautomata_CAutomaton); 
  __pyx_t_1 = (__pyx_t_2 != 0);
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":1386
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *         if isinstance(a, CAutomaton):
 *             a = a.determinize().minimize()             # <<<<<<<<<<<<<<
 *         if isinstance(a, SageAutomaton):
 *             L = []
 */
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_determinize); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1386, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
      }
    }
    __pyx_t_5 = (__pyx_t_7) ? __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_7) : __Pyx_PyObject_CallNoArg(__pyx_t_6);
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1386, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_t_5, __pyx_n_s_minimize); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1386, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
      }
    }
    __pyx_t_3 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_6);
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1386, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF_SET(__pyx_v_a, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":1385
 *         from sage.graphs.digraph import DiGraph
 *         from sage.combinat.finite_state_machine import Automaton as SageAutomaton
 *         if isinstance(a, CAutomaton):             # <<<<<<<<<<<<<<
 *             a = a.determinize().minimize()
 *         if isinstance(a, SageAutomaton):
 */
  }

  /* "automata/cautomata.pyx":1387
 *         if isinstance(a, CAutomaton):
 *             a = a.determinize().minimize()
 *         if isinstance(a, SageAutomaton):             # <<<<<<<<<<<<<<
 *             L = []
 *             for t in a.transitions():
 */
  __pyx_t_1 = PyObject_IsInstance(__pyx_v_a, __pyx_v_SageAutomaton); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 1387, __pyx_L1_error)
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":1388
 *             a = a.determinize().minimize()
 *         if isinstance(a, SageAutomaton):
 *             L = []             # <<<<<<<<<<<<<<
 *             for t in a.transitions():
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:
 */
    __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1388, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_v_L = ((PyObject*)__pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":1389
 *         if isinstance(a, SageAutomaton):
 *             L = []
 *             for t in a.transitions():             # <<<<<<<<<<<<<<
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:
 *                     print("Warning: informations lost during the conversion.")
 */
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_transitions); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
      }
    }
    __pyx_t_3 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_6);
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1389, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (likely(PyList_CheckExact(__pyx_t_3)) || PyTuple_CheckExact(__pyx_t_3)) {
      __pyx_t_6 = __pyx_t_3; __Pyx_INCREF(__pyx_t_6); __pyx_t_4 = 0;
      __pyx_t_8 = NULL;
    } else {
      __pyx_t_4 = -1; __pyx_t_6 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1389, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_8 = Py_TYPE(__pyx_t_6)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 1389, __pyx_L1_error)
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    for (;;) {
      if (likely(!__pyx_t_8)) {
        if (likely(PyList_CheckExact(__pyx_t_6))) {
          if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_6)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_6, __pyx_t_4); __Pyx_INCREF(__pyx_t_3); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 1389, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_6, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1389, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        } else {
          if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_6)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_6, __pyx_t_4); __Pyx_INCREF(__pyx_t_3); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 1389, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_6, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1389, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        }
      } else {
        __pyx_t_3 = __pyx_t_8(__pyx_t_6);
        if (unlikely(!__pyx_t_3)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 1389, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_3);
      }
      __Pyx_XDECREF_SET(__pyx_v_t, __pyx_t_3);
      __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":1390
 *             L = []
 *             for t in a.transitions():
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:             # <<<<<<<<<<<<<<
 *                     print("Warning: informations lost during the conversion.")
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 */
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_word_in); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1390, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_9 = PyObject_Length(__pyx_t_3); if (unlikely(__pyx_t_9 == ((Py_ssize_t)-1))) __PYX_ERR(0, 1390, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_1 = ((__pyx_t_9 != 1) != 0);
      if (!__pyx_t_1) {
      } else {
        __pyx_t_2 = __pyx_t_1;
        goto __pyx_L13_bool_binop_done;
      }
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_word_out); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1390, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_9 = PyObject_Length(__pyx_t_3); if (unlikely(__pyx_t_9 == ((Py_ssize_t)-1))) __PYX_ERR(0, 1390, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_1 = ((__pyx_t_9 != 0) != 0);
      __pyx_t_2 = __pyx_t_1;
      __pyx_L13_bool_binop_done:;
      if (__pyx_t_2) {

        /* "automata/cautomata.pyx":1391
 *             for t in a.transitions():
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:
 *                     print("Warning: informations lost during the conversion.")             # <<<<<<<<<<<<<<
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 *             if i is None:
 */
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__14, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1391, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

        /* "automata/cautomata.pyx":1390
 *             L = []
 *             for t in a.transitions():
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:             # <<<<<<<<<<<<<<
 *                     print("Warning: informations lost during the conversion.")
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 */
      }

      /* "automata/cautomata.pyx":1392
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:
 *                     print("Warning: informations lost during the conversion.")
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))             # <<<<<<<<<<<<<<
 *             if i is None:
 *                 I = a.initial_states()
 */
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_from_state); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1392, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_to_state); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1392, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_t, __pyx_n_s_word_in); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1392, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_10 = __Pyx_GetItemInt(__pyx_t_7, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1392, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = PyTuple_New(3); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1392, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_GIVEREF(__pyx_t_3);
      PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_3);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_t_5);
      __Pyx_GIVEREF(__pyx_t_10);
      PyTuple_SET_ITEM(__pyx_t_7, 2, __pyx_t_10);
      __pyx_t_3 = 0;
      __pyx_t_5 = 0;
      __pyx_t_10 = 0;
      __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_L, __pyx_t_7); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 1392, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

      /* "automata/cautomata.pyx":1389
 *         if isinstance(a, SageAutomaton):
 *             L = []
 *             for t in a.transitions():             # <<<<<<<<<<<<<<
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:
 *                     print("Warning: informations lost during the conversion.")
 */
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

    /* "automata/cautomata.pyx":1393
 *                     print("Warning: informations lost during the conversion.")
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 *             if i is None:             # <<<<<<<<<<<<<<
 *                 I = a.initial_states()
 *                 if len(I) == 1:
 */
    __pyx_t_2 = (__pyx_v_i == Py_None);
    __pyx_t_1 = (__pyx_t_2 != 0);
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":1394
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 *             if i is None:
 *                 I = a.initial_states()             # <<<<<<<<<<<<<<
 *                 if len(I) == 1:
 *                     i = I[0]
 */
      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_initial_states_2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1394, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_10 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
        __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_7);
        if (likely(__pyx_t_10)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
          __Pyx_INCREF(__pyx_t_10);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_7, function);
        }
      }
      __pyx_t_6 = (__pyx_t_10) ? __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_t_10) : __Pyx_PyObject_CallNoArg(__pyx_t_7);
      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1394, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_v_I = __pyx_t_6;
      __pyx_t_6 = 0;

      /* "automata/cautomata.pyx":1395
 *             if i is None:
 *                 I = a.initial_states()
 *                 if len(I) == 1:             # <<<<<<<<<<<<<<
 *                     i = I[0]
 *                 else:
 */
      __pyx_t_4 = PyObject_Length(__pyx_v_I); if (unlikely(__pyx_t_4 == ((Py_ssize_t)-1))) __PYX_ERR(0, 1395, __pyx_L1_error)
      __pyx_t_1 = ((__pyx_t_4 == 1) != 0);
      if (__pyx_t_1) {

        /* "automata/cautomata.pyx":1396
 *                 I = a.initial_states()
 *                 if len(I) == 1:
 *                     i = I[0]             # <<<<<<<<<<<<<<
 *                 else:
 *                     print("Warning: the automaton has several initial states.")
 */
        __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_I, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1396, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_6);
        __pyx_t_6 = 0;

        /* "automata/cautomata.pyx":1395
 *             if i is None:
 *                 I = a.initial_states()
 *                 if len(I) == 1:             # <<<<<<<<<<<<<<
 *                     i = I[0]
 *                 else:
 */
        goto __pyx_L16;
      }

      /* "automata/cautomata.pyx":1398
 *                     i = I[0]
 *                 else:
 *                     print("Warning: the automaton has several initial states.")             # <<<<<<<<<<<<<<
 *             if final_states is None:
 *                 final_states = a.final_states()
 */
      /*else*/ {
        __pyx_t_6 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__36, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1398, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      }
      __pyx_L16:;

      /* "automata/cautomata.pyx":1393
 *                     print("Warning: informations lost during the conversion.")
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 *             if i is None:             # <<<<<<<<<<<<<<
 *                 I = a.initial_states()
 *                 if len(I) == 1:
 */
    }

    /* "automata/cautomata.pyx":1399
 *                 else:
 *                     print("Warning: the automaton has several initial states.")
 *             if final_states is None:             # <<<<<<<<<<<<<<
 *                 final_states = a.final_states()
 *             a = L
 */
    __pyx_t_1 = (__pyx_v_final_states == Py_None);
    __pyx_t_2 = (__pyx_t_1 != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":1400
 *                     print("Warning: the automaton has several initial states.")
 *             if final_states is None:
 *                 final_states = a.final_states()             # <<<<<<<<<<<<<<
 *             a = L
 *         if isinstance(a, list):
 */
      __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_final_states_2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1400, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_10 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
        __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_7);
        if (likely(__pyx_t_10)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
          __Pyx_INCREF(__pyx_t_10);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_7, function);
        }
      }
      __pyx_t_6 = (__pyx_t_10) ? __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_t_10) : __Pyx_PyObject_CallNoArg(__pyx_t_7);
      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1400, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_DECREF_SET(__pyx_v_final_states, __pyx_t_6);
      __pyx_t_6 = 0;

      /* "automata/cautomata.pyx":1399
 *                 else:
 *                     print("Warning: the automaton has several initial states.")
 *             if final_states is None:             # <<<<<<<<<<<<<<
 *                 final_states = a.final_states()
 *             a = L
 */
    }

    /* "automata/cautomata.pyx":1401
 *             if final_states is None:
 *                 final_states = a.final_states()
 *             a = L             # <<<<<<<<<<<<<<
 *         if isinstance(a, list):
 *             if verb:
 */
    __Pyx_INCREF(__pyx_v_L);
    __Pyx_DECREF_SET(__pyx_v_a, __pyx_v_L);

    /* "automata/cautomata.pyx":1387
 *         if isinstance(a, CAutomaton):
 *             a = a.determinize().minimize()
 *         if isinstance(a, SageAutomaton):             # <<<<<<<<<<<<<<
 *             L = []
 *             for t in a.transitions():
 */
  }

  /* "automata/cautomata.pyx":1402
 *                 final_states = a.final_states()
 *             a = L
 *         if isinstance(a, list):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("list...")
 */
  __pyx_t_2 = PyList_Check(__pyx_v_a); 
  __pyx_t_1 = (__pyx_t_2 != 0);
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":1403
 *             a = L
 *         if isinstance(a, list):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("list...")
 *             if S is None:
 */
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1403, __pyx_L1_error)
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":1404
 *         if isinstance(a, list):
 *             if verb:
 *                 print("list...")             # <<<<<<<<<<<<<<
 *             if S is None:
 *                 a = DiGraph(a, multiedges=True, loops=True)
 */
      __pyx_t_6 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__37, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1404, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

      /* "automata/cautomata.pyx":1403
 *             a = L
 *         if isinstance(a, list):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("list...")
 *             if S is None:
 */
    }

    /* "automata/cautomata.pyx":1405
 *             if verb:
 *                 print("list...")
 *             if S is None:             # <<<<<<<<<<<<<<
 *                 a = DiGraph(a, multiedges=True, loops=True)
 *             else:
 */
    __pyx_t_1 = (__pyx_v_S == Py_None);
    __pyx_t_2 = (__pyx_t_1 != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":1406
 *                 print("list...")
 *             if S is None:
 *                 a = DiGraph(a, multiedges=True, loops=True)             # <<<<<<<<<<<<<<
 *             else:
 *                 a = DiGraph([S, a],
 */
      __pyx_t_6 = PyTuple_New(1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1406, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_INCREF(__pyx_v_a);
      __Pyx_GIVEREF(__pyx_v_a);
      PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_v_a);
      __pyx_t_7 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1406, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      if (PyDict_SetItem(__pyx_t_7, __pyx_n_s_multiedges, Py_True) < 0) __PYX_ERR(0, 1406, __pyx_L1_error)
      if (PyDict_SetItem(__pyx_t_7, __pyx_n_s_loops, Py_True) < 0) __PYX_ERR(0, 1406, __pyx_L1_error)
      __pyx_t_10 = __Pyx_PyObject_Call(__pyx_v_DiGraph, __pyx_t_6, __pyx_t_7); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1406, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_DECREF_SET(__pyx_v_a, __pyx_t_10);
      __pyx_t_10 = 0;

      /* "automata/cautomata.pyx":1405
 *             if verb:
 *                 print("list...")
 *             if S is None:             # <<<<<<<<<<<<<<
 *                 a = DiGraph(a, multiedges=True, loops=True)
 *             else:
 */
      goto __pyx_L20;
    }

    /* "automata/cautomata.pyx":1408
 *                 a = DiGraph(a, multiedges=True, loops=True)
 *             else:
 *                 a = DiGraph([S, a],             # <<<<<<<<<<<<<<
 *                             format='vertices_and_edges',
 *                             multiedges=True, loops=True)
 */
    /*else*/ {
      __pyx_t_10 = PyList_New(2); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1408, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_INCREF(__pyx_v_S);
      __Pyx_GIVEREF(__pyx_v_S);
      PyList_SET_ITEM(__pyx_t_10, 0, __pyx_v_S);
      __Pyx_INCREF(__pyx_v_a);
      __Pyx_GIVEREF(__pyx_v_a);
      PyList_SET_ITEM(__pyx_t_10, 1, __pyx_v_a);
      __pyx_t_7 = PyTuple_New(1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 1408, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_GIVEREF(__pyx_t_10);
      PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_t_10);
      __pyx_t_10 = 0;

      /* "automata/cautomata.pyx":1409
 *             else:
 *                 a = DiGraph([S, a],
 *                             format='vertices_and_edges',             # <<<<<<<<<<<<<<
 *                             multiedges=True, loops=True)
 *         if isinstance(a, DiGraph):
 */
      __pyx_t_10 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1409, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      if (PyDict_SetItem(__pyx_t_10, __pyx_n_s_format, __pyx_n_s_vertices_and_edges) < 0) __PYX_ERR(0, 1409, __pyx_L1_error)

      /* "automata/cautomata.pyx":1410
 *                 a = DiGraph([S, a],
 *                             format='vertices_and_edges',
 *                             multiedges=True, loops=True)             # <<<<<<<<<<<<<<
 *         if isinstance(a, DiGraph):
 *             if verb:
 */
      if (PyDict_SetItem(__pyx_t_10, __pyx_n_s_multiedges, Py_True) < 0) __PYX_ERR(0, 1409, __pyx_L1_error)
      if (PyDict_SetItem(__pyx_t_10, __pyx_n_s_loops, Py_True) < 0) __PYX_ERR(0, 1409, __pyx_L1_error)

      /* "automata/cautomata.pyx":1408
 *                 a = DiGraph(a, multiedges=True, loops=True)
 *             else:
 *                 a = DiGraph([S, a],             # <<<<<<<<<<<<<<
 *                             format='vertices_and_edges',
 *                             multiedges=True, loops=True)
 */
      __pyx_t_6 = __Pyx_PyObject_Call(__pyx_v_DiGraph, __pyx_t_7, __pyx_t_10); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1408, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_DECREF_SET(__pyx_v_a, __pyx_t_6);
      __pyx_t_6 = 0;
    }
    __pyx_L20:;

    /* "automata/cautomata.pyx":1402
 *                 final_states = a.final_states()
 *             a = L
 *         if isinstance(a, list):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("list...")
 */
  }

  /* "automata/cautomata.pyx":1411
 *                             format='vertices_and_edges',
 *                             multiedges=True, loops=True)
 *         if isinstance(a, DiGraph):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("DiGraph...")
 */
  __pyx_t_2 = PyObject_IsInstance(__pyx_v_a, __pyx_v_DiGraph); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 1411, __pyx_L1_error)
  __pyx_t_1 = (__pyx_t_2 != 0);
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":1412
 *                             multiedges=True, loops=True)
 *         if isinstance(a, DiGraph):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("DiGraph...")
 *             SL = set(a.edge_labels())
 */
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1412, __pyx_L1_error)
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":1413
 *         if isinstance(a, DiGraph):
 *             if verb:
 *                 print("DiGraph...")             # <<<<<<<<<<<<<<
 *             SL = set(a.edge_labels())
 *             if A is None:
 */
      __pyx_t_6 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__16, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1413, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

      /* "automata/cautomata.pyx":1412
 *                             multiedges=True, loops=True)
 *         if isinstance(a, DiGraph):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("DiGraph...")
 *             SL = set(a.edge_labels())
 */
    }

    /* "automata/cautomata.pyx":1414
 *             if verb:
 *                 print("DiGraph...")
 *             SL = set(a.edge_labels())             # <<<<<<<<<<<<<<
 *             if A is None:
 *                 A = list(SL)
 */
    __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_edge_labels); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1414, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_10))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_10);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_10, function);
      }
    }
    __pyx_t_6 = (__pyx_t_7) ? __Pyx_PyObject_CallOneArg(__pyx_t_10, __pyx_t_7) : __Pyx_PyObject_CallNoArg(__pyx_t_10);
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1414, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
    __pyx_t_10 = PySet_New(__pyx_t_6); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1414, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_SL = ((PyObject*)__pyx_t_10);
    __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":1415
 *                 print("DiGraph...")
 *             SL = set(a.edge_labels())
 *             if A is None:             # <<<<<<<<<<<<<<
 *                 A = list(SL)
 *             else:
 */
    __pyx_t_1 = (__pyx_v_A == Py_None);
    __pyx_t_2 = (__pyx_t_1 != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":1416
 *             SL = set(a.edge_labels())
 *             if A is None:
 *                 A = list(SL)             # <<<<<<<<<<<<<<
 *             else:
 *                 # test that A contains the labels
 */
      __pyx_t_10 = PySequence_List(__pyx_v_SL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1416, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF_SET(__pyx_v_A, __pyx_t_10);
      __pyx_t_10 = 0;

      /* "automata/cautomata.pyx":1415
 *                 print("DiGraph...")
 *             SL = set(a.edge_labels())
 *             if A is None:             # <<<<<<<<<<<<<<
 *                 A = list(SL)
 *             else:
 */
      goto __pyx_L23;
    }

    /* "automata/cautomata.pyx":1419
 *             else:
 *                 # test that A contains the labels
 *                 if not SL.issubset(A):             # <<<<<<<<<<<<<<
 *                     raise ValueError("A label of a transition is not in the alphabet %s"%A)
 *             self.A = A
 */
    /*else*/ {
      __pyx_t_10 = __Pyx_CallUnboundCMethod1(&__pyx_umethod_PySet_Type_issubset, __pyx_v_SL, __pyx_v_A); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1419, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_10); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1419, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_1 = ((!__pyx_t_2) != 0);
      if (unlikely(__pyx_t_1)) {

        /* "automata/cautomata.pyx":1420
 *                 # test that A contains the labels
 *                 if not SL.issubset(A):
 *                     raise ValueError("A label of a transition is not in the alphabet %s"%A)             # <<<<<<<<<<<<<<
 *             self.A = A
 *             self.a[0] = getAutomaton(a, initial=i, F=final_states, A=self.A)
 */
        __pyx_t_10 = __Pyx_PyString_FormatSafe(__pyx_kp_s_A_label_of_a_transition_is_not_i, __pyx_v_A); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1420, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_6 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_10); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1420, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_Raise(__pyx_t_6, 0, 0, 0);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        __PYX_ERR(0, 1420, __pyx_L1_error)

        /* "automata/cautomata.pyx":1419
 *             else:
 *                 # test that A contains the labels
 *                 if not SL.issubset(A):             # <<<<<<<<<<<<<<
 *                     raise ValueError("A label of a transition is not in the alphabet %s"%A)
 *             self.A = A
 */
      }
    }
    __pyx_L23:;

    /* "automata/cautomata.pyx":1421
 *                 if not SL.issubset(A):
 *                     raise ValueError("A label of a transition is not in the alphabet %s"%A)
 *             self.A = A             # <<<<<<<<<<<<<<
 *             self.a[0] = getAutomaton(a, initial=i, F=final_states, A=self.A)
 *             #self.dA = a.dA
 */
    if (!(likely(PyList_CheckExact(__pyx_v_A))||((__pyx_v_A) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_v_A)->tp_name), 0))) __PYX_ERR(0, 1421, __pyx_L1_error)
    __pyx_t_6 = __pyx_v_A;
    __Pyx_INCREF(__pyx_t_6);
    __Pyx_GIVEREF(__pyx_t_6);
    __Pyx_GOTREF(__pyx_v_self->A);
    __Pyx_DECREF(__pyx_v_self->A);
    __pyx_v_self->A = ((PyObject*)__pyx_t_6);
    __pyx_t_6 = 0;

    /* "automata/cautomata.pyx":1422
 *                     raise ValueError("A label of a transition is not in the alphabet %s"%A)
 *             self.A = A
 *             self.a[0] = getAutomaton(a, initial=i, F=final_states, A=self.A)             # <<<<<<<<<<<<<<
 *             #self.dA = a.dA
 *             if keep_S:
 */
    __pyx_t_6 = __pyx_v_self->A;
    __Pyx_INCREF(__pyx_t_6);
    __pyx_t_13.__pyx_n = 3;
    __pyx_t_13.initial = __pyx_v_i;
    __pyx_t_13.F = __pyx_v_final_states;
    __pyx_t_13.A = __pyx_t_6;
    __pyx_t_12 = __pyx_f_8automata_9cautomata_getAutomaton(__pyx_v_a, &__pyx_t_13); 
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    (__pyx_v_self->a[0]) = __pyx_t_12;

    /* "automata/cautomata.pyx":1424
 *             self.a[0] = getAutomaton(a, initial=i, F=final_states, A=self.A)
 *             #self.dA = a.dA
 *             if keep_S:             # <<<<<<<<<<<<<<
 *                 self.S = a.vertices()
 *                 #self.dS = a.dS
 */
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_v_keep_S); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 1424, __pyx_L1_error)
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":1425
 *             #self.dA = a.dA
 *             if keep_S:
 *                 self.S = a.vertices()             # <<<<<<<<<<<<<<
 *                 #self.dS = a.dS
 *         elif isinstance(a, DeterministicAutomaton):
 */
      __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_vertices); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1425, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_7 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_10))) {
        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_10);
        if (likely(__pyx_t_7)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
          __Pyx_INCREF(__pyx_t_7);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_10, function);
        }
      }
      __pyx_t_6 = (__pyx_t_7) ? __Pyx_PyObject_CallOneArg(__pyx_t_10, __pyx_t_7) : __Pyx_PyObject_CallNoArg(__pyx_t_10);
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1425, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      if (!(likely(PyList_CheckExact(__pyx_t_6))||((__pyx_t_6) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_t_6)->tp_name), 0))) __PYX_ERR(0, 1425, __pyx_L1_error)
      __Pyx_GIVEREF(__pyx_t_6);
      __Pyx_GOTREF(__pyx_v_self->S);
      __Pyx_DECREF(__pyx_v_self->S);
      __pyx_v_self->S = ((PyObject*)__pyx_t_6);
      __pyx_t_6 = 0;

      /* "automata/cautomata.pyx":1424
 *             self.a[0] = getAutomaton(a, initial=i, F=final_states, A=self.A)
 *             #self.dA = a.dA
 *             if keep_S:             # <<<<<<<<<<<<<<
 *                 self.S = a.vertices()
 *                 #self.dS = a.dS
 */
    }

    /* "automata/cautomata.pyx":1411
 *                             format='vertices_and_edges',
 *                             multiedges=True, loops=True)
 *         if isinstance(a, DiGraph):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("DiGraph...")
 */
    goto __pyx_L21;
  }

  /* "automata/cautomata.pyx":1427
 *                 self.S = a.vertices()
 *                 #self.dS = a.dS
 *         elif isinstance(a, DeterministicAutomaton):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("DeterministicAutomaton...")
 */
  __pyx_t_1 = __Pyx_TypeCheck(__pyx_v_a, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton); 
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (likely(__pyx_t_2)) {

    /* "automata/cautomata.pyx":1428
 *                 #self.dS = a.dS
 *         elif isinstance(a, DeterministicAutomaton):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("DeterministicAutomaton...")
 *             da = a
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1428, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":1429
 *         elif isinstance(a, DeterministicAutomaton):
 *             if verb:
 *                 print("DeterministicAutomaton...")             # <<<<<<<<<<<<<<
 *             da = a
 *             sig_on()
 */
      __pyx_t_6 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__38, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1429, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

      /* "automata/cautomata.pyx":1428
 *                 #self.dS = a.dS
 *         elif isinstance(a, DeterministicAutomaton):
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("DeterministicAutomaton...")
 *             da = a
 */
    }

    /* "automata/cautomata.pyx":1430
 *             if verb:
 *                 print("DeterministicAutomaton...")
 *             da = a             # <<<<<<<<<<<<<<
 *             sig_on()
 *             self.a[0] = CopyAutomaton(da.a[0], da.a.n, da.a.na)
 */
    if (!(likely(((__pyx_v_a) == Py_None) || likely(__Pyx_TypeTest(__pyx_v_a, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 1430, __pyx_L1_error)
    __pyx_t_6 = __pyx_v_a;
    __Pyx_INCREF(__pyx_t_6);
    __pyx_v_da = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_6);
    __pyx_t_6 = 0;

    /* "automata/cautomata.pyx":1431
 *                 print("DeterministicAutomaton...")
 *             da = a
 *             sig_on()             # <<<<<<<<<<<<<<
 *             self.a[0] = CopyAutomaton(da.a[0], da.a.n, da.a.na)
 *             sig_off()
 */
    __pyx_t_14 = sig_on(); if (unlikely(__pyx_t_14 == ((int)0))) __PYX_ERR(0, 1431, __pyx_L1_error)

    /* "automata/cautomata.pyx":1432
 *             da = a
 *             sig_on()
 *             self.a[0] = CopyAutomaton(da.a[0], da.a.n, da.a.na)             # <<<<<<<<<<<<<<
 *             sig_off()
 *             self.A = da.A
 */
    (__pyx_v_self->a[0]) = CopyAutomaton((__pyx_v_da->a[0]), __pyx_v_da->a->n, __pyx_v_da->a->na);

    /* "automata/cautomata.pyx":1433
 *             sig_on()
 *             self.a[0] = CopyAutomaton(da.a[0], da.a.n, da.a.na)
 *             sig_off()             # <<<<<<<<<<<<<<
 *             self.A = da.A
 *             self.S = da.S
 */
    sig_off();

    /* "automata/cautomata.pyx":1434
 *             self.a[0] = CopyAutomaton(da.a[0], da.a.n, da.a.na)
 *             sig_off()
 *             self.A = da.A             # <<<<<<<<<<<<<<
 *             self.S = da.S
 *         else:
 */
    __pyx_t_6 = __pyx_v_da->A;
    __Pyx_INCREF(__pyx_t_6);
    __Pyx_GIVEREF(__pyx_t_6);
    __Pyx_GOTREF(__pyx_v_self->A);
    __Pyx_DECREF(__pyx_v_self->A);
    __pyx_v_self->A = ((PyObject*)__pyx_t_6);
    __pyx_t_6 = 0;

    /* "automata/cautomata.pyx":1435
 *             sig_off()
 *             self.A = da.A
 *             self.S = da.S             # <<<<<<<<<<<<<<
 *         else:
 *             raise ValueError("Cannot convert the input to DeterministicAutomaton.")
 */
    __pyx_t_6 = __pyx_v_da->S;
    __Pyx_INCREF(__pyx_t_6);
    __Pyx_GIVEREF(__pyx_t_6);
    __Pyx_GOTREF(__pyx_v_self->S);
    __Pyx_DECREF(__pyx_v_self->S);
    __pyx_v_self->S = ((PyObject*)__pyx_t_6);
    __pyx_t_6 = 0;

    /* "automata/cautomata.pyx":1427
 *                 self.S = a.vertices()
 *                 #self.dS = a.dS
 *         elif isinstance(a, DeterministicAutomaton):             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("DeterministicAutomaton...")
 */
    goto __pyx_L21;
  }

  /* "automata/cautomata.pyx":1437
 *             self.S = da.S
 *         else:
 *             raise ValueError("Cannot convert the input to DeterministicAutomaton.")             # <<<<<<<<<<<<<<
 * 
 *     def __dealloc__(self):
 */
  /*else*/ {
    __pyx_t_6 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__39, NULL); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1437, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_Raise(__pyx_t_6, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __PYX_ERR(0, 1437, __pyx_L1_error)
  }
  __pyx_L21:;

  /* "automata/cautomata.pyx":1343
 *         #self.dS = None
 * 
 *     def __init__(self, a, i=None, final_states=None,             # <<<<<<<<<<<<<<
 *                  A=None, S=None, keep_S=True, verb=False):
 *         r"""
 */

  /* function exit code */
  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.__init__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_da);
  __Pyx_XDECREF(__pyx_v_DiGraph);
  __Pyx_XDECREF(__pyx_v_SageAutomaton);
  __Pyx_XDECREF(__pyx_v_L);
  __Pyx_XDECREF(__pyx_v_t);
  __Pyx_XDECREF(__pyx_v_I);
  __Pyx_XDECREF(__pyx_v_SL);
  __Pyx_XDECREF(__pyx_v_a);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_final_states);
  __Pyx_XDECREF(__pyx_v_A);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1439
 *             raise ValueError("Cannot convert the input to DeterministicAutomaton.")
 * 
 *     def __dealloc__(self):             # <<<<<<<<<<<<<<
 *         """
 *         Desalloc  Automaton  Overwrite built-in function
 */

/* Python wrapper */
static void __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_5__dealloc__(PyObject *__pyx_v_self); /*proto*/
static void __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_5__dealloc__(PyObject *__pyx_v_self) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__dealloc__ (wrapper)", 0);
  __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_4__dealloc__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
}

static void __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_4__dealloc__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  __Pyx_RefNannySetupContext("__dealloc__", 0);

  /* "automata/cautomata.pyx":1447
 *         """
 *         # print("free (%s States) "%self.a.n)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         FreeAutomaton(self.a)
 *         # print("free self.a")
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 1447, __pyx_L1_error)

  /* "automata/cautomata.pyx":1448
 *         # print("free (%s States) "%self.a.n)
 *         sig_on()
 *         FreeAutomaton(self.a)             # <<<<<<<<<<<<<<
 *         # print("free self.a")
 *         free(self.a)
 */
  FreeAutomaton(__pyx_v_self->a);

  /* "automata/cautomata.pyx":1450
 *         FreeAutomaton(self.a)
 *         # print("free self.a")
 *         free(self.a)             # <<<<<<<<<<<<<<
 *         sig_off()
 * 
 */
  free(__pyx_v_self->a);

  /* "automata/cautomata.pyx":1451
 *         # print("free self.a")
 *         free(self.a)
 *         sig_off()             # <<<<<<<<<<<<<<
 * 
 *     def copy(self):
 */
  sig_off();

  /* "automata/cautomata.pyx":1439
 *             raise ValueError("Cannot convert the input to DeterministicAutomaton.")
 * 
 *     def __dealloc__(self):             # <<<<<<<<<<<<<<
 *         """
 *         Desalloc  Automaton  Overwrite built-in function
 */

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_WriteUnraisable("automata.cautomata.DeterministicAutomaton.__dealloc__", __pyx_clineno, __pyx_lineno, __pyx_filename, 1, 0);
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
}

/* "automata/cautomata.pyx":1453
 *         sig_off()
 * 
 *     def copy(self):             # <<<<<<<<<<<<<<
 *         """
 *         Do a copy of the :class:`DeterministicAutomaton`.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_7copy(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_6copy[] = "\n        Do a copy of the :class:`DeterministicAutomaton`.\n\n        OUTPUT:\n\n        Return a copy of the :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.copy()\n            DeterministicAutomaton with 4 states and an alphabet of 2 letters\n        \n        TESTS::\n\n            sage: a = dag.AnyLetter(['a', 'b'])\n            sage: b = a.copy()\n            sage: a == b\n            True\n            sage: a.alphabet.append(0)\n            sage: a == b\n            False\n            sage: a = b.copy()\n            sage: a.delete_state_in_place(0)\n            sage: a == b\n            False\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_7copy(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("copy (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_6copy(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_6copy(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = 0;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  int __pyx_t_4;
  __Pyx_RefNannySetupContext("copy", 0);

  /* "automata/cautomata.pyx":1483
 *         """
 *         cdef DeterministicAutomaton r
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r.a[0] = CopyAutomaton(self.a[0], self.a.n, self.a.na)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1483, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":1484
 *         cdef DeterministicAutomaton r
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         r.a[0] = CopyAutomaton(self.a[0], self.a.n, self.a.na)
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 1484, __pyx_L1_error)

  /* "automata/cautomata.pyx":1485
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         r.a[0] = CopyAutomaton(self.a[0], self.a.n, self.a.na)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if self.S is not None:
 */
  (__pyx_v_r->a[0]) = CopyAutomaton((__pyx_v_self->a[0]), __pyx_v_self->a->n, __pyx_v_self->a->na);

  /* "automata/cautomata.pyx":1486
 *         sig_on()
 *         r.a[0] = CopyAutomaton(self.a[0], self.a.n, self.a.na)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if self.S is not None:
 *             r.S = self.S[:]
 */
  sig_off();

  /* "automata/cautomata.pyx":1487
 *         r.a[0] = CopyAutomaton(self.a[0], self.a.n, self.a.na)
 *         sig_off()
 *         if self.S is not None:             # <<<<<<<<<<<<<<
 *             r.S = self.S[:]
 *         r.A = self.A[:]
 */
  __pyx_t_3 = (__pyx_v_self->S != ((PyObject*)Py_None));
  __pyx_t_4 = (__pyx_t_3 != 0);
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":1488
 *         sig_off()
 *         if self.S is not None:
 *             r.S = self.S[:]             # <<<<<<<<<<<<<<
 *         r.A = self.A[:]
 *         return r
 */
    if (unlikely(__pyx_v_self->S == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 1488, __pyx_L1_error)
    }
    __pyx_t_1 = __Pyx_PyList_GetSlice(__pyx_v_self->S, 0, PY_SSIZE_T_MAX); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1488, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_GIVEREF(__pyx_t_1);
    __Pyx_GOTREF(__pyx_v_r->S);
    __Pyx_DECREF(__pyx_v_r->S);
    __pyx_v_r->S = ((PyObject*)__pyx_t_1);
    __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":1487
 *         r.a[0] = CopyAutomaton(self.a[0], self.a.n, self.a.na)
 *         sig_off()
 *         if self.S is not None:             # <<<<<<<<<<<<<<
 *             r.S = self.S[:]
 *         r.A = self.A[:]
 */
  }

  /* "automata/cautomata.pyx":1489
 *         if self.S is not None:
 *             r.S = self.S[:]
 *         r.A = self.A[:]             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  if (unlikely(__pyx_v_self->A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(0, 1489, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_PyList_GetSlice(__pyx_v_self->A, 0, PY_SSIZE_T_MAX); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1489, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":1490
 *             r.S = self.S[:]
 *         r.A = self.A[:]
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def __copy__(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":1453
 *         sig_off()
 * 
 *     def copy(self):             # <<<<<<<<<<<<<<
 *         """
 *         Do a copy of the :class:`DeterministicAutomaton`.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.copy", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1492
 *         return r
 * 
 *     def __copy__(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return a copy of the :class:`DeterministicAutomaton`.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_9__copy__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_8__copy__[] = "\n        Return a copy of the :class:`DeterministicAutomaton`.\n        Overwrite builtin function.\n        \n        See copy() for more details.\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_9__copy__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__copy__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_8__copy__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_8__copy__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("__copy__", 0);

  /* "automata/cautomata.pyx":1499
 *         See copy() for more details.
 *         """
 *         return self.copy()             # <<<<<<<<<<<<<<
 * 
 *     def __repr__(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_copy); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":1492
 *         return r
 * 
 *     def __copy__(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return a copy of the :class:`DeterministicAutomaton`.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.__copy__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1501
 *         return self.copy()
 * 
 *     def __repr__(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return a representation of automaton,  Overwrite built-in function
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_11__repr__(PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_10__repr__[] = "\n        Return a representation of automaton,  Overwrite built-in function\n\n        OUTPUT:\n\n        Return a representation of automaton\n\n        TESTS:\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: repr(a)\n            'DeterministicAutomaton with 4 states and an alphabet of 2 letters'\n\n        ";
#if CYTHON_COMPILING_IN_CPYTHON
struct wrapperbase __pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_10__repr__;
#endif
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_11__repr__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__repr__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_10__repr__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_10__repr__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_v_str = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  __Pyx_RefNannySetupContext("__repr__", 0);

  /* "automata/cautomata.pyx":1516
 * 
 *         """
 *         str = "DeterministicAutomaton with %d state"%self.a.n             # <<<<<<<<<<<<<<
 *         if self.a.n > 1:
 *             str += 's'
 */
  __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1516, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyString_Format(__pyx_kp_s_DeterministicAutomaton_with_d_st, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1516, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_str = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":1517
 *         """
 *         str = "DeterministicAutomaton with %d state"%self.a.n
 *         if self.a.n > 1:             # <<<<<<<<<<<<<<
 *             str += 's'
 *         str += " and an alphabet of %d letter"%self.a.na
 */
  __pyx_t_3 = ((__pyx_v_self->a->n > 1) != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":1518
 *         str = "DeterministicAutomaton with %d state"%self.a.n
 *         if self.a.n > 1:
 *             str += 's'             # <<<<<<<<<<<<<<
 *         str += " and an alphabet of %d letter"%self.a.na
 *         if self.a.na > 1:
 */
    __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_v_str, __pyx_n_s_s); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1518, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF_SET(__pyx_v_str, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":1517
 *         """
 *         str = "DeterministicAutomaton with %d state"%self.a.n
 *         if self.a.n > 1:             # <<<<<<<<<<<<<<
 *             str += 's'
 *         str += " and an alphabet of %d letter"%self.a.na
 */
  }

  /* "automata/cautomata.pyx":1519
 *         if self.a.n > 1:
 *             str += 's'
 *         str += " and an alphabet of %d letter"%self.a.na             # <<<<<<<<<<<<<<
 *         if self.a.na > 1:
 *             str += 's'
 */
  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_self->a->na); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1519, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_and_an_alphabet_of_d_letter, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1519, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_v_str, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1519, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF_SET(__pyx_v_str, __pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":1520
 *             str += 's'
 *         str += " and an alphabet of %d letter"%self.a.na
 *         if self.a.na > 1:             # <<<<<<<<<<<<<<
 *             str += 's'
 *         return str
 */
  __pyx_t_3 = ((__pyx_v_self->a->na > 1) != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":1521
 *         str += " and an alphabet of %d letter"%self.a.na
 *         if self.a.na > 1:
 *             str += 's'             # <<<<<<<<<<<<<<
 *         return str
 * 
 */
    __pyx_t_2 = PyNumber_InPlaceAdd(__pyx_v_str, __pyx_n_s_s); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1521, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF_SET(__pyx_v_str, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":1520
 *             str += 's'
 *         str += " and an alphabet of %d letter"%self.a.na
 *         if self.a.na > 1:             # <<<<<<<<<<<<<<
 *             str += 's'
 *         return str
 */
  }

  /* "automata/cautomata.pyx":1522
 *         if self.a.na > 1:
 *             str += 's'
 *         return str             # <<<<<<<<<<<<<<
 * 
 *     def _latex_(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_str);
  __pyx_r = __pyx_v_str;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":1501
 *         return self.copy()
 * 
 *     def __repr__(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return a representation of automaton,  Overwrite built-in function
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.__repr__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_str);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1524
 *         return str
 * 
 *     def _latex_(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Return a latex representation of the automaton.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_13_latex_(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_12_latex_[] = "\n        Return a latex representation of the automaton.\n\n        OUTPUT:\n\n        string - latex representation of the automaton.\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: latex(a)      # optional -  dot2tex\n            \\documentclass{article}\n            \\usepackage[x11names, rgb]{xcolor}\n            \\usepackage[utf8]{inputenc}\n            \\usepackage{tikz}\n            \\usetikzlibrary{snakes,arrows,shapes}\n            \\usepackage{amsmath}\n            %\n            %\n            <BLANKLINE>\n            %\n            <BLANKLINE>\n            %\n            <BLANKLINE>\n            \\begin{document}\n            \\pagestyle{empty}\n            %\n            %\n            %\n            <BLANKLINE>\n            \\enlargethispage{100cm}\n            % Start of code\n            % \\begin{tikzpicture}[anchor=mid,>=latex',line join=bevel,]\n            \\begin{tikzpicture}[>=latex',line join=bevel,]\n              \\pgfsetlinewidth{1bp}\n            %%\n            \\pgfsetcolor{black}\n              % Edge: 0 -> 1\n              \\draw [-stealth'] (44.247bp,22.0bp) .. controls (54.848bp,22.0bp) and (67.736bp,22.0bp)  .. (89.697bp,22.0bp);\n              \\definecolor{strokecol}{rgb}{0.0,0.0,0.0};\n              \\pgfsetstrokecolor{strokecol}\n              \\draw (67.0bp,33.0bp) node {a};\n              % Edge: 2 -> 3\n              \\draw [-stealth'] (44.247bp,80.0bp) .. controls (54.848bp,80.0bp) and (67.736bp,80.0bp)  .. (89.697bp,80.0bp);\n              \\draw (67.0bp,91.0bp) node {b};\n              % Node: 1\n            \\begin{scope}\n              \\definecolor{strokecol}{rgb}{0.0,0.0,0.0};\n              \\pgfsetstrokecolor{strokecol}\n              \\draw [solid] (112.0bp,22.0bp) ellipse (18.0bp and 18.0bp);\n              \\draw [solid] (112.0bp,22.0bp) ellipse (22.0bp and 22.0bp);\n              \\draw (112.0bp,22.0bp) node {1};\n             \\end{scope}\n       ""       % Node: 0\n            \\begin{scope}\n              \\definecolor{strokecol}{rgb}{0.0,0.0,0.0};\n              \\pgfsetstrokecolor{strokecol}\n              \\draw [solid] (22.0bp,22.0bp) ellipse (18.0bp and 18.0bp);\n              \\draw [solid] (22.0bp,22.0bp) ellipse (22.0bp and 22.0bp);\n              \\draw (22.0bp,22.0bp) node {0};\n            \\end{scope}\n              % Node: 3\n            \\begin{scope}\n              \\definecolor{strokecol}{rgb}{0.0,0.0,0.0};\n              \\pgfsetstrokecolor{strokecol}\n              \\draw [solid] (112.0bp,80.0bp) ellipse (18.0bp and 18.0bp);\n              \\draw [solid] (112.0bp,80.0bp) ellipse (22.0bp and 22.0bp);\n              \\draw (112.0bp,80.0bp) node {3};\n            \\end{scope}\n              % Node: 2\n            \\begin{scope}\n              \\definecolor{strokecol}{rgb}{0.0,0.0,0.0};\n              \\pgfsetstrokecolor{strokecol}\n              \\draw [solid] (22.0bp,80.0bp) ellipse (18.0bp and 18.0bp);\n              \\draw [solid] (22.0bp,80.0bp) ellipse (22.0bp and 22.0bp);\n              \\draw (22.0bp,80.0bp) node {2};\n            \\end{scope}\n            %\n            \\end{tikzpicture}\n            % End of code\n            <BLANKLINE>\n            %\n            \\end{document}\n            %\n            <BLANKLINE>\n            <BLANKLINE>\n            <BLANKLINE>\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_13_latex_(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("_latex_ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_12_latex_(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_12_latex_(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  long __pyx_v_sx;
  long __pyx_v_sy;
  PyObject *__pyx_v_vlabels = NULL;
  int __pyx_v_html;
  int __pyx_v_verb;
  PyObject *__pyx_v_LatexExpr = NULL;
  char *__pyx_v_file;
  PyObject *__pyx_v_tmp_filename = NULL;
  PyObject *__pyx_v_file_name = NULL;
  PyObject *__pyx_v_dot2tex = NULL;
  char **__pyx_v_ll;
  char **__pyx_v_vl;
  int __pyx_v_i;
  PyObject *__pyx_v_strV = NULL;
  PyObject *__pyx_v_strA = NULL;
  PyObject *__pyx_v_dotfile = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  char *__pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  int __pyx_t_11;
  Py_ssize_t __pyx_t_12;
  int __pyx_t_13;
  int __pyx_t_14;
  int __pyx_t_15;
  PyObject *__pyx_t_16 = NULL;
  __Pyx_RefNannySetupContext("_latex_", 0);

  /* "automata/cautomata.pyx":1614
 * 
 *         """
 *         sx = 800             # <<<<<<<<<<<<<<
 *         sy = 600
 *         vlabels = None
 */
  __pyx_v_sx = 0x320;

  /* "automata/cautomata.pyx":1615
 *         """
 *         sx = 800
 *         sy = 600             # <<<<<<<<<<<<<<
 *         vlabels = None
 *         html = False
 */
  __pyx_v_sy = 0x258;

  /* "automata/cautomata.pyx":1616
 *         sx = 800
 *         sy = 600
 *         vlabels = None             # <<<<<<<<<<<<<<
 *         html = False
 *         verb = False
 */
  __Pyx_INCREF(Py_None);
  __pyx_v_vlabels = Py_None;

  /* "automata/cautomata.pyx":1617
 *         sy = 600
 *         vlabels = None
 *         html = False             # <<<<<<<<<<<<<<
 *         verb = False
 *         from sage.misc.latex import LatexExpr
 */
  __pyx_v_html = 0;

  /* "automata/cautomata.pyx":1618
 *         vlabels = None
 *         html = False
 *         verb = False             # <<<<<<<<<<<<<<
 *         from sage.misc.latex import LatexExpr
 *         cdef char *file
 */
  __pyx_v_verb = 0;

  /* "automata/cautomata.pyx":1619
 *         html = False
 *         verb = False
 *         from sage.misc.latex import LatexExpr             # <<<<<<<<<<<<<<
 *         cdef char *file
 *         from sage.misc.temporary_file import tmp_filename
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1619, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_LatexExpr);
  __Pyx_GIVEREF(__pyx_n_s_LatexExpr);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_LatexExpr);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_sage_misc_latex, __pyx_t_1, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1619, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_LatexExpr); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1619, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_LatexExpr = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":1621
 *         from sage.misc.latex import LatexExpr
 *         cdef char *file
 *         from sage.misc.temporary_file import tmp_filename             # <<<<<<<<<<<<<<
 *         file_name = tmp_filename()+".dot"
 *         file = file_name
 */
  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1621, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_INCREF(__pyx_n_s_tmp_filename);
  __Pyx_GIVEREF(__pyx_n_s_tmp_filename);
  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_tmp_filename);
  __pyx_t_1 = __Pyx_Import(__pyx_n_s_sage_misc_temporary_file, __pyx_t_2, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1621, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_1, __pyx_n_s_tmp_filename); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1621, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_INCREF(__pyx_t_2);
  __pyx_v_tmp_filename = __pyx_t_2;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":1622
 *         cdef char *file
 *         from sage.misc.temporary_file import tmp_filename
 *         file_name = tmp_filename()+".dot"             # <<<<<<<<<<<<<<
 *         file = file_name
 *         try:
 */
  __Pyx_INCREF(__pyx_v_tmp_filename);
  __pyx_t_2 = __pyx_v_tmp_filename; __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1622, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = PyNumber_Add(__pyx_t_1, __pyx_kp_s_dot); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1622, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_file_name = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":1623
 *         from sage.misc.temporary_file import tmp_filename
 *         file_name = tmp_filename()+".dot"
 *         file = file_name             # <<<<<<<<<<<<<<
 *         try:
 *             from dot2tex import dot2tex
 */
  __pyx_t_4 = __Pyx_PyObject_AsWritableString(__pyx_v_file_name); if (unlikely((!__pyx_t_4) && PyErr_Occurred())) __PYX_ERR(0, 1623, __pyx_L1_error)
  __pyx_v_file = __pyx_t_4;

  /* "automata/cautomata.pyx":1624
 *         file_name = tmp_filename()+".dot"
 *         file = file_name
 *         try:             # <<<<<<<<<<<<<<
 *             from dot2tex import dot2tex
 *         except ImportError:
 */
  {
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ExceptionSave(&__pyx_t_5, &__pyx_t_6, &__pyx_t_7);
    __Pyx_XGOTREF(__pyx_t_5);
    __Pyx_XGOTREF(__pyx_t_6);
    __Pyx_XGOTREF(__pyx_t_7);
    /*try:*/ {

      /* "automata/cautomata.pyx":1625
 *         file = file_name
 *         try:
 *             from dot2tex import dot2tex             # <<<<<<<<<<<<<<
 *         except ImportError:
 *             print("dot2tex must be installed in order to have the LaTeX representation of the DeterministicAutomaton.")
 */
      __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1625, __pyx_L3_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_INCREF(__pyx_n_s_dot2tex);
      __Pyx_GIVEREF(__pyx_n_s_dot2tex);
      PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_dot2tex);
      __pyx_t_1 = __Pyx_Import(__pyx_n_s_dot2tex, __pyx_t_2, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1625, __pyx_L3_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_1, __pyx_n_s_dot2tex); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1625, __pyx_L3_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_2);
      __pyx_v_dot2tex = __pyx_t_2;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":1624
 *         file_name = tmp_filename()+".dot"
 *         file = file_name
 *         try:             # <<<<<<<<<<<<<<
 *             from dot2tex import dot2tex
 *         except ImportError:
 */
    }
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    goto __pyx_L8_try_end;
    __pyx_L3_error:;
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":1626
 *         try:
 *             from dot2tex import dot2tex
 *         except ImportError:             # <<<<<<<<<<<<<<
 *             print("dot2tex must be installed in order to have the LaTeX representation of the DeterministicAutomaton.")
 *             print("You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.")
 */
    __pyx_t_8 = __Pyx_PyErr_ExceptionMatches(__pyx_builtin_ImportError);
    if (__pyx_t_8) {
      __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton._latex_", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_2, &__pyx_t_3) < 0) __PYX_ERR(0, 1626, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_GOTREF(__pyx_t_3);

      /* "automata/cautomata.pyx":1627
 *             from dot2tex import dot2tex
 *         except ImportError:
 *             print("dot2tex must be installed in order to have the LaTeX representation of the DeterministicAutomaton.")             # <<<<<<<<<<<<<<
 *             print("You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.")
 *             return None
 */
      __pyx_t_9 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__40, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1627, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;

      /* "automata/cautomata.pyx":1628
 *         except ImportError:
 *             print("dot2tex must be installed in order to have the LaTeX representation of the DeterministicAutomaton.")
 *             print("You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.")             # <<<<<<<<<<<<<<
 *             return None
 *         cdef char** ll # labels of edges
 */
      __pyx_t_9 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__41, NULL); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1628, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;

      /* "automata/cautomata.pyx":1629
 *             print("dot2tex must be installed in order to have the LaTeX representation of the DeterministicAutomaton.")
 *             print("You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.")
 *             return None             # <<<<<<<<<<<<<<
 *         cdef char** ll # labels of edges
 *         cdef char** vl # labels of vertices
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_r = Py_None; __Pyx_INCREF(Py_None);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      goto __pyx_L6_except_return;
    }
    goto __pyx_L5_except_error;
    __pyx_L5_except_error:;

    /* "automata/cautomata.pyx":1624
 *         file_name = tmp_filename()+".dot"
 *         file = file_name
 *         try:             # <<<<<<<<<<<<<<
 *             from dot2tex import dot2tex
 *         except ImportError:
 */
    __Pyx_XGIVEREF(__pyx_t_5);
    __Pyx_XGIVEREF(__pyx_t_6);
    __Pyx_XGIVEREF(__pyx_t_7);
    __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
    goto __pyx_L1_error;
    __pyx_L6_except_return:;
    __Pyx_XGIVEREF(__pyx_t_5);
    __Pyx_XGIVEREF(__pyx_t_6);
    __Pyx_XGIVEREF(__pyx_t_7);
    __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
    goto __pyx_L0;
    __pyx_L8_try_end:;
  }

  /* "automata/cautomata.pyx":1633
 *         cdef char** vl # labels of vertices
 *         cdef int i
 *         ll = <char **>malloc(sizeof(char*) * self.a.na)             # <<<<<<<<<<<<<<
 *         if ll is NULL:
 *             raise MemoryError("Failed to allocate memory for ll in "
 */
  __pyx_v_ll = ((char **)malloc(((sizeof(char *)) * __pyx_v_self->a->na)));

  /* "automata/cautomata.pyx":1634
 *         cdef int i
 *         ll = <char **>malloc(sizeof(char*) * self.a.na)
 *         if ll is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for ll in "
 *                               "_latex_")
 */
  __pyx_t_10 = ((__pyx_v_ll == NULL) != 0);
  if (unlikely(__pyx_t_10)) {

    /* "automata/cautomata.pyx":1635
 *         ll = <char **>malloc(sizeof(char*) * self.a.na)
 *         if ll is NULL:
 *             raise MemoryError("Failed to allocate memory for ll in "             # <<<<<<<<<<<<<<
 *                               "_latex_")
 *         if vlabels is None:
 */
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__21, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1635, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 1635, __pyx_L1_error)

    /* "automata/cautomata.pyx":1634
 *         cdef int i
 *         ll = <char **>malloc(sizeof(char*) * self.a.na)
 *         if ll is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for ll in "
 *                               "_latex_")
 */
  }

  /* "automata/cautomata.pyx":1637
 *             raise MemoryError("Failed to allocate memory for ll in "
 *                               "_latex_")
 *         if vlabels is None:             # <<<<<<<<<<<<<<
 *             vl = NULL
 *         else:
 */
  __pyx_t_10 = (__pyx_v_vlabels == Py_None);
  __pyx_t_11 = (__pyx_t_10 != 0);
  if (__pyx_t_11) {

    /* "automata/cautomata.pyx":1638
 *                               "_latex_")
 *         if vlabels is None:
 *             vl = NULL             # <<<<<<<<<<<<<<
 *         else:
 *             if verb:
 */
    __pyx_v_vl = NULL;

    /* "automata/cautomata.pyx":1637
 *             raise MemoryError("Failed to allocate memory for ll in "
 *                               "_latex_")
 *         if vlabels is None:             # <<<<<<<<<<<<<<
 *             vl = NULL
 *         else:
 */
    goto __pyx_L12;
  }

  /* "automata/cautomata.pyx":1640
 *             vl = NULL
 *         else:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("alloc %s..."%self.a.n)
 *             vl = <char **>malloc(sizeof(char*) * self.a.n)
 */
  /*else*/ {
    __pyx_t_11 = (__pyx_v_verb != 0);
    if (__pyx_t_11) {

      /* "automata/cautomata.pyx":1641
 *         else:
 *             if verb:
 *                 print("alloc %s..."%self.a.n)             # <<<<<<<<<<<<<<
 *             vl = <char **>malloc(sizeof(char*) * self.a.n)
 *             if vl is NULL:
 */
      __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1641, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_2 = __Pyx_PyString_Format(__pyx_kp_s_alloc_s, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1641, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1641, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":1640
 *             vl = NULL
 *         else:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("alloc %s..."%self.a.n)
 *             vl = <char **>malloc(sizeof(char*) * self.a.n)
 */
    }

    /* "automata/cautomata.pyx":1642
 *             if verb:
 *                 print("alloc %s..."%self.a.n)
 *             vl = <char **>malloc(sizeof(char*) * self.a.n)             # <<<<<<<<<<<<<<
 *             if vl is NULL:
 *                 raise MemoryError("Failed to allocate memory for vl in "
 */
    __pyx_v_vl = ((char **)malloc(((sizeof(char *)) * __pyx_v_self->a->n)));

    /* "automata/cautomata.pyx":1643
 *                 print("alloc %s..."%self.a.n)
 *             vl = <char **>malloc(sizeof(char*) * self.a.n)
 *             if vl is NULL:             # <<<<<<<<<<<<<<
 *                 raise MemoryError("Failed to allocate memory for vl in "
 *                                   "_latex_")
 */
    __pyx_t_11 = ((__pyx_v_vl == NULL) != 0);
    if (unlikely(__pyx_t_11)) {

      /* "automata/cautomata.pyx":1644
 *             vl = <char **>malloc(sizeof(char*) * self.a.n)
 *             if vl is NULL:
 *                 raise MemoryError("Failed to allocate memory for vl in "             # <<<<<<<<<<<<<<
 *                                   "_latex_")
 *             strV = []
 */
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__42, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1644, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_Raise(__pyx_t_3, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __PYX_ERR(0, 1644, __pyx_L1_error)

      /* "automata/cautomata.pyx":1643
 *                 print("alloc %s..."%self.a.n)
 *             vl = <char **>malloc(sizeof(char*) * self.a.n)
 *             if vl is NULL:             # <<<<<<<<<<<<<<
 *                 raise MemoryError("Failed to allocate memory for vl in "
 *                                   "_latex_")
 */
    }

    /* "automata/cautomata.pyx":1646
 *                 raise MemoryError("Failed to allocate memory for vl in "
 *                                   "_latex_")
 *             strV = []             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("len %s %s" % (self.a.n, len(vlabels)))
 */
    __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1646, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_v_strV = ((PyObject*)__pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":1647
 *                                   "_latex_")
 *             strV = []
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("len %s %s" % (self.a.n, len(vlabels)))
 *             for i in range(self.a.n):
 */
    __pyx_t_11 = (__pyx_v_verb != 0);
    if (__pyx_t_11) {

      /* "automata/cautomata.pyx":1648
 *             strV = []
 *             if verb:
 *                 print("len %s %s" % (self.a.n, len(vlabels)))             # <<<<<<<<<<<<<<
 *             for i in range(self.a.n):
 *                 if html:
 */
      __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1648, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_12 = PyObject_Length(__pyx_v_vlabels); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 1648, __pyx_L1_error)
      __pyx_t_2 = PyInt_FromSsize_t(__pyx_t_12); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1648, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1648, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_GIVEREF(__pyx_t_3);
      PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_3);
      __Pyx_GIVEREF(__pyx_t_2);
      PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_t_2);
      __pyx_t_3 = 0;
      __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_PyString_Format(__pyx_kp_s_len_s_s, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1648, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1648, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":1647
 *                                   "_latex_")
 *             strV = []
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("len %s %s" % (self.a.n, len(vlabels)))
 *             for i in range(self.a.n):
 */
    }

    /* "automata/cautomata.pyx":1649
 *             if verb:
 *                 print("len %s %s" % (self.a.n, len(vlabels)))
 *             for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *                 if html:
 *                     strV.append("<" + vlabels[i] + ">")
 */
    __pyx_t_8 = __pyx_v_self->a->n;
    __pyx_t_13 = __pyx_t_8;
    for (__pyx_t_14 = 0; __pyx_t_14 < __pyx_t_13; __pyx_t_14+=1) {
      __pyx_v_i = __pyx_t_14;

      /* "automata/cautomata.pyx":1650
 *                 print("len %s %s" % (self.a.n, len(vlabels)))
 *             for i in range(self.a.n):
 *                 if html:             # <<<<<<<<<<<<<<
 *                     strV.append("<" + vlabels[i] + ">")
 *                 else:
 */
      __pyx_t_11 = (__pyx_v_html != 0);
      if (__pyx_t_11) {

        /* "automata/cautomata.pyx":1651
 *             for i in range(self.a.n):
 *                 if html:
 *                     strV.append("<" + vlabels[i] + ">")             # <<<<<<<<<<<<<<
 *                 else:
 *                     strV.append("\"" + vlabels[i] + "\"")
 */
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_vlabels, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1651, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_2 = PyNumber_Add(__pyx_kp_s__43, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1651, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_1 = PyNumber_Add(__pyx_t_2, __pyx_kp_s__44); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1651, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __pyx_t_15 = __Pyx_PyList_Append(__pyx_v_strV, __pyx_t_1); if (unlikely(__pyx_t_15 == ((int)-1))) __PYX_ERR(0, 1651, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

        /* "automata/cautomata.pyx":1650
 *                 print("len %s %s" % (self.a.n, len(vlabels)))
 *             for i in range(self.a.n):
 *                 if html:             # <<<<<<<<<<<<<<
 *                     strV.append("<" + vlabels[i] + ">")
 *                 else:
 */
        goto __pyx_L18;
      }

      /* "automata/cautomata.pyx":1653
 *                     strV.append("<" + vlabels[i] + ">")
 *                 else:
 *                     strV.append("\"" + vlabels[i] + "\"")             # <<<<<<<<<<<<<<
 *                 if verb:
 *                     print(strV[i])
 */
      /*else*/ {
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_vlabels, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1653, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_2 = PyNumber_Add(__pyx_kp_s__45, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1653, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_1 = PyNumber_Add(__pyx_t_2, __pyx_kp_s__45); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1653, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
        __pyx_t_15 = __Pyx_PyList_Append(__pyx_v_strV, __pyx_t_1); if (unlikely(__pyx_t_15 == ((int)-1))) __PYX_ERR(0, 1653, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      }
      __pyx_L18:;

      /* "automata/cautomata.pyx":1654
 *                 else:
 *                     strV.append("\"" + vlabels[i] + "\"")
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print(strV[i])
 *                 vl[i] = strV[i]
 */
      __pyx_t_11 = (__pyx_v_verb != 0);
      if (__pyx_t_11) {

        /* "automata/cautomata.pyx":1655
 *                     strV.append("\"" + vlabels[i] + "\"")
 *                 if verb:
 *                     print(strV[i])             # <<<<<<<<<<<<<<
 *                 vl[i] = strV[i]
 *                 if verb:
 */
        __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_strV, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1655, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1655, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

        /* "automata/cautomata.pyx":1654
 *                 else:
 *                     strV.append("\"" + vlabels[i] + "\"")
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print(strV[i])
 *                 vl[i] = strV[i]
 */
      }

      /* "automata/cautomata.pyx":1656
 *                 if verb:
 *                     print(strV[i])
 *                 vl[i] = strV[i]             # <<<<<<<<<<<<<<
 *                 if verb:
 *                     print("i=%s : %s" % (i, vl[i]))
 */
      __pyx_t_2 = __Pyx_GetItemInt_List(__pyx_v_strV, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1656, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = __Pyx_PyObject_AsWritableString(__pyx_t_2); if (unlikely((!__pyx_t_4) && PyErr_Occurred())) __PYX_ERR(0, 1656, __pyx_L1_error)
      (__pyx_v_vl[__pyx_v_i]) = __pyx_t_4;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

      /* "automata/cautomata.pyx":1657
 *                     print(strV[i])
 *                 vl[i] = strV[i]
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("i=%s : %s" % (i, vl[i]))
 *         strA = []
 */
      __pyx_t_11 = (__pyx_v_verb != 0);
      if (__pyx_t_11) {

        /* "automata/cautomata.pyx":1658
 *                 vl[i] = strV[i]
 *                 if verb:
 *                     print("i=%s : %s" % (i, vl[i]))             # <<<<<<<<<<<<<<
 *         strA = []
 *         for i in range(self.a.na):
 */
        __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1658, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        __pyx_t_1 = __Pyx_PyBytes_FromString((__pyx_v_vl[__pyx_v_i])); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1658, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1658, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_2);
        PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2);
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_1);
        __pyx_t_2 = 0;
        __pyx_t_1 = 0;
        __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_i_s_s, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1658, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1658, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

        /* "automata/cautomata.pyx":1657
 *                     print(strV[i])
 *                 vl[i] = strV[i]
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("i=%s : %s" % (i, vl[i]))
 *         strA = []
 */
      }
    }
  }
  __pyx_L12:;

  /* "automata/cautomata.pyx":1659
 *                 if verb:
 *                     print("i=%s : %s" % (i, vl[i]))
 *         strA = []             # <<<<<<<<<<<<<<
 *         for i in range(self.a.na):
 *             strA.append(str(self.A[i]))
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1659, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_strA = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":1660
 *                     print("i=%s : %s" % (i, vl[i]))
 *         strA = []
 *         for i in range(self.a.na):             # <<<<<<<<<<<<<<
 *             strA.append(str(self.A[i]))
 *             ll[i] = strA[i]
 */
  __pyx_t_8 = __pyx_v_self->a->na;
  __pyx_t_13 = __pyx_t_8;
  for (__pyx_t_14 = 0; __pyx_t_14 < __pyx_t_13; __pyx_t_14+=1) {
    __pyx_v_i = __pyx_t_14;

    /* "automata/cautomata.pyx":1661
 *         strA = []
 *         for i in range(self.a.na):
 *             strA.append(str(self.A[i]))             # <<<<<<<<<<<<<<
 *             ll[i] = strA[i]
 *         if verb:
 */
    if (unlikely(__pyx_v_self->A == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 1661, __pyx_L1_error)
    }
    __pyx_t_3 = __Pyx_GetItemInt_List(__pyx_v_self->A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1661, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(((PyObject *)(&PyString_Type)), __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1661, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_15 = __Pyx_PyList_Append(__pyx_v_strA, __pyx_t_1); if (unlikely(__pyx_t_15 == ((int)-1))) __PYX_ERR(0, 1661, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":1662
 *         for i in range(self.a.na):
 *             strA.append(str(self.A[i]))
 *             ll[i] = strA[i]             # <<<<<<<<<<<<<<
 *         if verb:
 *             for i in range(self.a.n):
 */
    __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_strA, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1662, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_4 = __Pyx_PyObject_AsWritableString(__pyx_t_1); if (unlikely((!__pyx_t_4) && PyErr_Occurred())) __PYX_ERR(0, 1662, __pyx_L1_error)
    (__pyx_v_ll[__pyx_v_i]) = __pyx_t_4;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  }

  /* "automata/cautomata.pyx":1663
 *             strA.append(str(self.A[i]))
 *             ll[i] = strA[i]
 *         if verb:             # <<<<<<<<<<<<<<
 *             for i in range(self.a.n):
 *                 print("i=%s : %s" % (i, vl[i]))
 */
  __pyx_t_11 = (__pyx_v_verb != 0);
  if (__pyx_t_11) {

    /* "automata/cautomata.pyx":1664
 *             ll[i] = strA[i]
 *         if verb:
 *             for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *                 print("i=%s : %s" % (i, vl[i]))
 *         if verb:
 */
    __pyx_t_8 = __pyx_v_self->a->n;
    __pyx_t_13 = __pyx_t_8;
    for (__pyx_t_14 = 0; __pyx_t_14 < __pyx_t_13; __pyx_t_14+=1) {
      __pyx_v_i = __pyx_t_14;

      /* "automata/cautomata.pyx":1665
 *         if verb:
 *             for i in range(self.a.n):
 *                 print("i=%s : %s" % (i, vl[i]))             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("plot...")
 */
      __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1665, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_3 = __Pyx_PyBytes_FromString((__pyx_v_vl[__pyx_v_i])); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1665, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1665, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_GIVEREF(__pyx_t_1);
      PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_t_1);
      __Pyx_GIVEREF(__pyx_t_3);
      PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_t_3);
      __pyx_t_1 = 0;
      __pyx_t_3 = 0;
      __pyx_t_3 = __Pyx_PyString_Format(__pyx_kp_s_i_s_s, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1665, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1665, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    }

    /* "automata/cautomata.pyx":1663
 *             strA.append(str(self.A[i]))
 *             ll[i] = strA[i]
 *         if verb:             # <<<<<<<<<<<<<<
 *             for i in range(self.a.n):
 *                 print("i=%s : %s" % (i, vl[i]))
 */
  }

  /* "automata/cautomata.pyx":1666
 *             for i in range(self.a.n):
 *                 print("i=%s : %s" % (i, vl[i]))
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("plot...")
 *         sig_on()
 */
  __pyx_t_11 = (__pyx_v_verb != 0);
  if (__pyx_t_11) {

    /* "automata/cautomata.pyx":1667
 *                 print("i=%s : %s" % (i, vl[i]))
 *         if verb:
 *             print("plot...")             # <<<<<<<<<<<<<<
 *         sig_on()
 *         plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, False)
 */
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__46, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1667, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":1666
 *             for i in range(self.a.n):
 *                 print("i=%s : %s" % (i, vl[i]))
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("plot...")
 *         sig_on()
 */
  }

  /* "automata/cautomata.pyx":1668
 *         if verb:
 *             print("plot...")
 *         sig_on()             # <<<<<<<<<<<<<<
 *         plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, False)
 *         sig_off()
 */
  __pyx_t_8 = sig_on(); if (unlikely(__pyx_t_8 == ((int)0))) __PYX_ERR(0, 1668, __pyx_L1_error)

  /* "automata/cautomata.pyx":1669
 *             print("plot...")
 *         sig_on()
 *         plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, False)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if verb:
 */
  plotDot(__pyx_v_file, (__pyx_v_self->a[0]), __pyx_v_ll, ((char const *)"Automaton"), __pyx_v_sx, __pyx_v_sy, __pyx_v_vl, __pyx_v_html, __pyx_v_verb, 0);

  /* "automata/cautomata.pyx":1670
 *         sig_on()
 *         plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, False)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("free...plot")
 */
  sig_off();

  /* "automata/cautomata.pyx":1671
 *         plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, False)
 *         sig_off()
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("free...plot")
 *         sig_on()
 */
  __pyx_t_11 = (__pyx_v_verb != 0);
  if (__pyx_t_11) {

    /* "automata/cautomata.pyx":1672
 *         sig_off()
 *         if verb:
 *             print("free...plot")             # <<<<<<<<<<<<<<
 *         sig_on()
 *         free(ll)
 */
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__47, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1672, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":1671
 *         plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, False)
 *         sig_off()
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("free...plot")
 *         sig_on()
 */
  }

  /* "automata/cautomata.pyx":1673
 *         if verb:
 *             print("free...plot")
 *         sig_on()             # <<<<<<<<<<<<<<
 *         free(ll)
 *         if vlabels is not None:
 */
  __pyx_t_8 = sig_on(); if (unlikely(__pyx_t_8 == ((int)0))) __PYX_ERR(0, 1673, __pyx_L1_error)

  /* "automata/cautomata.pyx":1674
 *             print("free...plot")
 *         sig_on()
 *         free(ll)             # <<<<<<<<<<<<<<
 *         if vlabels is not None:
 *             free(vl)
 */
  free(__pyx_v_ll);

  /* "automata/cautomata.pyx":1675
 *         sig_on()
 *         free(ll)
 *         if vlabels is not None:             # <<<<<<<<<<<<<<
 *             free(vl)
 *         sig_off()
 */
  __pyx_t_11 = (__pyx_v_vlabels != Py_None);
  __pyx_t_10 = (__pyx_t_11 != 0);
  if (__pyx_t_10) {

    /* "automata/cautomata.pyx":1676
 *         free(ll)
 *         if vlabels is not None:
 *             free(vl)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         dotfile = open(file_name)
 */
    free(__pyx_v_vl);

    /* "automata/cautomata.pyx":1675
 *         sig_on()
 *         free(ll)
 *         if vlabels is not None:             # <<<<<<<<<<<<<<
 *             free(vl)
 *         sig_off()
 */
  }

  /* "automata/cautomata.pyx":1677
 *         if vlabels is not None:
 *             free(vl)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         dotfile = open(file_name)
 *         return LatexExpr(dot2tex(dotfile.read()))
 */
  sig_off();

  /* "automata/cautomata.pyx":1678
 *             free(vl)
 *         sig_off()
 *         dotfile = open(file_name)             # <<<<<<<<<<<<<<
 *         return LatexExpr(dot2tex(dotfile.read()))
 * 
 */
  __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_open, __pyx_v_file_name); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1678, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_dotfile = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":1679
 *         sig_off()
 *         dotfile = open(file_name)
 *         return LatexExpr(dot2tex(dotfile.read()))             # <<<<<<<<<<<<<<
 * 
 *     def __hash__(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_dotfile, __pyx_n_s_read); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_9);
  __pyx_t_16 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_9))) {
    __pyx_t_16 = PyMethod_GET_SELF(__pyx_t_9);
    if (likely(__pyx_t_16)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
      __Pyx_INCREF(__pyx_t_16);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_9, function);
    }
  }
  __pyx_t_1 = (__pyx_t_16) ? __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_16) : __Pyx_PyObject_CallNoArg(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_16); __pyx_t_16 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
  __Pyx_INCREF(__pyx_v_dot2tex);
  __pyx_t_9 = __pyx_v_dot2tex; __pyx_t_16 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
    __pyx_t_16 = PyMethod_GET_SELF(__pyx_t_9);
    if (likely(__pyx_t_16)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
      __Pyx_INCREF(__pyx_t_16);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_9, function);
    }
  }
  __pyx_t_3 = (__pyx_t_16) ? __Pyx_PyObject_Call2Args(__pyx_t_9, __pyx_t_16, __pyx_t_1) : __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_1);
  __Pyx_XDECREF(__pyx_t_16); __pyx_t_16 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 1679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
  __Pyx_INCREF(__pyx_v_LatexExpr);
  __pyx_t_9 = __pyx_v_LatexExpr; __pyx_t_1 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_9))) {
    __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_9);
    if (likely(__pyx_t_1)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
      __Pyx_INCREF(__pyx_t_1);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_9, function);
    }
  }
  __pyx_t_2 = (__pyx_t_1) ? __Pyx_PyObject_Call2Args(__pyx_t_9, __pyx_t_1, __pyx_t_3) : __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_3);
  __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1679, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":1524
 *         return str
 * 
 *     def _latex_(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Return a latex representation of the automaton.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_16);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton._latex_", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_vlabels);
  __Pyx_XDECREF(__pyx_v_LatexExpr);
  __Pyx_XDECREF(__pyx_v_tmp_filename);
  __Pyx_XDECREF(__pyx_v_file_name);
  __Pyx_XDECREF(__pyx_v_dot2tex);
  __Pyx_XDECREF(__pyx_v_strV);
  __Pyx_XDECREF(__pyx_v_strA);
  __Pyx_XDECREF(__pyx_v_dotfile);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1681
 *         return LatexExpr(dot2tex(dotfile.read()))
 * 
 *     def __hash__(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Hash the automaton
 */

/* Python wrapper */
static Py_hash_t __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_15__hash__(PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_14__hash__[] = "\n        Hash the automaton\n\n        OUTPUT:\n\n        Return a ``int``, hash code of the :class:`DeterministicAutomaton`\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: hash(a)\n            761033288\n\n            sage: a = dag.AnyLetter([0,1])\n            sage: hash(a)\n            1519588028\n        ";
#if CYTHON_COMPILING_IN_CPYTHON
struct wrapperbase __pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_14__hash__;
#endif
static Py_hash_t __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_15__hash__(PyObject *__pyx_v_self) {
  Py_hash_t __pyx_r;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__hash__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_14__hash__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static Py_hash_t __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_14__hash__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  int __pyx_v_h;
  Py_hash_t __pyx_r;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_hash_t __pyx_t_2;
  int __pyx_t_3;
  __Pyx_RefNannySetupContext("__hash__", 0);

  /* "automata/cautomata.pyx":1700
 *         """
 *         cdef int h
 *         h = hash(tuple(self.A))             # <<<<<<<<<<<<<<
 *         sig_on()
 *         h += hashAutomaton(self.a[0])
 */
  if (unlikely(__pyx_v_self->A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 1700, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_AsTuple(__pyx_v_self->A); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1700, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyObject_Hash(__pyx_t_1); if (unlikely(__pyx_t_2 == ((Py_hash_t)-1))) __PYX_ERR(0, 1700, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_h = __pyx_t_2;

  /* "automata/cautomata.pyx":1701
 *         cdef int h
 *         h = hash(tuple(self.A))
 *         sig_on()             # <<<<<<<<<<<<<<
 *         h += hashAutomaton(self.a[0])
 *         sig_off()
 */
  __pyx_t_3 = sig_on(); if (unlikely(__pyx_t_3 == ((int)0))) __PYX_ERR(0, 1701, __pyx_L1_error)

  /* "automata/cautomata.pyx":1702
 *         h = hash(tuple(self.A))
 *         sig_on()
 *         h += hashAutomaton(self.a[0])             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return h
 */
  __pyx_v_h = (__pyx_v_h + hashAutomaton((__pyx_v_self->a[0])));

  /* "automata/cautomata.pyx":1703
 *         sig_on()
 *         h += hashAutomaton(self.a[0])
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return h
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":1704
 *         h += hashAutomaton(self.a[0])
 *         sig_off()
 *         return h             # <<<<<<<<<<<<<<
 * 
 *     def string(self):
 */
  __pyx_r = __pyx_v_h;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":1681
 *         return LatexExpr(dot2tex(dotfile.read()))
 * 
 *     def __hash__(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Hash the automaton
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.__hash__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = -1;
  __pyx_L0:;
  if (unlikely(__pyx_r == -1) && !PyErr_Occurred()) __pyx_r = -2;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1706
 *         return h
 * 
 *     def string(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Return a ``string`` that can be evaluated to recover the DeterministicAutomaton.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_17string(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_16string[] = "\n        Return a ``string`` that can be evaluated to recover the DeterministicAutomaton.\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_17string(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("string (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_16string(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_16string(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_v_S = NULL;
  PyObject *__pyx_v_r = NULL;
  PyObject *__pyx_v_c = NULL;
  int __pyx_v_i;
  int __pyx_v_j;
  int __pyx_v_k;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  __Pyx_RefNannySetupContext("string", 0);

  /* "automata/cautomata.pyx":1710
 *         Return a ``string`` that can be evaluated to recover the DeterministicAutomaton.
 *         """
 *         S = self.states             # <<<<<<<<<<<<<<
 *         r = "DeterministicAutomaton([%s, [" % S
 *         c = 0
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_states); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1710, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_S = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":1711
 *         """
 *         S = self.states
 *         r = "DeterministicAutomaton([%s, [" % S             # <<<<<<<<<<<<<<
 *         c = 0
 *         for i in range(self.a.n):
 */
  __pyx_t_1 = __Pyx_PyString_FormatSafe(__pyx_kp_s_DeterministicAutomaton_s, __pyx_v_S); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1711, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":1712
 *         S = self.states
 *         r = "DeterministicAutomaton([%s, [" % S
 *         c = 0             # <<<<<<<<<<<<<<
 *         for i in range(self.a.n):
 *             for j in range(self.a.na):
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_v_c = __pyx_int_0;

  /* "automata/cautomata.pyx":1713
 *         r = "DeterministicAutomaton([%s, [" % S
 *         c = 0
 *         for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *             for j in range(self.a.na):
 *                 k = self.a.e[i].f[j]
 */
  __pyx_t_2 = __pyx_v_self->a->n;
  __pyx_t_3 = __pyx_t_2;
  for (__pyx_t_4 = 0; __pyx_t_4 < __pyx_t_3; __pyx_t_4+=1) {
    __pyx_v_i = __pyx_t_4;

    /* "automata/cautomata.pyx":1714
 *         c = 0
 *         for i in range(self.a.n):
 *             for j in range(self.a.na):             # <<<<<<<<<<<<<<
 *                 k = self.a.e[i].f[j]
 *                 if k != -1:
 */
    __pyx_t_5 = __pyx_v_self->a->na;
    __pyx_t_6 = __pyx_t_5;
    for (__pyx_t_7 = 0; __pyx_t_7 < __pyx_t_6; __pyx_t_7+=1) {
      __pyx_v_j = __pyx_t_7;

      /* "automata/cautomata.pyx":1715
 *         for i in range(self.a.n):
 *             for j in range(self.a.na):
 *                 k = self.a.e[i].f[j]             # <<<<<<<<<<<<<<
 *                 if k != -1:
 *                     if c != 0:
 */
      __pyx_v_k = ((__pyx_v_self->a->e[__pyx_v_i]).f[__pyx_v_j]);

      /* "automata/cautomata.pyx":1716
 *             for j in range(self.a.na):
 *                 k = self.a.e[i].f[j]
 *                 if k != -1:             # <<<<<<<<<<<<<<
 *                     if c != 0:
 *                         r += ", "
 */
      __pyx_t_8 = ((__pyx_v_k != -1L) != 0);
      if (__pyx_t_8) {

        /* "automata/cautomata.pyx":1717
 *                 k = self.a.e[i].f[j]
 *                 if k != -1:
 *                     if c != 0:             # <<<<<<<<<<<<<<
 *                         r += ", "
 *                     r += "(%r, %r, %r)" % (S[i], S[k], self.A[j])
 */
        __pyx_t_1 = __Pyx_PyInt_NeObjC(__pyx_v_c, __pyx_int_0, 0, 0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1717, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_8 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_8 < 0)) __PYX_ERR(0, 1717, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        if (__pyx_t_8) {

          /* "automata/cautomata.pyx":1718
 *                 if k != -1:
 *                     if c != 0:
 *                         r += ", "             # <<<<<<<<<<<<<<
 *                     r += "(%r, %r, %r)" % (S[i], S[k], self.A[j])
 *                     c += 1
 */
          __pyx_t_1 = PyNumber_InPlaceAdd(__pyx_v_r, __pyx_kp_s__48); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1718, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_DECREF_SET(__pyx_v_r, ((PyObject*)__pyx_t_1));
          __pyx_t_1 = 0;

          /* "automata/cautomata.pyx":1717
 *                 k = self.a.e[i].f[j]
 *                 if k != -1:
 *                     if c != 0:             # <<<<<<<<<<<<<<
 *                         r += ", "
 *                     r += "(%r, %r, %r)" % (S[i], S[k], self.A[j])
 */
        }

        /* "automata/cautomata.pyx":1719
 *                     if c != 0:
 *                         r += ", "
 *                     r += "(%r, %r, %r)" % (S[i], S[k], self.A[j])             # <<<<<<<<<<<<<<
 *                     c += 1
 *         r += "]], A=%s, i=%r, final_states=%s)" % (self.A, S[self.a.i], self.final_states)
 */
        __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_S, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1719, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_9 = __Pyx_GetItemInt(__pyx_v_S, __pyx_v_k, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1719, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_9);
        if (unlikely(__pyx_v_self->A == Py_None)) {
          PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
          __PYX_ERR(0, 1719, __pyx_L1_error)
        }
        __pyx_t_10 = __Pyx_GetItemInt_List(__pyx_v_self->A, __pyx_v_j, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1719, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_11 = PyTuple_New(3); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1719, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_GIVEREF(__pyx_t_1);
        PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_1);
        __Pyx_GIVEREF(__pyx_t_9);
        PyTuple_SET_ITEM(__pyx_t_11, 1, __pyx_t_9);
        __Pyx_GIVEREF(__pyx_t_10);
        PyTuple_SET_ITEM(__pyx_t_11, 2, __pyx_t_10);
        __pyx_t_1 = 0;
        __pyx_t_9 = 0;
        __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_PyString_Format(__pyx_kp_s_r_r_r, __pyx_t_11); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1719, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_11 = PyNumber_InPlaceAdd(__pyx_v_r, __pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1719, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_DECREF_SET(__pyx_v_r, ((PyObject*)__pyx_t_11));
        __pyx_t_11 = 0;

        /* "automata/cautomata.pyx":1720
 *                         r += ", "
 *                     r += "(%r, %r, %r)" % (S[i], S[k], self.A[j])
 *                     c += 1             # <<<<<<<<<<<<<<
 *         r += "]], A=%s, i=%r, final_states=%s)" % (self.A, S[self.a.i], self.final_states)
 *         return r
 */
        __pyx_t_11 = __Pyx_PyInt_AddObjC(__pyx_v_c, __pyx_int_1, 1, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1720, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF_SET(__pyx_v_c, __pyx_t_11);
        __pyx_t_11 = 0;

        /* "automata/cautomata.pyx":1716
 *             for j in range(self.a.na):
 *                 k = self.a.e[i].f[j]
 *                 if k != -1:             # <<<<<<<<<<<<<<
 *                     if c != 0:
 *                         r += ", "
 */
      }
    }
  }

  /* "automata/cautomata.pyx":1721
 *                     r += "(%r, %r, %r)" % (S[i], S[k], self.A[j])
 *                     c += 1
 *         r += "]], A=%s, i=%r, final_states=%s)" % (self.A, S[self.a.i], self.final_states)             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  __pyx_t_11 = __Pyx_GetItemInt(__pyx_v_S, __pyx_v_self->a->i, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 1721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_11);
  __pyx_t_10 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_final_states_2); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __pyx_t_9 = PyTuple_New(3); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_9);
  __Pyx_INCREF(__pyx_v_self->A);
  __Pyx_GIVEREF(__pyx_v_self->A);
  PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_v_self->A);
  __Pyx_GIVEREF(__pyx_t_11);
  PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_t_11);
  __Pyx_GIVEREF(__pyx_t_10);
  PyTuple_SET_ITEM(__pyx_t_9, 2, __pyx_t_10);
  __pyx_t_11 = 0;
  __pyx_t_10 = 0;
  __pyx_t_10 = __Pyx_PyString_Format(__pyx_kp_s_A_s_i_r_final_states_s, __pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 1721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
  __pyx_t_9 = PyNumber_InPlaceAdd(__pyx_v_r, __pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 1721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_9);
  __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
  __Pyx_DECREF_SET(__pyx_v_r, ((PyObject*)__pyx_t_9));
  __pyx_t_9 = 0;

  /* "automata/cautomata.pyx":1722
 *                     c += 1
 *         r += "]], A=%s, i=%r, final_states=%s)" % (self.A, S[self.a.i], self.final_states)
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def is_equal_to(self, DeterministicAutomaton other, verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_r);
  __pyx_r = __pyx_v_r;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":1706
 *         return h
 * 
 *     def string(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Return a ``string`` that can be evaluated to recover the DeterministicAutomaton.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.string", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_S);
  __Pyx_XDECREF(__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_c);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1724
 *         return r
 * 
 *     def is_equal_to(self, DeterministicAutomaton other, verb=False):             # <<<<<<<<<<<<<<
 *         r"""
 *         Test if the two DetAutomata are equal.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_19is_equal_to(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_18is_equal_to[] = "\n        Test if the two DetAutomata are equal.\n        To be equal, the automata must have the same alphabet\n        and exactly the same transitions\n        (a permutation of the indices is not allowed).\n\n        INPUT:\n\n        - ``other`` -- other :class:`DeterministicAutomaton` to compare\n\n        OUTPUT:\n\n        Return the result of test (``True`` or ``False``)\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: b = DeterministicAutomaton([(0, 1, 'a'),(2,3,'b')], i=0)\n            sage: a.is_equal_to(b)\n            False\n            sage: a.set_initial_state(0)\n            sage: a.is_equal_to(b)\n            True\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_19is_equal_to(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_other = 0;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_equal_to (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_other,&__pyx_n_s_verb,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_other)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_equal_to") < 0)) __PYX_ERR(0, 1724, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_other = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)values[0]);
    __pyx_v_verb = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("is_equal_to", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1724, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.is_equal_to", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_other), __pyx_ptype_8automata_9cautomata_DeterministicAutomaton, 1, "other", 0))) __PYX_ERR(0, 1724, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_18is_equal_to(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_other, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_18is_equal_to(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_other, PyObject *__pyx_v_verb) {
  bool __pyx_v_r;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  bool __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("is_equal_to", 0);

  /* "automata/cautomata.pyx":1749
 *             True
 *         """
 *         if self.A != other.A:             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("The alphabets are differents.")
 */
  __pyx_t_1 = PyObject_RichCompare(__pyx_v_self->A, __pyx_v_other->A, Py_NE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1749, __pyx_L1_error)
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1749, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":1750
 *         """
 *         if self.A != other.A:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("The alphabets are differents.")
 *             return False
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1750, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":1751
 *         if self.A != other.A:
 *             if verb:
 *                 print("The alphabets are differents.")             # <<<<<<<<<<<<<<
 *             return False
 *         sig_on()
 */
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__49, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1751, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":1750
 *         """
 *         if self.A != other.A:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("The alphabets are differents.")
 *             return False
 */
    }

    /* "automata/cautomata.pyx":1752
 *             if verb:
 *                 print("The alphabets are differents.")
 *             return False             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r = equalsAutomaton(self.a[0], other.a[0], verb)
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":1749
 *             True
 *         """
 *         if self.A != other.A:             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("The alphabets are differents.")
 */
  }

  /* "automata/cautomata.pyx":1753
 *                 print("The alphabets are differents.")
 *             return False
 *         sig_on()             # <<<<<<<<<<<<<<
 *         r = equalsAutomaton(self.a[0], other.a[0], verb)
 *         sig_off()
 */
  __pyx_t_3 = sig_on(); if (unlikely(__pyx_t_3 == ((int)0))) __PYX_ERR(0, 1753, __pyx_L1_error)

  /* "automata/cautomata.pyx":1754
 *             return False
 *         sig_on()
 *         r = equalsAutomaton(self.a[0], other.a[0], verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return c_bool(r)
 */
  __pyx_t_4 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_4 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 1754, __pyx_L1_error)
  __pyx_v_r = equalsAutomaton((__pyx_v_self->a[0]), (__pyx_v_other->a[0]), __pyx_t_4);

  /* "automata/cautomata.pyx":1755
 *         sig_on()
 *         r = equalsAutomaton(self.a[0], other.a[0], verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return c_bool(r)
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":1756
 *         r = equalsAutomaton(self.a[0], other.a[0], verb)
 *         sig_off()
 *         return c_bool(r)             # <<<<<<<<<<<<<<
 * 
 *     def __richcmp__(self, DeterministicAutomaton other, int op):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_bool(__pyx_v_r); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1756, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1756, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_5;
  __pyx_t_5 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":1724
 *         return r
 * 
 *     def is_equal_to(self, DeterministicAutomaton other, verb=False):             # <<<<<<<<<<<<<<
 *         r"""
 *         Test if the two DetAutomata are equal.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.is_equal_to", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1758
 *         return c_bool(r)
 * 
 *     def __richcmp__(self, DeterministicAutomaton other, int op):             # <<<<<<<<<<<<<<
 *         r"""
 *         Compare function, Overwrite built-in function
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_21__richcmp__(PyObject *__pyx_v_self, PyObject *__pyx_v_other, int __pyx_v_op); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_21__richcmp__(PyObject *__pyx_v_self, PyObject *__pyx_v_other, int __pyx_v_op) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__richcmp__ (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_other), __pyx_ptype_8automata_9cautomata_DeterministicAutomaton, 1, "other", 0))) __PYX_ERR(0, 1758, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_20__richcmp__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_other), ((int)__pyx_v_op));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_20__richcmp__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_other, int __pyx_v_op) {
  PyObject *__pyx_v_op_EQ = NULL;
  PyObject *__pyx_v_op_NE = NULL;
  int __pyx_v_r;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  bool __pyx_t_6;
  int __pyx_t_7;
  __Pyx_RefNannySetupContext("__richcmp__", 0);

  /* "automata/cautomata.pyx":1787
 * 
 *         """
 *         from sage.structure.richcmp import (op_EQ, op_NE)             # <<<<<<<<<<<<<<
 *         # (rich_to_bool,
 *         # op_EQ, op_NE, op_LT, op_LE, op_GT, op_GE)
 */
  __pyx_t_1 = PyList_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1787, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_op_EQ);
  __Pyx_GIVEREF(__pyx_n_s_op_EQ);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_op_EQ);
  __Pyx_INCREF(__pyx_n_s_op_NE);
  __Pyx_GIVEREF(__pyx_n_s_op_NE);
  PyList_SET_ITEM(__pyx_t_1, 1, __pyx_n_s_op_NE);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_sage_structure_richcmp, __pyx_t_1, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1787, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_op_EQ); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1787, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_op_EQ = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_op_NE); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1787, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_t_1);
  __pyx_v_op_NE = __pyx_t_1;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":1791
 *         # op_EQ, op_NE, op_LT, op_LE, op_GT, op_GE)
 *         cdef int r
 *         if op != op_EQ and op != op_NE:             # <<<<<<<<<<<<<<
 *             raise NotImplementedError("Comparaison <, >, <= or >= not implemented for DetAutomata.")
 *         sig_on()
 */
  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_op); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1791, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_op_EQ, Py_NE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1791, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 1791, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_4) {
  } else {
    __pyx_t_3 = __pyx_t_4;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_op); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1791, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyObject_RichCompare(__pyx_t_1, __pyx_v_op_NE, Py_NE); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1791, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 1791, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_3 = __pyx_t_4;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_3)) {

    /* "automata/cautomata.pyx":1792
 *         cdef int r
 *         if op != op_EQ and op != op_NE:
 *             raise NotImplementedError("Comparaison <, >, <= or >= not implemented for DetAutomata.")             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r = equalsAutomaton(self.a[0], other.a[0], False) and self.A == other.A
 */
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_NotImplementedError, __pyx_tuple__50, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1792, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_ERR(0, 1792, __pyx_L1_error)

    /* "automata/cautomata.pyx":1791
 *         # op_EQ, op_NE, op_LT, op_LE, op_GT, op_GE)
 *         cdef int r
 *         if op != op_EQ and op != op_NE:             # <<<<<<<<<<<<<<
 *             raise NotImplementedError("Comparaison <, >, <= or >= not implemented for DetAutomata.")
 *         sig_on()
 */
  }

  /* "automata/cautomata.pyx":1793
 *         if op != op_EQ and op != op_NE:
 *             raise NotImplementedError("Comparaison <, >, <= or >= not implemented for DetAutomata.")
 *         sig_on()             # <<<<<<<<<<<<<<
 *         r = equalsAutomaton(self.a[0], other.a[0], False) and self.A == other.A
 *         sig_off()
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 1793, __pyx_L1_error)

  /* "automata/cautomata.pyx":1794
 *             raise NotImplementedError("Comparaison <, >, <= or >= not implemented for DetAutomata.")
 *         sig_on()
 *         r = equalsAutomaton(self.a[0], other.a[0], False) and self.A == other.A             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if op == op_EQ:
 */
  __pyx_t_6 = equalsAutomaton((__pyx_v_self->a[0]), (__pyx_v_other->a[0]), 0);
  if (__pyx_t_6) {
  } else {
    __pyx_t_5 = __pyx_t_6;
    goto __pyx_L6_bool_binop_done;
  }
  __pyx_t_2 = PyObject_RichCompare(__pyx_v_self->A, __pyx_v_other->A, Py_EQ); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1794, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyInt_As_int(__pyx_t_2); if (unlikely((__pyx_t_7 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1794, __pyx_L1_error)
  __pyx_t_5 = __pyx_t_7;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_L6_bool_binop_done:;
  __pyx_v_r = __pyx_t_5;

  /* "automata/cautomata.pyx":1795
 *         sig_on()
 *         r = equalsAutomaton(self.a[0], other.a[0], False) and self.A == other.A
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if op == op_EQ:
 *             return c_bool(r)
 */
  sig_off();

  /* "automata/cautomata.pyx":1796
 *         r = equalsAutomaton(self.a[0], other.a[0], False) and self.A == other.A
 *         sig_off()
 *         if op == op_EQ:             # <<<<<<<<<<<<<<
 *             return c_bool(r)
 *         else:
 */
  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_op); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1796, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_1 = PyObject_RichCompare(__pyx_t_2, __pyx_v_op_EQ, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1796, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1796, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":1797
 *         sig_off()
 *         if op == op_EQ:
 *             return c_bool(r)             # <<<<<<<<<<<<<<
 *         else:
 *             return not c_bool(r)
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_r); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1797, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1797, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_r = __pyx_t_2;
    __pyx_t_2 = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":1796
 *         r = equalsAutomaton(self.a[0], other.a[0], False) and self.A == other.A
 *         sig_off()
 *         if op == op_EQ:             # <<<<<<<<<<<<<<
 *             return c_bool(r)
 *         else:
 */
  }

  /* "automata/cautomata.pyx":1799
 *             return c_bool(r)
 *         else:
 *             return not c_bool(r)             # <<<<<<<<<<<<<<
 * 
 *     # give a Sage Automon from the DeterministicAutomaton
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_r); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1799, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1799, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1799, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyBool_FromLong((!__pyx_t_3)); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 1799, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":1758
 *         return c_bool(r)
 * 
 *     def __richcmp__(self, DeterministicAutomaton other, int op):             # <<<<<<<<<<<<<<
 *         r"""
 *         Compare function, Overwrite built-in function
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.__richcmp__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_op_EQ);
  __Pyx_XDECREF(__pyx_v_op_NE);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1802
 * 
 *     # give a Sage Automon from the DeterministicAutomaton
 *     def get_automaton(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Give a Sage Automon from the DeterministicAutomaton
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_23get_automaton(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_22get_automaton[] = "\n        Give a Sage Automon from the DeterministicAutomaton\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.get_automaton()\n            Automaton with 4 states\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_23get_automaton(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_automaton (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_22get_automaton(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_22get_automaton(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannySetupContext("get_automaton", 0);

  /* "automata/cautomata.pyx":1812
 *             Automaton with 4 states
 *         """
 *         return AutomatonToSageAutomaton(self.a[0], self.A)             # <<<<<<<<<<<<<<
 * 
 *     # give a Graph from the DeterministicAutomaton
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_1);
  __pyx_t_2 = __pyx_f_8automata_9cautomata_AutomatonToSageAutomaton((__pyx_v_self->a[0]), __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1812, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":1802
 * 
 *     # give a Sage Automon from the DeterministicAutomaton
 *     def get_automaton(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Give a Sage Automon from the DeterministicAutomaton
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.get_automaton", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1815
 * 
 *     # give a Graph from the DeterministicAutomaton
 *     def get_digraph(self, keep_transitions_labels=True):             # <<<<<<<<<<<<<<
 *         r"""
 *         Give a DiGraph from the DeterministicAutomaton
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_25get_digraph(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_24get_digraph[] = "\n        Give a DiGraph from the DeterministicAutomaton\n\n        INPUT:\n\n        - ``keep_transition_labels`` -- bool (default: ``True``)\n            If false, return the graph without labels on edges.\n\n        EXAMPLES::\n\n            sage: a = dag.AnyLetter(['a', 'b'])\n            sage: g = a.get_digraph()\n            sage: g\n            Looped multi-digraph on 2 vertices\n            sage: g.edges()\n            [(0, 1, 'a'), (0, 1, 'b')]\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.get_digraph()\n            Looped multi-digraph on 4 vertices\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_25get_digraph(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_keep_transitions_labels = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_digraph (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_keep_transitions_labels,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)Py_True);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_keep_transitions_labels);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_digraph") < 0)) __PYX_ERR(0, 1815, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_keep_transitions_labels = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("get_digraph", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1815, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.get_digraph", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_24get_digraph(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_keep_transitions_labels);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_24get_digraph(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_keep_transitions_labels) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  struct __pyx_opt_args_8automata_9cautomata_AutomatonToDiGraph __pyx_t_3;
  __Pyx_RefNannySetupContext("get_digraph", 0);

  /* "automata/cautomata.pyx":1840
 * 
 *         """
 *         return AutomatonToDiGraph(self.a[0], self.A, keep_edges_labels=keep_transitions_labels)             # <<<<<<<<<<<<<<
 * 
 *     def plot(self, int sx=10, int sy=8, vlabels=None,
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_1);
  __pyx_t_3.__pyx_n = 1;
  __pyx_t_3.keep_edges_labels = __pyx_v_keep_transitions_labels;
  __pyx_t_2 = __pyx_f_8automata_9cautomata_AutomatonToDiGraph((__pyx_v_self->a[0]), __pyx_t_1, &__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1840, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":1815
 * 
 *     # give a Graph from the DeterministicAutomaton
 *     def get_digraph(self, keep_transitions_labels=True):             # <<<<<<<<<<<<<<
 *         r"""
 *         Give a DiGraph from the DeterministicAutomaton
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.get_digraph", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1842
 *         return AutomatonToDiGraph(self.a[0], self.A, keep_edges_labels=keep_transitions_labels)
 * 
 *     def plot(self, int sx=10, int sy=8, vlabels=None,             # <<<<<<<<<<<<<<
 *              html=False, file=None, bool draw=True, verb=False):
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_27plot(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_26plot[] = "\n        Plot the :class:`DeterministicAutomaton`. Draw using the dot command, if installed on the platform.\n\n        It is strongly recommanded to install the dot command of the Graphviz package in your system in order to get a nice picture.\n        Otherwise it will draw using the function plot of :class:`Automaton` of Sage.\n\n        INPUT:\n\n        - ``sx`` - int (default: 10) - width of the picture\n        - ``sy`` - int (default: 8) - height of the picture\n        - ``vlabels`` - (default: None) - labels of the vertices\n        - ``html`` - (default: ``False``) - tell if dot should draw vertices in html mode\n        - ``file`` - (default: ``None``) - the address of the .dot file of the drawing (only if dot is installed)\n        - ``draw`` - (default: ``True``) - if False, only generate the .dot file (only if dot is installed)\n        - ``verb`` - (default: ``False``) - active or not the verbose mode\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.plot()  # random\n            <PIL.PngImagePlugin.PngImageFile image mode=RGBA size=189x147 at 0x7F6711E442D0>\n\n            sage: a = dag.Word(['a', 0, None])\n            sage: a.plot()  # random\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.plot()  # random\n            <PIL.PngImagePlugin.PngImageFile image mode=RGBA size=189x147 at 0x7FD4B6D94390>\n\n        .. PLOT::\n           :width: 50%\n\n            a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sphinx_plot(a)\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_27plot(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_sx;
  int __pyx_v_sy;
  PyObject *__pyx_v_vlabels = 0;
  PyObject *__pyx_v_html = 0;
  PyObject *__pyx_v_file = 0;
  bool __pyx_v_draw;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("plot (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_sx,&__pyx_n_s_sy,&__pyx_n_s_vlabels,&__pyx_n_s_html,&__pyx_n_s_file,&__pyx_n_s_draw,&__pyx_n_s_verb,0};
    PyObject* values[7] = {0,0,0,0,0,0,0};
    values[2] = ((PyObject *)Py_None);

    /* "automata/cautomata.pyx":1843
 * 
 *     def plot(self, int sx=10, int sy=8, vlabels=None,
 *              html=False, file=None, bool draw=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Plot the :class:`DeterministicAutomaton`. Draw using the dot command, if installed on the platform.
 */
    values[3] = ((PyObject *)Py_False);
    values[4] = ((PyObject *)Py_None);
    values[6] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  7: values[6] = PyTuple_GET_ITEM(__pyx_args, 6);
        CYTHON_FALLTHROUGH;
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_sx);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_sy);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_vlabels);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_html);
          if (value) { values[3] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_file);
          if (value) { values[4] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  5:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_draw);
          if (value) { values[5] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  6:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[6] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "plot") < 0)) __PYX_ERR(0, 1842, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  7: values[6] = PyTuple_GET_ITEM(__pyx_args, 6);
        CYTHON_FALLTHROUGH;
        case  6: values[5] = PyTuple_GET_ITEM(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = PyTuple_GET_ITEM(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_sx = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_sx == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1842, __pyx_L3_error)
    } else {
      __pyx_v_sx = ((int)10);
    }
    if (values[1]) {
      __pyx_v_sy = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_sy == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 1842, __pyx_L3_error)
    } else {
      __pyx_v_sy = ((int)8);
    }
    __pyx_v_vlabels = values[2];
    __pyx_v_html = values[3];
    __pyx_v_file = values[4];
    if (values[5]) {
      __pyx_v_draw = __Pyx_PyInt_As_bool(values[5]); if (unlikely((__pyx_v_draw == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 1843, __pyx_L3_error)
    } else {
      __pyx_v_draw = ((bool)1);
    }
    __pyx_v_verb = values[6];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("plot", 0, 0, 7, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 1842, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.plot", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_26plot(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_sx, __pyx_v_sy, __pyx_v_vlabels, __pyx_v_html, __pyx_v_file, __pyx_v_draw, __pyx_v_verb);

  /* "automata/cautomata.pyx":1842
 *         return AutomatonToDiGraph(self.a[0], self.A, keep_edges_labels=keep_transitions_labels)
 * 
 *     def plot(self, int sx=10, int sy=8, vlabels=None,             # <<<<<<<<<<<<<<
 *              html=False, file=None, bool draw=True, verb=False):
 *         """
 */

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_26plot(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_sx, int __pyx_v_sy, PyObject *__pyx_v_vlabels, PyObject *__pyx_v_html, PyObject *__pyx_v_file, bool __pyx_v_draw, PyObject *__pyx_v_verb) {
  char **__pyx_v_ll;
  char **__pyx_v_vl;
  int __pyx_v_i;
  bool __pyx_v_de;
  PyObject *__pyx_v_tmp_filename = NULL;
  PyObject *__pyx_v_strV = NULL;
  PyObject *__pyx_v_htm = NULL;
  PyObject *__pyx_v_strA = NULL;
  PyObject *__pyx_v_Image = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  char *__pyx_t_11;
  Py_ssize_t __pyx_t_12;
  char const *__pyx_t_13;
  bool __pyx_t_14;
  bool __pyx_t_15;
  __Pyx_RefNannySetupContext("plot", 0);
  __Pyx_INCREF(__pyx_v_file);

  /* "automata/cautomata.pyx":1882
 *         """
 *         cdef char *cfile
 *         cdef char** ll = NULL # labels of edges             # <<<<<<<<<<<<<<
 *         cdef char** vl = NULL # labels of vertices
 *         cdef int i
 */
  __pyx_v_ll = NULL;

  /* "automata/cautomata.pyx":1883
 *         cdef char *cfile
 *         cdef char** ll = NULL # labels of edges
 *         cdef char** vl = NULL # labels of vertices             # <<<<<<<<<<<<<<
 *         cdef int i
 *         sig_on()
 */
  __pyx_v_vl = NULL;

  /* "automata/cautomata.pyx":1885
 *         cdef char** vl = NULL # labels of vertices
 *         cdef int i
 *         sig_on()             # <<<<<<<<<<<<<<
 *         de = DotExists()
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 1885, __pyx_L1_error)

  /* "automata/cautomata.pyx":1886
 *         cdef int i
 *         sig_on()
 *         de = DotExists()             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if de:
 */
  __pyx_v_de = DotExists();

  /* "automata/cautomata.pyx":1887
 *         sig_on()
 *         de = DotExists()
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if de:
 *             if file is None:
 */
  sig_off();

  /* "automata/cautomata.pyx":1888
 *         de = DotExists()
 *         sig_off()
 *         if de:             # <<<<<<<<<<<<<<
 *             if file is None:
 *                 from sage.misc.temporary_file import tmp_filename
 */
  __pyx_t_2 = (__pyx_v_de != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":1889
 *         sig_off()
 *         if de:
 *             if file is None:             # <<<<<<<<<<<<<<
 *                 from sage.misc.temporary_file import tmp_filename
 *                 file = tmp_filename()+".dot"
 */
    __pyx_t_2 = (__pyx_v_file == Py_None);
    __pyx_t_3 = (__pyx_t_2 != 0);
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":1890
 *         if de:
 *             if file is None:
 *                 from sage.misc.temporary_file import tmp_filename             # <<<<<<<<<<<<<<
 *                 file = tmp_filename()+".dot"
 *             if verb:
 */
      __pyx_t_4 = PyList_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1890, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_n_s_tmp_filename);
      __Pyx_GIVEREF(__pyx_n_s_tmp_filename);
      PyList_SET_ITEM(__pyx_t_4, 0, __pyx_n_s_tmp_filename);
      __pyx_t_5 = __Pyx_Import(__pyx_n_s_sage_misc_temporary_file, __pyx_t_4, -1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1890, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_ImportFrom(__pyx_t_5, __pyx_n_s_tmp_filename); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1890, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_t_4);
      __pyx_v_tmp_filename = __pyx_t_4;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

      /* "automata/cautomata.pyx":1891
 *             if file is None:
 *                 from sage.misc.temporary_file import tmp_filename
 *                 file = tmp_filename()+".dot"             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("alloc %s..."%self.a.na)
 */
      __Pyx_INCREF(__pyx_v_tmp_filename);
      __pyx_t_4 = __pyx_v_tmp_filename; __pyx_t_6 = NULL;
      if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      __pyx_t_5 = (__pyx_t_6) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_6) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1891, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyNumber_Add(__pyx_t_5, __pyx_kp_s_dot); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1891, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF_SET(__pyx_v_file, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":1889
 *         sig_off()
 *         if de:
 *             if file is None:             # <<<<<<<<<<<<<<
 *                 from sage.misc.temporary_file import tmp_filename
 *                 file = tmp_filename()+".dot"
 */
    }

    /* "automata/cautomata.pyx":1892
 *                 from sage.misc.temporary_file import tmp_filename
 *                 file = tmp_filename()+".dot"
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("alloc %s..."%self.a.na)
 *             sig_on()
 */
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1892, __pyx_L1_error)
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":1893
 *                 file = tmp_filename()+".dot"
 *             if verb:
 *                 print("alloc %s..."%self.a.na)             # <<<<<<<<<<<<<<
 *             sig_on()
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 */
      __pyx_t_4 = __Pyx_PyInt_From_int(__pyx_v_self->a->na); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1893, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_5 = __Pyx_PyString_Format(__pyx_kp_s_alloc_s, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1893, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1893, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":1892
 *                 from sage.misc.temporary_file import tmp_filename
 *                 file = tmp_filename()+".dot"
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("alloc %s..."%self.a.na)
 *             sig_on()
 */
    }

    /* "automata/cautomata.pyx":1894
 *             if verb:
 *                 print("alloc %s..."%self.a.na)
 *             sig_on()             # <<<<<<<<<<<<<<
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 *             sig_off()
 */
    __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 1894, __pyx_L1_error)

    /* "automata/cautomata.pyx":1895
 *                 print("alloc %s..."%self.a.na)
 *             sig_on()
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)             # <<<<<<<<<<<<<<
 *             sig_off()
 *             if ll is NULL:
 */
    __pyx_v_ll = ((char **)malloc(((sizeof(char *)) * __pyx_v_self->a->na)));

    /* "automata/cautomata.pyx":1896
 *             sig_on()
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 *             sig_off()             # <<<<<<<<<<<<<<
 *             if ll is NULL:
 *                 raise MemoryError("Failed to allocate memory for ll in "
 */
    sig_off();

    /* "automata/cautomata.pyx":1897
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 *             sig_off()
 *             if ll is NULL:             # <<<<<<<<<<<<<<
 *                 raise MemoryError("Failed to allocate memory for ll in "
 *                                   "plot")
 */
    __pyx_t_3 = ((__pyx_v_ll == NULL) != 0);
    if (unlikely(__pyx_t_3)) {

      /* "automata/cautomata.pyx":1898
 *             sig_off()
 *             if ll is NULL:
 *                 raise MemoryError("Failed to allocate memory for ll in "             # <<<<<<<<<<<<<<
 *                                   "plot")
 *             if vlabels is None:
 */
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__26, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1898, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_Raise(__pyx_t_4, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __PYX_ERR(0, 1898, __pyx_L1_error)

      /* "automata/cautomata.pyx":1897
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 *             sig_off()
 *             if ll is NULL:             # <<<<<<<<<<<<<<
 *                 raise MemoryError("Failed to allocate memory for ll in "
 *                                   "plot")
 */
    }

    /* "automata/cautomata.pyx":1900
 *                 raise MemoryError("Failed to allocate memory for ll in "
 *                                   "plot")
 *             if vlabels is None:             # <<<<<<<<<<<<<<
 *                 if self.S is not None:
 *                     if verb:
 */
    __pyx_t_3 = (__pyx_v_vlabels == Py_None);
    __pyx_t_2 = (__pyx_t_3 != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":1901
 *                                   "plot")
 *             if vlabels is None:
 *                 if self.S is not None:             # <<<<<<<<<<<<<<
 *                     if verb:
 *                         print("alloc %s..." % self.a.n)
 */
      __pyx_t_2 = (__pyx_v_self->S != ((PyObject*)Py_None));
      __pyx_t_3 = (__pyx_t_2 != 0);
      if (__pyx_t_3) {

        /* "automata/cautomata.pyx":1902
 *             if vlabels is None:
 *                 if self.S is not None:
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("alloc %s..." % self.a.n)
 *                     sig_on()
 */
        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1902, __pyx_L1_error)
        if (__pyx_t_3) {

          /* "automata/cautomata.pyx":1903
 *                 if self.S is not None:
 *                     if verb:
 *                         print("alloc %s..." % self.a.n)             # <<<<<<<<<<<<<<
 *                     sig_on()
 *                     vl = <char **>malloc(sizeof(char*) * self.a.n)
 */
          __pyx_t_4 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1903, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          __pyx_t_5 = __Pyx_PyString_Format(__pyx_kp_s_alloc_s, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1903, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
          __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1903, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

          /* "automata/cautomata.pyx":1902
 *             if vlabels is None:
 *                 if self.S is not None:
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("alloc %s..." % self.a.n)
 *                     sig_on()
 */
        }

        /* "automata/cautomata.pyx":1904
 *                     if verb:
 *                         print("alloc %s..." % self.a.n)
 *                     sig_on()             # <<<<<<<<<<<<<<
 *                     vl = <char **>malloc(sizeof(char*) * self.a.n)
 *                     sig_off()
 */
        __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 1904, __pyx_L1_error)

        /* "automata/cautomata.pyx":1905
 *                         print("alloc %s..." % self.a.n)
 *                     sig_on()
 *                     vl = <char **>malloc(sizeof(char*) * self.a.n)             # <<<<<<<<<<<<<<
 *                     sig_off()
 *                     if vl is NULL:
 */
        __pyx_v_vl = ((char **)malloc(((sizeof(char *)) * __pyx_v_self->a->n)));

        /* "automata/cautomata.pyx":1906
 *                     sig_on()
 *                     vl = <char **>malloc(sizeof(char*) * self.a.n)
 *                     sig_off()             # <<<<<<<<<<<<<<
 *                     if vl is NULL:
 *                         raise MemoryError("Failed to allocate memory for vl in "
 */
        sig_off();

        /* "automata/cautomata.pyx":1907
 *                     vl = <char **>malloc(sizeof(char*) * self.a.n)
 *                     sig_off()
 *                     if vl is NULL:             # <<<<<<<<<<<<<<
 *                         raise MemoryError("Failed to allocate memory for vl in "
 *                                           "plot")
 */
        __pyx_t_3 = ((__pyx_v_vl == NULL) != 0);
        if (unlikely(__pyx_t_3)) {

          /* "automata/cautomata.pyx":1908
 *                     sig_off()
 *                     if vl is NULL:
 *                         raise MemoryError("Failed to allocate memory for vl in "             # <<<<<<<<<<<<<<
 *                                           "plot")
 *                     strV = []
 */
          __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__51, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1908, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_Raise(__pyx_t_4, 0, 0, 0);
          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
          __PYX_ERR(0, 1908, __pyx_L1_error)

          /* "automata/cautomata.pyx":1907
 *                     vl = <char **>malloc(sizeof(char*) * self.a.n)
 *                     sig_off()
 *                     if vl is NULL:             # <<<<<<<<<<<<<<
 *                         raise MemoryError("Failed to allocate memory for vl in "
 *                                           "plot")
 */
        }

        /* "automata/cautomata.pyx":1910
 *                         raise MemoryError("Failed to allocate memory for vl in "
 *                                           "plot")
 *                     strV = []             # <<<<<<<<<<<<<<
 *                     if html:
 *                         from sage.misc.html import html as htm
 */
        __pyx_t_4 = PyList_New(0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1910, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_v_strV = ((PyObject*)__pyx_t_4);
        __pyx_t_4 = 0;

        /* "automata/cautomata.pyx":1911
 *                                           "plot")
 *                     strV = []
 *                     if html:             # <<<<<<<<<<<<<<
 *                         from sage.misc.html import html as htm
 *                     for i in range(self.a.n):
 */
        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_html); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1911, __pyx_L1_error)
        if (__pyx_t_3) {

          /* "automata/cautomata.pyx":1912
 *                     strV = []
 *                     if html:
 *                         from sage.misc.html import html as htm             # <<<<<<<<<<<<<<
 *                     for i in range(self.a.n):
 *                         if html:
 */
          __pyx_t_4 = PyList_New(1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1912, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_INCREF(__pyx_n_s_html);
          __Pyx_GIVEREF(__pyx_n_s_html);
          PyList_SET_ITEM(__pyx_t_4, 0, __pyx_n_s_html);
          __pyx_t_5 = __Pyx_Import(__pyx_n_s_sage_misc_html, __pyx_t_4, -1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1912, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
          __pyx_t_4 = __Pyx_ImportFrom(__pyx_t_5, __pyx_n_s_html); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1912, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_4);
          __pyx_v_htm = __pyx_t_4;
          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

          /* "automata/cautomata.pyx":1911
 *                                           "plot")
 *                     strV = []
 *                     if html:             # <<<<<<<<<<<<<<
 *                         from sage.misc.html import html as htm
 *                     for i in range(self.a.n):
 */
        }

        /* "automata/cautomata.pyx":1913
 *                     if html:
 *                         from sage.misc.html import html as htm
 *                     for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *                         if html:
 *                             strV.append("<" + str(htm(self.S[i])) + ">")
 */
        __pyx_t_1 = __pyx_v_self->a->n;
        __pyx_t_7 = __pyx_t_1;
        for (__pyx_t_8 = 0; __pyx_t_8 < __pyx_t_7; __pyx_t_8+=1) {
          __pyx_v_i = __pyx_t_8;

          /* "automata/cautomata.pyx":1914
 *                         from sage.misc.html import html as htm
 *                     for i in range(self.a.n):
 *                         if html:             # <<<<<<<<<<<<<<
 *                             strV.append("<" + str(htm(self.S[i])) + ">")
 *                         else:
 */
          __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_html); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1914, __pyx_L1_error)
          if (__pyx_t_3) {

            /* "automata/cautomata.pyx":1915
 *                     for i in range(self.a.n):
 *                         if html:
 *                             strV.append("<" + str(htm(self.S[i])) + ">")             # <<<<<<<<<<<<<<
 *                         else:
 *                             strV.append("\"" + str(self.S[i]) + "\"")
 */
            if (unlikely(!__pyx_v_htm)) { __Pyx_RaiseUnboundLocalError("htm"); __PYX_ERR(0, 1915, __pyx_L1_error) }
            if (unlikely(__pyx_v_self->S == Py_None)) {
              PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
              __PYX_ERR(0, 1915, __pyx_L1_error)
            }
            __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_self->S, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1915, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_4);
            __Pyx_INCREF(__pyx_v_htm);
            __pyx_t_6 = __pyx_v_htm; __pyx_t_9 = NULL;
            if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_6))) {
              __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_6);
              if (likely(__pyx_t_9)) {
                PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
                __Pyx_INCREF(__pyx_t_9);
                __Pyx_INCREF(function);
                __Pyx_DECREF_SET(__pyx_t_6, function);
              }
            }
            __pyx_t_5 = (__pyx_t_9) ? __Pyx_PyObject_Call2Args(__pyx_t_6, __pyx_t_9, __pyx_t_4) : __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_t_4);
            __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
            __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
            if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1915, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_5);
            __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
            __pyx_t_6 = __Pyx_PyObject_CallOneArg(((PyObject *)(&PyString_Type)), __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1915, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_6);
            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
            __pyx_t_5 = PyNumber_Add(__pyx_kp_s__43, __pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1915, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_5);
            __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
            __pyx_t_6 = PyNumber_Add(__pyx_t_5, __pyx_kp_s__44); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1915, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_6);
            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
            __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_strV, __pyx_t_6); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 1915, __pyx_L1_error)
            __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

            /* "automata/cautomata.pyx":1914
 *                         from sage.misc.html import html as htm
 *                     for i in range(self.a.n):
 *                         if html:             # <<<<<<<<<<<<<<
 *                             strV.append("<" + str(htm(self.S[i])) + ">")
 *                         else:
 */
            goto __pyx_L14;
          }

          /* "automata/cautomata.pyx":1917
 *                             strV.append("<" + str(htm(self.S[i])) + ">")
 *                         else:
 *                             strV.append("\"" + str(self.S[i]) + "\"")             # <<<<<<<<<<<<<<
 *                         if verb:
 *                             print(strV[i])
 */
          /*else*/ {
            if (unlikely(__pyx_v_self->S == Py_None)) {
              PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
              __PYX_ERR(0, 1917, __pyx_L1_error)
            }
            __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_self->S, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1917, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_6);
            __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)(&PyString_Type)), __pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1917, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_5);
            __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
            __pyx_t_6 = PyNumber_Add(__pyx_kp_s__45, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1917, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_6);
            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
            __pyx_t_5 = PyNumber_Add(__pyx_t_6, __pyx_kp_s__45); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1917, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_5);
            __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
            __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_strV, __pyx_t_5); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 1917, __pyx_L1_error)
            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
          }
          __pyx_L14:;

          /* "automata/cautomata.pyx":1918
 *                         else:
 *                             strV.append("\"" + str(self.S[i]) + "\"")
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print(strV[i])
 *                         vl[i] = strV[i]
 */
          __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1918, __pyx_L1_error)
          if (__pyx_t_3) {

            /* "automata/cautomata.pyx":1919
 *                             strV.append("\"" + str(self.S[i]) + "\"")
 *                         if verb:
 *                             print(strV[i])             # <<<<<<<<<<<<<<
 *                         vl[i] = strV[i]
 *                         if verb:
 */
            __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_v_strV, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1919, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_5);
            __pyx_t_6 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1919, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_6);
            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
            __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

            /* "automata/cautomata.pyx":1918
 *                         else:
 *                             strV.append("\"" + str(self.S[i]) + "\"")
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print(strV[i])
 *                         vl[i] = strV[i]
 */
          }

          /* "automata/cautomata.pyx":1920
 *                         if verb:
 *                             print(strV[i])
 *                         vl[i] = strV[i]             # <<<<<<<<<<<<<<
 *                         if verb:
 *                             print("i=%s : %s" % (i, vl[i]))
 */
          __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_strV, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1920, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __pyx_t_11 = __Pyx_PyObject_AsWritableString(__pyx_t_6); if (unlikely((!__pyx_t_11) && PyErr_Occurred())) __PYX_ERR(0, 1920, __pyx_L1_error)
          (__pyx_v_vl[__pyx_v_i]) = __pyx_t_11;
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

          /* "automata/cautomata.pyx":1921
 *                             print(strV[i])
 *                         vl[i] = strV[i]
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print("i=%s : %s" % (i, vl[i]))
 *                 else:
 */
          __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1921, __pyx_L1_error)
          if (__pyx_t_3) {

            /* "automata/cautomata.pyx":1922
 *                         vl[i] = strV[i]
 *                         if verb:
 *                             print("i=%s : %s" % (i, vl[i]))             # <<<<<<<<<<<<<<
 *                 else:
 *                     if verb:
 */
            __pyx_t_6 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1922, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_6);
            __pyx_t_5 = __Pyx_PyBytes_FromString((__pyx_v_vl[__pyx_v_i])); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1922, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_5);
            __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1922, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_4);
            __Pyx_GIVEREF(__pyx_t_6);
            PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_6);
            __Pyx_GIVEREF(__pyx_t_5);
            PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_5);
            __pyx_t_6 = 0;
            __pyx_t_5 = 0;
            __pyx_t_5 = __Pyx_PyString_Format(__pyx_kp_s_i_s_s, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1922, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_5);
            __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
            __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1922, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_4);
            __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
            __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

            /* "automata/cautomata.pyx":1921
 *                             print(strV[i])
 *                         vl[i] = strV[i]
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print("i=%s : %s" % (i, vl[i]))
 *                 else:
 */
          }
        }

        /* "automata/cautomata.pyx":1901
 *                                   "plot")
 *             if vlabels is None:
 *                 if self.S is not None:             # <<<<<<<<<<<<<<
 *                     if verb:
 *                         print("alloc %s..." % self.a.n)
 */
        goto __pyx_L8;
      }

      /* "automata/cautomata.pyx":1924
 *                             print("i=%s : %s" % (i, vl[i]))
 *                 else:
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("vl = NULL")
 *                     vl = NULL
 */
      /*else*/ {
        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1924, __pyx_L1_error)
        if (__pyx_t_3) {

          /* "automata/cautomata.pyx":1925
 *                 else:
 *                     if verb:
 *                         print("vl = NULL")             # <<<<<<<<<<<<<<
 *                     vl = NULL
 *             else:
 */
          __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__52, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1925, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

          /* "automata/cautomata.pyx":1924
 *                             print("i=%s : %s" % (i, vl[i]))
 *                 else:
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("vl = NULL")
 *                     vl = NULL
 */
        }

        /* "automata/cautomata.pyx":1926
 *                     if verb:
 *                         print("vl = NULL")
 *                     vl = NULL             # <<<<<<<<<<<<<<
 *             else:
 *                 if verb:
 */
        __pyx_v_vl = NULL;
      }
      __pyx_L8:;

      /* "automata/cautomata.pyx":1900
 *                 raise MemoryError("Failed to allocate memory for ll in "
 *                                   "plot")
 *             if vlabels is None:             # <<<<<<<<<<<<<<
 *                 if self.S is not None:
 *                     if verb:
 */
      goto __pyx_L7;
    }

    /* "automata/cautomata.pyx":1928
 *                     vl = NULL
 *             else:
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("alloc %s..." % self.a.n)
 *                 vl = <char **>malloc(sizeof(char*) * self.a.n)
 */
    /*else*/ {
      __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1928, __pyx_L1_error)
      if (__pyx_t_3) {

        /* "automata/cautomata.pyx":1929
 *             else:
 *                 if verb:
 *                     print("alloc %s..." % self.a.n)             # <<<<<<<<<<<<<<
 *                 vl = <char **>malloc(sizeof(char*) * self.a.n)
 *                 if vl is NULL:
 */
        __pyx_t_4 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1929, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_t_5 = __Pyx_PyString_Format(__pyx_kp_s_alloc_s, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1929, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1929, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

        /* "automata/cautomata.pyx":1928
 *                     vl = NULL
 *             else:
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("alloc %s..." % self.a.n)
 *                 vl = <char **>malloc(sizeof(char*) * self.a.n)
 */
      }

      /* "automata/cautomata.pyx":1930
 *                 if verb:
 *                     print("alloc %s..." % self.a.n)
 *                 vl = <char **>malloc(sizeof(char*) * self.a.n)             # <<<<<<<<<<<<<<
 *                 if vl is NULL:
 *                     raise MemoryError("Failed to allocate memory for vl in "
 */
      __pyx_v_vl = ((char **)malloc(((sizeof(char *)) * __pyx_v_self->a->n)));

      /* "automata/cautomata.pyx":1931
 *                     print("alloc %s..." % self.a.n)
 *                 vl = <char **>malloc(sizeof(char*) * self.a.n)
 *                 if vl is NULL:             # <<<<<<<<<<<<<<
 *                     raise MemoryError("Failed to allocate memory for vl in "
 *                                       "plot")
 */
      __pyx_t_3 = ((__pyx_v_vl == NULL) != 0);
      if (unlikely(__pyx_t_3)) {

        /* "automata/cautomata.pyx":1932
 *                 vl = <char **>malloc(sizeof(char*) * self.a.n)
 *                 if vl is NULL:
 *                     raise MemoryError("Failed to allocate memory for vl in "             # <<<<<<<<<<<<<<
 *                                       "plot")
 *                 strV = []
 */
        __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__51, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1932, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_Raise(__pyx_t_4, 0, 0, 0);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __PYX_ERR(0, 1932, __pyx_L1_error)

        /* "automata/cautomata.pyx":1931
 *                     print("alloc %s..." % self.a.n)
 *                 vl = <char **>malloc(sizeof(char*) * self.a.n)
 *                 if vl is NULL:             # <<<<<<<<<<<<<<
 *                     raise MemoryError("Failed to allocate memory for vl in "
 *                                       "plot")
 */
      }

      /* "automata/cautomata.pyx":1934
 *                     raise MemoryError("Failed to allocate memory for vl in "
 *                                       "plot")
 *                 strV = []             # <<<<<<<<<<<<<<
 *                 if verb:
 *                     print("len %s %s" % (self.a.n, len(vlabels)))
 */
      __pyx_t_4 = PyList_New(0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1934, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_v_strV = ((PyObject*)__pyx_t_4);
      __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":1935
 *                                       "plot")
 *                 strV = []
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("len %s %s" % (self.a.n, len(vlabels)))
 *                 for i in range(self.a.n):
 */
      __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1935, __pyx_L1_error)
      if (__pyx_t_3) {

        /* "automata/cautomata.pyx":1936
 *                 strV = []
 *                 if verb:
 *                     print("len %s %s" % (self.a.n, len(vlabels)))             # <<<<<<<<<<<<<<
 *                 for i in range(self.a.n):
 *                     if html:
 */
        __pyx_t_4 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1936, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_t_12 = PyObject_Length(__pyx_v_vlabels); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 1936, __pyx_L1_error)
        __pyx_t_5 = PyInt_FromSsize_t(__pyx_t_12); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1936, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __pyx_t_6 = PyTuple_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1936, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4);
        __Pyx_GIVEREF(__pyx_t_5);
        PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_t_5);
        __pyx_t_4 = 0;
        __pyx_t_5 = 0;
        __pyx_t_5 = __Pyx_PyString_Format(__pyx_kp_s_len_s_s, __pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1936, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        __pyx_t_6 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1936, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

        /* "automata/cautomata.pyx":1935
 *                                       "plot")
 *                 strV = []
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("len %s %s" % (self.a.n, len(vlabels)))
 *                 for i in range(self.a.n):
 */
      }

      /* "automata/cautomata.pyx":1937
 *                 if verb:
 *                     print("len %s %s" % (self.a.n, len(vlabels)))
 *                 for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *                     if html:
 *                         strV.append("<" + vlabels[i] + ">")
 */
      __pyx_t_1 = __pyx_v_self->a->n;
      __pyx_t_7 = __pyx_t_1;
      for (__pyx_t_8 = 0; __pyx_t_8 < __pyx_t_7; __pyx_t_8+=1) {
        __pyx_v_i = __pyx_t_8;

        /* "automata/cautomata.pyx":1938
 *                     print("len %s %s" % (self.a.n, len(vlabels)))
 *                 for i in range(self.a.n):
 *                     if html:             # <<<<<<<<<<<<<<
 *                         strV.append("<" + vlabels[i] + ">")
 *                     else:
 */
        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_html); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1938, __pyx_L1_error)
        if (__pyx_t_3) {

          /* "automata/cautomata.pyx":1939
 *                 for i in range(self.a.n):
 *                     if html:
 *                         strV.append("<" + vlabels[i] + ">")             # <<<<<<<<<<<<<<
 *                     else:
 *                         strV.append("\"" + vlabels[i] + "\"")
 */
          __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_vlabels, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1939, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __pyx_t_5 = PyNumber_Add(__pyx_kp_s__43, __pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1939, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
          __pyx_t_6 = PyNumber_Add(__pyx_t_5, __pyx_kp_s__44); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1939, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
          __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_strV, __pyx_t_6); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 1939, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

          /* "automata/cautomata.pyx":1938
 *                     print("len %s %s" % (self.a.n, len(vlabels)))
 *                 for i in range(self.a.n):
 *                     if html:             # <<<<<<<<<<<<<<
 *                         strV.append("<" + vlabels[i] + ">")
 *                     else:
 */
          goto __pyx_L23;
        }

        /* "automata/cautomata.pyx":1941
 *                         strV.append("<" + vlabels[i] + ">")
 *                     else:
 *                         strV.append("\"" + vlabels[i] + "\"")             # <<<<<<<<<<<<<<
 *                     if verb:
 *                         print(strV[i])
 */
        /*else*/ {
          __pyx_t_6 = __Pyx_GetItemInt(__pyx_v_vlabels, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1941, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __pyx_t_5 = PyNumber_Add(__pyx_kp_s__45, __pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1941, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
          __pyx_t_6 = PyNumber_Add(__pyx_t_5, __pyx_kp_s__45); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1941, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
          __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_strV, __pyx_t_6); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 1941, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
        }
        __pyx_L23:;

        /* "automata/cautomata.pyx":1942
 *                     else:
 *                         strV.append("\"" + vlabels[i] + "\"")
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print(strV[i])
 *                     vl[i] = strV[i]
 */
        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1942, __pyx_L1_error)
        if (__pyx_t_3) {

          /* "automata/cautomata.pyx":1943
 *                         strV.append("\"" + vlabels[i] + "\"")
 *                     if verb:
 *                         print(strV[i])             # <<<<<<<<<<<<<<
 *                     vl[i] = strV[i]
 *                     if verb:
 */
          __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_strV, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1943, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1943, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
          __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

          /* "automata/cautomata.pyx":1942
 *                     else:
 *                         strV.append("\"" + vlabels[i] + "\"")
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print(strV[i])
 *                     vl[i] = strV[i]
 */
        }

        /* "automata/cautomata.pyx":1944
 *                     if verb:
 *                         print(strV[i])
 *                     vl[i] = strV[i]             # <<<<<<<<<<<<<<
 *                     if verb:
 *                         print("i=%s : %s" % (i, vl[i]))
 */
        __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_v_strV, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1944, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __pyx_t_11 = __Pyx_PyObject_AsWritableString(__pyx_t_5); if (unlikely((!__pyx_t_11) && PyErr_Occurred())) __PYX_ERR(0, 1944, __pyx_L1_error)
        (__pyx_v_vl[__pyx_v_i]) = __pyx_t_11;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

        /* "automata/cautomata.pyx":1945
 *                         print(strV[i])
 *                     vl[i] = strV[i]
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("i=%s : %s" % (i, vl[i]))
 *             strA = []
 */
        __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1945, __pyx_L1_error)
        if (__pyx_t_3) {

          /* "automata/cautomata.pyx":1946
 *                     vl[i] = strV[i]
 *                     if verb:
 *                         print("i=%s : %s" % (i, vl[i]))             # <<<<<<<<<<<<<<
 *             strA = []
 *             for i in range(self.a.na):
 */
          __pyx_t_5 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1946, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          __pyx_t_6 = __Pyx_PyBytes_FromString((__pyx_v_vl[__pyx_v_i])); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1946, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1946, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_GIVEREF(__pyx_t_5);
          PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_5);
          __Pyx_GIVEREF(__pyx_t_6);
          PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_t_6);
          __pyx_t_5 = 0;
          __pyx_t_6 = 0;
          __pyx_t_6 = __Pyx_PyString_Format(__pyx_kp_s_i_s_s, __pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1946, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_6);
          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
          __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_6); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1946, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_4);
          __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
          __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

          /* "automata/cautomata.pyx":1945
 *                         print(strV[i])
 *                     vl[i] = strV[i]
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("i=%s : %s" % (i, vl[i]))
 *             strA = []
 */
        }
      }
    }
    __pyx_L7:;

    /* "automata/cautomata.pyx":1947
 *                     if verb:
 *                         print("i=%s : %s" % (i, vl[i]))
 *             strA = []             # <<<<<<<<<<<<<<
 *             for i in range(self.a.na):
 *                 strA.append(str(self.A[i]))
 */
    __pyx_t_4 = PyList_New(0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1947, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_v_strA = ((PyObject*)__pyx_t_4);
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":1948
 *                         print("i=%s : %s" % (i, vl[i]))
 *             strA = []
 *             for i in range(self.a.na):             # <<<<<<<<<<<<<<
 *                 strA.append(str(self.A[i]))
 *                 ll[i] = strA[i]
 */
    __pyx_t_1 = __pyx_v_self->a->na;
    __pyx_t_7 = __pyx_t_1;
    for (__pyx_t_8 = 0; __pyx_t_8 < __pyx_t_7; __pyx_t_8+=1) {
      __pyx_v_i = __pyx_t_8;

      /* "automata/cautomata.pyx":1949
 *             strA = []
 *             for i in range(self.a.na):
 *                 strA.append(str(self.A[i]))             # <<<<<<<<<<<<<<
 *                 ll[i] = strA[i]
 *             if verb and vl != NULL:
 */
      if (unlikely(__pyx_v_self->A == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 1949, __pyx_L1_error)
      }
      __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_self->A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1949, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_6 = __Pyx_PyObject_CallOneArg(((PyObject *)(&PyString_Type)), __pyx_t_4); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1949, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_strA, __pyx_t_6); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 1949, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;

      /* "automata/cautomata.pyx":1950
 *             for i in range(self.a.na):
 *                 strA.append(str(self.A[i]))
 *                 ll[i] = strA[i]             # <<<<<<<<<<<<<<
 *             if verb and vl != NULL:
 *                 for i in range(self.a.n):
 */
      __pyx_t_6 = __Pyx_GetItemInt_List(__pyx_v_strA, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1950, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_11 = __Pyx_PyObject_AsWritableString(__pyx_t_6); if (unlikely((!__pyx_t_11) && PyErr_Occurred())) __PYX_ERR(0, 1950, __pyx_L1_error)
      (__pyx_v_ll[__pyx_v_i]) = __pyx_t_11;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    }

    /* "automata/cautomata.pyx":1951
 *                 strA.append(str(self.A[i]))
 *                 ll[i] = strA[i]
 *             if verb and vl != NULL:             # <<<<<<<<<<<<<<
 *                 for i in range(self.a.n):
 *                     print("i=%s : %s" % (i, vl[i]))
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 1951, __pyx_L1_error)
    if (__pyx_t_2) {
    } else {
      __pyx_t_3 = __pyx_t_2;
      goto __pyx_L29_bool_binop_done;
    }
    __pyx_t_2 = ((__pyx_v_vl != NULL) != 0);
    __pyx_t_3 = __pyx_t_2;
    __pyx_L29_bool_binop_done:;
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":1952
 *                 ll[i] = strA[i]
 *             if verb and vl != NULL:
 *                 for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *                     print("i=%s : %s" % (i, vl[i]))
 *             if verb:
 */
      __pyx_t_1 = __pyx_v_self->a->n;
      __pyx_t_7 = __pyx_t_1;
      for (__pyx_t_8 = 0; __pyx_t_8 < __pyx_t_7; __pyx_t_8+=1) {
        __pyx_v_i = __pyx_t_8;

        /* "automata/cautomata.pyx":1953
 *             if verb and vl != NULL:
 *                 for i in range(self.a.n):
 *                     print("i=%s : %s" % (i, vl[i]))             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("plot...")
 */
        __pyx_t_6 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1953, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        __pyx_t_4 = __Pyx_PyBytes_FromString((__pyx_v_vl[__pyx_v_i])); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1953, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1953, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_GIVEREF(__pyx_t_6);
        PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_6);
        __Pyx_GIVEREF(__pyx_t_4);
        PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_4);
        __pyx_t_6 = 0;
        __pyx_t_4 = 0;
        __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_i_s_s, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1953, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
        __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1953, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      }

      /* "automata/cautomata.pyx":1951
 *                 strA.append(str(self.A[i]))
 *                 ll[i] = strA[i]
 *             if verb and vl != NULL:             # <<<<<<<<<<<<<<
 *                 for i in range(self.a.n):
 *                     print("i=%s : %s" % (i, vl[i]))
 */
    }

    /* "automata/cautomata.pyx":1954
 *                 for i in range(self.a.n):
 *                     print("i=%s : %s" % (i, vl[i]))
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("plot...")
 *             sig_on()
 */
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1954, __pyx_L1_error)
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":1955
 *                     print("i=%s : %s" % (i, vl[i]))
 *             if verb:
 *                 print("plot...")             # <<<<<<<<<<<<<<
 *             sig_on()
 *             plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, draw)
 */
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__46, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1955, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

      /* "automata/cautomata.pyx":1954
 *                 for i in range(self.a.n):
 *                     print("i=%s : %s" % (i, vl[i]))
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("plot...")
 *             sig_on()
 */
    }

    /* "automata/cautomata.pyx":1956
 *             if verb:
 *                 print("plot...")
 *             sig_on()             # <<<<<<<<<<<<<<
 *             plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, draw)
 *             sig_off()
 */
    __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 1956, __pyx_L1_error)

    /* "automata/cautomata.pyx":1957
 *                 print("plot...")
 *             sig_on()
 *             plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, draw)             # <<<<<<<<<<<<<<
 *             sig_off()
 *             if verb:
 */
    __pyx_t_13 = __Pyx_PyObject_AsString(__pyx_v_file); if (unlikely((!__pyx_t_13) && PyErr_Occurred())) __PYX_ERR(0, 1957, __pyx_L1_error)
    __pyx_t_14 = __Pyx_PyInt_As_bool(__pyx_v_html); if (unlikely((__pyx_t_14 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 1957, __pyx_L1_error)
    __pyx_t_15 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_15 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 1957, __pyx_L1_error)
    plotDot(__pyx_t_13, (__pyx_v_self->a[0]), __pyx_v_ll, ((char const *)"Automaton"), __pyx_v_sx, __pyx_v_sy, __pyx_v_vl, __pyx_t_14, __pyx_t_15, __pyx_v_draw);

    /* "automata/cautomata.pyx":1958
 *             sig_on()
 *             plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, draw)
 *             sig_off()             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("free...plot")
 */
    sig_off();

    /* "automata/cautomata.pyx":1959
 *             plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, draw)
 *             sig_off()
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("free...plot")
 *             if ll is not NULL:
 */
    __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 1959, __pyx_L1_error)
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":1960
 *             sig_off()
 *             if verb:
 *                 print("free...plot")             # <<<<<<<<<<<<<<
 *             if ll is not NULL:
 *                 sig_on()
 */
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__47, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1960, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

      /* "automata/cautomata.pyx":1959
 *             plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, draw)
 *             sig_off()
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("free...plot")
 *             if ll is not NULL:
 */
    }

    /* "automata/cautomata.pyx":1961
 *             if verb:
 *                 print("free...plot")
 *             if ll is not NULL:             # <<<<<<<<<<<<<<
 *                 sig_on()
 *                 free(ll)
 */
    __pyx_t_3 = ((__pyx_v_ll != NULL) != 0);
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":1962
 *                 print("free...plot")
 *             if ll is not NULL:
 *                 sig_on()             # <<<<<<<<<<<<<<
 *                 free(ll)
 *                 sig_off()
 */
      __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 1962, __pyx_L1_error)

      /* "automata/cautomata.pyx":1963
 *             if ll is not NULL:
 *                 sig_on()
 *                 free(ll)             # <<<<<<<<<<<<<<
 *                 sig_off()
 *             if vl is not NULL: # vlabels is not None and self.S is not None:
 */
      free(__pyx_v_ll);

      /* "automata/cautomata.pyx":1964
 *                 sig_on()
 *                 free(ll)
 *                 sig_off()             # <<<<<<<<<<<<<<
 *             if vl is not NULL: # vlabels is not None and self.S is not None:
 *                 sig_on()
 */
      sig_off();

      /* "automata/cautomata.pyx":1961
 *             if verb:
 *                 print("free...plot")
 *             if ll is not NULL:             # <<<<<<<<<<<<<<
 *                 sig_on()
 *                 free(ll)
 */
    }

    /* "automata/cautomata.pyx":1965
 *                 free(ll)
 *                 sig_off()
 *             if vl is not NULL: # vlabels is not None and self.S is not None:             # <<<<<<<<<<<<<<
 *                 sig_on()
 *                 free(vl)
 */
    __pyx_t_3 = ((__pyx_v_vl != NULL) != 0);
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":1966
 *                 sig_off()
 *             if vl is not NULL: # vlabels is not None and self.S is not None:
 *                 sig_on()             # <<<<<<<<<<<<<<
 *                 free(vl)
 *                 sig_off()
 */
      __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 1966, __pyx_L1_error)

      /* "automata/cautomata.pyx":1967
 *             if vl is not NULL: # vlabels is not None and self.S is not None:
 *                 sig_on()
 *                 free(vl)             # <<<<<<<<<<<<<<
 *                 sig_off()
 *             if draw:
 */
      free(__pyx_v_vl);

      /* "automata/cautomata.pyx":1968
 *                 sig_on()
 *                 free(vl)
 *                 sig_off()             # <<<<<<<<<<<<<<
 *             if draw:
 *                 from PIL import Image
 */
      sig_off();

      /* "automata/cautomata.pyx":1965
 *                 free(ll)
 *                 sig_off()
 *             if vl is not NULL: # vlabels is not None and self.S is not None:             # <<<<<<<<<<<<<<
 *                 sig_on()
 *                 free(vl)
 */
    }

    /* "automata/cautomata.pyx":1969
 *                 free(vl)
 *                 sig_off()
 *             if draw:             # <<<<<<<<<<<<<<
 *                 from PIL import Image
 *                 return Image.open(file+'.png')
 */
    __pyx_t_3 = (__pyx_v_draw != 0);
    if (__pyx_t_3) {

      /* "automata/cautomata.pyx":1970
 *                 sig_off()
 *             if draw:
 *                 from PIL import Image             # <<<<<<<<<<<<<<
 *                 return Image.open(file+'.png')
 * #other possibility to get the image
 */
      __pyx_t_5 = PyList_New(1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1970, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_n_s_Image);
      __Pyx_GIVEREF(__pyx_n_s_Image);
      PyList_SET_ITEM(__pyx_t_5, 0, __pyx_n_s_Image);
      __pyx_t_4 = __Pyx_Import(__pyx_n_s_PIL, __pyx_t_5, -1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1970, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_ImportFrom(__pyx_t_4, __pyx_n_s_Image); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1970, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_INCREF(__pyx_t_5);
      __pyx_v_Image = __pyx_t_5;
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":1971
 *             if draw:
 *                 from PIL import Image
 *                 return Image.open(file+'.png')             # <<<<<<<<<<<<<<
 * #other possibility to get the image
 * #            import ipywidgets as widgets
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_Image, __pyx_n_s_open); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1971, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_6 = PyNumber_Add(__pyx_v_file, __pyx_kp_s_png); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1971, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_9 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_9)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_9);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
        }
      }
      __pyx_t_4 = (__pyx_t_9) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_9, __pyx_t_6) : __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_6);
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1971, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_r = __pyx_t_4;
      __pyx_t_4 = 0;
      goto __pyx_L0;

      /* "automata/cautomata.pyx":1969
 *                 free(vl)
 *                 sig_off()
 *             if draw:             # <<<<<<<<<<<<<<
 *                 from PIL import Image
 *                 return Image.open(file+'.png')
 */
    }

    /* "automata/cautomata.pyx":1888
 *         de = DotExists()
 *         sig_off()
 *         if de:             # <<<<<<<<<<<<<<
 *             if file is None:
 *                 from sage.misc.temporary_file import tmp_filename
 */
    goto __pyx_L3;
  }

  /* "automata/cautomata.pyx":1984
 * #            return w
 *         else:
 *             return AutomatonToSageAutomaton(self.a[0], self.A).plot()             # <<<<<<<<<<<<<<
 * 
 *     @property
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_5 = __pyx_v_self->A;
    __Pyx_INCREF(__pyx_t_5);
    __pyx_t_6 = __pyx_f_8automata_9cautomata_AutomatonToSageAutomaton((__pyx_v_self->a[0]), __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 1984, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_plot_2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 1984, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_4 = (__pyx_t_6) ? __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_6) : __Pyx_PyObject_CallNoArg(__pyx_t_5);
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 1984, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;
  }
  __pyx_L3:;

  /* "automata/cautomata.pyx":1842
 *         return AutomatonToDiGraph(self.a[0], self.A, keep_edges_labels=keep_transitions_labels)
 * 
 *     def plot(self, int sx=10, int sy=8, vlabels=None,             # <<<<<<<<<<<<<<
 *              html=False, file=None, bool draw=True, verb=False):
 *         """
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.plot", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_tmp_filename);
  __Pyx_XDECREF(__pyx_v_strV);
  __Pyx_XDECREF(__pyx_v_htm);
  __Pyx_XDECREF(__pyx_v_strA);
  __Pyx_XDECREF(__pyx_v_Image);
  __Pyx_XDECREF(__pyx_v_file);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":1987
 * 
 *     @property
 *     def alphabet(self):             # <<<<<<<<<<<<<<
 *         """
 *         To get the :class:`DeterministicAutomaton` attribut alphabet
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_8alphabet_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_8alphabet_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_8alphabet___get__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_8alphabet___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__", 0);

  /* "automata/cautomata.pyx":2005
 *             ['a', 1, None]
 *         """
 *         return self.A             # <<<<<<<<<<<<<<
 * 
 *     def set_alphabet(self, list A):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_self->A);
  __pyx_r = __pyx_v_self->A;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":1987
 * 
 *     @property
 *     def alphabet(self):             # <<<<<<<<<<<<<<
 *         """
 *         To get the :class:`DeterministicAutomaton` attribut alphabet
 */

  /* function exit code */
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2007
 *         return self.A
 * 
 *     def set_alphabet(self, list A):             # <<<<<<<<<<<<<<
 *         """
 *         Replace the alphabet by another one.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_29set_alphabet(PyObject *__pyx_v_self, PyObject *__pyx_v_A); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_28set_alphabet[] = "\n        Replace the alphabet by another one.\n\n        INPUT:\n\n        - ``A`` -- list of letters of alphabet\n\n        EXAMPLES::\n\n            sage: a = dag.Word(['a', 'b', 0])\n            sage: a.alphabet\n            ['a', 0, 'b']\n            sage: a.set_alphabet([0, 1, 'c'])\n            sage: b = dag.Word([0, 'c', 1])\n            sage: a == b\n            True\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.set_alphabet(['a', 'c', 'b'])\n            sage: a.alphabet\n            ['a', 'c']\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.set_alphabet(['a','e'])\n            sage: a.alphabet\n            ['a', 'e']\n\n        TESTS::\n\n            sage: a = dag.Word(['a', 'b', 'c'])\n            sage: a.set_alphabet([0, 1])\n            Traceback (most recent call last):\n            ...\n            ValueError: The size 2 of the new alphabet has to be the same (i.e. 3)\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_29set_alphabet(PyObject *__pyx_v_self, PyObject *__pyx_v_A) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("set_alphabet (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_A), (&PyList_Type), 1, "A", 1))) __PYX_ERR(0, 2007, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_28set_alphabet(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((PyObject*)__pyx_v_A));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_28set_alphabet(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_A) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  Py_ssize_t __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("set_alphabet", 0);

  /* "automata/cautomata.pyx":2043
 * 
 *         """
 *         if len(A) < len(self.A):             # <<<<<<<<<<<<<<
 *             raise ValueError("The size %s of the new alphabet has to be the same (i.e. %s)"%(len(A), len(self.A)))
 *         self.A = A[:self.a.na]
 */
  if (unlikely(__pyx_v_A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 2043, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_GET_SIZE(__pyx_v_A); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2043, __pyx_L1_error)
  __pyx_t_2 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_2);
  if (unlikely(__pyx_t_2 == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 2043, __pyx_L1_error)
  }
  __pyx_t_3 = PyList_GET_SIZE(__pyx_t_2); if (unlikely(__pyx_t_3 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2043, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_4 = ((__pyx_t_1 < __pyx_t_3) != 0);
  if (unlikely(__pyx_t_4)) {

    /* "automata/cautomata.pyx":2044
 *         """
 *         if len(A) < len(self.A):
 *             raise ValueError("The size %s of the new alphabet has to be the same (i.e. %s)"%(len(A), len(self.A)))             # <<<<<<<<<<<<<<
 *         self.A = A[:self.a.na]
 * 
 */
    if (unlikely(__pyx_v_A == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
      __PYX_ERR(0, 2044, __pyx_L1_error)
    }
    __pyx_t_3 = PyList_GET_SIZE(__pyx_v_A); if (unlikely(__pyx_t_3 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2044, __pyx_L1_error)
    __pyx_t_2 = PyInt_FromSsize_t(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2044, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_5 = __pyx_v_self->A;
    __Pyx_INCREF(__pyx_t_5);
    if (unlikely(__pyx_t_5 == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
      __PYX_ERR(0, 2044, __pyx_L1_error)
    }
    __pyx_t_3 = PyList_GET_SIZE(__pyx_t_5); if (unlikely(__pyx_t_3 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2044, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = PyInt_FromSsize_t(__pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2044, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = PyTuple_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2044, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_t_5);
    __pyx_t_2 = 0;
    __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyString_Format(__pyx_kp_s_The_size_s_of_the_new_alphabet_h, __pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2044, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2044, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_Raise(__pyx_t_6, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __PYX_ERR(0, 2044, __pyx_L1_error)

    /* "automata/cautomata.pyx":2043
 * 
 *         """
 *         if len(A) < len(self.A):             # <<<<<<<<<<<<<<
 *             raise ValueError("The size %s of the new alphabet has to be the same (i.e. %s)"%(len(A), len(self.A)))
 *         self.A = A[:self.a.na]
 */
  }

  /* "automata/cautomata.pyx":2045
 *         if len(A) < len(self.A):
 *             raise ValueError("The size %s of the new alphabet has to be the same (i.e. %s)"%(len(A), len(self.A)))
 *         self.A = A[:self.a.na]             # <<<<<<<<<<<<<<
 * 
 *     @property
 */
  if (unlikely(__pyx_v_A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(0, 2045, __pyx_L1_error)
  }
  __pyx_t_6 = __Pyx_PyList_GetSlice(__pyx_v_A, 0, __pyx_v_self->a->na); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2045, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_GIVEREF(__pyx_t_6);
  __Pyx_GOTREF(__pyx_v_self->A);
  __Pyx_DECREF(__pyx_v_self->A);
  __pyx_v_self->A = ((PyObject*)__pyx_t_6);
  __pyx_t_6 = 0;

  /* "automata/cautomata.pyx":2007
 *         return self.A
 * 
 *     def set_alphabet(self, list A):             # <<<<<<<<<<<<<<
 *         """
 *         Replace the alphabet by another one.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.set_alphabet", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2048
 * 
 *     @property
 *     def initial_state(self):             # <<<<<<<<<<<<<<
 *         """
 *         Get the initial state of the :class:`DeterministicAutomaton`
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_13initial_state_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_13initial_state_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_13initial_state___get__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_13initial_state___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);

  /* "automata/cautomata.pyx":2066
 *             2
 *         """
 *         return self.a.i             # <<<<<<<<<<<<<<
 * 
 *     def set_initial_state(self, int i):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_self->a->i); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2066, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2048
 * 
 *     @property
 *     def initial_state(self):             # <<<<<<<<<<<<<<
 *         """
 *         Get the initial state of the :class:`DeterministicAutomaton`
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.initial_state.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2068
 *         return self.a.i
 * 
 *     def set_initial_state(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Set the initial state.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_31set_initial_state(PyObject *__pyx_v_self, PyObject *__pyx_arg_i); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_30set_initial_state[] = "\n        Set the initial state.\n\n        INPUT:\n\n        - ``i`` -- int -- the initial state of the automaton\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.set_initial_state(2)\n            sage: a.initial_state\n            2\n            sage: a.set_initial_state(6)\n            Traceback (most recent call last):\n            ...\n            ValueError: The initial state must be a state of the automaton or -1: 6 is not in [-1, 3]\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_31set_initial_state(PyObject *__pyx_v_self, PyObject *__pyx_arg_i) {
  int __pyx_v_i;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("set_initial_state (wrapper)", 0);
  assert(__pyx_arg_i); {
    __pyx_v_i = __Pyx_PyInt_As_int(__pyx_arg_i); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2068, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.set_initial_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_30set_initial_state(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((int)__pyx_v_i));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_30set_initial_state(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("set_initial_state", 0);

  /* "automata/cautomata.pyx":2087
 *             ValueError: The initial state must be a state of the automaton or -1: 6 is not in [-1, 3]
 *         """
 *         if i < self.a.n and i >= -1:             # <<<<<<<<<<<<<<
 *             self.a.i = i
 *         else:
 */
  __pyx_t_2 = ((__pyx_v_i < __pyx_v_self->a->n) != 0);
  if (__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i >= -1L) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (likely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":2088
 *         """
 *         if i < self.a.n and i >= -1:
 *             self.a.i = i             # <<<<<<<<<<<<<<
 *         else:
 *             raise ValueError("The initial state must be a state of the automaton or -1: " +
 */
    __pyx_v_self->a->i = __pyx_v_i;

    /* "automata/cautomata.pyx":2087
 *             ValueError: The initial state must be a state of the automaton or -1: 6 is not in [-1, 3]
 *         """
 *         if i < self.a.n and i >= -1:             # <<<<<<<<<<<<<<
 *             self.a.i = i
 *         else:
 */
    goto __pyx_L3;
  }

  /* "automata/cautomata.pyx":2090
 *             self.a.i = i
 *         else:
 *             raise ValueError("The initial state must be a state of the automaton or -1: " +             # <<<<<<<<<<<<<<
 *                              "%d is not in [-1, %d]" % (i, self.a.n - 1))
 * 
 */
  /*else*/ {

    /* "automata/cautomata.pyx":2091
 *         else:
 *             raise ValueError("The initial state must be a state of the automaton or -1: " +
 *                              "%d is not in [-1, %d]" % (i, self.a.n - 1))             # <<<<<<<<<<<<<<
 * 
 *     @property
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2091, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyInt_From_long((__pyx_v_self->a->n - 1)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2091, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2091, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_d_is_not_in_1_d, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2091, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":2090
 *             self.a.i = i
 *         else:
 *             raise ValueError("The initial state must be a state of the automaton or -1: " +             # <<<<<<<<<<<<<<
 *                              "%d is not in [-1, %d]" % (i, self.a.n - 1))
 * 
 */
    __pyx_t_5 = PyNumber_Add(__pyx_kp_s_The_initial_state_must_be_a_stat, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2090, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2090, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_Raise(__pyx_t_4, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __PYX_ERR(0, 2090, __pyx_L1_error)
  }
  __pyx_L3:;

  /* "automata/cautomata.pyx":2068
 *         return self.a.i
 * 
 *     def set_initial_state(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Set the initial state.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.set_initial_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2094
 * 
 *     @property
 *     def final_states(self):             # <<<<<<<<<<<<<<
 *         """
 *         Indicate all final states
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_12final_states_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_12final_states_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_12final_states___get__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_12final_states___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  int __pyx_v_i;
  PyObject *__pyx_v_l = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("__get__", 0);

  /* "automata/cautomata.pyx":2115
 *         """
 *         cdef int i
 *         l = []             # <<<<<<<<<<<<<<
 *         for i in range(self.a.n):
 *             if self.a.e[i].final:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2115, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_l = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":2116
 *         cdef int i
 *         l = []
 *         for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *             if self.a.e[i].final:
 *                 l.append(i)
 */
  __pyx_t_2 = __pyx_v_self->a->n;
  __pyx_t_3 = __pyx_t_2;
  for (__pyx_t_4 = 0; __pyx_t_4 < __pyx_t_3; __pyx_t_4+=1) {
    __pyx_v_i = __pyx_t_4;

    /* "automata/cautomata.pyx":2117
 *         l = []
 *         for i in range(self.a.n):
 *             if self.a.e[i].final:             # <<<<<<<<<<<<<<
 *                 l.append(i)
 *         return l
 */
    __pyx_t_5 = ((__pyx_v_self->a->e[__pyx_v_i]).final != 0);
    if (__pyx_t_5) {

      /* "automata/cautomata.pyx":2118
 *         for i in range(self.a.n):
 *             if self.a.e[i].final:
 *                 l.append(i)             # <<<<<<<<<<<<<<
 *         return l
 * 
 */
      __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2118, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_6 = __Pyx_PyList_Append(__pyx_v_l, __pyx_t_1); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 2118, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":2117
 *         l = []
 *         for i in range(self.a.n):
 *             if self.a.e[i].final:             # <<<<<<<<<<<<<<
 *                 l.append(i)
 *         return l
 */
    }
  }

  /* "automata/cautomata.pyx":2119
 *             if self.a.e[i].final:
 *                 l.append(i)
 *         return l             # <<<<<<<<<<<<<<
 * 
 *     @property
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_l);
  __pyx_r = __pyx_v_l;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2094
 * 
 *     @property
 *     def final_states(self):             # <<<<<<<<<<<<<<
 *         """
 *         Indicate all final states
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.final_states.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2122
 * 
 *     @property
 *     def states(self):             # <<<<<<<<<<<<<<
 *         """
 *         Indicate all states of the automaton
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_6states_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_6states_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_6states___get__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_6states___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);

  /* "automata/cautomata.pyx":2136
 *             [0, 1, 2, 3]
 *         """
 *         if self.S is None:             # <<<<<<<<<<<<<<
 *             return range(self.a.n)
 *         else:
 */
  __pyx_t_1 = (__pyx_v_self->S == ((PyObject*)Py_None));
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":2137
 *         """
 *         if self.S is None:
 *             return range(self.a.n)             # <<<<<<<<<<<<<<
 *         else:
 *             return self.S
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2137, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2137, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":2136
 *             [0, 1, 2, 3]
 *         """
 *         if self.S is None:             # <<<<<<<<<<<<<<
 *             return range(self.a.n)
 *         else:
 */
  }

  /* "automata/cautomata.pyx":2139
 *             return range(self.a.n)
 *         else:
 *             return self.S             # <<<<<<<<<<<<<<
 * 
 *     def set_final_states(self, list lf):
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_self->S);
    __pyx_r = __pyx_v_self->S;
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":2122
 * 
 *     @property
 *     def states(self):             # <<<<<<<<<<<<<<
 *         """
 *         Indicate all states of the automaton
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.states.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2141
 *             return self.S
 * 
 *     def set_final_states(self, list lf):             # <<<<<<<<<<<<<<
 *         """
 *         Set the set of final states.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_33set_final_states(PyObject *__pyx_v_self, PyObject *__pyx_v_lf); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_32set_final_states[] = "\n        Set the set of final states.\n\n         INPUT:\n\n        - ``lf`` -- list of states to set as final\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.set_final_states([0,3])\n            sage: a.final_states\n            [0, 3]\n            sage: a.set_final_states([0,4])\n            Traceback (most recent call last):\n            ...\n            ValueError: 4 is not a state!\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_33set_final_states(PyObject *__pyx_v_self, PyObject *__pyx_v_lf) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("set_final_states (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_lf), (&PyList_Type), 1, "lf", 1))) __PYX_ERR(0, 2141, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_32set_final_states(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((PyObject*)__pyx_v_lf));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_32set_final_states(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_lf) {
  int __pyx_v_f;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  Py_ssize_t __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("set_final_states", 0);

  /* "automata/cautomata.pyx":2162
 *         """
 *         cdef int f
 *         for f in range(self.a.n):             # <<<<<<<<<<<<<<
 *             self.a.e[f].final = 0
 *         for f in lf:
 */
  __pyx_t_1 = __pyx_v_self->a->n;
  __pyx_t_2 = __pyx_t_1;
  for (__pyx_t_3 = 0; __pyx_t_3 < __pyx_t_2; __pyx_t_3+=1) {
    __pyx_v_f = __pyx_t_3;

    /* "automata/cautomata.pyx":2163
 *         cdef int f
 *         for f in range(self.a.n):
 *             self.a.e[f].final = 0             # <<<<<<<<<<<<<<
 *         for f in lf:
 *             if f < 0 or f >= self.a.n:
 */
    (__pyx_v_self->a->e[__pyx_v_f]).final = 0;
  }

  /* "automata/cautomata.pyx":2164
 *         for f in range(self.a.n):
 *             self.a.e[f].final = 0
 *         for f in lf:             # <<<<<<<<<<<<<<
 *             if f < 0 or f >= self.a.n:
 *                 raise ValueError("%d is not a state!" % f)
 */
  if (unlikely(__pyx_v_lf == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 2164, __pyx_L1_error)
  }
  __pyx_t_4 = __pyx_v_lf; __Pyx_INCREF(__pyx_t_4); __pyx_t_5 = 0;
  for (;;) {
    if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_4)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_6 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_5); __Pyx_INCREF(__pyx_t_6); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 2164, __pyx_L1_error)
    #else
    __pyx_t_6 = PySequence_ITEM(__pyx_t_4, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2164, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    #endif
    __pyx_t_1 = __Pyx_PyInt_As_int(__pyx_t_6); if (unlikely((__pyx_t_1 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2164, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_f = __pyx_t_1;

    /* "automata/cautomata.pyx":2165
 *             self.a.e[f].final = 0
 *         for f in lf:
 *             if f < 0 or f >= self.a.n:             # <<<<<<<<<<<<<<
 *                 raise ValueError("%d is not a state!" % f)
 *             self.a.e[f].final = 1
 */
    __pyx_t_8 = ((__pyx_v_f < 0) != 0);
    if (!__pyx_t_8) {
    } else {
      __pyx_t_7 = __pyx_t_8;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_t_8 = ((__pyx_v_f >= __pyx_v_self->a->n) != 0);
    __pyx_t_7 = __pyx_t_8;
    __pyx_L8_bool_binop_done:;
    if (unlikely(__pyx_t_7)) {

      /* "automata/cautomata.pyx":2166
 *         for f in lf:
 *             if f < 0 or f >= self.a.n:
 *                 raise ValueError("%d is not a state!" % f)             # <<<<<<<<<<<<<<
 *             self.a.e[f].final = 1
 * 
 */
      __pyx_t_6 = __Pyx_PyInt_From_int(__pyx_v_f); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2166, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_9 = __Pyx_PyString_Format(__pyx_kp_s_d_is_not_a_state, __pyx_t_6); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2166, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_9); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2166, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_Raise(__pyx_t_6, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __PYX_ERR(0, 2166, __pyx_L1_error)

      /* "automata/cautomata.pyx":2165
 *             self.a.e[f].final = 0
 *         for f in lf:
 *             if f < 0 or f >= self.a.n:             # <<<<<<<<<<<<<<
 *                 raise ValueError("%d is not a state!" % f)
 *             self.a.e[f].final = 1
 */
    }

    /* "automata/cautomata.pyx":2167
 *             if f < 0 or f >= self.a.n:
 *                 raise ValueError("%d is not a state!" % f)
 *             self.a.e[f].final = 1             # <<<<<<<<<<<<<<
 * 
 *     def is_final(self, int e):
 */
    (__pyx_v_self->a->e[__pyx_v_f]).final = 1;

    /* "automata/cautomata.pyx":2164
 *         for f in range(self.a.n):
 *             self.a.e[f].final = 0
 *         for f in lf:             # <<<<<<<<<<<<<<
 *             if f < 0 or f >= self.a.n:
 *                 raise ValueError("%d is not a state!" % f)
 */
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "automata/cautomata.pyx":2141
 *             return self.S
 * 
 *     def set_final_states(self, list lf):             # <<<<<<<<<<<<<<
 *         """
 *         Set the set of final states.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.set_final_states", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2169
 *             self.a.e[f].final = 1
 * 
 *     def is_final(self, int e):             # <<<<<<<<<<<<<<
 *         """
 *         Indicate if the state is final
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_35is_final(PyObject *__pyx_v_self, PyObject *__pyx_arg_e); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_34is_final[] = "\n        Indicate if the state is final\n\n        INPUT:\n\n        - ``e`` -- int input state to examine as final\n\n        OUTPUT:\n\n        ``True`` if the state ``e`` is final (i.e. ``False`` in the other case)\n\n        EXAMPLES::\n\n            sage: a = dag.Word(['a', 'b'])\n            sage: a.is_final(1)\n            False\n\n            sage: a = DeterministicAutomaton([(10,11,'a') ,(12,13,'b')])\n            sage: a.is_final(1)\n            True\n            sage: a.is_final(10)\n            Traceback (most recent call last):\n            ...\n            ValueError: 10 is not a state!\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_35is_final(PyObject *__pyx_v_self, PyObject *__pyx_arg_e) {
  int __pyx_v_e;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_final (wrapper)", 0);
  assert(__pyx_arg_e); {
    __pyx_v_e = __Pyx_PyInt_As_int(__pyx_arg_e); if (unlikely((__pyx_v_e == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2169, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.is_final", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_34is_final(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((int)__pyx_v_e));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_34is_final(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_e) {
  PyObject *__pyx_v_ans = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  int __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("is_final", 0);

  /* "automata/cautomata.pyx":2195
 *             ValueError: 10 is not a state!
 *         """
 *         if e >= 0 and e < self.a.n:             # <<<<<<<<<<<<<<
 *             sig_on()
 *             ans = c_bool(self.a.e[e].final)
 */
  __pyx_t_2 = ((__pyx_v_e >= 0) != 0);
  if (__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_e < __pyx_v_self->a->n) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (likely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":2196
 *         """
 *         if e >= 0 and e < self.a.n:
 *             sig_on()             # <<<<<<<<<<<<<<
 *             ans = c_bool(self.a.e[e].final)
 *             sig_off()
 */
    __pyx_t_3 = sig_on(); if (unlikely(__pyx_t_3 == ((int)0))) __PYX_ERR(0, 2196, __pyx_L1_error)

    /* "automata/cautomata.pyx":2197
 *         if e >= 0 and e < self.a.n:
 *             sig_on()
 *             ans = c_bool(self.a.e[e].final)             # <<<<<<<<<<<<<<
 *             sig_off()
 *             return ans
 */
    __pyx_t_4 = __Pyx_PyInt_From_bool((__pyx_v_self->a->e[__pyx_v_e]).final); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2197, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2197, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_ans = __pyx_t_5;
    __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":2198
 *             sig_on()
 *             ans = c_bool(self.a.e[e].final)
 *             sig_off()             # <<<<<<<<<<<<<<
 *             return ans
 *         else:
 */
    sig_off();

    /* "automata/cautomata.pyx":2199
 *             ans = c_bool(self.a.e[e].final)
 *             sig_off()
 *             return ans             # <<<<<<<<<<<<<<
 *         else:
 *             raise ValueError("%s is not a state!"%e)
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_ans);
    __pyx_r = __pyx_v_ans;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":2195
 *             ValueError: 10 is not a state!
 *         """
 *         if e >= 0 and e < self.a.n:             # <<<<<<<<<<<<<<
 *             sig_on()
 *             ans = c_bool(self.a.e[e].final)
 */
  }

  /* "automata/cautomata.pyx":2201
 *             return ans
 *         else:
 *             raise ValueError("%s is not a state!"%e)             # <<<<<<<<<<<<<<
 * 
 *     def set_final(self, int e, final=True):
 */
  /*else*/ {
    __pyx_t_5 = __Pyx_PyInt_From_int(__pyx_v_e); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2201, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_s_is_not_a_state, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2201, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2201, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_5, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __PYX_ERR(0, 2201, __pyx_L1_error)
  }

  /* "automata/cautomata.pyx":2169
 *             self.a.e[f].final = 1
 * 
 *     def is_final(self, int e):             # <<<<<<<<<<<<<<
 *         """
 *         Indicate if the state is final
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.is_final", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_ans);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2203
 *             raise ValueError("%s is not a state!"%e)
 * 
 *     def set_final(self, int e, final=True):             # <<<<<<<<<<<<<<
 *         """
 *         Set the state as final.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_37set_final(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_36set_final[] = "\n        Set the state as final.\n\n         INPUT:\n\n        - ``e`` -- int state to set as final\n        - ``final`` -- (default: ``True``) set the state final or not final\n\n        EXAMPLES::\n\n            sage: a = dag.Word(['a', 'b'])\n            sage: a.set_final(1)\n            sage: a.final_states\n            [1, 2]\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.set_final(2, False)\n            sage: a.final_states\n            [0, 1, 3]\n            sage: a.set_final(4)\n            Traceback (most recent call last):\n            ...\n            ValueError: 4 is not the index of a state (i.e. it is not between 0 and 3)!\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_37set_final(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_e;
  PyObject *__pyx_v_final = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("set_final (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_e,&__pyx_n_s_final,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)Py_True);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_e)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_final);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "set_final") < 0)) __PYX_ERR(0, 2203, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_e = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_e == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2203, __pyx_L3_error)
    __pyx_v_final = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("set_final", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2203, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.set_final", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_36set_final(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_e, __pyx_v_final);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_36set_final(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_e, PyObject *__pyx_v_final) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  bool __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("set_final", 0);

  /* "automata/cautomata.pyx":2228
 *             ValueError: 4 is not the index of a state (i.e. it is not between 0 and 3)!
 *         """
 *         if e >= 0 and e < self.a.n:             # <<<<<<<<<<<<<<
 *             self.a.e[e].final = final
 *         else:
 */
  __pyx_t_2 = ((__pyx_v_e >= 0) != 0);
  if (__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_e < __pyx_v_self->a->n) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (likely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":2229
 *         """
 *         if e >= 0 and e < self.a.n:
 *             self.a.e[e].final = final             # <<<<<<<<<<<<<<
 *         else:
 *             raise ValueError("%d is not the index of a state (i.e. it is not between 0 and %s)!" % (e, self.a.n-1))
 */
    __pyx_t_3 = __Pyx_PyInt_As_bool(__pyx_v_final); if (unlikely((__pyx_t_3 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 2229, __pyx_L1_error)
    (__pyx_v_self->a->e[__pyx_v_e]).final = __pyx_t_3;

    /* "automata/cautomata.pyx":2228
 *             ValueError: 4 is not the index of a state (i.e. it is not between 0 and 3)!
 *         """
 *         if e >= 0 and e < self.a.n:             # <<<<<<<<<<<<<<
 *             self.a.e[e].final = final
 *         else:
 */
    goto __pyx_L3;
  }

  /* "automata/cautomata.pyx":2231
 *             self.a.e[e].final = final
 *         else:
 *             raise ValueError("%d is not the index of a state (i.e. it is not between 0 and %s)!" % (e, self.a.n-1))             # <<<<<<<<<<<<<<
 * 
 *     def successor(self, int i, int j):
 */
  /*else*/ {
    __pyx_t_4 = __Pyx_PyInt_From_int(__pyx_v_e); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyInt_From_long((__pyx_v_self->a->n - 1)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = PyTuple_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_t_5);
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyString_Format(__pyx_kp_s_d_is_not_the_index_of_a_state_i, __pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2231, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_Raise(__pyx_t_6, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __PYX_ERR(0, 2231, __pyx_L1_error)
  }
  __pyx_L3:;

  /* "automata/cautomata.pyx":2203
 *             raise ValueError("%s is not a state!"%e)
 * 
 *     def set_final(self, int e, final=True):             # <<<<<<<<<<<<<<
 *         """
 *         Set the state as final.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.set_final", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2233
 *             raise ValueError("%d is not the index of a state (i.e. it is not between 0 and %s)!" % (e, self.a.n-1))
 * 
 *     def successor(self, int i, int j):             # <<<<<<<<<<<<<<
 *         """
 *         Return the state reached by following the transition with label of index j from state i.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_39successor(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_38successor[] = "\n        Return the state reached by following the transition with label of index j from state i.\n        Return -1 if it doesn't exists.\n\n        INPUT:\n\n        - ``i`` - int - index of the state\n        - ``j`` - int - index of the label\n\n        OUTPUT:\n\n        return a int, successor of the state i following edge j\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a'), (2,3,'b')])\n            sage: a.successor(0, 1)\n            -1\n            sage: a.successor(2, 1)\n            3\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_39successor(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_i;
  int __pyx_v_j;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("successor (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_i,&__pyx_n_s_j,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_j)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("successor", 1, 2, 2, 1); __PYX_ERR(0, 2233, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "successor") < 0)) __PYX_ERR(0, 2233, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
    }
    __pyx_v_i = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2233, __pyx_L3_error)
    __pyx_v_j = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_j == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2233, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("successor", 1, 2, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2233, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.successor", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_38successor(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_i, __pyx_v_j);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_38successor(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i, int __pyx_v_j) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("successor", 0);

  /* "automata/cautomata.pyx":2255
 *             3
 *         """
 *         if i < 0 or i >= self.a.n or j < 0 or j >= self.a.na:             # <<<<<<<<<<<<<<
 *             return -1
 *         return self.a.e[i].f[j]
 */
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_j < 0) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_j >= __pyx_v_self->a->na) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":2256
 *         """
 *         if i < 0 or i >= self.a.n or j < 0 or j >= self.a.na:
 *             return -1             # <<<<<<<<<<<<<<
 *         return self.a.e[i].f[j]
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_int_neg_1);
    __pyx_r = __pyx_int_neg_1;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":2255
 *             3
 *         """
 *         if i < 0 or i >= self.a.n or j < 0 or j >= self.a.na:             # <<<<<<<<<<<<<<
 *             return -1
 *         return self.a.e[i].f[j]
 */
  }

  /* "automata/cautomata.pyx":2257
 *         if i < 0 or i >= self.a.n or j < 0 or j >= self.a.na:
 *             return -1
 *         return self.a.e[i].f[j]             # <<<<<<<<<<<<<<
 * 
 *     def successors(self, int i):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_3 = __Pyx_PyInt_From_int(((__pyx_v_self->a->e[__pyx_v_i]).f[__pyx_v_j])); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2257, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2233
 *             raise ValueError("%d is not the index of a state (i.e. it is not between 0 and %s)!" % (e, self.a.n-1))
 * 
 *     def successor(self, int i, int j):             # <<<<<<<<<<<<<<
 *         """
 *         Return the state reached by following the transition with label of index j from state i.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.successor", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2259
 *         return self.a.e[i].f[j]
 * 
 *     def successors(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Return indices of letters of leaving transitions from state ``i``.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_41successors(PyObject *__pyx_v_self, PyObject *__pyx_arg_i); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_40successors[] = "\n        Return indices of letters of leaving transitions from state ``i``.\n\n        INPUT:\n\n        - ``i`` -- int - the input state\n\n        OUTPUT:\n\n        return a list of int\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a'), (2,3,'b')])\n            sage: a.successors(2)\n            [1]\n            sage: a.successors(4)\n            []\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_41successors(PyObject *__pyx_v_self, PyObject *__pyx_arg_i) {
  int __pyx_v_i;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("successors (wrapper)", 0);
  assert(__pyx_arg_i); {
    __pyx_v_i = __Pyx_PyInt_As_int(__pyx_arg_i); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2259, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.successors", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_40successors(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((int)__pyx_v_i));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_40successors(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i) {
  int __pyx_v_j;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("successors", 0);

  /* "automata/cautomata.pyx":2281
 *         """
 *         cdef int j
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             return []
 *         return [j for j in range(self.a.na) if self.a.e[i].f[j] != -1]
 */
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":2282
 *         cdef int j
 *         if i < 0 or i >= self.a.n:
 *             return []             # <<<<<<<<<<<<<<
 *         return [j for j in range(self.a.na) if self.a.e[i].f[j] != -1]
 * 
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2282, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_r = __pyx_t_3;
    __pyx_t_3 = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":2281
 *         """
 *         cdef int j
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             return []
 *         return [j for j in range(self.a.na) if self.a.e[i].f[j] != -1]
 */
  }

  /* "automata/cautomata.pyx":2283
 *         if i < 0 or i >= self.a.n:
 *             return []
 *         return [j for j in range(self.a.na) if self.a.e[i].f[j] != -1]             # <<<<<<<<<<<<<<
 * 
 *     def path(self, list l, i=None):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2283, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __pyx_v_self->a->na;
  __pyx_t_5 = __pyx_t_4;
  for (__pyx_t_6 = 0; __pyx_t_6 < __pyx_t_5; __pyx_t_6+=1) {
    __pyx_v_j = __pyx_t_6;
    __pyx_t_1 = ((((__pyx_v_self->a->e[__pyx_v_i]).f[__pyx_v_j]) != -1L) != 0);
    if (__pyx_t_1) {
      __pyx_t_7 = __Pyx_PyInt_From_int(__pyx_v_j); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2283, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_t_7))) __PYX_ERR(0, 2283, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    }
  }
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2259
 *         return self.a.e[i].f[j]
 * 
 *     def successors(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Return indices of letters of leaving transitions from state ``i``.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.successors", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2285
 *         return [j for j in range(self.a.na) if self.a.e[i].f[j] != -1]
 * 
 *     def path(self, list l, i=None):             # <<<<<<<<<<<<<<
 *         """
 *         Follows the path labeled by a list ``l`` and return the reached state
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_43path(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_42path[] = "\n        Follows the path labeled by a list ``l`` and return the reached state\n\n        INPUT:\n\n        - ``l`` -- list of indices of labels\n        - ``i`` -- (default: ``None``) the initial state\n\n        OUTPUT:\n\n        int \n        return the state reached after following the path\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a'), (2,3,'b')], i=2)\n            sage: a.path([1])\n            3\n            sage: a.path([0, 2])\n            -1\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_43path(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_l = 0;
  PyObject *__pyx_v_i = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("path (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_l,&__pyx_n_s_i,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_l)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "path") < 0)) __PYX_ERR(0, 2285, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_l = ((PyObject*)values[0]);
    __pyx_v_i = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("path", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2285, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.path", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_l), (&PyList_Type), 1, "l", 1))) __PYX_ERR(0, 2285, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_42path(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_l, __pyx_v_i);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_42path(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l, PyObject *__pyx_v_i) {
  PyObject *__pyx_v_j = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("path", 0);
  __Pyx_INCREF(__pyx_v_i);

  /* "automata/cautomata.pyx":2307
 *             -1
 *         """
 *         if i is None:             # <<<<<<<<<<<<<<
 *             i = self.a.i
 *         for j in l:
 */
  __pyx_t_1 = (__pyx_v_i == Py_None);
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":2308
 *         """
 *         if i is None:
 *             i = self.a.i             # <<<<<<<<<<<<<<
 *         for j in l:
 *             i = self.successor(i, j)
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_self->a->i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2308, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":2307
 *             -1
 *         """
 *         if i is None:             # <<<<<<<<<<<<<<
 *             i = self.a.i
 *         for j in l:
 */
  }

  /* "automata/cautomata.pyx":2309
 *         if i is None:
 *             i = self.a.i
 *         for j in l:             # <<<<<<<<<<<<<<
 *             i = self.successor(i, j)
 *         return i
 */
  if (unlikely(__pyx_v_l == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 2309, __pyx_L1_error)
  }
  __pyx_t_3 = __pyx_v_l; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
  for (;;) {
    if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_5 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_5); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 2309, __pyx_L1_error)
    #else
    __pyx_t_5 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2309, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_j, __pyx_t_5);
    __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":2310
 *             i = self.a.i
 *         for j in l:
 *             i = self.successor(i, j)             # <<<<<<<<<<<<<<
 *         return i
 * 
 */
    __pyx_t_6 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_successor); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2310, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __pyx_t_7 = NULL;
    __pyx_t_8 = 0;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_6, function);
        __pyx_t_8 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_i, __pyx_v_j};
      __pyx_t_5 = __Pyx_PyFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2310, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_6)) {
      PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_v_i, __pyx_v_j};
      __pyx_t_5 = __Pyx_PyCFunction_FastCall(__pyx_t_6, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2310, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_GOTREF(__pyx_t_5);
    } else
    #endif
    {
      __pyx_t_9 = PyTuple_New(2+__pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2310, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      if (__pyx_t_7) {
        __Pyx_GIVEREF(__pyx_t_7); PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_7); __pyx_t_7 = NULL;
      }
      __Pyx_INCREF(__pyx_v_i);
      __Pyx_GIVEREF(__pyx_v_i);
      PyTuple_SET_ITEM(__pyx_t_9, 0+__pyx_t_8, __pyx_v_i);
      __Pyx_INCREF(__pyx_v_j);
      __Pyx_GIVEREF(__pyx_v_j);
      PyTuple_SET_ITEM(__pyx_t_9, 1+__pyx_t_8, __pyx_v_j);
      __pyx_t_5 = __Pyx_PyObject_Call(__pyx_t_6, __pyx_t_9, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2310, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    }
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_5);
    __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":2309
 *         if i is None:
 *             i = self.a.i
 *         for j in l:             # <<<<<<<<<<<<<<
 *             i = self.successor(i, j)
 *         return i
 */
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":2311
 *         for j in l:
 *             i = self.successor(i, j)
 *         return i             # <<<<<<<<<<<<<<
 * 
 *     def set_successor(self, int i, int j, int k):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_i);
  __pyx_r = __pyx_v_i;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2285
 *         return [j for j in range(self.a.na) if self.a.e[i].f[j] != -1]
 * 
 *     def path(self, list l, i=None):             # <<<<<<<<<<<<<<
 *         """
 *         Follows the path labeled by a list ``l`` and return the reached state
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.path", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_j);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2313
 *         return i
 * 
 *     def set_successor(self, int i, int j, int k):             # <<<<<<<<<<<<<<
 *         """
 *         Set the successor of the state i, following the transition labeled by j.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_45set_successor(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_44set_successor[] = "\n        Set the successor of the state i, following the transition labeled by j.\n        In other words, add a transition from state i to state k labeled by A[j].\n        If k is -1, this permits to remove the transition from state i labeled by A[j].\n\n        INPUT:\n\n        - ``i`` -- int - the input state\n        - ``j`` -- int - the index of a letter\n        - ``k`` -- int - the state we reach\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a'), (2, 3,'b')], i=2)\n            sage: a.set_successor(0, 1, 2)\n            sage: a.successors(0)\n            [0, 1]\n            sage: a.set_successor(0, 4, 2)\n            Traceback (most recent call last):\n            ...\n            ValueError: set_successor(0, 4, 2) : index out of bounds !\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_45set_successor(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_i;
  int __pyx_v_j;
  int __pyx_v_k;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("set_successor (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_i,&__pyx_n_s_j,&__pyx_n_s_k,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_j)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("set_successor", 1, 3, 3, 1); __PYX_ERR(0, 2313, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_k)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("set_successor", 1, 3, 3, 2); __PYX_ERR(0, 2313, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "set_successor") < 0)) __PYX_ERR(0, 2313, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_i = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2313, __pyx_L3_error)
    __pyx_v_j = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_j == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2313, __pyx_L3_error)
    __pyx_v_k = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_k == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2313, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("set_successor", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2313, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.set_successor", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_44set_successor(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_i, __pyx_v_j, __pyx_v_k);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_44set_successor(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i, int __pyx_v_j, int __pyx_v_k) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("set_successor", 0);

  /* "automata/cautomata.pyx":2337
 * 
 *         """
 *         if i < 0 or i >= self.a.n or j < 0 or j >= self.a.na or k < -1 or k >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("set_successor(%s, %s, %s) : index out of bounds !" % (i, j, k))
 *         self.a.e[i].f[j] = k
 */
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_j < 0) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_j >= __pyx_v_self->a->na) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_k < -1L) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_k >= __pyx_v_self->a->n) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":2338
 *         """
 *         if i < 0 or i >= self.a.n or j < 0 or j >= self.a.na or k < -1 or k >= self.a.n:
 *             raise ValueError("set_successor(%s, %s, %s) : index out of bounds !" % (i, j, k))             # <<<<<<<<<<<<<<
 *         self.a.e[i].f[j] = k
 * 
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2338, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyInt_From_int(__pyx_v_j); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2338, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = __Pyx_PyInt_From_int(__pyx_v_k); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2338, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = PyTuple_New(3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2338, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_t_4);
    __Pyx_GIVEREF(__pyx_t_5);
    PyTuple_SET_ITEM(__pyx_t_6, 2, __pyx_t_5);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyString_Format(__pyx_kp_s_set_successor_s_s_s_index_out_of, __pyx_t_6); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2338, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_5); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2338, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_Raise(__pyx_t_6, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __PYX_ERR(0, 2338, __pyx_L1_error)

    /* "automata/cautomata.pyx":2337
 * 
 *         """
 *         if i < 0 or i >= self.a.n or j < 0 or j >= self.a.na or k < -1 or k >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("set_successor(%s, %s, %s) : index out of bounds !" % (i, j, k))
 *         self.a.e[i].f[j] = k
 */
  }

  /* "automata/cautomata.pyx":2339
 *         if i < 0 or i >= self.a.n or j < 0 or j >= self.a.na or k < -1 or k >= self.a.n:
 *             raise ValueError("set_successor(%s, %s, %s) : index out of bounds !" % (i, j, k))
 *         self.a.e[i].f[j] = k             # <<<<<<<<<<<<<<
 * 
 *     def zero_complete_in_place(self, z=None, verb=False):
 */
  ((__pyx_v_self->a->e[__pyx_v_i]).f[__pyx_v_j]) = __pyx_v_k;

  /* "automata/cautomata.pyx":2313
 *         return i
 * 
 *     def set_successor(self, int i, int j, int k):             # <<<<<<<<<<<<<<
 *         """
 *         Set the successor of the state i, following the transition labeled by j.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.set_successor", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2341
 *         self.a.e[i].f[j] = k
 * 
 *     def zero_complete_in_place(self, z=None, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute an automaton recognizing the language L(l*)^(-1), where L is
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_47zero_complete_in_place(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_46zero_complete_in_place[] = "\n        Compute an automaton recognizing the language L(l*)^(-1), where L is\n        the language of self and l is the letter of index z.\n        This language L(l*)^(-1) is the set of words u such that there exists\n        an integer n such that ul^n is in the language of self.\n\n        INPUT:\n\n        - ``z`` -- (default: ``None``) - index of the letter l\n            If ``None``, take the index of 0.\n\n        - ``verb`` -- (default: ``False``) if True, print debugging informations\n\n        OUTPUT:\n\n        Return a :class:`DeterministicAutomaton`.\n\n        EXAMPLES::\n\n            sage: a = dag.Word([0,1,0])\n            sage: a.zero_complete_in_place()\n            sage: a.final_states\n            [2, 3]\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b')], i=0)\n            sage: a.zero_complete_in_place()\n            Traceback (most recent call last):\n            ...\n            ValueError: 0 is not in list\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_47zero_complete_in_place(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_z = 0;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("zero_complete_in_place (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_z,&__pyx_n_s_verb,0};
    PyObject* values[2] = {0,0};
    values[0] = ((PyObject *)Py_None);
    values[1] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_z);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "zero_complete_in_place") < 0)) __PYX_ERR(0, 2341, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_z = values[0];
    __pyx_v_verb = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("zero_complete_in_place", 0, 0, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2341, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.zero_complete_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_46zero_complete_in_place(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_z, __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_46zero_complete_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_z, PyObject *__pyx_v_verb) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  bool __pyx_t_7;
  __Pyx_RefNannySetupContext("zero_complete_in_place", 0);
  __Pyx_INCREF(__pyx_v_z);

  /* "automata/cautomata.pyx":2375
 * 
 *         """
 *         if z is None:             # <<<<<<<<<<<<<<
 *             z = self.A.index(0)
 *         sig_on()
 */
  __pyx_t_1 = (__pyx_v_z == Py_None);
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":2376
 *         """
 *         if z is None:
 *             z = self.A.index(0)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         ZeroComplete(self.a, z, verb)
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->A, __pyx_n_s_index); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2376, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_3 = (__pyx_t_5) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_5, __pyx_int_0) : __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_int_0);
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2376, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF_SET(__pyx_v_z, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":2375
 * 
 *         """
 *         if z is None:             # <<<<<<<<<<<<<<
 *             z = self.A.index(0)
 *         sig_on()
 */
  }

  /* "automata/cautomata.pyx":2377
 *         if z is None:
 *             z = self.A.index(0)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         ZeroComplete(self.a, z, verb)
 *         sig_off()
 */
  __pyx_t_6 = sig_on(); if (unlikely(__pyx_t_6 == ((int)0))) __PYX_ERR(0, 2377, __pyx_L1_error)

  /* "automata/cautomata.pyx":2378
 *             z = self.A.index(0)
 *         sig_on()
 *         ZeroComplete(self.a, z, verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 * 
 */
  __pyx_t_6 = __Pyx_PyInt_As_int(__pyx_v_z); if (unlikely((__pyx_t_6 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2378, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_7 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 2378, __pyx_L1_error)
  ZeroComplete(__pyx_v_self->a, __pyx_t_6, __pyx_t_7);

  /* "automata/cautomata.pyx":2379
 *         sig_on()
 *         ZeroComplete(self.a, z, verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 * 
 *     def concatenate_with_zero_star(self, z=None, sink_state=False, simplify=True, verb=False):
 */
  sig_off();

  /* "automata/cautomata.pyx":2341
 *         self.a.e[i].f[j] = k
 * 
 *     def zero_complete_in_place(self, z=None, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute an automaton recognizing the language L(l*)^(-1), where L is
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.zero_complete_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_z);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2381
 *         sig_off()
 * 
 *     def concatenate_with_zero_star(self, z=None, sink_state=False, simplify=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute an automaton recognizing the language L(l*), where L is
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_49concatenate_with_zero_star(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_48concatenate_with_zero_star[] = "\n        Compute an automaton recognizing the language L(l*), where L is\n        the language of self and l is the letter of index z.\n\n        INPUT:\n\n        - ``z`` -- (default: ``None``) - index of the letter l\n            If ``None`` take the index of 0.\n\n        - ``sink_state`` --  (default: ``False``) - give a result with or without sink state\n\n        - ``simplify`` -- (default: ``True``) - prune and minimize the result\n            (this removes the sink state)\n\n        - ``verb`` -- (default: ``False``) if True, print debugging informations\n\n        OUTPUT:\n\n        Return a :class:`DeterministicAutomaton`.\n\n        EXAMPLES::\n\n            sage: a = dag.Word([0,1,0])\n            sage: a.concatenate_with_zero_star()\n            DeterministicAutomaton with 4 states and an alphabet of 2 letters\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b')], i=0)\n            sage: a.concatenate_with_zero_star(z=0)\n            DeterministicAutomaton with 2 states and an alphabet of 2 letters\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b')], i=0)\n            sage: a.concatenate_with_zero_star(z=0, sink_state=True, simplify=False)\n            DeterministicAutomaton with 5 states and an alphabet of 2 letters\n            sage: b = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b')])\n            sage: b.concatenate_with_zero_star(True)\n            DeterministicAutomaton with 1 state and an alphabet of 2 letters\n\n        TESTS::\n\n            sage: a = dag.Word(['a', 'b'])\n            sage: a.concatenate_with_zero_star()\n            Traceback (most recent call last):\n            ...\n            ValueError: 0 is not in list\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_49concatenate_with_zero_star(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_z = 0;
  PyObject *__pyx_v_sink_state = 0;
  PyObject *__pyx_v_simplify = 0;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("concatenate_with_zero_star (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_z,&__pyx_n_s_sink_state,&__pyx_n_s_simplify,&__pyx_n_s_verb,0};
    PyObject* values[4] = {0,0,0,0};
    values[0] = ((PyObject *)Py_None);
    values[1] = ((PyObject *)Py_False);
    values[2] = ((PyObject *)Py_True);
    values[3] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_z);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_sink_state);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_simplify);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "concatenate_with_zero_star") < 0)) __PYX_ERR(0, 2381, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_z = values[0];
    __pyx_v_sink_state = values[1];
    __pyx_v_simplify = values[2];
    __pyx_v_verb = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("concatenate_with_zero_star", 0, 0, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2381, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.concatenate_with_zero_star", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_48concatenate_with_zero_star(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_z, __pyx_v_sink_state, __pyx_v_simplify, __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_48concatenate_with_zero_star(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_z, PyObject *__pyx_v_sink_state, PyObject *__pyx_v_simplify, PyObject *__pyx_v_verb) {
  Automaton __pyx_v_a;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  bool __pyx_t_7;
  bool __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("concatenate_with_zero_star", 0);
  __Pyx_INCREF(__pyx_v_z);

  /* "automata/cautomata.pyx":2427
 *         """
 *         cdef Automaton a
 *         if z is None:             # <<<<<<<<<<<<<<
 *             z = self.A.index(0)
 *         r = DeterministicAutomaton(None)
 */
  __pyx_t_1 = (__pyx_v_z == Py_None);
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":2428
 *         cdef Automaton a
 *         if z is None:
 *             z = self.A.index(0)             # <<<<<<<<<<<<<<
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->A, __pyx_n_s_index); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2428, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_3 = (__pyx_t_5) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_5, __pyx_int_0) : __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_int_0);
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2428, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF_SET(__pyx_v_z, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":2427
 *         """
 *         cdef Automaton a
 *         if z is None:             # <<<<<<<<<<<<<<
 *             z = self.A.index(0)
 *         r = DeterministicAutomaton(None)
 */
  }

  /* "automata/cautomata.pyx":2429
 *         if z is None:
 *             z = self.A.index(0)
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         a = ZeroComplete2(self.a, z, sink_state, verb)
 */
  __pyx_t_3 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2429, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":2430
 *             z = self.A.index(0)
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         a = ZeroComplete2(self.a, z, sink_state, verb)
 *         sig_off()
 */
  __pyx_t_6 = sig_on(); if (unlikely(__pyx_t_6 == ((int)0))) __PYX_ERR(0, 2430, __pyx_L1_error)

  /* "automata/cautomata.pyx":2431
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         a = ZeroComplete2(self.a, z, sink_state, verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = a
 */
  __pyx_t_6 = __Pyx_PyInt_As_int(__pyx_v_z); if (unlikely((__pyx_t_6 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2431, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyInt_As_bool(__pyx_v_sink_state); if (unlikely((__pyx_t_7 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 2431, __pyx_L1_error)
  __pyx_t_8 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_8 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 2431, __pyx_L1_error)
  __pyx_v_a = ZeroComplete2(__pyx_v_self->a, __pyx_t_6, __pyx_t_7, __pyx_t_8);

  /* "automata/cautomata.pyx":2432
 *         sig_on()
 *         a = ZeroComplete2(self.a, z, sink_state, verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = a
 *         r.A = self.A
 */
  sig_off();

  /* "automata/cautomata.pyx":2433
 *         a = ZeroComplete2(self.a, z, sink_state, verb)
 *         sig_off()
 *         r.a[0] = a             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         r.S = None
 */
  (__pyx_v_r->a[0]) = __pyx_v_a;

  /* "automata/cautomata.pyx":2434
 *         sig_off()
 *         r.a[0] = a
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         r.S = None
 *         if simplify:
 */
  __pyx_t_3 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_3);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":2435
 *         r.a[0] = a
 *         r.A = self.A
 *         r.S = None             # <<<<<<<<<<<<<<
 *         if simplify:
 *             return r.prune().minimize()
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_r->S);
  __Pyx_DECREF(__pyx_v_r->S);
  __pyx_v_r->S = ((PyObject*)Py_None);

  /* "automata/cautomata.pyx":2436
 *         r.A = self.A
 *         r.S = None
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return r.prune().minimize()
 *         else:
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_simplify); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 2436, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":2437
 *         r.S = None
 *         if simplify:
 *             return r.prune().minimize()             # <<<<<<<<<<<<<<
 *         else:
 *             return r
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_r), __pyx_n_s_prune); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2437, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_9 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_9)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_9);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_4 = (__pyx_t_9) ? __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_9) : __Pyx_PyObject_CallNoArg(__pyx_t_5);
    __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
    if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2437, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_minimize); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2437, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_3 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_5);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2437, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_r = __pyx_t_3;
    __pyx_t_3 = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":2436
 *         r.A = self.A
 *         r.S = None
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return r.prune().minimize()
 *         else:
 */
  }

  /* "automata/cautomata.pyx":2439
 *             return r.prune().minimize()
 *         else:
 *             return r             # <<<<<<<<<<<<<<
 * 
 *     def left_concatenate_with_zero_star(self, z=None, simplify=True):
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(((PyObject *)__pyx_v_r));
    __pyx_r = ((PyObject *)__pyx_v_r);
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":2381
 *         sig_off()
 * 
 *     def concatenate_with_zero_star(self, z=None, sink_state=False, simplify=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute an automaton recognizing the language L(l*), where L is
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.concatenate_with_zero_star", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_z);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2441
 *             return r
 * 
 *     def left_concatenate_with_zero_star(self, z=None, simplify=True):             # <<<<<<<<<<<<<<
 *         """
 *         Compute an automaton recognizing the language (l*)L, where L is
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_51left_concatenate_with_zero_star(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_50left_concatenate_with_zero_star[] = "\n        Compute an automaton recognizing the language (l*)L, where L is\n        the language of self and l is the letter of index z.\n\n        INPUT:\n\n        - ``z`` - (default: ``None``) - index of the letter l\n            If ``None``, take the index of letter 0.\n\n        - ``simplify`` - (default: ``True``) - if True, prune and minimize the result\n\n        OUTPUT:\n\n        Return a :class:`DeterministicAutomaton` whose language is the set of words of\n        the language of a with some zeroes on the beggining\n        (we call zero the letter of index z).\n\n        EXAMPLES::\n\n            sage: a = dag.Word([0,1,0])\n            sage: a.left_concatenate_with_zero_star()\n            DeterministicAutomaton with 4 states and an alphabet of 2 letters\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b')], i=0)\n            sage: a.left_concatenate_with_zero_star(0)\n            DeterministicAutomaton with 2 states and an alphabet of 2 letters\n            sage: a.left_concatenate_with_zero_star(1)\n            DeterministicAutomaton with 2 states and an alphabet of 2 letters\n            sage: b = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b')])\n            sage: b.left_concatenate_with_zero_star(1)\n            DeterministicAutomaton with 1 state and an alphabet of 2 letters\n\n        TESTS::\n\n            sage: a = dag.Word(['a', 'b'])\n            sage: a.left_concatenate_with_zero_star()\n            Traceback (most recent call last):\n            ...\n            ValueError: 0 is not in list\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_51left_concatenate_with_zero_star(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_z = 0;
  PyObject *__pyx_v_simplify = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("left_concatenate_with_zero_star (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_z,&__pyx_n_s_simplify,0};
    PyObject* values[2] = {0,0};
    values[0] = ((PyObject *)Py_None);
    values[1] = ((PyObject *)Py_True);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_z);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_simplify);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "left_concatenate_with_zero_star") < 0)) __PYX_ERR(0, 2441, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_z = values[0];
    __pyx_v_simplify = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("left_concatenate_with_zero_star", 0, 0, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2441, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.left_concatenate_with_zero_star", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_50left_concatenate_with_zero_star(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_z, __pyx_v_simplify);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_50left_concatenate_with_zero_star(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_z, PyObject *__pyx_v_simplify) {
  Automaton __pyx_v_a;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("left_concatenate_with_zero_star", 0);
  __Pyx_INCREF(__pyx_v_z);

  /* "automata/cautomata.pyx":2484
 *         """
 *         cdef Automaton a
 *         if z is None:             # <<<<<<<<<<<<<<
 *             z = self.A.index(0)
 *         r = DeterministicAutomaton(None)
 */
  __pyx_t_1 = (__pyx_v_z == Py_None);
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":2485
 *         cdef Automaton a
 *         if z is None:
 *             z = self.A.index(0)             # <<<<<<<<<<<<<<
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 */
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->A, __pyx_n_s_index); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2485, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_3 = (__pyx_t_5) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_5, __pyx_int_0) : __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_int_0);
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2485, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF_SET(__pyx_v_z, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":2484
 *         """
 *         cdef Automaton a
 *         if z is None:             # <<<<<<<<<<<<<<
 *             z = self.A.index(0)
 *         r = DeterministicAutomaton(None)
 */
  }

  /* "automata/cautomata.pyx":2486
 *         if z is None:
 *             z = self.A.index(0)
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         a = ZeroInv(self.a, z)  # list(self.A).index(self.A[z]))
 */
  __pyx_t_3 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2486, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":2487
 *             z = self.A.index(0)
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         a = ZeroInv(self.a, z)  # list(self.A).index(self.A[z]))
 *         sig_off()
 */
  __pyx_t_6 = sig_on(); if (unlikely(__pyx_t_6 == ((int)0))) __PYX_ERR(0, 2487, __pyx_L1_error)

  /* "automata/cautomata.pyx":2488
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         a = ZeroInv(self.a, z)  # list(self.A).index(self.A[z]))             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = a
 */
  __pyx_t_6 = __Pyx_PyInt_As_int(__pyx_v_z); if (unlikely((__pyx_t_6 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2488, __pyx_L1_error)
  __pyx_v_a = ZeroInv(__pyx_v_self->a, __pyx_t_6);

  /* "automata/cautomata.pyx":2489
 *         sig_on()
 *         a = ZeroInv(self.a, z)  # list(self.A).index(self.A[z]))
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = a
 *         r.A = self.A
 */
  sig_off();

  /* "automata/cautomata.pyx":2490
 *         a = ZeroInv(self.a, z)  # list(self.A).index(self.A[z]))
 *         sig_off()
 *         r.a[0] = a             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         r.S = None
 */
  (__pyx_v_r->a[0]) = __pyx_v_a;

  /* "automata/cautomata.pyx":2491
 *         sig_off()
 *         r.a[0] = a
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         r.S = None
 *         if simplify:
 */
  __pyx_t_3 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_3);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":2492
 *         r.a[0] = a
 *         r.A = self.A
 *         r.S = None             # <<<<<<<<<<<<<<
 *         if simplify:
 *             return r.prune().minimize()
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_r->S);
  __Pyx_DECREF(__pyx_v_r->S);
  __pyx_v_r->S = ((PyObject*)Py_None);

  /* "automata/cautomata.pyx":2493
 *         r.A = self.A
 *         r.S = None
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return r.prune().minimize()
 *         else:
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_simplify); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 2493, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":2494
 *         r.S = None
 *         if simplify:
 *             return r.prune().minimize()             # <<<<<<<<<<<<<<
 *         else:
 *             return r
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_r), __pyx_n_s_prune); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2494, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_4 = (__pyx_t_7) ? __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_7) : __Pyx_PyObject_CallNoArg(__pyx_t_5);
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2494, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_t_4, __pyx_n_s_minimize); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2494, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_3 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_5);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2494, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_r = __pyx_t_3;
    __pyx_t_3 = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":2493
 *         r.A = self.A
 *         r.S = None
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return r.prune().minimize()
 *         else:
 */
  }

  /* "automata/cautomata.pyx":2496
 *             return r.prune().minimize()
 *         else:
 *             return r             # <<<<<<<<<<<<<<
 * 
 *     def difference(self, DeterministicAutomaton a, bool det=True, bool simplify=True):
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(((PyObject *)__pyx_v_r));
    __pyx_r = ((PyObject *)__pyx_v_r);
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":2441
 *             return r
 * 
 *     def left_concatenate_with_zero_star(self, z=None, simplify=True):             # <<<<<<<<<<<<<<
 *         """
 *         Compute an automaton recognizing the language (l*)L, where L is
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.left_concatenate_with_zero_star", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_z);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2498
 *             return r
 * 
 *     def difference(self, DeterministicAutomaton a, bool det=True, bool simplify=True):             # <<<<<<<<<<<<<<
 *         """
 *         Compute an automaton whose language is the set of differences of the two languages.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_53difference(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_52difference[] = "\n        Compute an automaton whose language is the set of differences of the two languages.\n\n        INPUT:\n\n        - ``a`` - DeterministicAutomaton - the automaton of the language that we substract\n        - ``det`` - bool (default: ``True``) - determinize the result\n        - ``simplify`` - bool (default: ``True``) - prune and minimize the result\n\n        OUTPUT:\n\n        Return a :class:`DeterministicAutomaton` if ``det`` is True, and return a :class:`Cautomaton` otherwise.\n\n        EXAMPLES::\n\n            sage: a = dag.AnyWord([0, 1])\n            sage: a.difference(a)\n            DeterministicAutomaton with 1 state and an alphabet of 3 letters\n\n        TESTS::\n\n            sage: a = dag.AnyWord(['a', 'b'])\n            sage: a.difference(a)\n            Traceback (most recent call last):\n            ...\n            TypeError: unsupported operand type(s) for -: 'str' and 'str'\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_53difference(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a = 0;
  bool __pyx_v_det;
  bool __pyx_v_simplify;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("difference (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a,&__pyx_n_s_det,&__pyx_n_s_simplify,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_det);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_simplify);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "difference") < 0)) __PYX_ERR(0, 2498, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)values[0]);
    if (values[1]) {
      __pyx_v_det = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_det == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 2498, __pyx_L3_error)
    } else {
      __pyx_v_det = ((bool)1);
    }
    if (values[2]) {
      __pyx_v_simplify = __Pyx_PyInt_As_bool(values[2]); if (unlikely((__pyx_v_simplify == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 2498, __pyx_L3_error)
    } else {
      __pyx_v_simplify = ((bool)1);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("difference", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2498, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.difference", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_a), __pyx_ptype_8automata_9cautomata_DeterministicAutomaton, 1, "a", 0))) __PYX_ERR(0, 2498, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_52difference(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_a, __pyx_v_det, __pyx_v_simplify);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_52difference(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, bool __pyx_v_det, bool __pyx_v_simplify) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = 0;
  PyObject *__pyx_v_d = 0;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_v_j = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  Py_ssize_t __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("difference", 0);

  /* "automata/cautomata.pyx":2529
 *         cdef CAutomaton nr
 *         cdef dict d
 *         r = self.product(a)             # <<<<<<<<<<<<<<
 *         d = {}
 *         for i in self.A:
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_product); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_2, __pyx_t_3, ((PyObject *)__pyx_v_a)) : __Pyx_PyObject_CallOneArg(__pyx_t_2, ((PyObject *)__pyx_v_a));
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2529, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_1, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 2529, __pyx_L1_error)
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":2530
 *         cdef dict d
 *         r = self.product(a)
 *         d = {}             # <<<<<<<<<<<<<<
 *         for i in self.A:
 *             for j in a.A:
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2530, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_d = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":2531
 *         r = self.product(a)
 *         d = {}
 *         for i in self.A:             # <<<<<<<<<<<<<<
 *             for j in a.A:
 *                 d[(i, j)] = i-j
 */
  if (unlikely(__pyx_v_self->A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 2531, __pyx_L1_error)
  }
  __pyx_t_1 = __pyx_v_self->A; __Pyx_INCREF(__pyx_t_1); __pyx_t_4 = 0;
  for (;;) {
    if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_2 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 2531, __pyx_L1_error)
    #else
    __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2531, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":2532
 *         d = {}
 *         for i in self.A:
 *             for j in a.A:             # <<<<<<<<<<<<<<
 *                 d[(i, j)] = i-j
 *         return r.project(d, det=det, simplify=simplify)
 */
    if (unlikely(__pyx_v_a->A == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
      __PYX_ERR(0, 2532, __pyx_L1_error)
    }
    __pyx_t_2 = __pyx_v_a->A; __Pyx_INCREF(__pyx_t_2); __pyx_t_5 = 0;
    for (;;) {
      if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_2)) break;
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_3); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 2532, __pyx_L1_error)
      #else
      __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2532, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      #endif
      __Pyx_XDECREF_SET(__pyx_v_j, __pyx_t_3);
      __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":2533
 *         for i in self.A:
 *             for j in a.A:
 *                 d[(i, j)] = i-j             # <<<<<<<<<<<<<<
 *         return r.project(d, det=det, simplify=simplify)
 * 
 */
      __pyx_t_3 = PyNumber_Subtract(__pyx_v_i, __pyx_v_j); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2533, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_6 = PyTuple_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2533, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_INCREF(__pyx_v_i);
      __Pyx_GIVEREF(__pyx_v_i);
      PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_v_i);
      __Pyx_INCREF(__pyx_v_j);
      __Pyx_GIVEREF(__pyx_v_j);
      PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_v_j);
      if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_t_6, __pyx_t_3) < 0)) __PYX_ERR(0, 2533, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":2532
 *         d = {}
 *         for i in self.A:
 *             for j in a.A:             # <<<<<<<<<<<<<<
 *                 d[(i, j)] = i-j
 *         return r.project(d, det=det, simplify=simplify)
 */
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":2531
 *         r = self.product(a)
 *         d = {}
 *         for i in self.A:             # <<<<<<<<<<<<<<
 *             for j in a.A:
 *                 d[(i, j)] = i-j
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":2534
 *             for j in a.A:
 *                 d[(i, j)] = i-j
 *         return r.project(d, det=det, simplify=simplify)             # <<<<<<<<<<<<<<
 * 
 *     def prune_stop(self, verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_r), __pyx_n_s_project); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2534, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PyTuple_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2534, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_INCREF(__pyx_v_d);
  __Pyx_GIVEREF(__pyx_v_d);
  PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_d);
  __pyx_t_3 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2534, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_6 = __Pyx_PyInt_From_bool(__pyx_v_det); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2534, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_det, __pyx_t_6) < 0) __PYX_ERR(0, 2534, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = __Pyx_PyInt_From_bool(__pyx_v_simplify); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2534, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_simplify, __pyx_t_6) < 0) __PYX_ERR(0, 2534, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = __Pyx_PyObject_Call(__pyx_t_1, __pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2534, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_6;
  __pyx_t_6 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2498
 *             return r
 * 
 *     def difference(self, DeterministicAutomaton a, bool det=True, bool simplify=True):             # <<<<<<<<<<<<<<
 *         """
 *         Compute an automaton whose language is the set of differences of the two languages.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.difference", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_j);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2536
 *         return r.project(d, det=det, simplify=simplify)
 * 
 *     def prune_stop(self, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Prune every stop state : remove all accessible states from which there no infinite way.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_55prune_stop(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_54prune_stop[] = "\n        Prune every stop state : remove all accessible states from which there no infinite way.\n\n        INPUT:\n\n        - ``verb`` -- boolean (default: ``False``) if True, print\n          debugging informations\n\n        OUTPUT:\n\n        Return the pruned :class:`DeterministicAutomaton`.\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b')], i=0)\n            sage: a.prune_stop()\n            DeterministicAutomaton with 0 state and an alphabet of 2 letters\n            sage: b = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b')])\n            sage: b.prune_stop()\n            DeterministicAutomaton with 0 state and an alphabet of 2 letters\n\n            sage: a = DeterministicAutomaton([(10,10,'x'),(10,20,'y'),(20,20,'z'),                (20,10,'y'),(20,30,'x'),(30,30,'y'),(30,10,'z'),(30,20,'x'),                (10,30,'z')], i=10)\n            sage: a.prune_stop()\n            DeterministicAutomaton with 3 states and an alphabet of 3 letters\n\n            sage: a = DeterministicAutomaton([(10,10,'x'),(10,20,'y'),(20,20,'z'),                (20,10,'y'),(20,30,'x'),(30,30,'y'),(30,10,'z'),(30,20,'x'),                (10,30,'z')], i=10, final_states=[])\n            sage: a.prune_stop()\n            DeterministicAutomaton with 3 states and an alphabet of 3 letters\n\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b')], i=0)\n            sage: a.prune_stop(True)\n            induction...\n            States counter = 0\n            count...\n            cpt = 0\n            final states...\n            DeterministicAutomaton with 0 state and an alphabet of 2 letters\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_55prune_stop(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("prune_stop (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_verb,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "prune_stop") < 0)) __PYX_ERR(0, 2536, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_verb = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("prune_stop", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2536, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.prune_stop", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_54prune_stop(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_54prune_stop(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_verb) {
  Automaton __pyx_v_a;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  bool __pyx_t_3;
  __Pyx_RefNannySetupContext("prune_stop", 0);

  /* "automata/cautomata.pyx":2584
 *         """
 *         cdef Automaton a
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         a = prune_inf(self.a[0], verb)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2584, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":2585
 *         cdef Automaton a
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         a = prune_inf(self.a[0], verb)
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 2585, __pyx_L1_error)

  /* "automata/cautomata.pyx":2586
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         a = prune_inf(self.a[0], verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = a
 */
  __pyx_t_3 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_3 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 2586, __pyx_L1_error)
  __pyx_v_a = prune_inf((__pyx_v_self->a[0]), __pyx_t_3);

  /* "automata/cautomata.pyx":2587
 *         sig_on()
 *         a = prune_inf(self.a[0], verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = a
 *         r.A = self.A
 */
  sig_off();

  /* "automata/cautomata.pyx":2588
 *         a = prune_inf(self.a[0], verb)
 *         sig_off()
 *         r.a[0] = a             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         r.S = None
 */
  (__pyx_v_r->a[0]) = __pyx_v_a;

  /* "automata/cautomata.pyx":2589
 *         sig_off()
 *         r.a[0] = a
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         r.S = None
 *         return r
 */
  __pyx_t_1 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":2590
 *         r.a[0] = a
 *         r.A = self.A
 *         r.S = None             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_r->S);
  __Pyx_DECREF(__pyx_v_r->S);
  __pyx_v_r->S = ((PyObject*)Py_None);

  /* "automata/cautomata.pyx":2591
 *         r.A = self.A
 *         r.S = None
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def prune_non_reachable(self, verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2536
 *         return r.project(d, det=det, simplify=simplify)
 * 
 *     def prune_stop(self, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Prune every stop state : remove all accessible states from which there no infinite way.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.prune_stop", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2593
 *         return r
 * 
 *     def prune_non_reachable(self, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Prune the automaton:
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_57prune_non_reachable(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_56prune_non_reachable[] = "\n        Prune the automaton:\n        remove all non-reachable states\n\n        INPUT:\n\n        - ``verb`` -- boolean (default: ``False``) if True, print debugging informations\n\n        OUTPUT:\n\n        Return the pruned :class:`DeterministicAutomaton`.\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b'), (1, 3, 'b')], i=0)\n            sage: a.prune_non_reachable()\n            DeterministicAutomaton with 3 states and an alphabet of 2 letters\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b'), (1, 3, 'b')])\n            sage: a.prune_non_reachable()\n            DeterministicAutomaton with 0 state and an alphabet of 2 letters\n            sage: b = DeterministicAutomaton([(0, 1, 'a'), (0, 3, 'b'), (1, 3, 'b')])\n            sage: b.prune_non_reachable()\n            DeterministicAutomaton with 0 state and an alphabet of 2 letters\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_57prune_non_reachable(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("prune_non_reachable (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_verb,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "prune_non_reachable") < 0)) __PYX_ERR(0, 2593, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_verb = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("prune_non_reachable", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2593, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.prune_non_reachable", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_56prune_non_reachable(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_56prune_non_reachable(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_verb) {
  Automaton __pyx_v_a;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  bool __pyx_t_6;
  __Pyx_RefNannySetupContext("prune_non_reachable", 0);

  /* "automata/cautomata.pyx":2618
 *             DeterministicAutomaton with 0 state and an alphabet of 2 letters
 *         """
 *         if self.a.i == -1:             # <<<<<<<<<<<<<<
 *             return DeterministicAutomaton([], A=self.alphabet)
 *         cdef Automaton a
 */
  __pyx_t_1 = ((__pyx_v_self->a->i == -1L) != 0);
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":2619
 *         """
 *         if self.a.i == -1:
 *             return DeterministicAutomaton([], A=self.alphabet)             # <<<<<<<<<<<<<<
 *         cdef Automaton a
 *         r = DeterministicAutomaton(None)
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2619, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = PyTuple_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2619, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_2);
    PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2619, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_alphabet); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2619, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if (PyDict_SetItem(__pyx_t_2, __pyx_n_s_A, __pyx_t_4) < 0) __PYX_ERR(0, 2619, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_t_3, __pyx_t_2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2619, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":2618
 *             DeterministicAutomaton with 0 state and an alphabet of 2 letters
 *         """
 *         if self.a.i == -1:             # <<<<<<<<<<<<<<
 *             return DeterministicAutomaton([], A=self.alphabet)
 *         cdef Automaton a
 */
  }

  /* "automata/cautomata.pyx":2621
 *             return DeterministicAutomaton([], A=self.alphabet)
 *         cdef Automaton a
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         a = pruneI(self.a[0], verb)
 */
  __pyx_t_4 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 2621, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_4);
  __pyx_t_4 = 0;

  /* "automata/cautomata.pyx":2622
 *         cdef Automaton a
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         a = pruneI(self.a[0], verb)
 *         sig_off()
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 2622, __pyx_L1_error)

  /* "automata/cautomata.pyx":2623
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         a = pruneI(self.a[0], verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = a
 */
  __pyx_t_6 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_6 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 2623, __pyx_L1_error)
  __pyx_v_a = pruneI((__pyx_v_self->a[0]), __pyx_t_6);

  /* "automata/cautomata.pyx":2624
 *         sig_on()
 *         a = pruneI(self.a[0], verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = a
 *         r.A = self.A
 */
  sig_off();

  /* "automata/cautomata.pyx":2625
 *         a = pruneI(self.a[0], verb)
 *         sig_off()
 *         r.a[0] = a             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         r.S = None
 */
  (__pyx_v_r->a[0]) = __pyx_v_a;

  /* "automata/cautomata.pyx":2626
 *         sig_off()
 *         r.a[0] = a
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         r.S = None
 *         return r
 */
  __pyx_t_4 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_4);
  __Pyx_GIVEREF(__pyx_t_4);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_4);
  __pyx_t_4 = 0;

  /* "automata/cautomata.pyx":2627
 *         r.a[0] = a
 *         r.A = self.A
 *         r.S = None             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_r->S);
  __Pyx_DECREF(__pyx_v_r->S);
  __pyx_v_r->S = ((PyObject*)Py_None);

  /* "automata/cautomata.pyx":2628
 *         r.A = self.A
 *         r.S = None
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def prune(self, verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2593
 *         return r
 * 
 *     def prune_non_reachable(self, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Prune the automaton:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.prune_non_reachable", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2630
 *         return r
 * 
 *     def prune(self, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Prune the automaton:
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_59prune(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_58prune[] = "\n        Prune the automaton:\n        remove all non-reachable and non-co-reachable states\n\n        INPUT:\n\n        - ``verb`` -- boolean (default: ``False``) if True, print debugging informations\n\n        OUTPUT:\n\n        Return the pruned :class:`DeterministicAutomaton`.\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.prune()\n            DeterministicAutomaton with 2 states and an alphabet of 2 letters\n            sage: b = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')])\n            sage: b.prune()\n            DeterministicAutomaton with 0 state and an alphabet of 2 letters\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_59prune(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("prune (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_verb,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "prune") < 0)) __PYX_ERR(0, 2630, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_verb = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("prune", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2630, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.prune", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_58prune(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_58prune(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_verb) {
  Automaton __pyx_v_a;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  bool __pyx_t_3;
  __Pyx_RefNannySetupContext("prune", 0);

  /* "automata/cautomata.pyx":2654
 *         """
 *         cdef Automaton a
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         a = prune(self.a[0], verb)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2654, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":2655
 *         cdef Automaton a
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         a = prune(self.a[0], verb)
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 2655, __pyx_L1_error)

  /* "automata/cautomata.pyx":2656
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         a = prune(self.a[0], verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = a
 */
  __pyx_t_3 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_3 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 2656, __pyx_L1_error)
  __pyx_v_a = prune((__pyx_v_self->a[0]), __pyx_t_3);

  /* "automata/cautomata.pyx":2657
 *         sig_on()
 *         a = prune(self.a[0], verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = a
 *         r.A = self.A
 */
  sig_off();

  /* "automata/cautomata.pyx":2658
 *         a = prune(self.a[0], verb)
 *         sig_off()
 *         r.a[0] = a             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         r.S = None
 */
  (__pyx_v_r->a[0]) = __pyx_v_a;

  /* "automata/cautomata.pyx":2659
 *         sig_off()
 *         r.a[0] = a
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         r.S = None
 *         return r
 */
  __pyx_t_1 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":2660
 *         r.a[0] = a
 *         r.A = self.A
 *         r.S = None             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  __Pyx_INCREF(Py_None);
  __Pyx_GIVEREF(Py_None);
  __Pyx_GOTREF(__pyx_v_r->S);
  __Pyx_DECREF(__pyx_v_r->S);
  __pyx_v_r->S = ((PyObject*)Py_None);

  /* "automata/cautomata.pyx":2661
 *         r.A = self.A
 *         r.S = None
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def product(self, DeterministicAutomaton b, dict d=None, bool simplify=True, verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2630
 *         return r
 * 
 *     def prune(self, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Prune the automaton:
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.prune", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2663
 *         return r
 * 
 *     def product(self, DeterministicAutomaton b, dict d=None, bool simplify=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Give the product of the :class:`DeterministicAutomaton` and ``a`` an other
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_61product(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_60product[] = "\n        Give the product of the :class:`DeterministicAutomaton` and ``a`` an other\n        ``DeterministicAutomaton``. Assume the dictionnary ``d`` to be injective.\n\n        INPUT:\n\n        - ``a`` -- :class:`DeterministicAutomaton` to multiply\n\n        - ``d`` -- dict (default: ``None``) - dictionary that associates\n            something to couples of letters of each alphabet.\n            The alphabet of the result is given by values of this dictionnary.\n            If a couple of letters is not a key of this dictionnary,\n            then corresponding edges of the product are avoided.\n\n        - ``simplify`` -- bool (default: ``True``) - prune and minimize the result\n\n        - ``verb`` -- boolean (default: ``False``) - if True,\n            print debugging informations\n\n        OUTPUT:\n\n        Return the product as a :class:`DeterministicAutomaton`.\n\n        EXAMPLES::\n\n            sage: a = dag.Word(['a','b'])\n            sage: b = dag.Word([0,1])\n            sage: c = a.product(b)\n            sage: c\n            DeterministicAutomaton with 3 states and an alphabet of 4 letters\n            sage: c.alphabet\n            [('a', 0), ('a', 1), ('b', 0), ('b', 1)]\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = DeterministicAutomaton([(3, 2, 'c'), (1, 2, 'd')], i=2)\n            sage: a.product(b)\n            DeterministicAutomaton with 1 state and an alphabet of 4 letters\n        \n        TESTS::\n\n            sage: a = dag.Word(['a','b'])\n            sage: b = dag.Word([0,1])\n            sage: c = a.product(b)\n            sage: d = dag.Word([('a',0),('b',1)], A = c.alphabet)\n            sage: c.has_same_language_as(d)\n            True\n            \n            sage: a = dag.Word(['a', 'b'])\n            sage: d = {('a', 'a'):0, ('b', 'b'):0}\n            sage: a.product(a, d)\n            Traceback (most recent call last):\n            ...\n            ValueError: The d""ictionnary is not injective!\n\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = DeterministicAutomaton([(3, 2, 'c'), (1, 2, 'd')], i=2)\n            sage: a.product(b, verb =True)\n            {('b', 'c'): ('b', 'c'), ('a', 'd'): ('a', 'd'), ('a', 'c'): ('a', 'c'), ('b', 'd'): ('b', 'd')}\n            Av=[('a', 'c'), ('a', 'd'), ('b', 'c'), ('b', 'd')]\n            dv={('b', 'c'): 2, ('a', 'd'): 1, ('a', 'c'): 0, ('b', 'd'): 3}\n            {'a': 0, 'b': 1}\n            {'c': 0, 'd': 1}\n            Keys=[('b', 'c'), ('a', 'd'), ('a', 'c'), ('b', 'd')]\n            dC=\n            [ 0 2 1 3 ]\n            Automaton with 4 states, 2 letters.\n            0 --0--> 1\n            2 --1--> 3\n            initial state 0.\n            Automaton with 3 states, 2 letters.\n            0 --1--> 1\n            2 --0--> 1\n            initial state 1.\n            DeterministicAutomaton with 1 state and an alphabet of 4 letters\n            sage: b = DeterministicAutomaton([(3, 2, 'c'), (1, 2, 'd')])\n            sage: a.product(b)\n            DeterministicAutomaton with 1 state and an alphabet of 4 letters\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_61product(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_b = 0;
  PyObject *__pyx_v_d = 0;
  bool __pyx_v_simplify;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("product (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_b,&__pyx_n_s_d,&__pyx_n_s_simplify,&__pyx_n_s_verb,0};
    PyObject* values[4] = {0,0,0,0};
    values[1] = ((PyObject*)Py_None);
    values[3] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_d);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_simplify);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "product") < 0)) __PYX_ERR(0, 2663, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_b = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)values[0]);
    __pyx_v_d = ((PyObject*)values[1]);
    if (values[2]) {
      __pyx_v_simplify = __Pyx_PyInt_As_bool(values[2]); if (unlikely((__pyx_v_simplify == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 2663, __pyx_L3_error)
    } else {
      __pyx_v_simplify = ((bool)1);
    }
    __pyx_v_verb = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("product", 0, 1, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2663, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.product", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_b), __pyx_ptype_8automata_9cautomata_DeterministicAutomaton, 1, "b", 0))) __PYX_ERR(0, 2663, __pyx_L1_error)
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_d), (&PyDict_Type), 1, "d", 1))) __PYX_ERR(0, 2663, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_60product(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_b, __pyx_v_d, __pyx_v_simplify, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_60product(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_b, PyObject *__pyx_v_d, bool __pyx_v_simplify, PyObject *__pyx_v_verb) {
  PyObject *__pyx_v_la = NULL;
  PyObject *__pyx_v_lb = NULL;
  PyObject *__pyx_v_V = NULL;
  Automaton __pyx_v_a;
  Dict __pyx_v_dC;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = NULL;
  PyObject *__pyx_v_Av = NULL;
  PyObject *__pyx_v_dv = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  Py_ssize_t __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  struct __pyx_opt_args_8automata_9cautomata_imagProductDict __pyx_t_9;
  Dict __pyx_t_10;
  struct __pyx_opt_args_8automata_9cautomata_getProductDict __pyx_t_11;
  int __pyx_t_12;
  bool __pyx_t_13;
  __Pyx_RefNannySetupContext("product", 0);
  __Pyx_INCREF(__pyx_v_d);

  /* "automata/cautomata.pyx":2744
 * 
 *         """
 *         if d is None:             # <<<<<<<<<<<<<<
 *             d = {}
 *             for la in self.A:
 */
  __pyx_t_1 = (__pyx_v_d == ((PyObject*)Py_None));
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":2745
 *         """
 *         if d is None:
 *             d = {}             # <<<<<<<<<<<<<<
 *             for la in self.A:
 *                 for lb in b.A:
 */
    __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2745, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF_SET(__pyx_v_d, ((PyObject*)__pyx_t_3));
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":2746
 *         if d is None:
 *             d = {}
 *             for la in self.A:             # <<<<<<<<<<<<<<
 *                 for lb in b.A:
 *                     d[(la, lb)] = (la, lb)
 */
    if (unlikely(__pyx_v_self->A == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
      __PYX_ERR(0, 2746, __pyx_L1_error)
    }
    __pyx_t_3 = __pyx_v_self->A; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
    for (;;) {
      if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_5 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_5); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 2746, __pyx_L1_error)
      #else
      __pyx_t_5 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2746, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      #endif
      __Pyx_XDECREF_SET(__pyx_v_la, __pyx_t_5);
      __pyx_t_5 = 0;

      /* "automata/cautomata.pyx":2747
 *             d = {}
 *             for la in self.A:
 *                 for lb in b.A:             # <<<<<<<<<<<<<<
 *                     d[(la, lb)] = (la, lb)
 *             if verb:
 */
      if (unlikely(__pyx_v_b->A == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
        __PYX_ERR(0, 2747, __pyx_L1_error)
      }
      __pyx_t_5 = __pyx_v_b->A; __Pyx_INCREF(__pyx_t_5); __pyx_t_6 = 0;
      for (;;) {
        if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_5)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_7 = PyList_GET_ITEM(__pyx_t_5, __pyx_t_6); __Pyx_INCREF(__pyx_t_7); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 2747, __pyx_L1_error)
        #else
        __pyx_t_7 = PySequence_ITEM(__pyx_t_5, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2747, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        #endif
        __Pyx_XDECREF_SET(__pyx_v_lb, __pyx_t_7);
        __pyx_t_7 = 0;

        /* "automata/cautomata.pyx":2748
 *             for la in self.A:
 *                 for lb in b.A:
 *                     d[(la, lb)] = (la, lb)             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print(d)
 */
        __pyx_t_7 = PyTuple_New(2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2748, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_INCREF(__pyx_v_la);
        __Pyx_GIVEREF(__pyx_v_la);
        PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_v_la);
        __Pyx_INCREF(__pyx_v_lb);
        __Pyx_GIVEREF(__pyx_v_lb);
        PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_v_lb);
        __pyx_t_8 = PyTuple_New(2); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2748, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_INCREF(__pyx_v_la);
        __Pyx_GIVEREF(__pyx_v_la);
        PyTuple_SET_ITEM(__pyx_t_8, 0, __pyx_v_la);
        __Pyx_INCREF(__pyx_v_lb);
        __Pyx_GIVEREF(__pyx_v_lb);
        PyTuple_SET_ITEM(__pyx_t_8, 1, __pyx_v_lb);
        if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_t_8, __pyx_t_7) < 0)) __PYX_ERR(0, 2748, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

        /* "automata/cautomata.pyx":2747
 *             d = {}
 *             for la in self.A:
 *                 for lb in b.A:             # <<<<<<<<<<<<<<
 *                     d[(la, lb)] = (la, lb)
 *             if verb:
 */
      }
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

      /* "automata/cautomata.pyx":2746
 *         if d is None:
 *             d = {}
 *             for la in self.A:             # <<<<<<<<<<<<<<
 *                 for lb in b.A:
 *                     d[(la, lb)] = (la, lb)
 */
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":2749
 *                 for lb in b.A:
 *                     d[(la, lb)] = (la, lb)
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print(d)
 *         else:
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 2749, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":2750
 *                     d[(la, lb)] = (la, lb)
 *             if verb:
 *                 print(d)             # <<<<<<<<<<<<<<
 *         else:
 *             V = d.values()
 */
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_d); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2750, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":2749
 *                 for lb in b.A:
 *                     d[(la, lb)] = (la, lb)
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print(d)
 *         else:
 */
    }

    /* "automata/cautomata.pyx":2744
 * 
 *         """
 *         if d is None:             # <<<<<<<<<<<<<<
 *             d = {}
 *             for la in self.A:
 */
    goto __pyx_L3;
  }

  /* "automata/cautomata.pyx":2752
 *                 print(d)
 *         else:
 *             V = d.values()             # <<<<<<<<<<<<<<
 *             if len(V) != len(set(V)):
 *                 raise ValueError("The dictionnary is not injective!")
 */
  /*else*/ {
    if (unlikely(__pyx_v_d == Py_None)) {
      PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "values");
      __PYX_ERR(0, 2752, __pyx_L1_error)
    }
    __pyx_t_3 = __Pyx_PyDict_Values(__pyx_v_d); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2752, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_v_V = __pyx_t_3;
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":2753
 *         else:
 *             V = d.values()
 *             if len(V) != len(set(V)):             # <<<<<<<<<<<<<<
 *                 raise ValueError("The dictionnary is not injective!")
 *         cdef Automaton a
 */
    __pyx_t_4 = PyObject_Length(__pyx_v_V); if (unlikely(__pyx_t_4 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2753, __pyx_L1_error)
    __pyx_t_3 = PySet_New(__pyx_v_V); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2753, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_6 = PySet_GET_SIZE(__pyx_t_3); if (unlikely(__pyx_t_6 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2753, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_2 = ((__pyx_t_4 != __pyx_t_6) != 0);
    if (unlikely(__pyx_t_2)) {

      /* "automata/cautomata.pyx":2754
 *             V = d.values()
 *             if len(V) != len(set(V)):
 *                 raise ValueError("The dictionnary is not injective!")             # <<<<<<<<<<<<<<
 *         cdef Automaton a
 *         cdef Dict dC
 */
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__53, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2754, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_Raise(__pyx_t_3, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __PYX_ERR(0, 2754, __pyx_L1_error)

      /* "automata/cautomata.pyx":2753
 *         else:
 *             V = d.values()
 *             if len(V) != len(set(V)):             # <<<<<<<<<<<<<<
 *                 raise ValueError("The dictionnary is not injective!")
 *         cdef Automaton a
 */
    }
  }
  __pyx_L3:;

  /* "automata/cautomata.pyx":2757
 *         cdef Automaton a
 *         cdef Dict dC
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         Av = []
 *         dv = imagProductDict(d, self.A, b.A, Av=Av)
 */
  __pyx_t_3 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2757, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":2758
 *         cdef Dict dC
 *         r = DeterministicAutomaton(None)
 *         Av = []             # <<<<<<<<<<<<<<
 *         dv = imagProductDict(d, self.A, b.A, Av=Av)
 *         if verb:
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2758, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_Av = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":2759
 *         r = DeterministicAutomaton(None)
 *         Av = []
 *         dv = imagProductDict(d, self.A, b.A, Av=Av)             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("Av=%s" % Av)
 */
  __pyx_t_3 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_3);
  __pyx_t_5 = __pyx_v_b->A;
  __Pyx_INCREF(__pyx_t_5);
  __pyx_t_9.__pyx_n = 1;
  __pyx_t_9.Av = __pyx_v_Av;
  __pyx_t_7 = __pyx_f_8automata_9cautomata_imagProductDict(__pyx_v_d, ((PyObject*)__pyx_t_3), ((PyObject*)__pyx_t_5), &__pyx_t_9); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2759, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_v_dv = __pyx_t_7;
  __pyx_t_7 = 0;

  /* "automata/cautomata.pyx":2760
 *         Av = []
 *         dv = imagProductDict(d, self.A, b.A, Av=Av)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 2760, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":2761
 *         dv = imagProductDict(d, self.A, b.A, Av=Av)
 *         if verb:
 *             print("Av=%s" % Av)             # <<<<<<<<<<<<<<
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, self.A, b.A, dv=dv, verb=verb)
 */
    __pyx_t_7 = __Pyx_PyString_Format(__pyx_kp_s_Av_s, __pyx_v_Av); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2761, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_7); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2761, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":2762
 *         if verb:
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)             # <<<<<<<<<<<<<<
 *         dC = getProductDict(d, self.A, b.A, dv=dv, verb=verb)
 *         if verb:
 */
    __pyx_t_5 = __Pyx_PyString_FormatSafe(__pyx_kp_s_dv_s, __pyx_v_dv); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2762, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_7 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_5); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2762, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

    /* "automata/cautomata.pyx":2760
 *         Av = []
 *         dv = imagProductDict(d, self.A, b.A, Av=Av)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)
 */
  }

  /* "automata/cautomata.pyx":2763
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, self.A, b.A, dv=dv, verb=verb)             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("dC=")
 */
  __pyx_t_7 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_7);
  __pyx_t_5 = __pyx_v_b->A;
  __Pyx_INCREF(__pyx_t_5);
  if (!(likely(PyDict_CheckExact(__pyx_v_dv))||((__pyx_v_dv) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_v_dv)->tp_name), 0))) __PYX_ERR(0, 2763, __pyx_L1_error)
  __pyx_t_11.__pyx_n = 2;
  __pyx_t_11.dv = ((PyObject*)__pyx_v_dv);
  __pyx_t_11.verb = __pyx_v_verb;
  __pyx_t_10 = __pyx_f_8automata_9cautomata_getProductDict(__pyx_v_d, ((PyObject*)__pyx_t_7), ((PyObject*)__pyx_t_5), &__pyx_t_11); 
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_v_dC = __pyx_t_10;

  /* "automata/cautomata.pyx":2764
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, self.A, b.A, dv=dv, verb=verb)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("dC=")
 *             sig_on()
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 2764, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":2765
 *         dC = getProductDict(d, self.A, b.A, dv=dv, verb=verb)
 *         if verb:
 *             print("dC=")             # <<<<<<<<<<<<<<
 *             sig_on()
 *             printDict(dC)
 */
    __pyx_t_5 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__54, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2765, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":2766
 *         if verb:
 *             print("dC=")
 *             sig_on()             # <<<<<<<<<<<<<<
 *             printDict(dC)
 *             sig_off()
 */
    __pyx_t_12 = sig_on(); if (unlikely(__pyx_t_12 == ((int)0))) __PYX_ERR(0, 2766, __pyx_L1_error)

    /* "automata/cautomata.pyx":2767
 *             print("dC=")
 *             sig_on()
 *             printDict(dC)             # <<<<<<<<<<<<<<
 *             sig_off()
 *         sig_on()
 */
    printDict(__pyx_v_dC);

    /* "automata/cautomata.pyx":2768
 *             sig_on()
 *             printDict(dC)
 *             sig_off()             # <<<<<<<<<<<<<<
 *         sig_on()
 *         a = Product(self.a[0], b.a[0], dC, verb)
 */
    sig_off();

    /* "automata/cautomata.pyx":2764
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, self.A, b.A, dv=dv, verb=verb)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("dC=")
 *             sig_on()
 */
  }

  /* "automata/cautomata.pyx":2769
 *             printDict(dC)
 *             sig_off()
 *         sig_on()             # <<<<<<<<<<<<<<
 *         a = Product(self.a[0], b.a[0], dC, verb)
 *         FreeDict(&dC)
 */
  __pyx_t_12 = sig_on(); if (unlikely(__pyx_t_12 == ((int)0))) __PYX_ERR(0, 2769, __pyx_L1_error)

  /* "automata/cautomata.pyx":2770
 *             sig_off()
 *         sig_on()
 *         a = Product(self.a[0], b.a[0], dC, verb)             # <<<<<<<<<<<<<<
 *         FreeDict(&dC)
 *         sig_off()
 */
  __pyx_t_13 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_13 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 2770, __pyx_L1_error)
  __pyx_v_a = Product((__pyx_v_self->a[0]), (__pyx_v_b->a[0]), __pyx_v_dC, __pyx_t_13);

  /* "automata/cautomata.pyx":2771
 *         sig_on()
 *         a = Product(self.a[0], b.a[0], dC, verb)
 *         FreeDict(&dC)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = a
 */
  FreeDict((&__pyx_v_dC));

  /* "automata/cautomata.pyx":2772
 *         a = Product(self.a[0], b.a[0], dC, verb)
 *         FreeDict(&dC)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = a
 *         r.A = Av
 */
  sig_off();

  /* "automata/cautomata.pyx":2773
 *         FreeDict(&dC)
 *         sig_off()
 *         r.a[0] = a             # <<<<<<<<<<<<<<
 *         r.A = Av
 *         if simplify:
 */
  (__pyx_v_r->a[0]) = __pyx_v_a;

  /* "automata/cautomata.pyx":2774
 *         sig_off()
 *         r.a[0] = a
 *         r.A = Av             # <<<<<<<<<<<<<<
 *         if simplify:
 *             return r.prune().minimize()
 */
  __Pyx_INCREF(__pyx_v_Av);
  __Pyx_GIVEREF(__pyx_v_Av);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = __pyx_v_Av;

  /* "automata/cautomata.pyx":2775
 *         r.a[0] = a
 *         r.A = Av
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return r.prune().minimize()
 *         else:
 */
  __pyx_t_2 = (__pyx_v_simplify != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":2776
 *         r.A = Av
 *         if simplify:
 *             return r.prune().minimize()             # <<<<<<<<<<<<<<
 *         else:
 *             return r
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_r), __pyx_n_s_prune); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2776, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_8 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
      }
    }
    __pyx_t_7 = (__pyx_t_8) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_8) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
    if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2776, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_7, __pyx_n_s_minimize); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2776, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_7)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_7);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
      }
    }
    __pyx_t_5 = (__pyx_t_7) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_7) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 2776, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_r = __pyx_t_5;
    __pyx_t_5 = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":2775
 *         r.a[0] = a
 *         r.A = Av
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return r.prune().minimize()
 *         else:
 */
  }

  /* "automata/cautomata.pyx":2778
 *             return r.prune().minimize()
 *         else:
 *             return r             # <<<<<<<<<<<<<<
 * 
 *     def intersection(self, DeterministicAutomaton a, simplify=True, verb=False):
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(((PyObject *)__pyx_v_r));
    __pyx_r = ((PyObject *)__pyx_v_r);
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":2663
 *         return r
 * 
 *     def product(self, DeterministicAutomaton b, dict d=None, bool simplify=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Give the product of the :class:`DeterministicAutomaton` and ``a`` an other
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.product", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_la);
  __Pyx_XDECREF(__pyx_v_lb);
  __Pyx_XDECREF(__pyx_v_V);
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_Av);
  __Pyx_XDECREF(__pyx_v_dv);
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2780
 *             return r
 * 
 *     def intersection(self, DeterministicAutomaton a, simplify=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Give a automaton recognizing the intersection of the languages
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_63intersection(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_62intersection[] = "\n        Give a automaton recognizing the intersection of the languages\n        of ``self`` and ``a``.\n\n        INPUT:\n\n        - ``a`` -- :class:`DeterministicAutomaton` to intersect\n\n        - ``simplify`` - (default: ``True``) - if True,\n            prune and minimize the result\n\n        - ``verb`` -- boolean (default: ``False``) if True,\n            print debugging informations\n\n        OUTPUT:\n\n        Return the intersected :class:`DeterministicAutomaton`.\n\n        EXAMPLES::\n\n            #. Intersection of words that contains 'aa' and words that contains 'bb'\n\n                sage: a = dag.AnyWord(['a','b']).concatenate(dag.Word(['a', 'a'])).concatenate(dag.AnyWord(['a','b']))\n                sage: b = dag.AnyWord(['a','b']).concatenate(dag.Word(['b', 'b']).concatenate(dag.AnyWord(['a','b'])))\n                sage: a.intersection(b)\n                DeterministicAutomaton with 8 states and an alphabet of 2 letters\n\n            #. Intersection of two languages whose alphabets are different\n\n                sage: a = dag.AnyWord(['a','b','c'])\n                sage: b = dag.AnyWord(['a','b','e'])\n                sage: a.intersection(b)\n                DeterministicAutomaton with 1 state and an alphabet of 2 letters\n\n            sage: a = dag.AnyWord(['a', 'b'])\n            sage: b = dag.Word(['a','b','a'])\n            sage: a.intersection(b).has_same_language_as(b)\n            True\n\n        TESTS::\n\n            sage: a = dag.AnyWord(['a','b','c'])\n            sage: b = dag.AnyWord(['a','b','e'])\n            sage: a.intersection(b) == dag.AnyWord(['a', 'b'])\n            True\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = DeterministicAutomaton([(3, 2, 'c'), (1, 2, 'd')], i=2)\n            sage: a.intersection(b)\n            DeterministicAutomaton with 1 state and an alphabet of 0 letter\n            sage: a.intersection(b, simplify=False)\n            Deterministi""cAutomaton with 12 states and an alphabet of 0 letter\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_63intersection(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a = 0;
  PyObject *__pyx_v_simplify = 0;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("intersection (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a,&__pyx_n_s_simplify,&__pyx_n_s_verb,0};
    PyObject* values[3] = {0,0,0};
    values[1] = ((PyObject *)Py_True);
    values[2] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_simplify);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "intersection") < 0)) __PYX_ERR(0, 2780, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)values[0]);
    __pyx_v_simplify = values[1];
    __pyx_v_verb = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("intersection", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2780, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.intersection", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_a), __pyx_ptype_8automata_9cautomata_DeterministicAutomaton, 1, "a", 0))) __PYX_ERR(0, 2780, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_62intersection(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_a, __pyx_v_simplify, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_62intersection(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, PyObject *__pyx_v_simplify, PyObject *__pyx_v_verb) {
  PyObject *__pyx_v_d = 0;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_p = 0;
  PyObject *__pyx_v_l = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("intersection", 0);

  /* "automata/cautomata.pyx":2837
 *         cdef dict d
 *         cdef DeterministicAutomaton p
 *         d = {}             # <<<<<<<<<<<<<<
 *         for l in self.A:
 *             if l in a.A:
 */
  __pyx_t_1 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2837, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_d = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":2838
 *         cdef DeterministicAutomaton p
 *         d = {}
 *         for l in self.A:             # <<<<<<<<<<<<<<
 *             if l in a.A:
 *                 d[(l, l)] = l
 */
  if (unlikely(__pyx_v_self->A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 2838, __pyx_L1_error)
  }
  __pyx_t_1 = __pyx_v_self->A; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
  for (;;) {
    if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_3); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 2838, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2838, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_l, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":2839
 *         d = {}
 *         for l in self.A:
 *             if l in a.A:             # <<<<<<<<<<<<<<
 *                 d[(l, l)] = l
 *         if verb:
 */
    __pyx_t_4 = (__Pyx_PySequence_ContainsTF(__pyx_v_l, __pyx_v_a->A, Py_EQ)); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 2839, __pyx_L1_error)
    __pyx_t_5 = (__pyx_t_4 != 0);
    if (__pyx_t_5) {

      /* "automata/cautomata.pyx":2840
 *         for l in self.A:
 *             if l in a.A:
 *                 d[(l, l)] = l             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("d=%s" % d)
 */
      __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2840, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_v_l);
      __Pyx_GIVEREF(__pyx_v_l);
      PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_l);
      __Pyx_INCREF(__pyx_v_l);
      __Pyx_GIVEREF(__pyx_v_l);
      PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_v_l);
      if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_t_3, __pyx_v_l) < 0)) __PYX_ERR(0, 2840, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":2839
 *         d = {}
 *         for l in self.A:
 *             if l in a.A:             # <<<<<<<<<<<<<<
 *                 d[(l, l)] = l
 *         if verb:
 */
    }

    /* "automata/cautomata.pyx":2838
 *         cdef DeterministicAutomaton p
 *         d = {}
 *         for l in self.A:             # <<<<<<<<<<<<<<
 *             if l in a.A:
 *                 d[(l, l)] = l
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":2841
 *             if l in a.A:
 *                 d[(l, l)] = l
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("d=%s" % d)
 *         p = self.product(a, d, simplify=simplify, verb=verb)
 */
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 2841, __pyx_L1_error)
  if (__pyx_t_5) {

    /* "automata/cautomata.pyx":2842
 *                 d[(l, l)] = l
 *         if verb:
 *             print("d=%s" % d)             # <<<<<<<<<<<<<<
 *         p = self.product(a, d, simplify=simplify, verb=verb)
 *         if simplify:
 */
    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_d_s, __pyx_v_d); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2842, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2842, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":2841
 *             if l in a.A:
 *                 d[(l, l)] = l
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("d=%s" % d)
 *         p = self.product(a, d, simplify=simplify, verb=verb)
 */
  }

  /* "automata/cautomata.pyx":2843
 *         if verb:
 *             print("d=%s" % d)
 *         p = self.product(a, d, simplify=simplify, verb=verb)             # <<<<<<<<<<<<<<
 *         if simplify:
 *             return p.prune().minimize()
 */
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_product); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2843, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_1 = PyTuple_New(2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2843, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(((PyObject *)__pyx_v_a));
  __Pyx_GIVEREF(((PyObject *)__pyx_v_a));
  PyTuple_SET_ITEM(__pyx_t_1, 0, ((PyObject *)__pyx_v_a));
  __Pyx_INCREF(__pyx_v_d);
  __Pyx_GIVEREF(__pyx_v_d);
  PyTuple_SET_ITEM(__pyx_t_1, 1, __pyx_v_d);
  __pyx_t_6 = __Pyx_PyDict_NewPresized(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2843, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  if (PyDict_SetItem(__pyx_t_6, __pyx_n_s_simplify, __pyx_v_simplify) < 0) __PYX_ERR(0, 2843, __pyx_L1_error)
  if (PyDict_SetItem(__pyx_t_6, __pyx_n_s_verb, __pyx_v_verb) < 0) __PYX_ERR(0, 2843, __pyx_L1_error)
  __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_1, __pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2843, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  if (!(likely(((__pyx_t_7) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_7, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 2843, __pyx_L1_error)
  __pyx_v_p = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_7);
  __pyx_t_7 = 0;

  /* "automata/cautomata.pyx":2844
 *             print("d=%s" % d)
 *         p = self.product(a, d, simplify=simplify, verb=verb)
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return p.prune().minimize()
 *         else:
 */
  __pyx_t_5 = __Pyx_PyObject_IsTrue(__pyx_v_simplify); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 2844, __pyx_L1_error)
  if (__pyx_t_5) {

    /* "automata/cautomata.pyx":2845
 *         p = self.product(a, d, simplify=simplify, verb=verb)
 *         if simplify:
 *             return p.prune().minimize()             # <<<<<<<<<<<<<<
 *         else:
 *             return p
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_p), __pyx_n_s_prune); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2845, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_1, function);
      }
    }
    __pyx_t_6 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_1);
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 2845, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_t_6, __pyx_n_s_minimize); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 2845, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_1);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_1, function);
      }
    }
    __pyx_t_7 = (__pyx_t_6) ? __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_6) : __Pyx_PyObject_CallNoArg(__pyx_t_1);
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 2845, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_r = __pyx_t_7;
    __pyx_t_7 = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":2844
 *             print("d=%s" % d)
 *         p = self.product(a, d, simplify=simplify, verb=verb)
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return p.prune().minimize()
 *         else:
 */
  }

  /* "automata/cautomata.pyx":2847
 *             return p.prune().minimize()
 *         else:
 *             return p             # <<<<<<<<<<<<<<
 * 
 *     def is_complete(self):
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(((PyObject *)__pyx_v_p));
    __pyx_r = ((PyObject *)__pyx_v_p);
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":2780
 *             return r
 * 
 *     def intersection(self, DeterministicAutomaton a, simplify=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Give a automaton recognizing the intersection of the languages
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.intersection", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF((PyObject *)__pyx_v_p);
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2849
 *             return p
 * 
 *     def is_complete(self):             # <<<<<<<<<<<<<<
 *         """
 *         Determine if the automaton is complete
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_65is_complete(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_64is_complete[] = "\n        Determine if the automaton is complete\n        (i.e. every state has leaving transitions\n        labeled by every letter of the alphabet)\n\n        OUTPUT:\n\n        Return ``True`` if the automaton is complete, ``False`` otherwise.\n\n        EXAMPLES::\n\n            sage: a = dag.AnyWord(['a','b'])\n            sage: a.is_complete()\n            True\n            sage: a = dag.Word(['a','b'])\n            sage: a.is_complete()\n            False\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.is_complete()\n            False\n            sage: a = DeterministicAutomaton([(0, 0, 'a')])\n            sage: a.is_complete()\n            True\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_65is_complete(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("is_complete (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_64is_complete(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_64is_complete(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  bool __pyx_v_res;
  PyObject *__pyx_v_answ = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("is_complete", 0);

  /* "automata/cautomata.pyx":2875
 *         """
 *         cdef bool res
 *         sig_on()             # <<<<<<<<<<<<<<
 *         res = IsCompleteAutomaton(self.a[0])
 *         answ = c_bool(res)
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 2875, __pyx_L1_error)

  /* "automata/cautomata.pyx":2876
 *         cdef bool res
 *         sig_on()
 *         res = IsCompleteAutomaton(self.a[0])             # <<<<<<<<<<<<<<
 *         answ = c_bool(res)
 *         sig_off()
 */
  __pyx_v_res = IsCompleteAutomaton((__pyx_v_self->a[0]));

  /* "automata/cautomata.pyx":2877
 *         sig_on()
 *         res = IsCompleteAutomaton(self.a[0])
 *         answ = c_bool(res)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return answ
 */
  __pyx_t_2 = __Pyx_PyInt_From_bool(__pyx_v_res); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2877, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 2877, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_answ = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":2878
 *         res = IsCompleteAutomaton(self.a[0])
 *         answ = c_bool(res)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return answ
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":2879
 *         answ = c_bool(res)
 *         sig_off()
 *         return answ             # <<<<<<<<<<<<<<
 * 
 *     def complete_in_place(self, label_sink='s'):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_answ);
  __pyx_r = __pyx_v_answ;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2849
 *             return p
 * 
 *     def is_complete(self):             # <<<<<<<<<<<<<<
 *         """
 *         Determine if the automaton is complete
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.is_complete", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_answ);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2881
 *         return answ
 * 
 *     def complete_in_place(self, label_sink='s'):             # <<<<<<<<<<<<<<
 *         """
 *         Complete the automaton in-place, by adding a sink state if necessary.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_67complete_in_place(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_66complete_in_place[] = "\n        Complete the automaton in-place, by adding a sink state if necessary.\n\n        INPUT:\n\n        - ``label_sink`` -- (default: ``s``) - label of the sink state\n          if added and if self has labels of states.\n\n        OUTPUT:\n\n        Return ``True`` if the automaton was not complete\n        (a sink state has been added), return ``False`` otherwise.\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.complete_in_place()\n            True\n            sage: a\n            DeterministicAutomaton with 5 states and an alphabet of 2 letters\n\n            sage: dag.AnyWord(['a','b']).complete_in_place()\n            False\n\n        TESTS::\n\n            sage: a = dag.Word(['a','b','a'])\n            sage: a.complete_in_place()\n            True\n            sage: a.has_same_language_as(dag.Word(['a','b','a']))\n            True\n            sage: a == dag.Word(['a','b','a'])\n            False\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_67complete_in_place(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_label_sink = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("complete_in_place (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_label_sink,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)__pyx_n_s_s);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_label_sink);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "complete_in_place") < 0)) __PYX_ERR(0, 2881, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_label_sink = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("complete_in_place", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2881, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.complete_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_66complete_in_place(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_label_sink);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_66complete_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_label_sink) {
  PyObject *__pyx_v_res = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  int __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("complete_in_place", 0);

  /* "automata/cautomata.pyx":2917
 * 
 *         """
 *         sig_on()             # <<<<<<<<<<<<<<
 *         res = CompleteAutomaton(self.a)
 *         res = c_bool(res)
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 2917, __pyx_L1_error)

  /* "automata/cautomata.pyx":2918
 *         """
 *         sig_on()
 *         res = CompleteAutomaton(self.a)             # <<<<<<<<<<<<<<
 *         res = c_bool(res)
 *         sig_off()
 */
  __pyx_t_2 = __Pyx_PyInt_From_bool(CompleteAutomaton(__pyx_v_self->a)); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2918, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_res = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":2919
 *         sig_on()
 *         res = CompleteAutomaton(self.a)
 *         res = c_bool(res)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if res:
 */
  __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_v_res); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 2919, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF_SET(__pyx_v_res, __pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":2920
 *         res = CompleteAutomaton(self.a)
 *         res = c_bool(res)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if res:
 *             if self.S is not None:
 */
  sig_off();

  /* "automata/cautomata.pyx":2921
 *         res = c_bool(res)
 *         sig_off()
 *         if res:             # <<<<<<<<<<<<<<
 *             if self.S is not None:
 *                 # add a label for the sink state
 */
  __pyx_t_3 = __Pyx_PyObject_IsTrue(__pyx_v_res); if (unlikely(__pyx_t_3 < 0)) __PYX_ERR(0, 2921, __pyx_L1_error)
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":2922
 *         sig_off()
 *         if res:
 *             if self.S is not None:             # <<<<<<<<<<<<<<
 *                 # add a label for the sink state
 *                 self.S.append(label_sink)
 */
    __pyx_t_3 = (__pyx_v_self->S != ((PyObject*)Py_None));
    __pyx_t_4 = (__pyx_t_3 != 0);
    if (__pyx_t_4) {

      /* "automata/cautomata.pyx":2924
 *             if self.S is not None:
 *                 # add a label for the sink state
 *                 self.S.append(label_sink)             # <<<<<<<<<<<<<<
 *         return res
 * 
 */
      if (unlikely(__pyx_v_self->S == Py_None)) {
        PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "append");
        __PYX_ERR(0, 2924, __pyx_L1_error)
      }
      __pyx_t_5 = __Pyx_PyList_Append(__pyx_v_self->S, __pyx_v_label_sink); if (unlikely(__pyx_t_5 == ((int)-1))) __PYX_ERR(0, 2924, __pyx_L1_error)

      /* "automata/cautomata.pyx":2922
 *         sig_off()
 *         if res:
 *             if self.S is not None:             # <<<<<<<<<<<<<<
 *                 # add a label for the sink state
 *                 self.S.append(label_sink)
 */
    }

    /* "automata/cautomata.pyx":2921
 *         res = c_bool(res)
 *         sig_off()
 *         if res:             # <<<<<<<<<<<<<<
 *             if self.S is not None:
 *                 # add a label for the sink state
 */
  }

  /* "automata/cautomata.pyx":2925
 *                 # add a label for the sink state
 *                 self.S.append(label_sink)
 *         return res             # <<<<<<<<<<<<<<
 * 
 *     def prefix(self, w, i=None, int algo=1):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_res);
  __pyx_r = __pyx_v_res;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2881
 *         return answ
 * 
 *     def complete_in_place(self, label_sink='s'):             # <<<<<<<<<<<<<<
 *         """
 *         Complete the automaton in-place, by adding a sink state if necessary.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.complete_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_res);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2927
 *         return res
 * 
 *     def prefix(self, w, i=None, int algo=1):             # <<<<<<<<<<<<<<
 *         """
 *         Give an automaton recognizing the language w(w^(-1)L) where L is the language of self.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_69prefix(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_68prefix[] = "\n        Give an automaton recognizing the language w(w^(-1)L) where L is the language of self.\n        It is the set of words recognized by self and starting with word w.\n\n        INPUT:\n\n        - ``w`` -- a word\n\n        - ``i`` -- int (default: ``None``) - the initial state used\n\n        - ``algo`` -- int (default: ``1``)\n          The algorithm used for the computation.\n\n        EXAMPLES::\n\n            sage: a = dag.AnyWord(['a', 'b'])\n            sage: a.prefix(['a', 'a'])\n            DeterministicAutomaton with 3 states and an alphabet of 2 letters\n\n            sage: a = dag.AnyWord(['a', 'b'])\n            sage: a.prefix(['a', 'a'], algo=2)\n            DeterministicAutomaton with 3 states and an alphabet of 2 letters\n\n        TESTS::\n\n            sage: a = dag.Word(['a', 'b', 'a'])\n            sage: a.prefix(['c'])\n            Traceback (most recent call last):\n            ...\n            ValueError: 'c' is not in the alphabet ['a', 'b']\n\n            sage: a = dag.AnyWord(['a', 'b'])\n            sage: a.prefix(['a', 'a']).has_same_language_as(a.prefix(['a', 'a'], algo=2))\n            True\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_69prefix(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_w = 0;
  PyObject *__pyx_v_i = 0;
  int __pyx_v_algo;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("prefix (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_w,&__pyx_n_s_i,&__pyx_n_s_algo,0};
    PyObject* values[3] = {0,0,0};
    values[1] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_w)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_algo);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "prefix") < 0)) __PYX_ERR(0, 2927, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_w = values[0];
    __pyx_v_i = values[1];
    if (values[2]) {
      __pyx_v_algo = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_algo == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2927, __pyx_L3_error)
    } else {
      __pyx_v_algo = ((int)1);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("prefix", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 2927, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.prefix", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_68prefix(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_w, __pyx_v_i, __pyx_v_algo);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_68prefix(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_w, PyObject *__pyx_v_i, int __pyx_v_algo) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a = 0;
  int *__pyx_v_l;
  int __pyx_v_j;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  Py_ssize_t __pyx_t_2;
  Py_ssize_t __pyx_t_3;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  int __pyx_t_12;
  PyObject *__pyx_t_13 = NULL;
  int __pyx_t_14;
  __Pyx_RefNannySetupContext("prefix", 0);
  __Pyx_INCREF(__pyx_v_i);

  /* "automata/cautomata.pyx":2967
 *         cdef int* l
 *         cdef int j
 *         if algo == 2:             # <<<<<<<<<<<<<<
 *             l = <int*>malloc(sizeof(int)*self.a.n)
 *             for j in range(len(w)):
 */
  __pyx_t_1 = ((__pyx_v_algo == 2) != 0);
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":2968
 *         cdef int j
 *         if algo == 2:
 *             l = <int*>malloc(sizeof(int)*self.a.n)             # <<<<<<<<<<<<<<
 *             for j in range(len(w)):
 *                 try:
 */
    __pyx_v_l = ((int *)malloc(((sizeof(int)) * __pyx_v_self->a->n)));

    /* "automata/cautomata.pyx":2969
 *         if algo == 2:
 *             l = <int*>malloc(sizeof(int)*self.a.n)
 *             for j in range(len(w)):             # <<<<<<<<<<<<<<
 *                 try:
 *                     l[j] = self.A.index(w[j])
 */
    __pyx_t_2 = PyObject_Length(__pyx_v_w); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2969, __pyx_L1_error)
    __pyx_t_3 = __pyx_t_2;
    for (__pyx_t_4 = 0; __pyx_t_4 < __pyx_t_3; __pyx_t_4+=1) {
      __pyx_v_j = __pyx_t_4;

      /* "automata/cautomata.pyx":2970
 *             l = <int*>malloc(sizeof(int)*self.a.n)
 *             for j in range(len(w)):
 *                 try:             # <<<<<<<<<<<<<<
 *                     l[j] = self.A.index(w[j])
 *                 except:
 */
      {
        __Pyx_PyThreadState_declare
        __Pyx_PyThreadState_assign
        __Pyx_ExceptionSave(&__pyx_t_5, &__pyx_t_6, &__pyx_t_7);
        __Pyx_XGOTREF(__pyx_t_5);
        __Pyx_XGOTREF(__pyx_t_6);
        __Pyx_XGOTREF(__pyx_t_7);
        /*try:*/ {

          /* "automata/cautomata.pyx":2971
 *             for j in range(len(w)):
 *                 try:
 *                     l[j] = self.A.index(w[j])             # <<<<<<<<<<<<<<
 *                 except:
 *                     raise ValueError("letter %s of the word %s is not in the alphabet of self"%(w[j], w))
 */
          __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->A, __pyx_n_s_index); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2971, __pyx_L6_error)
          __Pyx_GOTREF(__pyx_t_9);
          __pyx_t_10 = __Pyx_GetItemInt(__pyx_v_w, __pyx_v_j, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 2971, __pyx_L6_error)
          __Pyx_GOTREF(__pyx_t_10);
          __pyx_t_11 = NULL;
          if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_9))) {
            __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_9);
            if (likely(__pyx_t_11)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
              __Pyx_INCREF(__pyx_t_11);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_9, function);
            }
          }
          __pyx_t_8 = (__pyx_t_11) ? __Pyx_PyObject_Call2Args(__pyx_t_9, __pyx_t_11, __pyx_t_10) : __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_10);
          __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
          if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2971, __pyx_L6_error)
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
          __pyx_t_12 = __Pyx_PyInt_As_int(__pyx_t_8); if (unlikely((__pyx_t_12 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2971, __pyx_L6_error)
          __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
          (__pyx_v_l[__pyx_v_j]) = __pyx_t_12;

          /* "automata/cautomata.pyx":2970
 *             l = <int*>malloc(sizeof(int)*self.a.n)
 *             for j in range(len(w)):
 *                 try:             # <<<<<<<<<<<<<<
 *                     l[j] = self.A.index(w[j])
 *                 except:
 */
        }
        __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
        __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
        __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
        goto __pyx_L13_try_end;
        __pyx_L6_error:;
        __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
        __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;

        /* "automata/cautomata.pyx":2972
 *                 try:
 *                     l[j] = self.A.index(w[j])
 *                 except:             # <<<<<<<<<<<<<<
 *                     raise ValueError("letter %s of the word %s is not in the alphabet of self"%(w[j], w))
 *             if i is None:
 */
        /*except:*/ {
          __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.prefix", __pyx_clineno, __pyx_lineno, __pyx_filename);
          if (__Pyx_GetException(&__pyx_t_8, &__pyx_t_9, &__pyx_t_10) < 0) __PYX_ERR(0, 2972, __pyx_L8_except_error)
          __Pyx_GOTREF(__pyx_t_8);
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_GOTREF(__pyx_t_10);

          /* "automata/cautomata.pyx":2973
 *                     l[j] = self.A.index(w[j])
 *                 except:
 *                     raise ValueError("letter %s of the word %s is not in the alphabet of self"%(w[j], w))             # <<<<<<<<<<<<<<
 *             if i is None:
 *                 i = self.a.i
 */
          __pyx_t_11 = __Pyx_GetItemInt(__pyx_v_w, __pyx_v_j, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2973, __pyx_L8_except_error)
          __Pyx_GOTREF(__pyx_t_11);
          __pyx_t_13 = PyTuple_New(2); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2973, __pyx_L8_except_error)
          __Pyx_GOTREF(__pyx_t_13);
          __Pyx_GIVEREF(__pyx_t_11);
          PyTuple_SET_ITEM(__pyx_t_13, 0, __pyx_t_11);
          __Pyx_INCREF(__pyx_v_w);
          __Pyx_GIVEREF(__pyx_v_w);
          PyTuple_SET_ITEM(__pyx_t_13, 1, __pyx_v_w);
          __pyx_t_11 = 0;
          __pyx_t_11 = __Pyx_PyString_Format(__pyx_kp_s_letter_s_of_the_word_s_is_not_in, __pyx_t_13); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 2973, __pyx_L8_except_error)
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
          __pyx_t_13 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_11); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2973, __pyx_L8_except_error)
          __Pyx_GOTREF(__pyx_t_13);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __Pyx_Raise(__pyx_t_13, 0, 0, 0);
          __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
          __PYX_ERR(0, 2973, __pyx_L8_except_error)
        }
        __pyx_L8_except_error:;

        /* "automata/cautomata.pyx":2970
 *             l = <int*>malloc(sizeof(int)*self.a.n)
 *             for j in range(len(w)):
 *                 try:             # <<<<<<<<<<<<<<
 *                     l[j] = self.A.index(w[j])
 *                 except:
 */
        __Pyx_XGIVEREF(__pyx_t_5);
        __Pyx_XGIVEREF(__pyx_t_6);
        __Pyx_XGIVEREF(__pyx_t_7);
        __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
        goto __pyx_L1_error;
        __pyx_L13_try_end:;
      }
    }

    /* "automata/cautomata.pyx":2974
 *                 except:
 *                     raise ValueError("letter %s of the word %s is not in the alphabet of self"%(w[j], w))
 *             if i is None:             # <<<<<<<<<<<<<<
 *                 i = self.a.i
 *             a = DeterministicAutomaton(None)
 */
    __pyx_t_1 = (__pyx_v_i == Py_None);
    __pyx_t_14 = (__pyx_t_1 != 0);
    if (__pyx_t_14) {

      /* "automata/cautomata.pyx":2975
 *                     raise ValueError("letter %s of the word %s is not in the alphabet of self"%(w[j], w))
 *             if i is None:
 *                 i = self.a.i             # <<<<<<<<<<<<<<
 *             a = DeterministicAutomaton(None)
 *             sig_on()
 */
      __pyx_t_10 = __Pyx_PyInt_From_int(__pyx_v_self->a->i); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 2975, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_10);
      __pyx_t_10 = 0;

      /* "automata/cautomata.pyx":2974
 *                 except:
 *                     raise ValueError("letter %s of the word %s is not in the alphabet of self"%(w[j], w))
 *             if i is None:             # <<<<<<<<<<<<<<
 *                 i = self.a.i
 *             a = DeterministicAutomaton(None)
 */
    }

    /* "automata/cautomata.pyx":2976
 *             if i is None:
 *                 i = self.a.i
 *             a = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *             sig_on()
 *             a.a[0] = PieceAutomaton(self.a[0], l, len(w), i)
 */
    __pyx_t_10 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 2976, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __pyx_v_a = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_10);
    __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":2977
 *                 i = self.a.i
 *             a = DeterministicAutomaton(None)
 *             sig_on()             # <<<<<<<<<<<<<<
 *             a.a[0] = PieceAutomaton(self.a[0], l, len(w), i)
 *             free(l)
 */
    __pyx_t_4 = sig_on(); if (unlikely(__pyx_t_4 == ((int)0))) __PYX_ERR(0, 2977, __pyx_L1_error)

    /* "automata/cautomata.pyx":2978
 *             a = DeterministicAutomaton(None)
 *             sig_on()
 *             a.a[0] = PieceAutomaton(self.a[0], l, len(w), i)             # <<<<<<<<<<<<<<
 *             free(l)
 *             sig_off()
 */
    __pyx_t_2 = PyObject_Length(__pyx_v_w); if (unlikely(__pyx_t_2 == ((Py_ssize_t)-1))) __PYX_ERR(0, 2978, __pyx_L1_error)
    __pyx_t_4 = __Pyx_PyInt_As_int(__pyx_v_i); if (unlikely((__pyx_t_4 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 2978, __pyx_L1_error)
    (__pyx_v_a->a[0]) = PieceAutomaton((__pyx_v_self->a[0]), __pyx_v_l, __pyx_t_2, __pyx_t_4);

    /* "automata/cautomata.pyx":2979
 *             sig_on()
 *             a.a[0] = PieceAutomaton(self.a[0], l, len(w), i)
 *             free(l)             # <<<<<<<<<<<<<<
 *             sig_off()
 *             a.A = self.A
 */
    free(__pyx_v_l);

    /* "automata/cautomata.pyx":2980
 *             a.a[0] = PieceAutomaton(self.a[0], l, len(w), i)
 *             free(l)
 *             sig_off()             # <<<<<<<<<<<<<<
 *             a.A = self.A
 *             return a
 */
    sig_off();

    /* "automata/cautomata.pyx":2981
 *             free(l)
 *             sig_off()
 *             a.A = self.A             # <<<<<<<<<<<<<<
 *             return a
 *         else:
 */
    __pyx_t_10 = __pyx_v_self->A;
    __Pyx_INCREF(__pyx_t_10);
    __Pyx_GIVEREF(__pyx_t_10);
    __Pyx_GOTREF(__pyx_v_a->A);
    __Pyx_DECREF(__pyx_v_a->A);
    __pyx_v_a->A = ((PyObject*)__pyx_t_10);
    __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":2982
 *             sig_off()
 *             a.A = self.A
 *             return a             # <<<<<<<<<<<<<<
 *         else:
 *             a = self.copy()
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(((PyObject *)__pyx_v_a));
    __pyx_r = ((PyObject *)__pyx_v_a);
    goto __pyx_L0;

    /* "automata/cautomata.pyx":2967
 *         cdef int* l
 *         cdef int j
 *         if algo == 2:             # <<<<<<<<<<<<<<
 *             l = <int*>malloc(sizeof(int)*self.a.n)
 *             for j in range(len(w)):
 */
  }

  /* "automata/cautomata.pyx":2984
 *             return a
 *         else:
 *             a = self.copy()             # <<<<<<<<<<<<<<
 *             a.shift_list_in_place(w)
 *             return dag.Word(w).concatenate(a)
 */
  /*else*/ {
    __pyx_t_9 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_copy); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2984, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_8 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_9))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_9);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_9, function);
      }
    }
    __pyx_t_10 = (__pyx_t_8) ? __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_t_8) : __Pyx_PyObject_CallNoArg(__pyx_t_9);
    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
    if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 2984, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    if (!(likely(((__pyx_t_10) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_10, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 2984, __pyx_L1_error)
    __pyx_v_a = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_10);
    __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":2985
 *         else:
 *             a = self.copy()
 *             a.shift_list_in_place(w)             # <<<<<<<<<<<<<<
 *             return dag.Word(w).concatenate(a)
 * 
 */
    __pyx_t_9 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_a), __pyx_n_s_shift_list_in_place); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2985, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __pyx_t_8 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_9))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_9);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_9);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_9, function);
      }
    }
    __pyx_t_10 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_9, __pyx_t_8, __pyx_v_w) : __Pyx_PyObject_CallOneArg(__pyx_t_9, __pyx_v_w);
    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
    if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 2985, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

    /* "automata/cautomata.pyx":2986
 *             a = self.copy()
 *             a.shift_list_in_place(w)
 *             return dag.Word(w).concatenate(a)             # <<<<<<<<<<<<<<
 * 
 *     def prefix_closure(self):
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_GetModuleGlobalName(__pyx_t_8, __pyx_n_s_dag); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 2986, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_8);
    __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_t_8, __pyx_n_s_Word); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2986, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_13);
    __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_13))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_13);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_13);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_13, function);
      }
    }
    __pyx_t_9 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_13, __pyx_t_8, __pyx_v_w) : __Pyx_PyObject_CallOneArg(__pyx_t_13, __pyx_v_w);
    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
    if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 2986, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_9);
    __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
    __pyx_t_13 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_concatenate); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 2986, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_13);
    __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_9 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_13))) {
      __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_13);
      if (likely(__pyx_t_9)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_13);
        __Pyx_INCREF(__pyx_t_9);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_13, function);
      }
    }
    __pyx_t_10 = (__pyx_t_9) ? __Pyx_PyObject_Call2Args(__pyx_t_13, __pyx_t_9, ((PyObject *)__pyx_v_a)) : __Pyx_PyObject_CallOneArg(__pyx_t_13, ((PyObject *)__pyx_v_a));
    __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
    if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 2986, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_10);
    __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
    __pyx_r = __pyx_t_10;
    __pyx_t_10 = 0;
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":2927
 *         return res
 * 
 *     def prefix(self, w, i=None, int algo=1):             # <<<<<<<<<<<<<<
 *         """
 *         Give an automaton recognizing the language w(w^(-1)L) where L is the language of self.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.prefix", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_a);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":2988
 *             return dag.Word(w).concatenate(a)
 * 
 *     def prefix_closure(self):             # <<<<<<<<<<<<<<
 *         """
 *         Give an automaton recognizing the smallest language stable
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_71prefix_closure(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_70prefix_closure[] = "\n        Give an automaton recognizing the smallest language stable\n        by prefix and containing the language of self\n        i.e. every states after pruning begins final\n\n        OUTPUT:\n\n        Return a :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.prefix_closure()\n            DeterministicAutomaton with 2 states and an alphabet of 2 letters\n\n            sage: b = dag.Word(['a','b','a'])\n            sage: c = b.prefix_closure()\n            sage: c\n            DeterministicAutomaton with 4 states and an alphabet of 2 letters\n            sage: dag.Word(['a', 'b']).included(c)\n            True\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_71prefix_closure(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("prefix_closure (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_70prefix_closure(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_70prefix_closure(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  int __pyx_v_i;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  int __pyx_t_4;
  __Pyx_RefNannySetupContext("prefix_closure", 0);

  /* "automata/cautomata.pyx":3012
 *         """
 *         cdef int i
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r.a[0] = prune(self.a[0], False)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3012, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":3013
 *         cdef int i
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         r.a[0] = prune(self.a[0], False)
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 3013, __pyx_L1_error)

  /* "automata/cautomata.pyx":3014
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         r.a[0] = prune(self.a[0], False)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.A = self.A
 */
  (__pyx_v_r->a[0]) = prune((__pyx_v_self->a[0]), 0);

  /* "automata/cautomata.pyx":3015
 *         sig_on()
 *         r.a[0] = prune(self.a[0], False)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         for i in range(r.a.n):
 */
  sig_off();

  /* "automata/cautomata.pyx":3016
 *         r.a[0] = prune(self.a[0], False)
 *         sig_off()
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         for i in range(r.a.n):
 *             r.a.e[i].final = True
 */
  __pyx_t_1 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":3017
 *         sig_off()
 *         r.A = self.A
 *         for i in range(r.a.n):             # <<<<<<<<<<<<<<
 *             r.a.e[i].final = True
 *         return r
 */
  __pyx_t_2 = __pyx_v_r->a->n;
  __pyx_t_3 = __pyx_t_2;
  for (__pyx_t_4 = 0; __pyx_t_4 < __pyx_t_3; __pyx_t_4+=1) {
    __pyx_v_i = __pyx_t_4;

    /* "automata/cautomata.pyx":3018
 *         r.A = self.A
 *         for i in range(r.a.n):
 *             r.a.e[i].final = True             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
    (__pyx_v_r->a->e[__pyx_v_i]).final = 1;
  }

  /* "automata/cautomata.pyx":3019
 *         for i in range(r.a.n):
 *             r.a.e[i].final = True
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     # Use epsilon-transitions rather than product ?
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":2988
 *             return dag.Word(w).concatenate(a)
 * 
 *     def prefix_closure(self):             # <<<<<<<<<<<<<<
 *         """
 *         Give an automaton recognizing the smallest language stable
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.prefix_closure", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3022
 * 
 *     # Use epsilon-transitions rather than product ?
 *     def union(self, DeterministicAutomaton a, simplify=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Return an automaton recognizing the union of the two languages.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_73union(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_72union[] = "\n        Return an automaton recognizing the union of the two languages.\n        Warning: there is a side effect, the automata are completed.\n\n        INPUT:\n\n        - ``a`` -- :class:`DeterministicAutomaton`\n\n        - ``simplify`` --  (default: ``True``)\n          prune and minimize the result ?\n\n        - ``verb`` -- boolean (default: ``False``) if True,\n          print debugging informations\n\n        OUTPUT:\n\n        Return a :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            #. Union of words that contains 'aa' and words that contains 'bb'\n\n                sage: a = dag.AnyWord(['a','b']).concatenate(dag.Word(['a', 'a'])).concatenate(dag.AnyWord(['a','b']))\n                sage: b = dag.AnyWord(['a','b']).concatenate(dag.Word(['b', 'b']).concatenate(dag.AnyWord(['a','b'])))\n                sage: a.union(b)\n                DeterministicAutomaton with 4 states and an alphabet of 2 letters\n\n            #. Union of two languages whose alphabets are differents\n\n                sage: a = dag.Word(['a','b','c'])\n                sage: b = dag.Word(['a','b','a'])\n                sage: a.union(b)\n                DeterministicAutomaton with 4 states and an alphabet of 3 letters\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = DeterministicAutomaton([(3, 2, 'a'), (1, 2, 'd')], i=2)\n            sage: a.union(b)\n            DeterministicAutomaton with 2 states and an alphabet of 3 letters\n            sage: b = DeterministicAutomaton([(3, 2, 'a'), (1, 2, 'd')])\n            sage: a.union(b)\n            DeterministicAutomaton with 2 states and an alphabet of 3 letters\n\n        TESTS::\n\n            sage: a = dag.AnyWord(['a','b']).concatenate(dag.Word(['a', 'a'])).concatenate(dag.AnyWord(['a','b']))\n            sage: b = dag.AnyWord(['a','b']).concatenate(dag.Word(['b', 'b']).concatenate(dag.AnyWord(['a','b'])))\n            sage: c = DeterministicAutomaton([(0, 0, 'a'""), (0, 0, 'b'), (1, 2, 'a'), (1, 3, 'b'), (2, 0, 'a'), (2, 3, 'b'), (3, 2, 'a'), (3, 0, 'b')], i=1, final_states=[0])\n            sage: a.union(b) == c\n            True\n\n            sage: a = dag.Word(['a','b','c'])\n            sage: b = dag.Word(['a','b','a'])\n            sage: a.included(a.union(b))\n            True\n            sage: b.included(a.union(b))\n            True\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_73union(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a = 0;
  PyObject *__pyx_v_simplify = 0;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("union (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a,&__pyx_n_s_simplify,&__pyx_n_s_verb,0};
    PyObject* values[3] = {0,0,0};
    values[1] = ((PyObject *)Py_True);
    values[2] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_simplify);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "union") < 0)) __PYX_ERR(0, 3022, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)values[0]);
    __pyx_v_simplify = values[1];
    __pyx_v_verb = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("union", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 3022, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.union", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_a), __pyx_ptype_8automata_9cautomata_DeterministicAutomaton, 1, "a", 0))) __PYX_ERR(0, 3022, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_72union(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_a, __pyx_v_simplify, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_72union(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, PyObject *__pyx_v_simplify, PyObject *__pyx_v_verb) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a1 = 0;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a2 = 0;
  PyObject *__pyx_v_A = NULL;
  PyObject *__pyx_v_d = NULL;
  PyObject *__pyx_v_l = NULL;
  Automaton __pyx_v_ap;
  Dict __pyx_v_dC;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = NULL;
  PyObject *__pyx_v_Av = NULL;
  PyObject *__pyx_v_dv = NULL;
  int __pyx_v_i;
  int __pyx_v_j;
  PyObject *__pyx_v_n1 = 0;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  int __pyx_t_5;
  Py_ssize_t __pyx_t_6;
  struct __pyx_opt_args_8automata_9cautomata_imagProductDict __pyx_t_7;
  Dict __pyx_t_8;
  struct __pyx_opt_args_8automata_9cautomata_getProductDict __pyx_t_9;
  bool __pyx_t_10;
  long __pyx_t_11;
  long __pyx_t_12;
  int __pyx_t_13;
  int __pyx_t_14;
  int __pyx_t_15;
  PyObject *__pyx_t_16 = NULL;
  __Pyx_RefNannySetupContext("union", 0);

  /* "automata/cautomata.pyx":3081
 * 
 *         """
 *         cdef DeterministicAutomaton a1 = self             # <<<<<<<<<<<<<<
 *         cdef DeterministicAutomaton a2 = a
 * 
 */
  __Pyx_INCREF(((PyObject *)__pyx_v_self));
  __pyx_v_a1 = __pyx_v_self;

  /* "automata/cautomata.pyx":3082
 *         """
 *         cdef DeterministicAutomaton a1 = self
 *         cdef DeterministicAutomaton a2 = a             # <<<<<<<<<<<<<<
 * 
 *         # increase the alphabets if necessary
 */
  __Pyx_INCREF(((PyObject *)__pyx_v_a));
  __pyx_v_a2 = __pyx_v_a;

  /* "automata/cautomata.pyx":3085
 * 
 *         # increase the alphabets if necessary
 *         if set(a1.A) != set(a2.A):             # <<<<<<<<<<<<<<
 *             A = list(set(a1.A+a2.A))
 *             a1 = a1.bigger_alphabet(A)
 */
  __pyx_t_1 = PySet_New(__pyx_v_a1->A); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3085, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PySet_New(__pyx_v_a2->A); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3085, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_NE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3085, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 3085, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":3086
 *         # increase the alphabets if necessary
 *         if set(a1.A) != set(a2.A):
 *             A = list(set(a1.A+a2.A))             # <<<<<<<<<<<<<<
 *             a1 = a1.bigger_alphabet(A)
 *             a2 = a2.bigger_alphabet(A)
 */
    __pyx_t_3 = PyNumber_Add(__pyx_v_a1->A, __pyx_v_a2->A); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3086, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = PySet_New(__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3086, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PySequence_List(__pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3086, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_v_A = ((PyObject*)__pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":3087
 *         if set(a1.A) != set(a2.A):
 *             A = list(set(a1.A+a2.A))
 *             a1 = a1.bigger_alphabet(A)             # <<<<<<<<<<<<<<
 *             a2 = a2.bigger_alphabet(A)
 *         else:
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_a1), __pyx_n_s_bigger_alphabet); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3087, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_1)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_1);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    __pyx_t_3 = (__pyx_t_1) ? __Pyx_PyObject_Call2Args(__pyx_t_2, __pyx_t_1, __pyx_v_A) : __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_v_A);
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3087, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (!(likely(((__pyx_t_3) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_3, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 3087, __pyx_L1_error)
    __Pyx_DECREF_SET(__pyx_v_a1, ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_3));
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":3088
 *             A = list(set(a1.A+a2.A))
 *             a1 = a1.bigger_alphabet(A)
 *             a2 = a2.bigger_alphabet(A)             # <<<<<<<<<<<<<<
 *         else:
 *             a1 = a1.copy()  # in order to avoid side effect
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_a2), __pyx_n_s_bigger_alphabet); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3088, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_1)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_1);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    __pyx_t_3 = (__pyx_t_1) ? __Pyx_PyObject_Call2Args(__pyx_t_2, __pyx_t_1, __pyx_v_A) : __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_v_A);
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3088, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (!(likely(((__pyx_t_3) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_3, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 3088, __pyx_L1_error)
    __Pyx_DECREF_SET(__pyx_v_a2, ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_3));
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":3085
 * 
 *         # increase the alphabets if necessary
 *         if set(a1.A) != set(a2.A):             # <<<<<<<<<<<<<<
 *             A = list(set(a1.A+a2.A))
 *             a1 = a1.bigger_alphabet(A)
 */
    goto __pyx_L3;
  }

  /* "automata/cautomata.pyx":3090
 *             a2 = a2.bigger_alphabet(A)
 *         else:
 *             a1 = a1.copy()  # in order to avoid side effect             # <<<<<<<<<<<<<<
 *             a2 = a2.copy()
 * 
 */
  /*else*/ {
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_a1), __pyx_n_s_copy); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3090, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_1)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_1);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    __pyx_t_3 = (__pyx_t_1) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_1) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3090, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (!(likely(((__pyx_t_3) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_3, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 3090, __pyx_L1_error)
    __Pyx_DECREF_SET(__pyx_v_a1, ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_3));
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":3091
 *         else:
 *             a1 = a1.copy()  # in order to avoid side effect
 *             a2 = a2.copy()             # <<<<<<<<<<<<<<
 * 
 *         # complete the automata
 */
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_a2), __pyx_n_s_copy); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3091, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_1)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_1);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    __pyx_t_3 = (__pyx_t_1) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_1) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3091, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (!(likely(((__pyx_t_3) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_3, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 3091, __pyx_L1_error)
    __Pyx_DECREF_SET(__pyx_v_a2, ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_3));
    __pyx_t_3 = 0;
  }
  __pyx_L3:;

  /* "automata/cautomata.pyx":3094
 * 
 *         # complete the automata
 *         sig_on()             # <<<<<<<<<<<<<<
 *         CompleteAutomaton(a1.a)
 *         CompleteAutomaton(a2.a)
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 3094, __pyx_L1_error)

  /* "automata/cautomata.pyx":3095
 *         # complete the automata
 *         sig_on()
 *         CompleteAutomaton(a1.a)             # <<<<<<<<<<<<<<
 *         CompleteAutomaton(a2.a)
 *         sig_off()
 */
  (void)(CompleteAutomaton(__pyx_v_a1->a));

  /* "automata/cautomata.pyx":3096
 *         sig_on()
 *         CompleteAutomaton(a1.a)
 *         CompleteAutomaton(a2.a)             # <<<<<<<<<<<<<<
 *         sig_off()
 * 
 */
  (void)(CompleteAutomaton(__pyx_v_a2->a));

  /* "automata/cautomata.pyx":3097
 *         CompleteAutomaton(a1.a)
 *         CompleteAutomaton(a2.a)
 *         sig_off()             # <<<<<<<<<<<<<<
 * 
 *         # make the product
 */
  sig_off();

  /* "automata/cautomata.pyx":3100
 * 
 *         # make the product
 *         d = {}             # <<<<<<<<<<<<<<
 *         for l in a1.A:
 *             d[(l, l)] = l
 */
  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3100, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_d = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":3101
 *         # make the product
 *         d = {}
 *         for l in a1.A:             # <<<<<<<<<<<<<<
 *             d[(l, l)] = l
 * 
 */
  if (unlikely(__pyx_v_a1->A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 3101, __pyx_L1_error)
  }
  __pyx_t_3 = __pyx_v_a1->A; __Pyx_INCREF(__pyx_t_3); __pyx_t_6 = 0;
  for (;;) {
    if (__pyx_t_6 >= PyList_GET_SIZE(__pyx_t_3)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_6); __Pyx_INCREF(__pyx_t_2); __pyx_t_6++; if (unlikely(0 < 0)) __PYX_ERR(0, 3101, __pyx_L1_error)
    #else
    __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_6); __pyx_t_6++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3101, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_l, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":3102
 *         d = {}
 *         for l in a1.A:
 *             d[(l, l)] = l             # <<<<<<<<<<<<<<
 * 
 *         cdef Automaton ap
 */
    __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3102, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_v_l);
    __Pyx_GIVEREF(__pyx_v_l);
    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_l);
    __Pyx_INCREF(__pyx_v_l);
    __Pyx_GIVEREF(__pyx_v_l);
    PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_l);
    if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_t_2, __pyx_v_l) < 0)) __PYX_ERR(0, 3102, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":3101
 *         # make the product
 *         d = {}
 *         for l in a1.A:             # <<<<<<<<<<<<<<
 *             d[(l, l)] = l
 * 
 */
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":3106
 *         cdef Automaton ap
 *         cdef Dict dC
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         Av = []
 *         dv = imagProductDict(d, a1.A, a2.A, Av=Av)
 */
  __pyx_t_3 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3106, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":3107
 *         cdef Dict dC
 *         r = DeterministicAutomaton(None)
 *         Av = []             # <<<<<<<<<<<<<<
 *         dv = imagProductDict(d, a1.A, a2.A, Av=Av)
 *         if verb:
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3107, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_Av = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":3108
 *         r = DeterministicAutomaton(None)
 *         Av = []
 *         dv = imagProductDict(d, a1.A, a2.A, Av=Av)             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("Av=%s" % Av)
 */
  __pyx_t_3 = __pyx_v_a1->A;
  __Pyx_INCREF(__pyx_t_3);
  __pyx_t_2 = __pyx_v_a2->A;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_7.__pyx_n = 1;
  __pyx_t_7.Av = __pyx_v_Av;
  __pyx_t_1 = __pyx_f_8automata_9cautomata_imagProductDict(__pyx_v_d, ((PyObject*)__pyx_t_3), ((PyObject*)__pyx_t_2), &__pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3108, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_dv = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":3109
 *         Av = []
 *         dv = imagProductDict(d, a1.A, a2.A, Av=Av)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)
 */
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 3109, __pyx_L1_error)
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":3110
 *         dv = imagProductDict(d, a1.A, a2.A, Av=Av)
 *         if verb:
 *             print("Av=%s" % Av)             # <<<<<<<<<<<<<<
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, a1.A, a2.A, dv=dv, verb=verb)
 */
    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_Av_s, __pyx_v_Av); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3110, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3110, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":3111
 *         if verb:
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)             # <<<<<<<<<<<<<<
 *         dC = getProductDict(d, a1.A, a2.A, dv=dv, verb=verb)
 *         if verb:
 */
    __pyx_t_2 = __Pyx_PyString_FormatSafe(__pyx_kp_s_dv_s, __pyx_v_dv); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3111, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3111, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":3109
 *         Av = []
 *         dv = imagProductDict(d, a1.A, a2.A, Av=Av)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)
 */
  }

  /* "automata/cautomata.pyx":3112
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, a1.A, a2.A, dv=dv, verb=verb)             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("dC=")
 */
  __pyx_t_1 = __pyx_v_a1->A;
  __Pyx_INCREF(__pyx_t_1);
  __pyx_t_2 = __pyx_v_a2->A;
  __Pyx_INCREF(__pyx_t_2);
  if (!(likely(PyDict_CheckExact(__pyx_v_dv))||((__pyx_v_dv) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_v_dv)->tp_name), 0))) __PYX_ERR(0, 3112, __pyx_L1_error)
  __pyx_t_9.__pyx_n = 2;
  __pyx_t_9.dv = ((PyObject*)__pyx_v_dv);
  __pyx_t_9.verb = __pyx_v_verb;
  __pyx_t_8 = __pyx_f_8automata_9cautomata_getProductDict(__pyx_v_d, ((PyObject*)__pyx_t_1), ((PyObject*)__pyx_t_2), &__pyx_t_9); 
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_dC = __pyx_t_8;

  /* "automata/cautomata.pyx":3113
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, a1.A, a2.A, dv=dv, verb=verb)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("dC=")
 *             sig_on()
 */
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 3113, __pyx_L1_error)
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":3114
 *         dC = getProductDict(d, a1.A, a2.A, dv=dv, verb=verb)
 *         if verb:
 *             print("dC=")             # <<<<<<<<<<<<<<
 *             sig_on()
 *             printDict(dC)
 */
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__54, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3114, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":3115
 *         if verb:
 *             print("dC=")
 *             sig_on()             # <<<<<<<<<<<<<<
 *             printDict(dC)
 *             sig_off()
 */
    __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 3115, __pyx_L1_error)

    /* "automata/cautomata.pyx":3116
 *             print("dC=")
 *             sig_on()
 *             printDict(dC)             # <<<<<<<<<<<<<<
 *             sig_off()
 *         sig_on()
 */
    printDict(__pyx_v_dC);

    /* "automata/cautomata.pyx":3117
 *             sig_on()
 *             printDict(dC)
 *             sig_off()             # <<<<<<<<<<<<<<
 *         sig_on()
 *         ap = Product(a1.a[0], a2.a[0], dC, verb)
 */
    sig_off();

    /* "automata/cautomata.pyx":3113
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, a1.A, a2.A, dv=dv, verb=verb)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("dC=")
 *             sig_on()
 */
  }

  /* "automata/cautomata.pyx":3118
 *             printDict(dC)
 *             sig_off()
 *         sig_on()             # <<<<<<<<<<<<<<
 *         ap = Product(a1.a[0], a2.a[0], dC, verb)
 *         FreeDict(&dC)
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 3118, __pyx_L1_error)

  /* "automata/cautomata.pyx":3119
 *             sig_off()
 *         sig_on()
 *         ap = Product(a1.a[0], a2.a[0], dC, verb)             # <<<<<<<<<<<<<<
 *         FreeDict(&dC)
 *         sig_off()
 */
  __pyx_t_10 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_10 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3119, __pyx_L1_error)
  __pyx_v_ap = Product((__pyx_v_a1->a[0]), (__pyx_v_a2->a[0]), __pyx_v_dC, __pyx_t_10);

  /* "automata/cautomata.pyx":3120
 *         sig_on()
 *         ap = Product(a1.a[0], a2.a[0], dC, verb)
 *         FreeDict(&dC)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         # set final states
 */
  FreeDict((&__pyx_v_dC));

  /* "automata/cautomata.pyx":3121
 *         ap = Product(a1.a[0], a2.a[0], dC, verb)
 *         FreeDict(&dC)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         # set final states
 *         cdef int i, j
 */
  sig_off();

  /* "automata/cautomata.pyx":3124
 *         # set final states
 *         cdef int i, j
 *         cdef n1 = a1.a.n             # <<<<<<<<<<<<<<
 *         for i in range(n1):
 *             for j in range(a2.a.n):
 */
  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_a1->a->n); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3124, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_n1 = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3125
 *         cdef int i, j
 *         cdef n1 = a1.a.n
 *         for i in range(n1):             # <<<<<<<<<<<<<<
 *             for j in range(a2.a.n):
 *                 ap.e[i + n1 * j].final = a1.a.e[i].final or a2.a.e[j].final
 */
  __pyx_t_11 = __Pyx_PyInt_As_long(__pyx_v_n1); if (unlikely((__pyx_t_11 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 3125, __pyx_L1_error)
  __pyx_t_12 = __pyx_t_11;
  for (__pyx_t_5 = 0; __pyx_t_5 < __pyx_t_12; __pyx_t_5+=1) {
    __pyx_v_i = __pyx_t_5;

    /* "automata/cautomata.pyx":3126
 *         cdef n1 = a1.a.n
 *         for i in range(n1):
 *             for j in range(a2.a.n):             # <<<<<<<<<<<<<<
 *                 ap.e[i + n1 * j].final = a1.a.e[i].final or a2.a.e[j].final
 * 
 */
    __pyx_t_13 = __pyx_v_a2->a->n;
    __pyx_t_14 = __pyx_t_13;
    for (__pyx_t_15 = 0; __pyx_t_15 < __pyx_t_14; __pyx_t_15+=1) {
      __pyx_v_j = __pyx_t_15;

      /* "automata/cautomata.pyx":3127
 *         for i in range(n1):
 *             for j in range(a2.a.n):
 *                 ap.e[i + n1 * j].final = a1.a.e[i].final or a2.a.e[j].final             # <<<<<<<<<<<<<<
 * 
 *         r.a[0] = ap
 */
      if (!(__pyx_v_a1->a->e[__pyx_v_i]).final) {
      } else {
        __pyx_t_10 = (__pyx_v_a1->a->e[__pyx_v_i]).final;
        goto __pyx_L12_bool_binop_done;
      }
      __pyx_t_10 = (__pyx_v_a2->a->e[__pyx_v_j]).final;
      __pyx_L12_bool_binop_done:;
      __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3127, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_j); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3127, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __pyx_t_3 = PyNumber_Multiply(__pyx_v_n1, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3127, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = PyNumber_Add(__pyx_t_2, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3127, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_6 = __Pyx_PyIndex_AsSsize_t(__pyx_t_1); if (unlikely((__pyx_t_6 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 3127, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      (__pyx_v_ap.e[__pyx_t_6]).final = __pyx_t_10;
    }
  }

  /* "automata/cautomata.pyx":3129
 *                 ap.e[i + n1 * j].final = a1.a.e[i].final or a2.a.e[j].final
 * 
 *         r.a[0] = ap             # <<<<<<<<<<<<<<
 *         r.A = Av
 *         if simplify:
 */
  (__pyx_v_r->a[0]) = __pyx_v_ap;

  /* "automata/cautomata.pyx":3130
 * 
 *         r.a[0] = ap
 *         r.A = Av             # <<<<<<<<<<<<<<
 *         if simplify:
 *             return r.prune().minimize()
 */
  __Pyx_INCREF(__pyx_v_Av);
  __Pyx_GIVEREF(__pyx_v_Av);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = __pyx_v_Av;

  /* "automata/cautomata.pyx":3131
 *         r.a[0] = ap
 *         r.A = Av
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return r.prune().minimize()
 *         else:
 */
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_v_simplify); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 3131, __pyx_L1_error)
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":3132
 *         r.A = Av
 *         if simplify:
 *             return r.prune().minimize()             # <<<<<<<<<<<<<<
 *         else:
 *             return r
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_r), __pyx_n_s_prune); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3132, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_16 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_16 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_16)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_16);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    __pyx_t_3 = (__pyx_t_16) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_16) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
    __Pyx_XDECREF(__pyx_t_16); __pyx_t_16 = 0;
    if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3132, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_minimize); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3132, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_2, function);
      }
    }
    __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3132, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":3131
 *         r.a[0] = ap
 *         r.A = Av
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return r.prune().minimize()
 *         else:
 */
  }

  /* "automata/cautomata.pyx":3134
 *             return r.prune().minimize()
 *         else:
 *             return r             # <<<<<<<<<<<<<<
 * 
 *     def split(self, DeterministicAutomaton a, bool simplify=True, bool verb=False):
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(((PyObject *)__pyx_v_r));
    __pyx_r = ((PyObject *)__pyx_v_r);
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":3022
 * 
 *     # Use epsilon-transitions rather than product ?
 *     def union(self, DeterministicAutomaton a, simplify=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Return an automaton recognizing the union of the two languages.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_16);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.union", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_a1);
  __Pyx_XDECREF((PyObject *)__pyx_v_a2);
  __Pyx_XDECREF(__pyx_v_A);
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_Av);
  __Pyx_XDECREF(__pyx_v_dv);
  __Pyx_XDECREF(__pyx_v_n1);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3136
 *             return r
 * 
 *     def split(self, DeterministicAutomaton a, bool simplify=True, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Split the automaton with respect to a :class:`DeterministicAutomaton` ``a``.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_75split(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_74split[] = "\n        Split the automaton with respect to a :class:`DeterministicAutomaton` ``a``.\n        Return two DeterministicAutomaton recognizing the intersection of the language\n        of self with the one of a and with the complementary of the language\n        of a.\n        We assume that the two automata have the same alphabet, otherwise the\n        complementary is taken in the set of words over the intersection of\n        the two alphabets.\n\n        INPUT:\n\n        - ``a`` -- :class:`DeterministicAutomaton` - we split ``self`` with respect\n          to this automaton.\n\n        - ``simplify`` -- bool (default: True) - if True, prune and\n          minimize the result.\n\n        - ``verb`` -- bool (default: False) - if True, display\n          informations for debugging.\n\n        OUTPUT:\n\n        Return tuple of two splited automaton, recognizing respectively\n        the language intersection of L and La, and the language\n        intersection of L and complementary of La,\n        where L is the language of self and La is the language of a.\n\n        EXAMPLES::\n\n            sage: a = dag.AnyWord(['a', 'b'])\n            sage: b = a.concatenate(dag.Word(['a', 'a'])).concatenate(a)\n            sage: a.split(b)\n            [DeterministicAutomaton with 3 states and an alphabet of 2 letters,\n             DeterministicAutomaton with 2 states and an alphabet of 2 letters]\n            sage: a = dag.AnyWord(['a', 'b'])\n            sage: b = a.concatenate(dag.Word(['a', 'a'])).concatenate(a)\n            sage: c = a.concatenate(dag.Word(['b', 'b'])).concatenate(a)\n            sage: c.split(b)\n            [DeterministicAutomaton with 8 states and an alphabet of 2 letters,\n             DeterministicAutomaton with 5 states and an alphabet of 2 letters]\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = DeterministicAutomaton([(3, 2, 'a'), (1, 2, 'd')], i=2)\n            sage: a.split(b)\n           "" [DeterministicAutomaton with 1 state and an alphabet of 1 letter,\n             DeterministicAutomaton with 2 states and an alphabet of 1 letter]\n            sage: b = DeterministicAutomaton([(3, 2, 'a'), (1, 2, 'd')])\n            sage: a.split(b)\n            [DeterministicAutomaton with 1 state and an alphabet of 1 letter,\n             DeterministicAutomaton with 2 states and an alphabet of 1 letter]\n            sage: print(a)\n            DeterministicAutomaton with 4 states and an alphabet of 2 letters\n\n        TESTS::\n\n            sage: a = dag.AnyWord(['a', 'b'])\n            sage: b = dag.AnyWord(['c', 'a'])\n            sage: a.split(b)\n            [DeterministicAutomaton with 1 state and an alphabet of 1 letter,\n             DeterministicAutomaton with 1 state and an alphabet of 1 letter]\n            sage: print(a)\n            DeterministicAutomaton with 1 state and an alphabet of 2 letters\n            \n        .. WARNING::\n\n            There is a side-effect: the automaton ``a`` is completed.\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_75split(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a = 0;
  bool __pyx_v_simplify;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("split (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a,&__pyx_n_s_simplify,&__pyx_n_s_verb,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_simplify);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "split") < 0)) __PYX_ERR(0, 3136, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)values[0]);
    if (values[1]) {
      __pyx_v_simplify = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_simplify == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3136, __pyx_L3_error)
    } else {
      __pyx_v_simplify = ((bool)1);
    }
    if (values[2]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[2]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3136, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("split", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 3136, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.split", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_a), __pyx_ptype_8automata_9cautomata_DeterministicAutomaton, 1, "a", 0))) __PYX_ERR(0, 3136, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_74split(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_a, __pyx_v_simplify, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_74split(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, bool __pyx_v_simplify, bool __pyx_v_verb) {
  Automaton __pyx_v_ap;
  Automaton __pyx_v_ap2;
  Dict __pyx_v_dC;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = 0;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r2 = 0;
  PyObject *__pyx_v_Av = 0;
  PyObject *__pyx_v_d = NULL;
  PyObject *__pyx_v_l = NULL;
  PyObject *__pyx_v_dv = NULL;
  int __pyx_v_i;
  int __pyx_v_j;
  PyObject *__pyx_v_n1 = 0;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  struct __pyx_opt_args_8automata_9cautomata_imagProductDict __pyx_t_8;
  Dict __pyx_t_9;
  struct __pyx_opt_args_8automata_9cautomata_getProductDict __pyx_t_10;
  long __pyx_t_11;
  long __pyx_t_12;
  int __pyx_t_13;
  int __pyx_t_14;
  int __pyx_t_15;
  bool __pyx_t_16;
  PyObject *__pyx_t_17 = NULL;
  PyObject *__pyx_t_18 = NULL;
  __Pyx_RefNannySetupContext("split", 0);

  /* "automata/cautomata.pyx":3210
 * 
 *         # complete the automaton a
 *         sig_on()             # <<<<<<<<<<<<<<
 *         CompleteAutomaton(a.a)
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 3210, __pyx_L1_error)

  /* "automata/cautomata.pyx":3211
 *         # complete the automaton a
 *         sig_on()
 *         CompleteAutomaton(a.a)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         # make the product
 */
  (void)(CompleteAutomaton(__pyx_v_a->a));

  /* "automata/cautomata.pyx":3212
 *         sig_on()
 *         CompleteAutomaton(a.a)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         # make the product
 *         d = {}
 */
  sig_off();

  /* "automata/cautomata.pyx":3214
 *         sig_off()
 *         # make the product
 *         d = {}             # <<<<<<<<<<<<<<
 *         for l in self.A:
 *             if l in a.A:
 */
  __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3214, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_d = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3215
 *         # make the product
 *         d = {}
 *         for l in self.A:             # <<<<<<<<<<<<<<
 *             if l in a.A:
 *                 d[(l, l)] = l
 */
  if (unlikely(__pyx_v_self->A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 3215, __pyx_L1_error)
  }
  __pyx_t_2 = __pyx_v_self->A; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
  for (;;) {
    if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_4 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_4); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 3215, __pyx_L1_error)
    #else
    __pyx_t_4 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3215, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_l, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3216
 *         d = {}
 *         for l in self.A:
 *             if l in a.A:             # <<<<<<<<<<<<<<
 *                 d[(l, l)] = l
 * 
 */
    __pyx_t_5 = (__Pyx_PySequence_ContainsTF(__pyx_v_l, __pyx_v_a->A, Py_EQ)); if (unlikely(__pyx_t_5 < 0)) __PYX_ERR(0, 3216, __pyx_L1_error)
    __pyx_t_6 = (__pyx_t_5 != 0);
    if (__pyx_t_6) {

      /* "automata/cautomata.pyx":3217
 *         for l in self.A:
 *             if l in a.A:
 *                 d[(l, l)] = l             # <<<<<<<<<<<<<<
 * 
 *         r = DeterministicAutomaton(None)
 */
      __pyx_t_4 = PyTuple_New(2); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3217, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_v_l);
      __Pyx_GIVEREF(__pyx_v_l);
      PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_l);
      __Pyx_INCREF(__pyx_v_l);
      __Pyx_GIVEREF(__pyx_v_l);
      PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_l);
      if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_t_4, __pyx_v_l) < 0)) __PYX_ERR(0, 3217, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":3216
 *         d = {}
 *         for l in self.A:
 *             if l in a.A:             # <<<<<<<<<<<<<<
 *                 d[(l, l)] = l
 * 
 */
    }

    /* "automata/cautomata.pyx":3215
 *         # make the product
 *         d = {}
 *         for l in self.A:             # <<<<<<<<<<<<<<
 *             if l in a.A:
 *                 d[(l, l)] = l
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3219
 *                 d[(l, l)] = l
 * 
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         r2 = DeterministicAutomaton(None)
 *         Av = []
 */
  __pyx_t_2 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3219, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3220
 * 
 *         r = DeterministicAutomaton(None)
 *         r2 = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         Av = []
 *         dv = imagProductDict(d, self.A, a.A, Av=Av)
 */
  __pyx_t_2 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3220, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_r2 = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3221
 *         r = DeterministicAutomaton(None)
 *         r2 = DeterministicAutomaton(None)
 *         Av = []             # <<<<<<<<<<<<<<
 *         dv = imagProductDict(d, self.A, a.A, Av=Av)
 *         if verb:
 */
  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3221, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_Av = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3222
 *         r2 = DeterministicAutomaton(None)
 *         Av = []
 *         dv = imagProductDict(d, self.A, a.A, Av=Av)             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("Av=%s" % Av)
 */
  __pyx_t_2 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_2);
  __pyx_t_4 = __pyx_v_a->A;
  __Pyx_INCREF(__pyx_t_4);
  __pyx_t_8.__pyx_n = 1;
  __pyx_t_8.Av = __pyx_v_Av;
  __pyx_t_7 = __pyx_f_8automata_9cautomata_imagProductDict(__pyx_v_d, ((PyObject*)__pyx_t_2), ((PyObject*)__pyx_t_4), &__pyx_t_8); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3222, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_v_dv = __pyx_t_7;
  __pyx_t_7 = 0;

  /* "automata/cautomata.pyx":3223
 *         Av = []
 *         dv = imagProductDict(d, self.A, a.A, Av=Av)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)
 */
  __pyx_t_6 = (__pyx_v_verb != 0);
  if (__pyx_t_6) {

    /* "automata/cautomata.pyx":3224
 *         dv = imagProductDict(d, self.A, a.A, Av=Av)
 *         if verb:
 *             print("Av=%s" % Av)             # <<<<<<<<<<<<<<
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, self.A, a.A, dv=dv, verb=verb)
 */
    __pyx_t_7 = __Pyx_PyString_Format(__pyx_kp_s_Av_s, __pyx_v_Av); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3224, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3224, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3225
 *         if verb:
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)             # <<<<<<<<<<<<<<
 *         dC = getProductDict(d, self.A, a.A, dv=dv, verb=verb)
 *         if verb:
 */
    __pyx_t_4 = __Pyx_PyString_FormatSafe(__pyx_kp_s_dv_s, __pyx_v_dv); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3225, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_7 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_4); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3225, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

    /* "automata/cautomata.pyx":3223
 *         Av = []
 *         dv = imagProductDict(d, self.A, a.A, Av=Av)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)
 */
  }

  /* "automata/cautomata.pyx":3226
 *             print("Av=%s" % Av)
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, self.A, a.A, dv=dv, verb=verb)             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("dC=")
 */
  __pyx_t_7 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_7);
  __pyx_t_4 = __pyx_v_a->A;
  __Pyx_INCREF(__pyx_t_4);
  if (!(likely(PyDict_CheckExact(__pyx_v_dv))||((__pyx_v_dv) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_v_dv)->tp_name), 0))) __PYX_ERR(0, 3226, __pyx_L1_error)
  __pyx_t_2 = __Pyx_PyInt_From_bool(__pyx_v_verb); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3226, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_10.__pyx_n = 2;
  __pyx_t_10.dv = ((PyObject*)__pyx_v_dv);
  __pyx_t_10.verb = __pyx_t_2;
  __pyx_t_9 = __pyx_f_8automata_9cautomata_getProductDict(__pyx_v_d, ((PyObject*)__pyx_t_7), ((PyObject*)__pyx_t_4), &__pyx_t_10); 
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_dC = __pyx_t_9;

  /* "automata/cautomata.pyx":3227
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, self.A, a.A, dv=dv, verb=verb)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("dC=")
 *             sig_on()
 */
  __pyx_t_6 = (__pyx_v_verb != 0);
  if (__pyx_t_6) {

    /* "automata/cautomata.pyx":3228
 *         dC = getProductDict(d, self.A, a.A, dv=dv, verb=verb)
 *         if verb:
 *             print("dC=")             # <<<<<<<<<<<<<<
 *             sig_on()
 *             printDict(dC)
 */
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__54, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3228, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":3229
 *         if verb:
 *             print("dC=")
 *             sig_on()             # <<<<<<<<<<<<<<
 *             printDict(dC)
 *             sig_off()
 */
    __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 3229, __pyx_L1_error)

    /* "automata/cautomata.pyx":3230
 *             print("dC=")
 *             sig_on()
 *             printDict(dC)             # <<<<<<<<<<<<<<
 *             sig_off()
 *         sig_on()
 */
    printDict(__pyx_v_dC);

    /* "automata/cautomata.pyx":3231
 *             sig_on()
 *             printDict(dC)
 *             sig_off()             # <<<<<<<<<<<<<<
 *         sig_on()
 *         ap = Product(self.a[0], a.a[0], dC, verb)
 */
    sig_off();

    /* "automata/cautomata.pyx":3227
 *             print("dv=%s" % dv)
 *         dC = getProductDict(d, self.A, a.A, dv=dv, verb=verb)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("dC=")
 *             sig_on()
 */
  }

  /* "automata/cautomata.pyx":3232
 *             printDict(dC)
 *             sig_off()
 *         sig_on()             # <<<<<<<<<<<<<<
 *         ap = Product(self.a[0], a.a[0], dC, verb)
 *         FreeDict(&dC)
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 3232, __pyx_L1_error)

  /* "automata/cautomata.pyx":3233
 *             sig_off()
 *         sig_on()
 *         ap = Product(self.a[0], a.a[0], dC, verb)             # <<<<<<<<<<<<<<
 *         FreeDict(&dC)
 *         sig_off()
 */
  __pyx_v_ap = Product((__pyx_v_self->a[0]), (__pyx_v_a->a[0]), __pyx_v_dC, __pyx_v_verb);

  /* "automata/cautomata.pyx":3234
 *         sig_on()
 *         ap = Product(self.a[0], a.a[0], dC, verb)
 *         FreeDict(&dC)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         # set final states for the intersection
 */
  FreeDict((&__pyx_v_dC));

  /* "automata/cautomata.pyx":3235
 *         ap = Product(self.a[0], a.a[0], dC, verb)
 *         FreeDict(&dC)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         # set final states for the intersection
 *         cdef int i, j
 */
  sig_off();

  /* "automata/cautomata.pyx":3238
 *         # set final states for the intersection
 *         cdef int i, j
 *         cdef n1 = self.a.n             # <<<<<<<<<<<<<<
 *         for i in range(n1):
 *             for j in range(a.a.n):
 */
  __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_n1 = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3239
 *         cdef int i, j
 *         cdef n1 = self.a.n
 *         for i in range(n1):             # <<<<<<<<<<<<<<
 *             for j in range(a.a.n):
 *                 ap.e[i+n1*j].final = self.a.e[i].final and a.a.e[j].final
 */
  __pyx_t_11 = __Pyx_PyInt_As_long(__pyx_v_n1); if (unlikely((__pyx_t_11 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 3239, __pyx_L1_error)
  __pyx_t_12 = __pyx_t_11;
  for (__pyx_t_1 = 0; __pyx_t_1 < __pyx_t_12; __pyx_t_1+=1) {
    __pyx_v_i = __pyx_t_1;

    /* "automata/cautomata.pyx":3240
 *         cdef n1 = self.a.n
 *         for i in range(n1):
 *             for j in range(a.a.n):             # <<<<<<<<<<<<<<
 *                 ap.e[i+n1*j].final = self.a.e[i].final and a.a.e[j].final
 * 
 */
    __pyx_t_13 = __pyx_v_a->a->n;
    __pyx_t_14 = __pyx_t_13;
    for (__pyx_t_15 = 0; __pyx_t_15 < __pyx_t_14; __pyx_t_15+=1) {
      __pyx_v_j = __pyx_t_15;

      /* "automata/cautomata.pyx":3241
 *         for i in range(n1):
 *             for j in range(a.a.n):
 *                 ap.e[i+n1*j].final = self.a.e[i].final and a.a.e[j].final             # <<<<<<<<<<<<<<
 * 
 *         # complementary of a in self
 */
      if ((__pyx_v_self->a->e[__pyx_v_i]).final) {
      } else {
        __pyx_t_16 = (__pyx_v_self->a->e[__pyx_v_i]).final;
        goto __pyx_L12_bool_binop_done;
      }
      __pyx_t_16 = (__pyx_v_a->a->e[__pyx_v_j]).final;
      __pyx_L12_bool_binop_done:;
      __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3241, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_4 = __Pyx_PyInt_From_int(__pyx_v_j); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3241, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_7 = PyNumber_Multiply(__pyx_v_n1, __pyx_t_4); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3241, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyNumber_Add(__pyx_t_2, __pyx_t_7); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3241, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_3 = __Pyx_PyIndex_AsSsize_t(__pyx_t_4); if (unlikely((__pyx_t_3 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 3241, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      (__pyx_v_ap.e[__pyx_t_3]).final = __pyx_t_16;
    }
  }

  /* "automata/cautomata.pyx":3244
 * 
 *         # complementary of a in self
 *         sig_on()             # <<<<<<<<<<<<<<
 *         ap2 = CopyAutomaton(ap, ap.n, ap.na)
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 3244, __pyx_L1_error)

  /* "automata/cautomata.pyx":3245
 *         # complementary of a in self
 *         sig_on()
 *         ap2 = CopyAutomaton(ap, ap.n, ap.na)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         # set final states
 */
  __pyx_v_ap2 = CopyAutomaton(__pyx_v_ap, __pyx_v_ap.n, __pyx_v_ap.na);

  /* "automata/cautomata.pyx":3246
 *         sig_on()
 *         ap2 = CopyAutomaton(ap, ap.n, ap.na)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         # set final states
 *         for i in range(n1):
 */
  sig_off();

  /* "automata/cautomata.pyx":3248
 *         sig_off()
 *         # set final states
 *         for i in range(n1):             # <<<<<<<<<<<<<<
 *             for j in range(a.a.n):
 *                 ap2.e[i+n1*j].final = self.a.e[i].final and not a.a.e[j].final
 */
  __pyx_t_11 = __Pyx_PyInt_As_long(__pyx_v_n1); if (unlikely((__pyx_t_11 == (long)-1) && PyErr_Occurred())) __PYX_ERR(0, 3248, __pyx_L1_error)
  __pyx_t_12 = __pyx_t_11;
  for (__pyx_t_1 = 0; __pyx_t_1 < __pyx_t_12; __pyx_t_1+=1) {
    __pyx_v_i = __pyx_t_1;

    /* "automata/cautomata.pyx":3249
 *         # set final states
 *         for i in range(n1):
 *             for j in range(a.a.n):             # <<<<<<<<<<<<<<
 *                 ap2.e[i+n1*j].final = self.a.e[i].final and not a.a.e[j].final
 * 
 */
    __pyx_t_13 = __pyx_v_a->a->n;
    __pyx_t_14 = __pyx_t_13;
    for (__pyx_t_15 = 0; __pyx_t_15 < __pyx_t_14; __pyx_t_15+=1) {
      __pyx_v_j = __pyx_t_15;

      /* "automata/cautomata.pyx":3250
 *         for i in range(n1):
 *             for j in range(a.a.n):
 *                 ap2.e[i+n1*j].final = self.a.e[i].final and not a.a.e[j].final             # <<<<<<<<<<<<<<
 * 
 *         r.a[0] = ap
 */
      if ((__pyx_v_self->a->e[__pyx_v_i]).final) {
      } else {
        __pyx_t_16 = (__pyx_v_self->a->e[__pyx_v_i]).final;
        goto __pyx_L18_bool_binop_done;
      }
      __pyx_t_6 = (!((__pyx_v_a->a->e[__pyx_v_j]).final != 0));
      __pyx_t_16 = __pyx_t_6;
      __pyx_L18_bool_binop_done:;
      __pyx_t_4 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3250, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_7 = __Pyx_PyInt_From_int(__pyx_v_j); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3250, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_2 = PyNumber_Multiply(__pyx_v_n1, __pyx_t_7); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3250, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = PyNumber_Add(__pyx_t_4, __pyx_t_2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3250, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_3 = __Pyx_PyIndex_AsSsize_t(__pyx_t_7); if (unlikely((__pyx_t_3 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 3250, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      (__pyx_v_ap2.e[__pyx_t_3]).final = __pyx_t_16;
    }
  }

  /* "automata/cautomata.pyx":3252
 *                 ap2.e[i+n1*j].final = self.a.e[i].final and not a.a.e[j].final
 * 
 *         r.a[0] = ap             # <<<<<<<<<<<<<<
 *         r.A = Av
 *         r2.a[0] = ap2
 */
  (__pyx_v_r->a[0]) = __pyx_v_ap;

  /* "automata/cautomata.pyx":3253
 * 
 *         r.a[0] = ap
 *         r.A = Av             # <<<<<<<<<<<<<<
 *         r2.a[0] = ap2
 *         r2.A = Av
 */
  __Pyx_INCREF(__pyx_v_Av);
  __Pyx_GIVEREF(__pyx_v_Av);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = __pyx_v_Av;

  /* "automata/cautomata.pyx":3254
 *         r.a[0] = ap
 *         r.A = Av
 *         r2.a[0] = ap2             # <<<<<<<<<<<<<<
 *         r2.A = Av
 *         if simplify:
 */
  (__pyx_v_r2->a[0]) = __pyx_v_ap2;

  /* "automata/cautomata.pyx":3255
 *         r.A = Av
 *         r2.a[0] = ap2
 *         r2.A = Av             # <<<<<<<<<<<<<<
 *         if simplify:
 *             return [r.prune().minimize(), r2.prune().minimize()]
 */
  __Pyx_INCREF(__pyx_v_Av);
  __Pyx_GIVEREF(__pyx_v_Av);
  __Pyx_GOTREF(__pyx_v_r2->A);
  __Pyx_DECREF(__pyx_v_r2->A);
  __pyx_v_r2->A = __pyx_v_Av;

  /* "automata/cautomata.pyx":3256
 *         r2.a[0] = ap2
 *         r2.A = Av
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return [r.prune().minimize(), r2.prune().minimize()]
 *         else:
 */
  __pyx_t_6 = (__pyx_v_simplify != 0);
  if (__pyx_t_6) {

    /* "automata/cautomata.pyx":3257
 *         r2.A = Av
 *         if simplify:
 *             return [r.prune().minimize(), r2.prune().minimize()]             # <<<<<<<<<<<<<<
 *         else:
 *             return [r, r2]
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_r), __pyx_n_s_prune); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3257, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_17 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_17 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_17)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_17);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_2 = (__pyx_t_17) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_17) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
    __Pyx_XDECREF(__pyx_t_17); __pyx_t_17 = 0;
    if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3257, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_minimize); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3257, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_7 = (__pyx_t_2) ? __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_2) : __Pyx_PyObject_CallNoArg(__pyx_t_4);
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3257, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_17 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_r2), __pyx_n_s_prune); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 3257, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_17);
    __pyx_t_18 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_17))) {
      __pyx_t_18 = PyMethod_GET_SELF(__pyx_t_17);
      if (likely(__pyx_t_18)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_17);
        __Pyx_INCREF(__pyx_t_18);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_17, function);
      }
    }
    __pyx_t_2 = (__pyx_t_18) ? __Pyx_PyObject_CallOneArg(__pyx_t_17, __pyx_t_18) : __Pyx_PyObject_CallNoArg(__pyx_t_17);
    __Pyx_XDECREF(__pyx_t_18); __pyx_t_18 = 0;
    if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3257, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_17); __pyx_t_17 = 0;
    __pyx_t_17 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_minimize); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 3257, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_17);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_17))) {
      __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_17);
      if (likely(__pyx_t_2)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_17);
        __Pyx_INCREF(__pyx_t_2);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_17, function);
      }
    }
    __pyx_t_4 = (__pyx_t_2) ? __Pyx_PyObject_CallOneArg(__pyx_t_17, __pyx_t_2) : __Pyx_PyObject_CallNoArg(__pyx_t_17);
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3257, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_17); __pyx_t_17 = 0;
    __pyx_t_17 = PyList_New(2); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 3257, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_17);
    __Pyx_GIVEREF(__pyx_t_7);
    PyList_SET_ITEM(__pyx_t_17, 0, __pyx_t_7);
    __Pyx_GIVEREF(__pyx_t_4);
    PyList_SET_ITEM(__pyx_t_17, 1, __pyx_t_4);
    __pyx_t_7 = 0;
    __pyx_t_4 = 0;
    __pyx_r = __pyx_t_17;
    __pyx_t_17 = 0;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":3256
 *         r2.a[0] = ap2
 *         r2.A = Av
 *         if simplify:             # <<<<<<<<<<<<<<
 *             return [r.prune().minimize(), r2.prune().minimize()]
 *         else:
 */
  }

  /* "automata/cautomata.pyx":3259
 *             return [r.prune().minimize(), r2.prune().minimize()]
 *         else:
 *             return [r, r2]             # <<<<<<<<<<<<<<
 * 
 *     def shift_in_place(self, l, int np=1, verb=False):
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __pyx_t_17 = PyList_New(2); if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 3259, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_17);
    __Pyx_INCREF(((PyObject *)__pyx_v_r));
    __Pyx_GIVEREF(((PyObject *)__pyx_v_r));
    PyList_SET_ITEM(__pyx_t_17, 0, ((PyObject *)__pyx_v_r));
    __Pyx_INCREF(((PyObject *)__pyx_v_r2));
    __Pyx_GIVEREF(((PyObject *)__pyx_v_r2));
    PyList_SET_ITEM(__pyx_t_17, 1, ((PyObject *)__pyx_v_r2));
    __pyx_r = __pyx_t_17;
    __pyx_t_17 = 0;
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":3136
 *             return r
 * 
 *     def split(self, DeterministicAutomaton a, bool simplify=True, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Split the automaton with respect to a :class:`DeterministicAutomaton` ``a``.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_17);
  __Pyx_XDECREF(__pyx_t_18);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.split", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF((PyObject *)__pyx_v_r2);
  __Pyx_XDECREF(__pyx_v_Av);
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XDECREF(__pyx_v_dv);
  __Pyx_XDECREF(__pyx_v_n1);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3261
 *             return [r, r2]
 * 
 *     def shift_in_place(self, l, int np=1, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Shift the automaton in-place to recognize the language shifted ``np``
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_77shift_in_place(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_76shift_in_place[] = "\n        Shift the automaton in-place to recognize the language shifted ``np``\n        times by the letter l.\n        The new language is the language of words u such that (l^np)u \n        was recognized by self.\n\n        INPUT:\n\n        - ``l`` -- letter to shift\n        - ``np`` -- int (default: ``1``) - number of time we shift\n        - ``verb`` -- boolean (default: ``False``) - if True, print\n          debugging informations\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.initial_state\n            0\n            sage: a.shift_in_place('a')\n            sage: a.initial_state\n            1\n            sage: a.shift_in_place('a', 2)\n            sage: a.initial_state\n            -1\n\n        TESTS::\n\n            sage: a = dag.AnyWord(['a', 'b'])\n            sage: a.shift_in_place('c')\n            Traceback (most recent call last):\n            ...\n            ValueError: 'c' is not a letter of the alphabet ['a', 'b']\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_77shift_in_place(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_l = 0;
  int __pyx_v_np;
  CYTHON_UNUSED PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("shift_in_place (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_l,&__pyx_n_s_np,&__pyx_n_s_verb,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_l)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_np);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "shift_in_place") < 0)) __PYX_ERR(0, 3261, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_l = values[0];
    if (values[1]) {
      __pyx_v_np = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_np == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 3261, __pyx_L3_error)
    } else {
      __pyx_v_np = ((int)1);
    }
    __pyx_v_verb = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("shift_in_place", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 3261, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.shift_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_76shift_in_place(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_l, __pyx_v_np, __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_76shift_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l, int __pyx_v_np, CYTHON_UNUSED PyObject *__pyx_v_verb) {
  CYTHON_UNUSED int __pyx_v_i;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  int __pyx_t_10;
  int __pyx_t_11;
  int __pyx_t_12;
  Py_ssize_t __pyx_t_13;
  __Pyx_RefNannySetupContext("shift_in_place", 0);
  __Pyx_INCREF(__pyx_v_l);

  /* "automata/cautomata.pyx":3297
 *         """
 *         cdef int i
 *         try:             # <<<<<<<<<<<<<<
 *             l = self.A.index(l)
 *         except:
 */
  {
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ExceptionSave(&__pyx_t_1, &__pyx_t_2, &__pyx_t_3);
    __Pyx_XGOTREF(__pyx_t_1);
    __Pyx_XGOTREF(__pyx_t_2);
    __Pyx_XGOTREF(__pyx_t_3);
    /*try:*/ {

      /* "automata/cautomata.pyx":3298
 *         cdef int i
 *         try:
 *             l = self.A.index(l)             # <<<<<<<<<<<<<<
 *         except:
 *             raise ValueError("%r is not a letter of the alphabet %s" % (l, self.A))
 */
      __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->A, __pyx_n_s_index); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 3298, __pyx_L3_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_6 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
        __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
        if (likely(__pyx_t_6)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
          __Pyx_INCREF(__pyx_t_6);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_5, function);
        }
      }
      __pyx_t_4 = (__pyx_t_6) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_6, __pyx_v_l) : __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_v_l);
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3298, __pyx_L3_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF_SET(__pyx_v_l, __pyx_t_4);
      __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":3297
 *         """
 *         cdef int i
 *         try:             # <<<<<<<<<<<<<<
 *             l = self.A.index(l)
 *         except:
 */
    }
    __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L8_try_end;
    __pyx_L3_error:;
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3299
 *         try:
 *             l = self.A.index(l)
 *         except:             # <<<<<<<<<<<<<<
 *             raise ValueError("%r is not a letter of the alphabet %s" % (l, self.A))
 *         for i in range(np):
 */
    /*except:*/ {
      __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.shift_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (__Pyx_GetException(&__pyx_t_4, &__pyx_t_5, &__pyx_t_6) < 0) __PYX_ERR(0, 3299, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_GOTREF(__pyx_t_6);

      /* "automata/cautomata.pyx":3300
 *             l = self.A.index(l)
 *         except:
 *             raise ValueError("%r is not a letter of the alphabet %s" % (l, self.A))             # <<<<<<<<<<<<<<
 *         for i in range(np):
 *             if self.a.i != -1:
 */
      __pyx_t_7 = PyTuple_New(2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3300, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_INCREF(__pyx_v_l);
      __Pyx_GIVEREF(__pyx_v_l);
      PyTuple_SET_ITEM(__pyx_t_7, 0, __pyx_v_l);
      __Pyx_INCREF(__pyx_v_self->A);
      __Pyx_GIVEREF(__pyx_v_self->A);
      PyTuple_SET_ITEM(__pyx_t_7, 1, __pyx_v_self->A);
      __pyx_t_8 = __Pyx_PyString_Format(__pyx_kp_s_r_is_not_a_letter_of_the_alphab, __pyx_t_7); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 3300, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_8); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3300, __pyx_L5_except_error)
      __Pyx_GOTREF(__pyx_t_7);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_Raise(__pyx_t_7, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __PYX_ERR(0, 3300, __pyx_L5_except_error)
    }
    __pyx_L5_except_error:;

    /* "automata/cautomata.pyx":3297
 *         """
 *         cdef int i
 *         try:             # <<<<<<<<<<<<<<
 *             l = self.A.index(l)
 *         except:
 */
    __Pyx_XGIVEREF(__pyx_t_1);
    __Pyx_XGIVEREF(__pyx_t_2);
    __Pyx_XGIVEREF(__pyx_t_3);
    __Pyx_ExceptionReset(__pyx_t_1, __pyx_t_2, __pyx_t_3);
    goto __pyx_L1_error;
    __pyx_L8_try_end:;
  }

  /* "automata/cautomata.pyx":3301
 *         except:
 *             raise ValueError("%r is not a letter of the alphabet %s" % (l, self.A))
 *         for i in range(np):             # <<<<<<<<<<<<<<
 *             if self.a.i != -1:
 *                 self.a.i = self.a.e[self.a.i].f[l]
 */
  __pyx_t_9 = __pyx_v_np;
  __pyx_t_10 = __pyx_t_9;
  for (__pyx_t_11 = 0; __pyx_t_11 < __pyx_t_10; __pyx_t_11+=1) {
    __pyx_v_i = __pyx_t_11;

    /* "automata/cautomata.pyx":3302
 *             raise ValueError("%r is not a letter of the alphabet %s" % (l, self.A))
 *         for i in range(np):
 *             if self.a.i != -1:             # <<<<<<<<<<<<<<
 *                 self.a.i = self.a.e[self.a.i].f[l]
 * 
 */
    __pyx_t_12 = ((__pyx_v_self->a->i != -1L) != 0);
    if (__pyx_t_12) {

      /* "automata/cautomata.pyx":3303
 *         for i in range(np):
 *             if self.a.i != -1:
 *                 self.a.i = self.a.e[self.a.i].f[l]             # <<<<<<<<<<<<<<
 * 
 *     def shift_list_in_place(self, list l):
 */
      __pyx_t_13 = __Pyx_PyIndex_AsSsize_t(__pyx_v_l); if (unlikely((__pyx_t_13 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 3303, __pyx_L1_error)
      __pyx_v_self->a->i = ((__pyx_v_self->a->e[__pyx_v_self->a->i]).f[__pyx_t_13]);

      /* "automata/cautomata.pyx":3302
 *             raise ValueError("%r is not a letter of the alphabet %s" % (l, self.A))
 *         for i in range(np):
 *             if self.a.i != -1:             # <<<<<<<<<<<<<<
 *                 self.a.i = self.a.e[self.a.i].f[l]
 * 
 */
    }
  }

  /* "automata/cautomata.pyx":3261
 *             return [r, r2]
 * 
 *     def shift_in_place(self, l, int np=1, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Shift the automaton in-place to recognize the language shifted ``np``
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.shift_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3305
 *                 self.a.i = self.a.e[self.a.i].f[l]
 * 
 *     def shift_list_in_place(self, list l):             # <<<<<<<<<<<<<<
 *         """
 *         Shift the automaton in-place to recognize the language shifted by l (list of letters).
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_79shift_list_in_place(PyObject *__pyx_v_self, PyObject *__pyx_v_l); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_78shift_list_in_place[] = "\n        Shift the automaton in-place to recognize the language shifted by l (list of letters).\n        The new language is the language of words u such that lu \n        was recognized by self.\n\n        INPUT:\n\n        - ``l`` -- list - list of letter to shift\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.initial_state\n            0\n            sage: a.shift_list_in_place(['a'])\n            sage: a.initial_state\n            1\n\n        TESTS::\n\n            sage: a = dag.Word(['a','b','a','b'])\n            sage: a.shift_list_in_place(['a','b'])\n            sage: a.simplify().has_same_language_as(dag.Word(['a','b']))\n            True\n\n            sage: a = dag.AnyWord(['a', 'b'])\n            sage: a.shift_list_in_place(['a','c'])\n            Traceback (most recent call last):\n            ...\n            ValueError: 'c' is not in the alphabet ['a', 'b']\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_79shift_list_in_place(PyObject *__pyx_v_self, PyObject *__pyx_v_l) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("shift_list_in_place (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_l), (&PyList_Type), 1, "l", 1))) __PYX_ERR(0, 3305, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_78shift_list_in_place(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((PyObject*)__pyx_v_l));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_78shift_list_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l) {
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  Py_ssize_t __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  Py_ssize_t __pyx_t_12;
  __Pyx_RefNannySetupContext("shift_list_in_place", 0);

  /* "automata/cautomata.pyx":3338
 * 
 *         """
 *         for i in l:             # <<<<<<<<<<<<<<
 *             try:
 *                 i = self.A.index(i)
 */
  if (unlikely(__pyx_v_l == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 3338, __pyx_L1_error)
  }
  __pyx_t_1 = __pyx_v_l; __Pyx_INCREF(__pyx_t_1); __pyx_t_2 = 0;
  for (;;) {
    if (__pyx_t_2 >= PyList_GET_SIZE(__pyx_t_1)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_2); __Pyx_INCREF(__pyx_t_3); __pyx_t_2++; if (unlikely(0 < 0)) __PYX_ERR(0, 3338, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_1, __pyx_t_2); __pyx_t_2++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3338, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":3339
 *         """
 *         for i in l:
 *             try:             # <<<<<<<<<<<<<<
 *                 i = self.A.index(i)
 *             except:
 */
    {
      __Pyx_PyThreadState_declare
      __Pyx_PyThreadState_assign
      __Pyx_ExceptionSave(&__pyx_t_4, &__pyx_t_5, &__pyx_t_6);
      __Pyx_XGOTREF(__pyx_t_4);
      __Pyx_XGOTREF(__pyx_t_5);
      __Pyx_XGOTREF(__pyx_t_6);
      /*try:*/ {

        /* "automata/cautomata.pyx":3340
 *         for i in l:
 *             try:
 *                 i = self.A.index(i)             # <<<<<<<<<<<<<<
 *             except:
 *                 raise ValueError("%r is not in the alphabet %s" % (i, self.A))
 */
        __pyx_t_7 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->A, __pyx_n_s_index); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3340, __pyx_L5_error)
        __Pyx_GOTREF(__pyx_t_7);
        __pyx_t_8 = NULL;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_7))) {
          __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_7);
          if (likely(__pyx_t_8)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_7);
            __Pyx_INCREF(__pyx_t_8);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_7, function);
          }
        }
        __pyx_t_3 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_7, __pyx_t_8, __pyx_v_i) : __Pyx_PyObject_CallOneArg(__pyx_t_7, __pyx_v_i);
        __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3340, __pyx_L5_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
        __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_3);
        __pyx_t_3 = 0;

        /* "automata/cautomata.pyx":3339
 *         """
 *         for i in l:
 *             try:             # <<<<<<<<<<<<<<
 *                 i = self.A.index(i)
 *             except:
 */
      }
      __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      goto __pyx_L12_try_end;
      __pyx_L5_error:;
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":3341
 *             try:
 *                 i = self.A.index(i)
 *             except:             # <<<<<<<<<<<<<<
 *                 raise ValueError("%r is not in the alphabet %s" % (i, self.A))
 *             if self.a.i != -1:
 */
      /*except:*/ {
        __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.shift_list_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
        if (__Pyx_GetException(&__pyx_t_3, &__pyx_t_7, &__pyx_t_8) < 0) __PYX_ERR(0, 3341, __pyx_L7_except_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_GOTREF(__pyx_t_7);
        __Pyx_GOTREF(__pyx_t_8);

        /* "automata/cautomata.pyx":3342
 *                 i = self.A.index(i)
 *             except:
 *                 raise ValueError("%r is not in the alphabet %s" % (i, self.A))             # <<<<<<<<<<<<<<
 *             if self.a.i != -1:
 *                 self.a.i = self.a.e[self.a.i].f[i]
 */
        __pyx_t_9 = PyTuple_New(2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 3342, __pyx_L7_except_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_INCREF(__pyx_v_i);
        __Pyx_GIVEREF(__pyx_v_i);
        PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_v_i);
        __Pyx_INCREF(__pyx_v_self->A);
        __Pyx_GIVEREF(__pyx_v_self->A);
        PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_v_self->A);
        __pyx_t_10 = __Pyx_PyString_Format(__pyx_kp_s_r_is_not_in_the_alphabet_s, __pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 3342, __pyx_L7_except_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __pyx_t_9 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_10); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 3342, __pyx_L7_except_error)
        __Pyx_GOTREF(__pyx_t_9);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_Raise(__pyx_t_9, 0, 0, 0);
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        __PYX_ERR(0, 3342, __pyx_L7_except_error)
      }
      __pyx_L7_except_error:;

      /* "automata/cautomata.pyx":3339
 *         """
 *         for i in l:
 *             try:             # <<<<<<<<<<<<<<
 *                 i = self.A.index(i)
 *             except:
 */
      __Pyx_XGIVEREF(__pyx_t_4);
      __Pyx_XGIVEREF(__pyx_t_5);
      __Pyx_XGIVEREF(__pyx_t_6);
      __Pyx_ExceptionReset(__pyx_t_4, __pyx_t_5, __pyx_t_6);
      goto __pyx_L1_error;
      __pyx_L12_try_end:;
    }

    /* "automata/cautomata.pyx":3343
 *             except:
 *                 raise ValueError("%r is not in the alphabet %s" % (i, self.A))
 *             if self.a.i != -1:             # <<<<<<<<<<<<<<
 *                 self.a.i = self.a.e[self.a.i].f[i]
 * 
 */
    __pyx_t_11 = ((__pyx_v_self->a->i != -1L) != 0);
    if (__pyx_t_11) {

      /* "automata/cautomata.pyx":3344
 *                 raise ValueError("%r is not in the alphabet %s" % (i, self.A))
 *             if self.a.i != -1:
 *                 self.a.i = self.a.e[self.a.i].f[i]             # <<<<<<<<<<<<<<
 * 
 *     def unshift(self, l, int np=1, final=False):
 */
      __pyx_t_12 = __Pyx_PyIndex_AsSsize_t(__pyx_v_i); if (unlikely((__pyx_t_12 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 3344, __pyx_L1_error)
      __pyx_v_self->a->i = ((__pyx_v_self->a->e[__pyx_v_self->a->i]).f[__pyx_t_12]);

      /* "automata/cautomata.pyx":3343
 *             except:
 *                 raise ValueError("%r is not in the alphabet %s" % (i, self.A))
 *             if self.a.i != -1:             # <<<<<<<<<<<<<<
 *                 self.a.i = self.a.e[self.a.i].f[i]
 * 
 */
    }

    /* "automata/cautomata.pyx":3338
 * 
 *         """
 *         for i in l:             # <<<<<<<<<<<<<<
 *             try:
 *                 i = self.A.index(i)
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":3305
 *                 self.a.i = self.a.e[self.a.i].f[l]
 * 
 *     def shift_list_in_place(self, list l):             # <<<<<<<<<<<<<<
 *         """
 *         Shift the automaton in-place to recognize the language shifted by l (list of letters).
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.shift_list_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3346
 *                 self.a.i = self.a.e[self.a.i].f[i]
 * 
 *     def unshift(self, l, int np=1, final=False):             # <<<<<<<<<<<<<<
 *         """
 *         Unshift the automaton to recognize the language shifted
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_81unshift(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_80unshift[] = "\n        Unshift the automaton to recognize the language shifted\n        ``np`` times by letter ``l``.\n        The new language is the languages of words (l^np)u,\n        where u is recognized by self and l^np is\n        the letter l repeated np times.\n\n        INPUT:\n\n        - ``l`` -- letter to shift\n\n        - ``np``  --  int (default: ``1``)\n          Number of times we shift\n\n        - ``final`` -- boolean (default: ``False``)\n          if True, the empty word is added to the language\n\n        OUTPUT:\n\n        Return a :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.initial_state\n            0\n            sage: a.unshift('a')\n            DeterministicAutomaton with 5 states and an alphabet of 2 letters\n            sage: a.unshift('c')\n            DeterministicAutomaton with 5 states and an alphabet of 3 letters\n            sage: a.unshift('a', 4)\n            DeterministicAutomaton with 8 states and an alphabet of 2 letters\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_81unshift(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_l = 0;
  int __pyx_v_np;
  PyObject *__pyx_v_final = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("unshift (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_l,&__pyx_n_s_np,&__pyx_n_s_final,0};
    PyObject* values[3] = {0,0,0};
    values[2] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_l)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_np);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_final);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "unshift") < 0)) __PYX_ERR(0, 3346, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_l = values[0];
    if (values[1]) {
      __pyx_v_np = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_np == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 3346, __pyx_L3_error)
    } else {
      __pyx_v_np = ((int)1);
    }
    __pyx_v_final = values[2];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("unshift", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 3346, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.unshift", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_80unshift(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_l, __pyx_v_np, __pyx_v_final);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_80unshift(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l, int __pyx_v_np, PyObject *__pyx_v_final) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = 0;
  int __pyx_v_i;
  int __pyx_v_ne;
  PyObject *__pyx_v_j = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  Py_ssize_t __pyx_t_11;
  PyObject *(*__pyx_t_12)(PyObject *);
  int __pyx_t_13;
  int __pyx_t_14;
  Py_ssize_t __pyx_t_15;
  Py_ssize_t __pyx_t_16;
  bool __pyx_t_17;
  __Pyx_RefNannySetupContext("unshift", 0);
  __Pyx_INCREF(__pyx_v_l);

  /* "automata/cautomata.pyx":3384
 *         cdef int ne
 * 
 *         if np <= 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("np must be positive!")
 * 
 */
  __pyx_t_1 = ((__pyx_v_np <= 0) != 0);
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":3385
 * 
 *         if np <= 0:
 *             raise ValueError("np must be positive!")             # <<<<<<<<<<<<<<
 * 
 *         r = DeterministicAutomaton(None)
 */
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__55, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3385, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_ERR(0, 3385, __pyx_L1_error)

    /* "automata/cautomata.pyx":3384
 *         cdef int ne
 * 
 *         if np <= 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("np must be positive!")
 * 
 */
  }

  /* "automata/cautomata.pyx":3387
 *             raise ValueError("np must be positive!")
 * 
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         try:
 *             l = self.A.index(l)
 */
  __pyx_t_2 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3387, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3388
 * 
 *         r = DeterministicAutomaton(None)
 *         try:             # <<<<<<<<<<<<<<
 *             l = self.A.index(l)
 *             r.A = self.A[:]
 */
  {
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ExceptionSave(&__pyx_t_3, &__pyx_t_4, &__pyx_t_5);
    __Pyx_XGOTREF(__pyx_t_3);
    __Pyx_XGOTREF(__pyx_t_4);
    __Pyx_XGOTREF(__pyx_t_5);
    /*try:*/ {

      /* "automata/cautomata.pyx":3389
 *         r = DeterministicAutomaton(None)
 *         try:
 *             l = self.A.index(l)             # <<<<<<<<<<<<<<
 *             r.A = self.A[:]
 *             sig_on()
 */
      __pyx_t_6 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->A, __pyx_n_s_index); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3389, __pyx_L4_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_7 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_6))) {
        __pyx_t_7 = PyMethod_GET_SELF(__pyx_t_6);
        if (likely(__pyx_t_7)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_6);
          __Pyx_INCREF(__pyx_t_7);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_6, function);
        }
      }
      __pyx_t_2 = (__pyx_t_7) ? __Pyx_PyObject_Call2Args(__pyx_t_6, __pyx_t_7, __pyx_v_l) : __Pyx_PyObject_CallOneArg(__pyx_t_6, __pyx_v_l);
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3389, __pyx_L4_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_DECREF_SET(__pyx_v_l, __pyx_t_2);
      __pyx_t_2 = 0;

      /* "automata/cautomata.pyx":3390
 *         try:
 *             l = self.A.index(l)
 *             r.A = self.A[:]             # <<<<<<<<<<<<<<
 *             sig_on()
 *             r.a[0] = CopyAutomaton(self.a[0], self.a.n+np, self.a.na)
 */
      if (unlikely(__pyx_v_self->A == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 3390, __pyx_L4_error)
      }
      __pyx_t_2 = __Pyx_PyList_GetSlice(__pyx_v_self->A, 0, PY_SSIZE_T_MAX); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3390, __pyx_L4_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_GIVEREF(__pyx_t_2);
      __Pyx_GOTREF(__pyx_v_r->A);
      __Pyx_DECREF(__pyx_v_r->A);
      __pyx_v_r->A = ((PyObject*)__pyx_t_2);
      __pyx_t_2 = 0;

      /* "automata/cautomata.pyx":3391
 *             l = self.A.index(l)
 *             r.A = self.A[:]
 *             sig_on()             # <<<<<<<<<<<<<<
 *             r.a[0] = CopyAutomaton(self.a[0], self.a.n+np, self.a.na)
 *             sig_off()
 */
      __pyx_t_8 = sig_on(); if (unlikely(__pyx_t_8 == ((int)0))) __PYX_ERR(0, 3391, __pyx_L4_error)

      /* "automata/cautomata.pyx":3392
 *             r.A = self.A[:]
 *             sig_on()
 *             r.a[0] = CopyAutomaton(self.a[0], self.a.n+np, self.a.na)             # <<<<<<<<<<<<<<
 *             sig_off()
 *         except:
 */
      (__pyx_v_r->a[0]) = CopyAutomaton((__pyx_v_self->a[0]), (__pyx_v_self->a->n + __pyx_v_np), __pyx_v_self->a->na);

      /* "automata/cautomata.pyx":3393
 *             sig_on()
 *             r.a[0] = CopyAutomaton(self.a[0], self.a.n+np, self.a.na)
 *             sig_off()             # <<<<<<<<<<<<<<
 *         except:
 *             r.A = self.A+[l]
 */
      sig_off();

      /* "automata/cautomata.pyx":3388
 * 
 *         r = DeterministicAutomaton(None)
 *         try:             # <<<<<<<<<<<<<<
 *             l = self.A.index(l)
 *             r.A = self.A[:]
 */
    }
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L9_try_end;
    __pyx_L4_error:;
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":3394
 *             r.a[0] = CopyAutomaton(self.a[0], self.a.n+np, self.a.na)
 *             sig_off()
 *         except:             # <<<<<<<<<<<<<<
 *             r.A = self.A+[l]
 *             l = len(self.A) # new letter
 */
    /*except:*/ {
      __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.unshift", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (__Pyx_GetException(&__pyx_t_2, &__pyx_t_6, &__pyx_t_7) < 0) __PYX_ERR(0, 3394, __pyx_L6_except_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_GOTREF(__pyx_t_7);

      /* "automata/cautomata.pyx":3395
 *             sig_off()
 *         except:
 *             r.A = self.A+[l]             # <<<<<<<<<<<<<<
 *             l = len(self.A) # new letter
 *             sig_on()
 */
      __pyx_t_9 = PyList_New(1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 3395, __pyx_L6_except_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_INCREF(__pyx_v_l);
      __Pyx_GIVEREF(__pyx_v_l);
      PyList_SET_ITEM(__pyx_t_9, 0, __pyx_v_l);
      __pyx_t_10 = PyNumber_Add(__pyx_v_self->A, __pyx_t_9); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 3395, __pyx_L6_except_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_GIVEREF(__pyx_t_10);
      __Pyx_GOTREF(__pyx_v_r->A);
      __Pyx_DECREF(__pyx_v_r->A);
      __pyx_v_r->A = ((PyObject*)__pyx_t_10);
      __pyx_t_10 = 0;

      /* "automata/cautomata.pyx":3396
 *         except:
 *             r.A = self.A+[l]
 *             l = len(self.A) # new letter             # <<<<<<<<<<<<<<
 *             sig_on()
 *             r.a[0] = CopyAutomaton(self.a[0], self.a.n+np, self.a.na+1)
 */
      __pyx_t_10 = __pyx_v_self->A;
      __Pyx_INCREF(__pyx_t_10);
      if (unlikely(__pyx_t_10 == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
        __PYX_ERR(0, 3396, __pyx_L6_except_error)
      }
      __pyx_t_11 = PyList_GET_SIZE(__pyx_t_10); if (unlikely(__pyx_t_11 == ((Py_ssize_t)-1))) __PYX_ERR(0, 3396, __pyx_L6_except_error)
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __pyx_t_10 = PyInt_FromSsize_t(__pyx_t_11); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 3396, __pyx_L6_except_error)
      __Pyx_GOTREF(__pyx_t_10);
      __Pyx_DECREF_SET(__pyx_v_l, __pyx_t_10);
      __pyx_t_10 = 0;

      /* "automata/cautomata.pyx":3397
 *             r.A = self.A+[l]
 *             l = len(self.A) # new letter
 *             sig_on()             # <<<<<<<<<<<<<<
 *             r.a[0] = CopyAutomaton(self.a[0], self.a.n+np, self.a.na+1)
 *             sig_off()
 */
      __pyx_t_8 = sig_on(); if (unlikely(__pyx_t_8 == ((int)0))) __PYX_ERR(0, 3397, __pyx_L6_except_error)

      /* "automata/cautomata.pyx":3398
 *             l = len(self.A) # new letter
 *             sig_on()
 *             r.a[0] = CopyAutomaton(self.a[0], self.a.n+np, self.a.na+1)             # <<<<<<<<<<<<<<
 *             sig_off()
 *         ne = self.a.n # first new state
 */
      (__pyx_v_r->a[0]) = CopyAutomaton((__pyx_v_self->a[0]), (__pyx_v_self->a->n + __pyx_v_np), (__pyx_v_self->a->na + 1));

      /* "automata/cautomata.pyx":3399
 *             sig_on()
 *             r.a[0] = CopyAutomaton(self.a[0], self.a.n+np, self.a.na+1)
 *             sig_off()             # <<<<<<<<<<<<<<
 *         ne = self.a.n # first new state
 *         for j in range(np):
 */
      sig_off();
      __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      goto __pyx_L5_exception_handled;
    }
    __pyx_L6_except_error:;

    /* "automata/cautomata.pyx":3388
 * 
 *         r = DeterministicAutomaton(None)
 *         try:             # <<<<<<<<<<<<<<
 *             l = self.A.index(l)
 *             r.A = self.A[:]
 */
    __Pyx_XGIVEREF(__pyx_t_3);
    __Pyx_XGIVEREF(__pyx_t_4);
    __Pyx_XGIVEREF(__pyx_t_5);
    __Pyx_ExceptionReset(__pyx_t_3, __pyx_t_4, __pyx_t_5);
    goto __pyx_L1_error;
    __pyx_L5_exception_handled:;
    __Pyx_XGIVEREF(__pyx_t_3);
    __Pyx_XGIVEREF(__pyx_t_4);
    __Pyx_XGIVEREF(__pyx_t_5);
    __Pyx_ExceptionReset(__pyx_t_3, __pyx_t_4, __pyx_t_5);
    __pyx_L9_try_end:;
  }

  /* "automata/cautomata.pyx":3400
 *             r.a[0] = CopyAutomaton(self.a[0], self.a.n+np, self.a.na+1)
 *             sig_off()
 *         ne = self.a.n # first new state             # <<<<<<<<<<<<<<
 *         for j in range(np):
 *             for i in range(r.a.na):
 */
  __pyx_t_8 = __pyx_v_self->a->n;
  __pyx_v_ne = __pyx_t_8;

  /* "automata/cautomata.pyx":3401
 *             sig_off()
 *         ne = self.a.n # first new state
 *         for j in range(np):             # <<<<<<<<<<<<<<
 *             for i in range(r.a.na):
 *                 r.a.e[ne+j].f[i] = -1
 */
  __pyx_t_7 = __Pyx_PyInt_From_int(__pyx_v_np); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3401, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_t_6 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_7); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3401, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  if (likely(PyList_CheckExact(__pyx_t_6)) || PyTuple_CheckExact(__pyx_t_6)) {
    __pyx_t_7 = __pyx_t_6; __Pyx_INCREF(__pyx_t_7); __pyx_t_11 = 0;
    __pyx_t_12 = NULL;
  } else {
    __pyx_t_11 = -1; __pyx_t_7 = PyObject_GetIter(__pyx_t_6); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3401, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __pyx_t_12 = Py_TYPE(__pyx_t_7)->tp_iternext; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 3401, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  for (;;) {
    if (likely(!__pyx_t_12)) {
      if (likely(PyList_CheckExact(__pyx_t_7))) {
        if (__pyx_t_11 >= PyList_GET_SIZE(__pyx_t_7)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_6 = PyList_GET_ITEM(__pyx_t_7, __pyx_t_11); __Pyx_INCREF(__pyx_t_6); __pyx_t_11++; if (unlikely(0 < 0)) __PYX_ERR(0, 3401, __pyx_L1_error)
        #else
        __pyx_t_6 = PySequence_ITEM(__pyx_t_7, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3401, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        #endif
      } else {
        if (__pyx_t_11 >= PyTuple_GET_SIZE(__pyx_t_7)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_6 = PyTuple_GET_ITEM(__pyx_t_7, __pyx_t_11); __Pyx_INCREF(__pyx_t_6); __pyx_t_11++; if (unlikely(0 < 0)) __PYX_ERR(0, 3401, __pyx_L1_error)
        #else
        __pyx_t_6 = PySequence_ITEM(__pyx_t_7, __pyx_t_11); __pyx_t_11++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3401, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_6);
        #endif
      }
    } else {
      __pyx_t_6 = __pyx_t_12(__pyx_t_7);
      if (unlikely(!__pyx_t_6)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 3401, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_6);
    }
    __Pyx_XDECREF_SET(__pyx_v_j, __pyx_t_6);
    __pyx_t_6 = 0;

    /* "automata/cautomata.pyx":3402
 *         ne = self.a.n # first new state
 *         for j in range(np):
 *             for i in range(r.a.na):             # <<<<<<<<<<<<<<
 *                 r.a.e[ne+j].f[i] = -1
 *             if j > 0:
 */
    __pyx_t_8 = __pyx_v_r->a->na;
    __pyx_t_13 = __pyx_t_8;
    for (__pyx_t_14 = 0; __pyx_t_14 < __pyx_t_13; __pyx_t_14+=1) {
      __pyx_v_i = __pyx_t_14;

      /* "automata/cautomata.pyx":3403
 *         for j in range(np):
 *             for i in range(r.a.na):
 *                 r.a.e[ne+j].f[i] = -1             # <<<<<<<<<<<<<<
 *             if j > 0:
 *                 r.a.e[ne+j].f[l] = ne+j-1
 */
      __pyx_t_6 = __Pyx_PyInt_From_int(__pyx_v_ne); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3403, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_2 = PyNumber_Add(__pyx_t_6, __pyx_v_j); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3403, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_2); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 3403, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      ((__pyx_v_r->a->e[__pyx_t_15]).f[__pyx_v_i]) = -1;
    }

    /* "automata/cautomata.pyx":3404
 *             for i in range(r.a.na):
 *                 r.a.e[ne+j].f[i] = -1
 *             if j > 0:             # <<<<<<<<<<<<<<
 *                 r.a.e[ne+j].f[l] = ne+j-1
 *             else:
 */
    __pyx_t_2 = PyObject_RichCompare(__pyx_v_j, __pyx_int_0, Py_GT); __Pyx_XGOTREF(__pyx_t_2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3404, __pyx_L1_error)
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_2); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 3404, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    if (__pyx_t_1) {

      /* "automata/cautomata.pyx":3405
 *                 r.a.e[ne+j].f[i] = -1
 *             if j > 0:
 *                 r.a.e[ne+j].f[l] = ne+j-1             # <<<<<<<<<<<<<<
 *             else:
 *                 r.a.e[ne+j].f[l] = self.a.i
 */
      __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_ne); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3405, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_6 = PyNumber_Add(__pyx_t_2, __pyx_v_j); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3405, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_PyInt_SubtractObjC(__pyx_t_6, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3405, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_8 = __Pyx_PyInt_As_int(__pyx_t_2); if (unlikely((__pyx_t_8 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 3405, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_ne); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3405, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_6 = PyNumber_Add(__pyx_t_2, __pyx_v_j); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3405, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_6); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 3405, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_16 = __Pyx_PyIndex_AsSsize_t(__pyx_v_l); if (unlikely((__pyx_t_16 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 3405, __pyx_L1_error)
      ((__pyx_v_r->a->e[__pyx_t_15]).f[__pyx_t_16]) = __pyx_t_8;

      /* "automata/cautomata.pyx":3404
 *             for i in range(r.a.na):
 *                 r.a.e[ne+j].f[i] = -1
 *             if j > 0:             # <<<<<<<<<<<<<<
 *                 r.a.e[ne+j].f[l] = ne+j-1
 *             else:
 */
      goto __pyx_L16;
    }

    /* "automata/cautomata.pyx":3407
 *                 r.a.e[ne+j].f[l] = ne+j-1
 *             else:
 *                 r.a.e[ne+j].f[l] = self.a.i             # <<<<<<<<<<<<<<
 *             r.a.e[ne+j].final = final
 *             sig_check()
 */
    /*else*/ {
      __pyx_t_8 = __pyx_v_self->a->i;
      __pyx_t_6 = __Pyx_PyInt_From_int(__pyx_v_ne); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3407, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_2 = PyNumber_Add(__pyx_t_6, __pyx_v_j); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3407, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_16 = __Pyx_PyIndex_AsSsize_t(__pyx_t_2); if (unlikely((__pyx_t_16 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 3407, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_v_l); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 3407, __pyx_L1_error)
      ((__pyx_v_r->a->e[__pyx_t_16]).f[__pyx_t_15]) = __pyx_t_8;
    }
    __pyx_L16:;

    /* "automata/cautomata.pyx":3408
 *             else:
 *                 r.a.e[ne+j].f[l] = self.a.i
 *             r.a.e[ne+j].final = final             # <<<<<<<<<<<<<<
 *             sig_check()
 *         r.a.i = ne+np-1
 */
    __pyx_t_17 = __Pyx_PyInt_As_bool(__pyx_v_final); if (unlikely((__pyx_t_17 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3408, __pyx_L1_error)
    __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_ne); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3408, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_6 = PyNumber_Add(__pyx_t_2, __pyx_v_j); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3408, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_6); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 3408, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    (__pyx_v_r->a->e[__pyx_t_15]).final = __pyx_t_17;

    /* "automata/cautomata.pyx":3409
 *                 r.a.e[ne+j].f[l] = self.a.i
 *             r.a.e[ne+j].final = final
 *             sig_check()             # <<<<<<<<<<<<<<
 *         r.a.i = ne+np-1
 *         return r
 */
    __pyx_t_8 = sig_check(); if (unlikely(__pyx_t_8 == ((int)0))) __PYX_ERR(0, 3409, __pyx_L1_error)

    /* "automata/cautomata.pyx":3401
 *             sig_off()
 *         ne = self.a.n # first new state
 *         for j in range(np):             # <<<<<<<<<<<<<<
 *             for i in range(r.a.na):
 *                 r.a.e[ne+j].f[i] = -1
 */
  }
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

  /* "automata/cautomata.pyx":3410
 *             r.a.e[ne+j].final = final
 *             sig_check()
 *         r.a.i = ne+np-1             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  __pyx_v_r->a->i = ((__pyx_v_ne + __pyx_v_np) - 1);

  /* "automata/cautomata.pyx":3411
 *             sig_check()
 *         r.a.i = ne+np-1
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     # this function could be written in a more efficient way
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":3346
 *                 self.a.i = self.a.e[self.a.i].f[i]
 * 
 *     def unshift(self, l, int np=1, final=False):             # <<<<<<<<<<<<<<
 *         """
 *         Unshift the automaton to recognize the language shifted
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.unshift", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_j);
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3414
 * 
 *     # this function could be written in a more efficient way
 *     def unshift_list(self, list l):             # <<<<<<<<<<<<<<
 *         """
 *         Return a new automaton whose language is the set of words wu,
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_83unshift_list(PyObject *__pyx_v_self, PyObject *__pyx_v_l); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_82unshift_list[] = "\n        Return a new automaton whose language is the set of words wu,\n        where u is recognized by self, and w is the word\n        corresponding to the list of indices of letters l.\n\n        INPUT:\n\n        - ``l`` -- list of indices of letters\n\n        OUTPUT:\n\n        Return a :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.unshift_list(['a', 'b'])\n            DeterministicAutomaton with 6 states and an alphabet of 2 letters\n            sage: a.unshift_list(['c', 'd'])\n            DeterministicAutomaton with 6 states and an alphabet of 4 letters\n\n            sage: a = dag.AnyWord([0,1])\n            sage: a.unshift_list([1,0,1])\n            DeterministicAutomaton with 4 states and an alphabet of 2 letters\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_83unshift_list(PyObject *__pyx_v_self, PyObject *__pyx_v_l) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("unshift_list (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_l), (&PyList_Type), 1, "l", 1))) __PYX_ERR(0, 3414, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_82unshift_list(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((PyObject*)__pyx_v_l));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_82unshift_list(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l) {
  PyObject *__pyx_v_a = NULL;
  PyObject *__pyx_v_i = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  __Pyx_RefNannySetupContext("unshift_list", 0);

  /* "automata/cautomata.pyx":3441
 * 
 *         """
 *         a = self             # <<<<<<<<<<<<<<
 *         l.reverse()
 *         for i in l:
 */
  __Pyx_INCREF(((PyObject *)__pyx_v_self));
  __pyx_v_a = ((PyObject *)__pyx_v_self);

  /* "automata/cautomata.pyx":3442
 *         """
 *         a = self
 *         l.reverse()             # <<<<<<<<<<<<<<
 *         for i in l:
 *             a = a.unshift(i)
 */
  if (unlikely(__pyx_v_l == Py_None)) {
    PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "reverse");
    __PYX_ERR(0, 3442, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_Reverse(__pyx_v_l); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 3442, __pyx_L1_error)

  /* "automata/cautomata.pyx":3443
 *         a = self
 *         l.reverse()
 *         for i in l:             # <<<<<<<<<<<<<<
 *             a = a.unshift(i)
 *         l.reverse()
 */
  if (unlikely(__pyx_v_l == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 3443, __pyx_L1_error)
  }
  __pyx_t_2 = __pyx_v_l; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
  for (;;) {
    if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_4 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_4); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 3443, __pyx_L1_error)
    #else
    __pyx_t_4 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3443, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3444
 *         l.reverse()
 *         for i in l:
 *             a = a.unshift(i)             # <<<<<<<<<<<<<<
 *         l.reverse()
 *         return a
 */
    __pyx_t_5 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_unshift); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 3444, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_6 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_5))) {
      __pyx_t_6 = PyMethod_GET_SELF(__pyx_t_5);
      if (likely(__pyx_t_6)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_5);
        __Pyx_INCREF(__pyx_t_6);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_5, function);
      }
    }
    __pyx_t_4 = (__pyx_t_6) ? __Pyx_PyObject_Call2Args(__pyx_t_5, __pyx_t_6, __pyx_v_i) : __Pyx_PyObject_CallOneArg(__pyx_t_5, __pyx_v_i);
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3444, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF_SET(__pyx_v_a, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3443
 *         a = self
 *         l.reverse()
 *         for i in l:             # <<<<<<<<<<<<<<
 *             a = a.unshift(i)
 *         l.reverse()
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3445
 *         for i in l:
 *             a = a.unshift(i)
 *         l.reverse()             # <<<<<<<<<<<<<<
 *         return a
 * 
 */
  if (unlikely(__pyx_v_l == Py_None)) {
    PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "reverse");
    __PYX_ERR(0, 3445, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_Reverse(__pyx_v_l); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 3445, __pyx_L1_error)

  /* "automata/cautomata.pyx":3446
 *             a = a.unshift(i)
 *         l.reverse()
 *         return a             # <<<<<<<<<<<<<<
 * 
 *     def get_cautomaton(self, verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_a);
  __pyx_r = __pyx_v_a;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":3414
 * 
 *     # this function could be written in a more efficient way
 *     def unshift_list(self, list l):             # <<<<<<<<<<<<<<
 *         """
 *         Return a new automaton whose language is the set of words wu,
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.unshift_list", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_a);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3448
 *         return a
 * 
 *     def get_cautomaton(self, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Convert a determinist automaton :class:`DeterministicAutomaton` to
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_85get_cautomaton(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_84get_cautomaton[] = "\n        Convert a determinist automaton :class:`DeterministicAutomaton` to\n        a non determinist automaton :class:`CAutomaton`\n\n        INPUT:\n\n        - ``verb`` -- boolean (default: ``False``) if True,\n          print debugging informations\n\n        OUTPUT:\n\n        Return a :class:`CAutomaton`\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.get_cautomaton()\n            CAutomaton with 4 states and an alphabet of 2 letters\n\n            sage: CAutomaton(dag.AnyWord(['a','b']))\n            CAutomaton with 1 state and an alphabet of 2 letters\n\n        TESTS::\n\n            sage: a = dag.Word(['a','b'])\n            sage: CAutomaton(a)\n            CAutomaton with 3 states and an alphabet of 2 letters\n\n            sage: a = dag.Word(['a','b'])\n            sage: a.get_cautomaton().determinize() == a\n            True\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_85get_cautomaton(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("get_cautomaton (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_verb,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_cautomaton") < 0)) __PYX_ERR(0, 3448, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_verb = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("get_cautomaton", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 3448, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.get_cautomaton", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_84get_cautomaton(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_84get_cautomaton(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_verb) {
  NAutomaton __pyx_v_a;
  struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_r = 0;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  bool __pyx_t_3;
  __Pyx_RefNannySetupContext("get_cautomaton", 0);

  /* "automata/cautomata.pyx":3485
 *         cdef CAutomaton r
 * 
 *         r = CAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         a = CopyN(self.a[0], verb)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_CAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3485, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":3486
 * 
 *         r = CAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         a = CopyN(self.a[0], verb)
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 3486, __pyx_L1_error)

  /* "automata/cautomata.pyx":3487
 *         r = CAutomaton(None)
 *         sig_on()
 *         a = CopyN(self.a[0], verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = a
 */
  __pyx_t_3 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_3 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3487, __pyx_L1_error)
  __pyx_v_a = CopyN((__pyx_v_self->a[0]), __pyx_t_3);

  /* "automata/cautomata.pyx":3488
 *         sig_on()
 *         a = CopyN(self.a[0], verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = a
 *         r.A = self.A[:]
 */
  sig_off();

  /* "automata/cautomata.pyx":3489
 *         a = CopyN(self.a[0], verb)
 *         sig_off()
 *         r.a[0] = a             # <<<<<<<<<<<<<<
 *         r.A = self.A[:]
 *         return r
 */
  (__pyx_v_r->a[0]) = __pyx_v_a;

  /* "automata/cautomata.pyx":3490
 *         sig_off()
 *         r.a[0] = a
 *         r.A = self.A[:]             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  if (unlikely(__pyx_v_self->A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
    __PYX_ERR(0, 3490, __pyx_L1_error)
  }
  __pyx_t_1 = __Pyx_PyList_GetSlice(__pyx_v_self->A, 0, PY_SSIZE_T_MAX); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3490, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":3491
 *         r.a[0] = a
 *         r.A = self.A[:]
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def concatenate(self, DeterministicAutomaton b, det=True, simplify=True, verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":3448
 *         return a
 * 
 *     def get_cautomaton(self, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Convert a determinist automaton :class:`DeterministicAutomaton` to
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.get_cautomaton", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3493
 *         return r
 * 
 *     def concatenate(self, DeterministicAutomaton b, det=True, simplify=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Return an automaton recognizing the concatenation of the
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_87concatenate(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_86concatenate[] = "\n        Return an automaton recognizing the concatenation of the\n        languages of self and ``b``.\n\n        INPUT:\n\n        - ``b`` -- :class:`DeterministicAutomaton`  to concatenate to self\n\n        - ``det``  -- boolean (default: ``True``) - if True, determinize\n\n        - ``simplify`` -- boolean (default: ``True``) - if True and if det=True,\n          prune and minimize\n\n        - ``verb`` -- boolean (default: ``False``) if True, print\n          debugging informations\n\n        OUTPUT:\n\n        Return a :class:`CAutomaton` (if ``det`` is ``False``)\n        or  :class:`DeterministicAutomaton` (if ``det`` is ``True``)\n\n        EXAMPLES::\n\n            #. Words starting by 'aa'\n                sage: dag.Word(['a','a']).concatenate(dag.AnyWord(['a','b']))\n                DeterministicAutomaton with 3 states and an alphabet of 2 letters\n\n            #. words containing 'aa'\n\n                sage: a = dag.AnyWord(['a','b'])\n                sage: a.concatenate(dag.Word(['a','a'])).concatenate(a)\n                DeterministicAutomaton with 3 states and an alphabet of 2 letters\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = DeterministicAutomaton([(3, 2, 'a'), (1, 2, 'd')], i=2)\n            sage: a.concatenate(b)\n            DeterministicAutomaton with 2 states and an alphabet of 3 letters\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.concatenate(b, det=False)\n            CAutomaton with 7 states and an alphabet of 3 letters\n            sage: b = DeterministicAutomaton([(3, 2, 'a'), (1, 2, 'd')])\n            sage: a.concatenate(b)\n            DeterministicAutomaton with 1 state and an alphabet of 3 letters\n\n        TESTS::\n\n            sage: a = dag.Word(['a', 'b'])\n            sage: b = dag.Word(['a', 'c'])\n            sage: a.concatenate(b).has_same_language_as(dag.Word(['a','b','a','c']))\n            True\n\n      ""  ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_87concatenate(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_b = 0;
  PyObject *__pyx_v_det = 0;
  PyObject *__pyx_v_simplify = 0;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("concatenate (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_b,&__pyx_n_s_det,&__pyx_n_s_simplify,&__pyx_n_s_verb,0};
    PyObject* values[4] = {0,0,0,0};
    values[1] = ((PyObject *)Py_True);
    values[2] = ((PyObject *)Py_True);
    values[3] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_b)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_det);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_simplify);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "concatenate") < 0)) __PYX_ERR(0, 3493, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_b = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)values[0]);
    __pyx_v_det = values[1];
    __pyx_v_simplify = values[2];
    __pyx_v_verb = values[3];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("concatenate", 0, 1, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 3493, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.concatenate", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_b), __pyx_ptype_8automata_9cautomata_DeterministicAutomaton, 1, "b", 0))) __PYX_ERR(0, 3493, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_86concatenate(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_b, __pyx_v_det, __pyx_v_simplify, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_86concatenate(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_b, PyObject *__pyx_v_det, PyObject *__pyx_v_simplify, PyObject *__pyx_v_verb) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a = 0;
  NAutomaton __pyx_v_na;
  struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_r = 0;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r2 = 0;
  PyObject *__pyx_v_A = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  bool __pyx_t_7;
  __Pyx_RefNannySetupContext("concatenate", 0);
  __Pyx_INCREF((PyObject *)__pyx_v_b);

  /* "automata/cautomata.pyx":3551
 *         cdef DeterministicAutomaton r2
 * 
 *         if self.A != b.A:             # <<<<<<<<<<<<<<
 *             A = list(set(self.A).union(set(b.A)))
 *             if verb:
 */
  __pyx_t_1 = PyObject_RichCompare(__pyx_v_self->A, __pyx_v_b->A, Py_NE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3551, __pyx_L1_error)
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 3551, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":3552
 * 
 *         if self.A != b.A:
 *             A = list(set(self.A).union(set(b.A)))             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("Alphabet Changing (%s, %s -> %s)..." % (self.A, b.A, A))
 */
    __pyx_t_3 = PySet_New(__pyx_v_self->A); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3552, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_union); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3552, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = PySet_New(__pyx_v_b->A); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3552, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_4);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_4, function);
      }
    }
    __pyx_t_1 = (__pyx_t_5) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_5, __pyx_t_3) : __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_t_3);
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3552, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = PySequence_List(__pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3552, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_v_A = ((PyObject*)__pyx_t_4);
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3553
 *         if self.A != b.A:
 *             A = list(set(self.A).union(set(b.A)))
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("Alphabet Changing (%s, %s -> %s)..." % (self.A, b.A, A))
 *             a = self.bigger_alphabet(A)
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 3553, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":3554
 *             A = list(set(self.A).union(set(b.A)))
 *             if verb:
 *                 print("Alphabet Changing (%s, %s -> %s)..." % (self.A, b.A, A))             # <<<<<<<<<<<<<<
 *             a = self.bigger_alphabet(A)
 *             b = b.bigger_alphabet(A)
 */
      __pyx_t_4 = PyTuple_New(3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3554, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_INCREF(__pyx_v_self->A);
      __Pyx_GIVEREF(__pyx_v_self->A);
      PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_v_self->A);
      __Pyx_INCREF(__pyx_v_b->A);
      __Pyx_GIVEREF(__pyx_v_b->A);
      PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_b->A);
      __Pyx_INCREF(__pyx_v_A);
      __Pyx_GIVEREF(__pyx_v_A);
      PyTuple_SET_ITEM(__pyx_t_4, 2, __pyx_v_A);
      __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_Alphabet_Changing_s_s_s, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3554, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3554, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":3553
 *         if self.A != b.A:
 *             A = list(set(self.A).union(set(b.A)))
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("Alphabet Changing (%s, %s -> %s)..." % (self.A, b.A, A))
 *             a = self.bigger_alphabet(A)
 */
    }

    /* "automata/cautomata.pyx":3555
 *             if verb:
 *                 print("Alphabet Changing (%s, %s -> %s)..." % (self.A, b.A, A))
 *             a = self.bigger_alphabet(A)             # <<<<<<<<<<<<<<
 *             b = b.bigger_alphabet(A)
 *         else:
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_bigger_alphabet); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3555, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_1, function);
      }
    }
    __pyx_t_4 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_v_A) : __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_v_A);
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3555, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (!(likely(((__pyx_t_4) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_4, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 3555, __pyx_L1_error)
    __pyx_v_a = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_4);
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3556
 *                 print("Alphabet Changing (%s, %s -> %s)..." % (self.A, b.A, A))
 *             a = self.bigger_alphabet(A)
 *             b = b.bigger_alphabet(A)             # <<<<<<<<<<<<<<
 *         else:
 *             a = self
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_b), __pyx_n_s_bigger_alphabet); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3556, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_1, function);
      }
    }
    __pyx_t_4 = (__pyx_t_3) ? __Pyx_PyObject_Call2Args(__pyx_t_1, __pyx_t_3, __pyx_v_A) : __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_v_A);
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3556, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (!(likely(((__pyx_t_4) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_4, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 3556, __pyx_L1_error)
    __Pyx_DECREF_SET(__pyx_v_b, ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_4));
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3551
 *         cdef DeterministicAutomaton r2
 * 
 *         if self.A != b.A:             # <<<<<<<<<<<<<<
 *             A = list(set(self.A).union(set(b.A)))
 *             if verb:
 */
    goto __pyx_L3;
  }

  /* "automata/cautomata.pyx":3558
 *             b = b.bigger_alphabet(A)
 *         else:
 *             a = self             # <<<<<<<<<<<<<<
 *             A = self.A
 *         if verb:
 */
  /*else*/ {
    __Pyx_INCREF(((PyObject *)__pyx_v_self));
    __pyx_v_a = __pyx_v_self;

    /* "automata/cautomata.pyx":3559
 *         else:
 *             a = self
 *             A = self.A             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("a=%s (A=%s)\nb=%s (A=%s)" % (a, a.A, b, b.A))
 */
    __pyx_t_4 = __pyx_v_self->A;
    __Pyx_INCREF(__pyx_t_4);
    __pyx_v_A = ((PyObject*)__pyx_t_4);
    __pyx_t_4 = 0;
  }
  __pyx_L3:;

  /* "automata/cautomata.pyx":3560
 *             a = self
 *             A = self.A
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("a=%s (A=%s)\nb=%s (A=%s)" % (a, a.A, b, b.A))
 *         r = CAutomaton(None)
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 3560, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":3561
 *             A = self.A
 *         if verb:
 *             print("a=%s (A=%s)\nb=%s (A=%s)" % (a, a.A, b, b.A))             # <<<<<<<<<<<<<<
 *         r = CAutomaton(None)
 *         sig_on()
 */
    __pyx_t_4 = PyTuple_New(4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3561, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_INCREF(((PyObject *)__pyx_v_a));
    __Pyx_GIVEREF(((PyObject *)__pyx_v_a));
    PyTuple_SET_ITEM(__pyx_t_4, 0, ((PyObject *)__pyx_v_a));
    __Pyx_INCREF(__pyx_v_a->A);
    __Pyx_GIVEREF(__pyx_v_a->A);
    PyTuple_SET_ITEM(__pyx_t_4, 1, __pyx_v_a->A);
    __Pyx_INCREF(((PyObject *)__pyx_v_b));
    __Pyx_GIVEREF(((PyObject *)__pyx_v_b));
    PyTuple_SET_ITEM(__pyx_t_4, 2, ((PyObject *)__pyx_v_b));
    __Pyx_INCREF(__pyx_v_b->A);
    __Pyx_GIVEREF(__pyx_v_b->A);
    PyTuple_SET_ITEM(__pyx_t_4, 3, __pyx_v_b->A);
    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_a_s_A_s_b_s_A_s, __pyx_t_4); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3561, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3561, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3560
 *             a = self
 *             A = self.A
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("a=%s (A=%s)\nb=%s (A=%s)" % (a, a.A, b, b.A))
 *         r = CAutomaton(None)
 */
  }

  /* "automata/cautomata.pyx":3562
 *         if verb:
 *             print("a=%s (A=%s)\nb=%s (A=%s)" % (a, a.A, b, b.A))
 *         r = CAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         na = Concat(a.a[0], b.a[0], verb)
 */
  __pyx_t_4 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_CAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3562, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_t_4);
  __pyx_t_4 = 0;

  /* "automata/cautomata.pyx":3563
 *             print("a=%s (A=%s)\nb=%s (A=%s)" % (a, a.A, b, b.A))
 *         r = CAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         na = Concat(a.a[0], b.a[0], verb)
 *         sig_off()
 */
  __pyx_t_6 = sig_on(); if (unlikely(__pyx_t_6 == ((int)0))) __PYX_ERR(0, 3563, __pyx_L1_error)

  /* "automata/cautomata.pyx":3564
 *         r = CAutomaton(None)
 *         sig_on()
 *         na = Concat(a.a[0], b.a[0], verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = na
 */
  __pyx_t_7 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_7 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3564, __pyx_L1_error)
  __pyx_v_na = Concat((__pyx_v_a->a[0]), (__pyx_v_b->a[0]), __pyx_t_7);

  /* "automata/cautomata.pyx":3565
 *         sig_on()
 *         na = Concat(a.a[0], b.a[0], verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = na
 *         r.A = A
 */
  sig_off();

  /* "automata/cautomata.pyx":3566
 *         na = Concat(a.a[0], b.a[0], verb)
 *         sig_off()
 *         r.a[0] = na             # <<<<<<<<<<<<<<
 *         r.A = A
 * 
 */
  (__pyx_v_r->a[0]) = __pyx_v_na;

  /* "automata/cautomata.pyx":3567
 *         sig_off()
 *         r.a[0] = na
 *         r.A = A             # <<<<<<<<<<<<<<
 * 
 *         if det:
 */
  __Pyx_INCREF(__pyx_v_A);
  __Pyx_GIVEREF(__pyx_v_A);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = __pyx_v_A;

  /* "automata/cautomata.pyx":3569
 *         r.A = A
 * 
 *         if det:             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("Determinize...")
 */
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_det); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 3569, __pyx_L1_error)
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":3570
 * 
 *         if det:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("Determinize...")
 *             r2 = r.determinize()
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 3570, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":3571
 *         if det:
 *             if verb:
 *                 print("Determinize...")             # <<<<<<<<<<<<<<
 *             r2 = r.determinize()
 *             if simplify:
 */
      __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__56, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3571, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

      /* "automata/cautomata.pyx":3570
 * 
 *         if det:
 *             if verb:             # <<<<<<<<<<<<<<
 *                 print("Determinize...")
 *             r2 = r.determinize()
 */
    }

    /* "automata/cautomata.pyx":3572
 *             if verb:
 *                 print("Determinize...")
 *             r2 = r.determinize()             # <<<<<<<<<<<<<<
 *             if simplify:
 *                 if verb:
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_r), __pyx_n_s_determinize); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3572, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_1, function);
      }
    }
    __pyx_t_4 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_1);
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3572, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (!(likely(((__pyx_t_4) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_4, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 3572, __pyx_L1_error)
    __pyx_v_r2 = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_4);
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3573
 *                 print("Determinize...")
 *             r2 = r.determinize()
 *             if simplify:             # <<<<<<<<<<<<<<
 *                 if verb:
 *                     print("Prune and minimize...")
 */
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_simplify); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 3573, __pyx_L1_error)
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":3574
 *             r2 = r.determinize()
 *             if simplify:
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("Prune and minimize...")
 *                 return r2.prune().minimize()
 */
      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 3574, __pyx_L1_error)
      if (__pyx_t_2) {

        /* "automata/cautomata.pyx":3575
 *             if simplify:
 *                 if verb:
 *                     print("Prune and minimize...")             # <<<<<<<<<<<<<<
 *                 return r2.prune().minimize()
 *             else:
 */
        __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__57, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3575, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

        /* "automata/cautomata.pyx":3574
 *             r2 = r.determinize()
 *             if simplify:
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("Prune and minimize...")
 *                 return r2.prune().minimize()
 */
      }

      /* "automata/cautomata.pyx":3576
 *                 if verb:
 *                     print("Prune and minimize...")
 *                 return r2.prune().minimize()             # <<<<<<<<<<<<<<
 *             else:
 *                 return r2
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_r2), __pyx_n_s_prune); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3576, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_5 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_5)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_5);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      __pyx_t_1 = (__pyx_t_5) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_5) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3576, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_minimize); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3576, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_1)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_1);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      __pyx_t_4 = (__pyx_t_1) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_1) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3576, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_r = __pyx_t_4;
      __pyx_t_4 = 0;
      goto __pyx_L0;

      /* "automata/cautomata.pyx":3573
 *                 print("Determinize...")
 *             r2 = r.determinize()
 *             if simplify:             # <<<<<<<<<<<<<<
 *                 if verb:
 *                     print("Prune and minimize...")
 */
    }

    /* "automata/cautomata.pyx":3578
 *                 return r2.prune().minimize()
 *             else:
 *                 return r2             # <<<<<<<<<<<<<<
 *         else:
 *             return r
 */
    /*else*/ {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(((PyObject *)__pyx_v_r2));
      __pyx_r = ((PyObject *)__pyx_v_r2);
      goto __pyx_L0;
    }

    /* "automata/cautomata.pyx":3569
 *         r.A = A
 * 
 *         if det:             # <<<<<<<<<<<<<<
 *             if verb:
 *                 print("Determinize...")
 */
  }

  /* "automata/cautomata.pyx":3580
 *                 return r2
 *         else:
 *             return r             # <<<<<<<<<<<<<<
 * 
 *     def project(self, dict d, bool det=True, bool simplify=True, bool verb=False):
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(((PyObject *)__pyx_v_r));
    __pyx_r = ((PyObject *)__pyx_v_r);
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":3493
 *         return r
 * 
 *     def concatenate(self, DeterministicAutomaton b, det=True, simplify=True, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Return an automaton recognizing the concatenation of the
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.concatenate", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_a);
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF((PyObject *)__pyx_v_r2);
  __Pyx_XDECREF(__pyx_v_A);
  __Pyx_XDECREF((PyObject *)__pyx_v_b);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3582
 *             return r
 * 
 *     def project(self, dict d, bool det=True, bool simplify=True, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Project with respect to the dictionary ``d``.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_89project(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_88project[] = "\n        Project with respect to the dictionary ``d``.\n        Give an automaton where labels are replaced according to ``d``.\n\n        INPUT:\n\n        - ``d`` -- dictionary used for the projection\n\n        - ``det``  --  bool (default: ``true``) - determinize the result or not\n\n        - ``simplify`` -- bool (default: ``True``) - if True and if\n          det=True, prune and minimize\n\n        - ``verb`` -- boolean (default: ``False``) - activate or\n          desactivate the verbose mode\n\n        OUTPUT:\n\n        Return a :class:`CAutomaton` (when ``det``=``False``)\n        or a :class:`DeterministicAutomaton` (when ``det``=``True``)\n\n        EXAMPLES::\n\n            sage: a = dag.Word(['a','b'])\n            sage: b = a.product(a)\n            sage: d = {('a','a'):'a', ('a','b'):'a', ('b','a'):'b', ('b','b'):'b'}\n            sage: b.project(d)\n            DeterministicAutomaton with 3 states and an alphabet of 2 letters\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: d = {'a' : 0, 'b': 0, 'c':1, 'd':1}\n            sage: a.project(d)\n            DeterministicAutomaton with 2 states and an alphabet of 1 letter\n\n            sage: a = dag.Word([(0,1), (1,0), (1,1)])\n            sage: d = {}\n            sage: for i in range(2):\n            ....:     for j in range(2):\n            ....:         d[(i,j)] = i-j\n            sage: a.project(d).has_same_language_as(dag.Word([-1, 1, 0]))\n            True\n\n        TESTS::\n\n            sage: a = dag.Word(['a','b'])\n            sage: b = a.product(a)\n            sage: d = {('a','a'):'a', ('a','b'):'a', ('b','a'):'b', ('b','b'):'b'}\n            sage: a.has_same_language_as(b.project(d))\n            True\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_89project(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_d = 0;
  bool __pyx_v_det;
  bool __pyx_v_simplify;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("project (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_d,&__pyx_n_s_det,&__pyx_n_s_simplify,&__pyx_n_s_verb,0};
    PyObject* values[4] = {0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_d)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_det);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_simplify);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "project") < 0)) __PYX_ERR(0, 3582, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_d = ((PyObject*)values[0]);
    if (values[1]) {
      __pyx_v_det = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_det == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3582, __pyx_L3_error)
    } else {
      __pyx_v_det = ((bool)1);
    }
    if (values[2]) {
      __pyx_v_simplify = __Pyx_PyInt_As_bool(values[2]); if (unlikely((__pyx_v_simplify == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3582, __pyx_L3_error)
    } else {
      __pyx_v_simplify = ((bool)1);
    }
    if (values[3]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[3]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3582, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("project", 0, 1, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 3582, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.project", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_d), (&PyDict_Type), 1, "d", 1))) __PYX_ERR(0, 3582, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_88project(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_d, __pyx_v_det, __pyx_v_simplify, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_88project(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_d, bool __pyx_v_det, bool __pyx_v_simplify, bool __pyx_v_verb) {
  NAutomaton __pyx_v_a;
  Dict __pyx_v_dC;
  struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_r = 0;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r2 = 0;
  PyObject *__pyx_v_A2 = NULL;
  PyObject *__pyx_v_d1 = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  struct __pyx_opt_args_8automata_9cautomata_imagDict __pyx_t_3;
  int __pyx_t_4;
  Dict __pyx_t_5;
  struct __pyx_opt_args_8automata_9cautomata_getDict __pyx_t_6;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("project", 0);

  /* "automata/cautomata.pyx":3639
 *         cdef DeterministicAutomaton r2
 * 
 *         r = CAutomaton(None)             # <<<<<<<<<<<<<<
 *         A2 = []
 *         d1 = imagDict(d, self.A, A2=A2)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_CAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3639, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":3640
 * 
 *         r = CAutomaton(None)
 *         A2 = []             # <<<<<<<<<<<<<<
 *         d1 = imagDict(d, self.A, A2=A2)
 *         if verb:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3640, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_A2 = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":3641
 *         r = CAutomaton(None)
 *         A2 = []
 *         d1 = imagDict(d, self.A, A2=A2)             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("d1=%s, A2=%s" % (d1, A2))
 */
  __pyx_t_1 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_1);
  __pyx_t_3.__pyx_n = 1;
  __pyx_t_3.A2 = __pyx_v_A2;
  __pyx_t_2 = __pyx_f_8automata_9cautomata_imagDict(__pyx_v_d, ((PyObject*)__pyx_t_1), &__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3641, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_d1 = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3642
 *         A2 = []
 *         d1 = imagDict(d, self.A, A2=A2)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("d1=%s, A2=%s" % (d1, A2))
 *         dC = getDict(d, self.A, d1=d1)
 */
  __pyx_t_4 = (__pyx_v_verb != 0);
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":3643
 *         d1 = imagDict(d, self.A, A2=A2)
 *         if verb:
 *             print("d1=%s, A2=%s" % (d1, A2))             # <<<<<<<<<<<<<<
 *         dC = getDict(d, self.A, d1=d1)
 *         sig_on()
 */
    __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3643, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_v_d1);
    __Pyx_GIVEREF(__pyx_v_d1);
    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_d1);
    __Pyx_INCREF(__pyx_v_A2);
    __Pyx_GIVEREF(__pyx_v_A2);
    PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_A2);
    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_d1_s_A2_s, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3643, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3643, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":3642
 *         A2 = []
 *         d1 = imagDict(d, self.A, A2=A2)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("d1=%s, A2=%s" % (d1, A2))
 *         dC = getDict(d, self.A, d1=d1)
 */
  }

  /* "automata/cautomata.pyx":3644
 *         if verb:
 *             print("d1=%s, A2=%s" % (d1, A2))
 *         dC = getDict(d, self.A, d1=d1)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         a = Proj(self.a[0], dC, verb)
 */
  __pyx_t_2 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_2);
  if (!(likely(PyDict_CheckExact(__pyx_v_d1))||((__pyx_v_d1) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_v_d1)->tp_name), 0))) __PYX_ERR(0, 3644, __pyx_L1_error)
  __pyx_t_6.__pyx_n = 1;
  __pyx_t_6.d1 = ((PyObject*)__pyx_v_d1);
  __pyx_t_5 = __pyx_f_8automata_9cautomata_getDict(__pyx_v_d, ((PyObject*)__pyx_t_2), &__pyx_t_6); 
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_dC = __pyx_t_5;

  /* "automata/cautomata.pyx":3645
 *             print("d1=%s, A2=%s" % (d1, A2))
 *         dC = getDict(d, self.A, d1=d1)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         a = Proj(self.a[0], dC, verb)
 *         FreeDict(&dC)
 */
  __pyx_t_7 = sig_on(); if (unlikely(__pyx_t_7 == ((int)0))) __PYX_ERR(0, 3645, __pyx_L1_error)

  /* "automata/cautomata.pyx":3646
 *         dC = getDict(d, self.A, d1=d1)
 *         sig_on()
 *         a = Proj(self.a[0], dC, verb)             # <<<<<<<<<<<<<<
 *         FreeDict(&dC)
 *         sig_off()
 */
  __pyx_v_a = Proj((__pyx_v_self->a[0]), __pyx_v_dC, __pyx_v_verb);

  /* "automata/cautomata.pyx":3647
 *         sig_on()
 *         a = Proj(self.a[0], dC, verb)
 *         FreeDict(&dC)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = a
 */
  FreeDict((&__pyx_v_dC));

  /* "automata/cautomata.pyx":3648
 *         a = Proj(self.a[0], dC, verb)
 *         FreeDict(&dC)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = a
 *         r.A = A2
 */
  sig_off();

  /* "automata/cautomata.pyx":3649
 *         FreeDict(&dC)
 *         sig_off()
 *         r.a[0] = a             # <<<<<<<<<<<<<<
 *         r.A = A2
 *         if det:
 */
  (__pyx_v_r->a[0]) = __pyx_v_a;

  /* "automata/cautomata.pyx":3650
 *         sig_off()
 *         r.a[0] = a
 *         r.A = A2             # <<<<<<<<<<<<<<
 *         if det:
 *             r2 = r.determinize()
 */
  __Pyx_INCREF(__pyx_v_A2);
  __Pyx_GIVEREF(__pyx_v_A2);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = __pyx_v_A2;

  /* "automata/cautomata.pyx":3651
 *         r.a[0] = a
 *         r.A = A2
 *         if det:             # <<<<<<<<<<<<<<
 *             r2 = r.determinize()
 *             if simplify:
 */
  __pyx_t_4 = (__pyx_v_det != 0);
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":3652
 *         r.A = A2
 *         if det:
 *             r2 = r.determinize()             # <<<<<<<<<<<<<<
 *             if simplify:
 *                 return r2.prune().minimize()
 */
    __pyx_t_1 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_r), __pyx_n_s_determinize); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3652, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_8 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
      __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_1);
      if (likely(__pyx_t_8)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
        __Pyx_INCREF(__pyx_t_8);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_1, function);
      }
    }
    __pyx_t_2 = (__pyx_t_8) ? __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_8) : __Pyx_PyObject_CallNoArg(__pyx_t_1);
    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
    if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3652, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    if (!(likely(((__pyx_t_2) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_2, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 3652, __pyx_L1_error)
    __pyx_v_r2 = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_2);
    __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":3653
 *         if det:
 *             r2 = r.determinize()
 *             if simplify:             # <<<<<<<<<<<<<<
 *                 return r2.prune().minimize()
 *             else:
 */
    __pyx_t_4 = (__pyx_v_simplify != 0);
    if (__pyx_t_4) {

      /* "automata/cautomata.pyx":3654
 *             r2 = r.determinize()
 *             if simplify:
 *                 return r2.prune().minimize()             # <<<<<<<<<<<<<<
 *             else:
 *                 return r2
 */
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_r2), __pyx_n_s_prune); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 3654, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_8))) {
        __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_8);
        if (likely(__pyx_t_9)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
          __Pyx_INCREF(__pyx_t_9);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_8, function);
        }
      }
      __pyx_t_1 = (__pyx_t_9) ? __Pyx_PyObject_CallOneArg(__pyx_t_8, __pyx_t_9) : __Pyx_PyObject_CallNoArg(__pyx_t_8);
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3654, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_minimize); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 3654, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_8))) {
        __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_8);
        if (likely(__pyx_t_1)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
          __Pyx_INCREF(__pyx_t_1);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_8, function);
        }
      }
      __pyx_t_2 = (__pyx_t_1) ? __Pyx_PyObject_CallOneArg(__pyx_t_8, __pyx_t_1) : __Pyx_PyObject_CallNoArg(__pyx_t_8);
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
      if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3654, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      goto __pyx_L0;

      /* "automata/cautomata.pyx":3653
 *         if det:
 *             r2 = r.determinize()
 *             if simplify:             # <<<<<<<<<<<<<<
 *                 return r2.prune().minimize()
 *             else:
 */
    }

    /* "automata/cautomata.pyx":3656
 *                 return r2.prune().minimize()
 *             else:
 *                 return r2             # <<<<<<<<<<<<<<
 *         else:
 *             return r
 */
    /*else*/ {
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(((PyObject *)__pyx_v_r2));
      __pyx_r = ((PyObject *)__pyx_v_r2);
      goto __pyx_L0;
    }

    /* "automata/cautomata.pyx":3651
 *         r.a[0] = a
 *         r.A = A2
 *         if det:             # <<<<<<<<<<<<<<
 *             r2 = r.determinize()
 *             if simplify:
 */
  }

  /* "automata/cautomata.pyx":3658
 *                 return r2
 *         else:
 *             return r             # <<<<<<<<<<<<<<
 * 
 *     def project_on_ith(self, int i, bool det=True, bool simplify=True, bool verb=False):
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(((PyObject *)__pyx_v_r));
    __pyx_r = ((PyObject *)__pyx_v_r);
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":3582
 *             return r
 * 
 *     def project(self, dict d, bool det=True, bool simplify=True, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Project with respect to the dictionary ``d``.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.project", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF((PyObject *)__pyx_v_r2);
  __Pyx_XDECREF(__pyx_v_A2);
  __Pyx_XDECREF(__pyx_v_d1);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3660
 *             return r
 * 
 *     def project_on_ith(self, int i, bool det=True, bool simplify=True, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Assuming that the alphabet of the automaton are iterable, project on
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_91project_on_ith(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_90project_on_ith[] = "\n        Assuming that the alphabet of the automaton are iterable, project on\n        the ith coordinate.\n        Give a new automaton where labels are replaced by the projection on\n        the ith coordinate.\n\n        INPUT:\n\n        - ``i`` -- int - coordinate of projection\n\n        - ``det``  --  bool (default: ``true``) - determinize or not the result\n\n        - ``simplify`` -- bool (default: ``True``) - if True and if det=True, prune\n          and minimize\n\n        - ``verb`` -- boolean (default: ``False``) - to activate or\n          desactivate the verbose mode\n\n        OUTPUT:\n\n        Return a :class:`CAutomaton` (``det``=``False``)\n        or :class:`DeterministicAutomaton` (``det``=``True``)\n\n\n        EXAMPLES::\n\n            sage: a = dag.Word([('a', 'b'), ('b', 'a'), ('c', 'a')])\n            sage: a.project_on_ith(1)\n            DeterministicAutomaton with 4 states and an alphabet of 2 letters\n\n            sage: a = DeterministicAutomaton([(0, 1, 'abc')], i=0)\n            sage: b = a.project_on_ith(0)\n            sage: b\n            DeterministicAutomaton with 2 states and an alphabet of 1 letter\n            sage: b == DeterministicAutomaton([(1, 0, 'a')], i=1)\n            True\n\n        TESTS::\n\n            sage: a = dag.Word([('a', 'b'), ('b', 'a'), ('c', 'a')])\n            sage: a.project_on_ith(1).has_same_language_as(dag.Word(['b', 'a', 'a']))\n            True\n\n            sage: a = dag.Word([0,1])\n            sage: a.project_on_ith(0)\n            Traceback (most recent call last):\n            ...\n            TypeError: object of type 'sage.rings.integer.Integer' has no len()\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_91project_on_ith(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_i;
  bool __pyx_v_det;
  bool __pyx_v_simplify;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("project_on_ith (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_i,&__pyx_n_s_det,&__pyx_n_s_simplify,&__pyx_n_s_verb,0};
    PyObject* values[4] = {0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_det);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_simplify);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "project_on_ith") < 0)) __PYX_ERR(0, 3660, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_i = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 3660, __pyx_L3_error)
    if (values[1]) {
      __pyx_v_det = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_det == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3660, __pyx_L3_error)
    } else {
      __pyx_v_det = ((bool)1);
    }
    if (values[2]) {
      __pyx_v_simplify = __Pyx_PyInt_As_bool(values[2]); if (unlikely((__pyx_v_simplify == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3660, __pyx_L3_error)
    } else {
      __pyx_v_simplify = ((bool)1);
    }
    if (values[3]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[3]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3660, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("project_on_ith", 0, 1, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 3660, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.project_on_ith", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_90project_on_ith(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_i, __pyx_v_det, __pyx_v_simplify, __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_90project_on_ith(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i, bool __pyx_v_det, bool __pyx_v_simplify, bool __pyx_v_verb) {
  PyObject *__pyx_v_d = 0;
  PyObject *__pyx_v_l = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  Py_ssize_t __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  __Pyx_RefNannySetupContext("project_on_ith", 0);

  /* "automata/cautomata.pyx":3713
 *         cdef dict d
 * 
 *         if i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("index i=%d cannot be negative" % i)
 *         d = {}
 */
  __pyx_t_1 = ((__pyx_v_i < 0) != 0);
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":3714
 * 
 *         if i < 0:
 *             raise ValueError("index i=%d cannot be negative" % i)             # <<<<<<<<<<<<<<
 *         d = {}
 *         for l in self.A:
 */
    __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3714, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_PyString_Format(__pyx_kp_s_index_i_d_cannot_be_negative, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3714, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3714, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_ERR(0, 3714, __pyx_L1_error)

    /* "automata/cautomata.pyx":3713
 *         cdef dict d
 * 
 *         if i < 0:             # <<<<<<<<<<<<<<
 *             raise ValueError("index i=%d cannot be negative" % i)
 *         d = {}
 */
  }

  /* "automata/cautomata.pyx":3715
 *         if i < 0:
 *             raise ValueError("index i=%d cannot be negative" % i)
 *         d = {}             # <<<<<<<<<<<<<<
 *         for l in self.A:
 *             if i < len(l):
 */
  __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3715, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_d = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3716
 *             raise ValueError("index i=%d cannot be negative" % i)
 *         d = {}
 *         for l in self.A:             # <<<<<<<<<<<<<<
 *             if i < len(l):
 *                 d[l] = l[i]
 */
  if (unlikely(__pyx_v_self->A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 3716, __pyx_L1_error)
  }
  __pyx_t_2 = __pyx_v_self->A; __Pyx_INCREF(__pyx_t_2); __pyx_t_4 = 0;
  for (;;) {
    if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_2)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_4); __Pyx_INCREF(__pyx_t_3); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 3716, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_2, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3716, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_l, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":3717
 *         d = {}
 *         for l in self.A:
 *             if i < len(l):             # <<<<<<<<<<<<<<
 *                 d[l] = l[i]
 *             else:
 */
    __pyx_t_5 = PyObject_Length(__pyx_v_l); if (unlikely(__pyx_t_5 == ((Py_ssize_t)-1))) __PYX_ERR(0, 3717, __pyx_L1_error)
    __pyx_t_1 = ((__pyx_v_i < __pyx_t_5) != 0);
    if (likely(__pyx_t_1)) {

      /* "automata/cautomata.pyx":3718
 *         for l in self.A:
 *             if i < len(l):
 *                 d[l] = l[i]             # <<<<<<<<<<<<<<
 *             else:
 *                 raise ValueError("index i=%d must be smaller than the dimension of the label %s" % (i, l))
 */
      __pyx_t_3 = __Pyx_GetItemInt(__pyx_v_l, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 0, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3718, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_v_l, __pyx_t_3) < 0)) __PYX_ERR(0, 3718, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":3717
 *         d = {}
 *         for l in self.A:
 *             if i < len(l):             # <<<<<<<<<<<<<<
 *                 d[l] = l[i]
 *             else:
 */
      goto __pyx_L6;
    }

    /* "automata/cautomata.pyx":3720
 *                 d[l] = l[i]
 *             else:
 *                 raise ValueError("index i=%d must be smaller than the dimension of the label %s" % (i, l))             # <<<<<<<<<<<<<<
 *         return self.project(d, det=det, simplify=simplify, verb=verb)
 * 
 */
    /*else*/ {
      __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3720, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_6 = PyTuple_New(2); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3720, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_GIVEREF(__pyx_t_3);
      PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_t_3);
      __Pyx_INCREF(__pyx_v_l);
      __Pyx_GIVEREF(__pyx_v_l);
      PyTuple_SET_ITEM(__pyx_t_6, 1, __pyx_v_l);
      __pyx_t_3 = 0;
      __pyx_t_3 = __Pyx_PyString_Format(__pyx_kp_s_index_i_d_must_be_smaller_than_t, __pyx_t_6); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3720, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_3); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3720, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_Raise(__pyx_t_6, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
      __PYX_ERR(0, 3720, __pyx_L1_error)
    }
    __pyx_L6:;

    /* "automata/cautomata.pyx":3716
 *             raise ValueError("index i=%d cannot be negative" % i)
 *         d = {}
 *         for l in self.A:             # <<<<<<<<<<<<<<
 *             if i < len(l):
 *                 d[l] = l[i]
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3721
 *             else:
 *                 raise ValueError("index i=%d must be smaller than the dimension of the label %s" % (i, l))
 *         return self.project(d, det=det, simplify=simplify, verb=verb)             # <<<<<<<<<<<<<<
 * 
 *     def duplicate_transitions(self, d, verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_project); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_6 = PyTuple_New(1); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 3721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_6);
  __Pyx_INCREF(__pyx_v_d);
  __Pyx_GIVEREF(__pyx_v_d);
  PyTuple_SET_ITEM(__pyx_t_6, 0, __pyx_v_d);
  __pyx_t_3 = __Pyx_PyDict_NewPresized(3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_7 = __Pyx_PyInt_From_bool(__pyx_v_det); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_det, __pyx_t_7) < 0) __PYX_ERR(0, 3721, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = __Pyx_PyInt_From_bool(__pyx_v_simplify); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_simplify, __pyx_t_7) < 0) __PYX_ERR(0, 3721, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = __Pyx_PyInt_From_bool(__pyx_v_verb); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_verb, __pyx_t_7) < 0) __PYX_ERR(0, 3721, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_6, __pyx_t_3); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 3721, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_7;
  __pyx_t_7 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":3660
 *             return r
 * 
 *     def project_on_ith(self, int i, bool det=True, bool simplify=True, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Assuming that the alphabet of the automaton are iterable, project on
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.project_on_ith", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3723
 *         return self.project(d, det=det, simplify=simplify, verb=verb)
 * 
 *     def duplicate_transitions(self, d, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Replace every transition of self labeled by a letter l
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_93duplicate_transitions(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_92duplicate_transitions[] = "\n        Replace every transition of self labeled by a letter l\n        by a list of transitions labeled by elements of d[l].\n        The result is assumed deterministic !!!\n\n        INPUT:\n\n        - ``d``  -- dictionary giving a list a new letters for each letter of the alphabet of self\n\n        - ``verb`` -- boolean (default: ``False``) fix to ``True``\n          for activation the verbose mode\n\n        OUTPUT:\n\n        Return a new :class:`DeterministicAutomaton` with new letters\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: d = { 'a' : 'ac', 'b': 'cc', 'ca':'c', 'd':'b'}\n            sage: b = a.duplicate_transitions(d)\n            sage: b.alphabet\n            ['a', 'c']\n\n            sage: a = dag.Word(['a', 'b', 'c'])\n            sage: d = { 'a' : [0,1], 'b': [0], 'c':[]}\n            sage: b = a.duplicate_transitions(d)\n            sage: b.alphabet\n            [0, 1]\n            sage: b.has_empty_language()\n            True\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_93duplicate_transitions(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_d = 0;
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("duplicate_transitions (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_d,&__pyx_n_s_verb,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_d)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "duplicate_transitions") < 0)) __PYX_ERR(0, 3723, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_d = values[0];
    __pyx_v_verb = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("duplicate_transitions", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 3723, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.duplicate_transitions", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_92duplicate_transitions(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_d, __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_92duplicate_transitions(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_d, PyObject *__pyx_v_verb) {
  Automaton __pyx_v_a;
  InvertDict __pyx_v_dC;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = 0;
  PyObject *__pyx_v_A2 = NULL;
  PyObject *__pyx_v_d1 = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  struct __pyx_opt_args_8automata_9cautomata_imagDict2 __pyx_t_3;
  int __pyx_t_4;
  InvertDict __pyx_t_5;
  struct __pyx_opt_args_8automata_9cautomata_getDict2 __pyx_t_6;
  int __pyx_t_7;
  Py_ssize_t __pyx_t_8;
  bool __pyx_t_9;
  __Pyx_RefNannySetupContext("duplicate_transitions", 0);

  /* "automata/cautomata.pyx":3760
 *         cdef DeterministicAutomaton r
 * 
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         A2 = []
 *         d1 = imagDict2(d, self.A, A2=A2)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3760, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":3761
 * 
 *         r = DeterministicAutomaton(None)
 *         A2 = []             # <<<<<<<<<<<<<<
 *         d1 = imagDict2(d, self.A, A2=A2)
 *         if verb:
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3761, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_A2 = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":3762
 *         r = DeterministicAutomaton(None)
 *         A2 = []
 *         d1 = imagDict2(d, self.A, A2=A2)             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("d1=%s, A2=%s" % (d1, A2))
 */
  if (!(likely(PyDict_CheckExact(__pyx_v_d))||((__pyx_v_d) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_v_d)->tp_name), 0))) __PYX_ERR(0, 3762, __pyx_L1_error)
  __pyx_t_1 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_1);
  __pyx_t_3.__pyx_n = 1;
  __pyx_t_3.A2 = __pyx_v_A2;
  __pyx_t_2 = __pyx_f_8automata_9cautomata_imagDict2(((PyObject*)__pyx_v_d), ((PyObject*)__pyx_t_1), &__pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3762, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_d1 = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":3763
 *         A2 = []
 *         d1 = imagDict2(d, self.A, A2=A2)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("d1=%s, A2=%s" % (d1, A2))
 *         dC = getDict2(d, self.A, d1=d1)
 */
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 3763, __pyx_L1_error)
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":3764
 *         d1 = imagDict2(d, self.A, A2=A2)
 *         if verb:
 *             print("d1=%s, A2=%s" % (d1, A2))             # <<<<<<<<<<<<<<
 *         dC = getDict2(d, self.A, d1=d1)
 *         if verb:
 */
    __pyx_t_2 = PyTuple_New(2); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3764, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_INCREF(__pyx_v_d1);
    __Pyx_GIVEREF(__pyx_v_d1);
    PyTuple_SET_ITEM(__pyx_t_2, 0, __pyx_v_d1);
    __Pyx_INCREF(__pyx_v_A2);
    __Pyx_GIVEREF(__pyx_v_A2);
    PyTuple_SET_ITEM(__pyx_t_2, 1, __pyx_v_A2);
    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_d1_s_A2_s, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3764, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3764, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":3763
 *         A2 = []
 *         d1 = imagDict2(d, self.A, A2=A2)
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("d1=%s, A2=%s" % (d1, A2))
 *         dC = getDict2(d, self.A, d1=d1)
 */
  }

  /* "automata/cautomata.pyx":3765
 *         if verb:
 *             print("d1=%s, A2=%s" % (d1, A2))
 *         dC = getDict2(d, self.A, d1=d1)             # <<<<<<<<<<<<<<
 *         if verb:
 *             sig_on()
 */
  if (!(likely(PyDict_CheckExact(__pyx_v_d))||((__pyx_v_d) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_v_d)->tp_name), 0))) __PYX_ERR(0, 3765, __pyx_L1_error)
  __pyx_t_2 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_2);
  if (!(likely(PyDict_CheckExact(__pyx_v_d1))||((__pyx_v_d1) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "dict", Py_TYPE(__pyx_v_d1)->tp_name), 0))) __PYX_ERR(0, 3765, __pyx_L1_error)
  __pyx_t_6.__pyx_n = 1;
  __pyx_t_6.d1 = ((PyObject*)__pyx_v_d1);
  __pyx_t_5 = __pyx_f_8automata_9cautomata_getDict2(((PyObject*)__pyx_v_d), ((PyObject*)__pyx_t_2), &__pyx_t_6); 
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_dC = __pyx_t_5;

  /* "automata/cautomata.pyx":3766
 *             print("d1=%s, A2=%s" % (d1, A2))
 *         dC = getDict2(d, self.A, d1=d1)
 *         if verb:             # <<<<<<<<<<<<<<
 *             sig_on()
 *             printInvertDict(dC)
 */
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 3766, __pyx_L1_error)
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":3767
 *         dC = getDict2(d, self.A, d1=d1)
 *         if verb:
 *             sig_on()             # <<<<<<<<<<<<<<
 *             printInvertDict(dC)
 *             sig_off()
 */
    __pyx_t_7 = sig_on(); if (unlikely(__pyx_t_7 == ((int)0))) __PYX_ERR(0, 3767, __pyx_L1_error)

    /* "automata/cautomata.pyx":3768
 *         if verb:
 *             sig_on()
 *             printInvertDict(dC)             # <<<<<<<<<<<<<<
 *             sig_off()
 *         sig_on()
 */
    printInvertDict(__pyx_v_dC);

    /* "automata/cautomata.pyx":3769
 *             sig_on()
 *             printInvertDict(dC)
 *             sig_off()             # <<<<<<<<<<<<<<
 *         sig_on()
 *         a = Duplicate(self.a[0], dC, len(A2), verb)
 */
    sig_off();

    /* "automata/cautomata.pyx":3766
 *             print("d1=%s, A2=%s" % (d1, A2))
 *         dC = getDict2(d, self.A, d1=d1)
 *         if verb:             # <<<<<<<<<<<<<<
 *             sig_on()
 *             printInvertDict(dC)
 */
  }

  /* "automata/cautomata.pyx":3770
 *             printInvertDict(dC)
 *             sig_off()
 *         sig_on()             # <<<<<<<<<<<<<<
 *         a = Duplicate(self.a[0], dC, len(A2), verb)
 *         sig_off()
 */
  __pyx_t_7 = sig_on(); if (unlikely(__pyx_t_7 == ((int)0))) __PYX_ERR(0, 3770, __pyx_L1_error)

  /* "automata/cautomata.pyx":3771
 *             sig_off()
 *         sig_on()
 *         a = Duplicate(self.a[0], dC, len(A2), verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if verb:
 */
  __pyx_t_8 = PyList_GET_SIZE(__pyx_v_A2); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1))) __PYX_ERR(0, 3771, __pyx_L1_error)
  __pyx_t_9 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_9 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3771, __pyx_L1_error)
  __pyx_v_a = Duplicate((__pyx_v_self->a[0]), __pyx_v_dC, __pyx_t_8, __pyx_t_9);

  /* "automata/cautomata.pyx":3772
 *         sig_on()
 *         a = Duplicate(self.a[0], dC, len(A2), verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("end...")
 */
  sig_off();

  /* "automata/cautomata.pyx":3773
 *         a = Duplicate(self.a[0], dC, len(A2), verb)
 *         sig_off()
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("end...")
 *         sig_on()
 */
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_v_verb); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 3773, __pyx_L1_error)
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":3774
 *         sig_off()
 *         if verb:
 *             print("end...")             # <<<<<<<<<<<<<<
 *         sig_on()
 *         FreeInvertDict(dC)
 */
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__58, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3774, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":3773
 *         a = Duplicate(self.a[0], dC, len(A2), verb)
 *         sig_off()
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("end...")
 *         sig_on()
 */
  }

  /* "automata/cautomata.pyx":3775
 *         if verb:
 *             print("end...")
 *         sig_on()             # <<<<<<<<<<<<<<
 *         FreeInvertDict(dC)
 *         sig_off()
 */
  __pyx_t_7 = sig_on(); if (unlikely(__pyx_t_7 == ((int)0))) __PYX_ERR(0, 3775, __pyx_L1_error)

  /* "automata/cautomata.pyx":3776
 *             print("end...")
 *         sig_on()
 *         FreeInvertDict(dC)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = a
 */
  FreeInvertDict(__pyx_v_dC);

  /* "automata/cautomata.pyx":3777
 *         sig_on()
 *         FreeInvertDict(dC)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = a
 *         r.A = A2
 */
  sig_off();

  /* "automata/cautomata.pyx":3778
 *         FreeInvertDict(dC)
 *         sig_off()
 *         r.a[0] = a             # <<<<<<<<<<<<<<
 *         r.A = A2
 *         return r
 */
  (__pyx_v_r->a[0]) = __pyx_v_a;

  /* "automata/cautomata.pyx":3779
 *         sig_off()
 *         r.a[0] = a
 *         r.A = A2             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  __Pyx_INCREF(__pyx_v_A2);
  __Pyx_GIVEREF(__pyx_v_A2);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = __pyx_v_A2;

  /* "automata/cautomata.pyx":3780
 *         r.a[0] = a
 *         r.A = A2
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def relabel_in_place(self, dict d):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":3723
 *         return self.project(d, det=det, simplify=simplify, verb=verb)
 * 
 *     def duplicate_transitions(self, d, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Replace every transition of self labeled by a letter l
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.duplicate_transitions", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_A2);
  __Pyx_XDECREF(__pyx_v_d1);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3782
 *         return r
 * 
 *     def relabel_in_place(self, dict d):             # <<<<<<<<<<<<<<
 *         """
 *         Change letters of the :class:`DeterministicAutomaton` in-place,
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_95relabel_in_place(PyObject *__pyx_v_self, PyObject *__pyx_v_d); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_94relabel_in_place[] = "\n        Change letters of the :class:`DeterministicAutomaton` in-place,\n        with respect to the dictionnary ``d``.\n        The dictionary is assumed to be one-to-one.\n\n        INPUT:\n\n         - ``d``  -- dictionary that gives new letters from the old ones\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: d = { 'a' : 'a', 'b': 'c', 'c':'b', 'd':'b'}\n            sage: a.relabel_in_place(d)\n            sage: a.alphabet\n            ['a', 'c']\n\n            sage: a = dag.Word(['a', 'b'])\n            sage: d = {'a':0, 'b':1}\n            sage: a.relabel_in_place(d)\n            sage: a.alphabet\n            [0, 1]\n            sage: a == dag.Word([0, 1])\n            True\n\n        TESTS::\n\n            sage: a = dag.AnyWord([0,1])\n            sage: a.relabel_in_place({})\n            Traceback (most recent call last):\n            ...\n            KeyError: 0\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_95relabel_in_place(PyObject *__pyx_v_self, PyObject *__pyx_v_d) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("relabel_in_place (wrapper)", 0);
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_d), (&PyDict_Type), 1, "d", 1))) __PYX_ERR(0, 3782, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_94relabel_in_place(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((PyObject*)__pyx_v_d));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_94relabel_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_d) {
  PyObject *__pyx_v_c = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("relabel_in_place", 0);

  /* "automata/cautomata.pyx":3817
 * 
 *         """
 *         self.A = [d[c] for c in self.A]             # <<<<<<<<<<<<<<
 * 
 *     def permut(self, list A, bool verb=False):
 */
  __pyx_t_1 = PyList_New(0); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 3817, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (unlikely(__pyx_v_self->A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 3817, __pyx_L1_error)
  }
  __pyx_t_2 = __pyx_v_self->A; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
  for (;;) {
    if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_4 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_4); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 3817, __pyx_L1_error)
    #else
    __pyx_t_4 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3817, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_4);
    __pyx_t_4 = 0;
    if (unlikely(__pyx_v_d == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 3817, __pyx_L1_error)
    }
    __pyx_t_4 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_c); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3817, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    if (unlikely(__Pyx_ListComp_Append(__pyx_t_1, (PyObject*)__pyx_t_4))) __PYX_ERR(0, 3817, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_self->A);
  __Pyx_DECREF(__pyx_v_self->A);
  __pyx_v_self->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":3782
 *         return r
 * 
 *     def relabel_in_place(self, dict d):             # <<<<<<<<<<<<<<
 *         """
 *         Change letters of the :class:`DeterministicAutomaton` in-place,
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.relabel_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_c);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3819
 *         self.A = [d[c] for c in self.A]
 * 
 *     def permut(self, list A, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Permutes (and eventually remove) letters of the alphabet,
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_97permut(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_96permut[] = "\n        Permutes (and eventually remove) letters of the alphabet,\n        and return permuted new :class:`DeterministicAutomaton` with\n        the same language restricted to the new alphabet.\n\n        INPUT:\n\n        - ``A``  -- list of letters in the new order\n          (with potentially less letters)\n\n        - ``verb`` -- boolean (default: ``False``) set to ``True`` to\n          activate the verbose mode\n\n        OUTPUT:\n\n        Return new :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            sage: a = dag.Word([0,1,2])\n            sage: a.alphabet\n            [0, 1, 2]\n            sage: b = a.permut([2,1,0])\n            sage: b.alphabet\n            [2, 1, 0]\n            sage: a.has_same_language_as(b)\n            True\n\n            sage: a = dag.AnyWord(['a', 'b', 'c'])\n            sage: a.alphabet\n            ['a', 'c', 'b']\n            sage: b = a.permut(['a', 'b'])\n            sage: b.alphabet\n            ['a', 'b']\n            sage: b.has_same_language_as(dag.AnyWord(['a', 'b']))\n            True\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: l = [ 'b', 'c', 'a']\n            sage: b = a.permut(l)\n            sage: b.alphabet\n            ['b', 'a']\n\n        TESTS::\n\n            sage: a = dag.Word(['a', 'b'])\n            sage: b = a.permut([0,1])\n            sage: b.alphabet\n            []\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_97permut(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_A = 0;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("permut (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_A,&__pyx_n_s_verb,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_A)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "permut") < 0)) __PYX_ERR(0, 3819, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_A = ((PyObject*)values[0]);
    if (values[1]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3819, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("permut", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 3819, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.permut", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_A), (&PyList_Type), 1, "A", 1))) __PYX_ERR(0, 3819, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_96permut(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_A, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_96permut(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_A, bool __pyx_v_verb) {
  Automaton __pyx_v_a;
  int *__pyx_v_l;
  int __pyx_v_i;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = 0;
  PyObject *__pyx_v_d = NULL;
  PyObject *__pyx_v_c = NULL;
  PyObject *__pyx_v_str = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  int __pyx_t_9;
  Py_ssize_t __pyx_t_10;
  __Pyx_RefNannySetupContext("permut", 0);

  /* "automata/cautomata.pyx":3876
 *         cdef DeterministicAutomaton r
 * 
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("A=%s" % A)
 *         r = DeterministicAutomaton(None)
 */
  __pyx_t_1 = (__pyx_v_verb != 0);
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":3877
 * 
 *         if verb:
 *             print("A=%s" % A)             # <<<<<<<<<<<<<<
 *         r = DeterministicAutomaton(None)
 *         l = <int*>malloc(sizeof(int) * len(A))
 */
    __pyx_t_2 = __Pyx_PyString_Format(__pyx_kp_s_A_s, __pyx_v_A); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3877, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3877, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":3876
 *         cdef DeterministicAutomaton r
 * 
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("A=%s" % A)
 *         r = DeterministicAutomaton(None)
 */
  }

  /* "automata/cautomata.pyx":3878
 *         if verb:
 *             print("A=%s" % A)
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         l = <int*>malloc(sizeof(int) * len(A))
 *         if l is NULL:
 */
  __pyx_t_3 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3878, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":3879
 *             print("A=%s" % A)
 *         r = DeterministicAutomaton(None)
 *         l = <int*>malloc(sizeof(int) * len(A))             # <<<<<<<<<<<<<<
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "
 */
  if (unlikely(__pyx_v_A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 3879, __pyx_L1_error)
  }
  __pyx_t_4 = PyList_GET_SIZE(__pyx_v_A); if (unlikely(__pyx_t_4 == ((Py_ssize_t)-1))) __PYX_ERR(0, 3879, __pyx_L1_error)
  __pyx_v_l = ((int *)malloc(((sizeof(int)) * __pyx_t_4)));

  /* "automata/cautomata.pyx":3880
 *         r = DeterministicAutomaton(None)
 *         l = <int*>malloc(sizeof(int) * len(A))
 *         if l is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "permut")
 */
  __pyx_t_1 = ((__pyx_v_l == NULL) != 0);
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":3881
 *         l = <int*>malloc(sizeof(int) * len(A))
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "             # <<<<<<<<<<<<<<
 *                               "permut")
 *         for i in range(self.a.na):
 */
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__59, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3881, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 3881, __pyx_L1_error)

    /* "automata/cautomata.pyx":3880
 *         r = DeterministicAutomaton(None)
 *         l = <int*>malloc(sizeof(int) * len(A))
 *         if l is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "permut")
 */
  }

  /* "automata/cautomata.pyx":3883
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "permut")
 *         for i in range(self.a.na):             # <<<<<<<<<<<<<<
 *             l[i] = -1
 *         d = {}
 */
  __pyx_t_5 = __pyx_v_self->a->na;
  __pyx_t_6 = __pyx_t_5;
  for (__pyx_t_7 = 0; __pyx_t_7 < __pyx_t_6; __pyx_t_7+=1) {
    __pyx_v_i = __pyx_t_7;

    /* "automata/cautomata.pyx":3884
 *                               "permut")
 *         for i in range(self.a.na):
 *             l[i] = -1             # <<<<<<<<<<<<<<
 *         d = {}
 *         for i, c in enumerate(self.A):
 */
    (__pyx_v_l[__pyx_v_i]) = -1;
  }

  /* "automata/cautomata.pyx":3885
 *         for i in range(self.a.na):
 *             l[i] = -1
 *         d = {}             # <<<<<<<<<<<<<<
 *         for i, c in enumerate(self.A):
 *             d[c] = i
 */
  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3885, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_d = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":3886
 *             l[i] = -1
 *         d = {}
 *         for i, c in enumerate(self.A):             # <<<<<<<<<<<<<<
 *             d[c] = i
 *         r.A = []
 */
  __pyx_t_5 = 0;
  __pyx_t_3 = __pyx_v_self->A; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
  for (;;) {
    if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 3886, __pyx_L1_error)
    #else
    __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3886, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_v_i = __pyx_t_5;
    __pyx_t_5 = (__pyx_t_5 + 1);

    /* "automata/cautomata.pyx":3887
 *         d = {}
 *         for i, c in enumerate(self.A):
 *             d[c] = i             # <<<<<<<<<<<<<<
 *         r.A = []
 *         for i, c in enumerate(A):
 */
    __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3887, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_v_c, __pyx_t_2) < 0)) __PYX_ERR(0, 3887, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":3886
 *             l[i] = -1
 *         d = {}
 *         for i, c in enumerate(self.A):             # <<<<<<<<<<<<<<
 *             d[c] = i
 *         r.A = []
 */
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":3888
 *         for i, c in enumerate(self.A):
 *             d[c] = i
 *         r.A = []             # <<<<<<<<<<<<<<
 *         for i, c in enumerate(A):
 *             if d.has_key(c):
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3888, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_GIVEREF(__pyx_t_3);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":3889
 *             d[c] = i
 *         r.A = []
 *         for i, c in enumerate(A):             # <<<<<<<<<<<<<<
 *             if d.has_key(c):
 *                 l[i] = d[c]  # l gives the old index from the new one
 */
  __pyx_t_5 = 0;
  __pyx_t_3 = __pyx_v_A; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
  for (;;) {
    if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_2 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 3889, __pyx_L1_error)
    #else
    __pyx_t_2 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3889, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_v_i = __pyx_t_5;
    __pyx_t_5 = (__pyx_t_5 + 1);

    /* "automata/cautomata.pyx":3890
 *         r.A = []
 *         for i, c in enumerate(A):
 *             if d.has_key(c):             # <<<<<<<<<<<<<<
 *                 l[i] = d[c]  # l gives the old index from the new one
 *                 r.A.append(c)
 */
    __pyx_t_1 = PyDict_Contains(__pyx_v_d, __pyx_v_c); if (unlikely(__pyx_t_1 == ((int)-1))) __PYX_ERR(0, 3890, __pyx_L1_error)
    __pyx_t_8 = (__pyx_t_1 != 0);
    if (__pyx_t_8) {

      /* "automata/cautomata.pyx":3891
 *         for i, c in enumerate(A):
 *             if d.has_key(c):
 *                 l[i] = d[c]  # l gives the old index from the new one             # <<<<<<<<<<<<<<
 *                 r.A.append(c)
 *         if verb:
 */
      __pyx_t_2 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_c); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3891, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_6 = __Pyx_PyInt_As_int(__pyx_t_2); if (unlikely((__pyx_t_6 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 3891, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      (__pyx_v_l[__pyx_v_i]) = __pyx_t_6;

      /* "automata/cautomata.pyx":3892
 *             if d.has_key(c):
 *                 l[i] = d[c]  # l gives the old index from the new one
 *                 r.A.append(c)             # <<<<<<<<<<<<<<
 *         if verb:
 *             str = "l=["
 */
      if (unlikely(__pyx_v_r->A == Py_None)) {
        PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "append");
        __PYX_ERR(0, 3892, __pyx_L1_error)
      }
      __pyx_t_9 = __Pyx_PyList_Append(__pyx_v_r->A, __pyx_v_c); if (unlikely(__pyx_t_9 == ((int)-1))) __PYX_ERR(0, 3892, __pyx_L1_error)

      /* "automata/cautomata.pyx":3890
 *         r.A = []
 *         for i, c in enumerate(A):
 *             if d.has_key(c):             # <<<<<<<<<<<<<<
 *                 l[i] = d[c]  # l gives the old index from the new one
 *                 r.A.append(c)
 */
    }

    /* "automata/cautomata.pyx":3889
 *             d[c] = i
 *         r.A = []
 *         for i, c in enumerate(A):             # <<<<<<<<<<<<<<
 *             if d.has_key(c):
 *                 l[i] = d[c]  # l gives the old index from the new one
 */
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":3893
 *                 l[i] = d[c]  # l gives the old index from the new one
 *                 r.A.append(c)
 *         if verb:             # <<<<<<<<<<<<<<
 *             str = "l=["
 *             for i in range(len(A)):
 */
  __pyx_t_8 = (__pyx_v_verb != 0);
  if (__pyx_t_8) {

    /* "automata/cautomata.pyx":3894
 *                 r.A.append(c)
 *         if verb:
 *             str = "l=["             # <<<<<<<<<<<<<<
 *             for i in range(len(A)):
 *                 str += " %s" % l[i]
 */
    __Pyx_INCREF(__pyx_kp_s_l_2);
    __pyx_v_str = __pyx_kp_s_l_2;

    /* "automata/cautomata.pyx":3895
 *         if verb:
 *             str = "l=["
 *             for i in range(len(A)):             # <<<<<<<<<<<<<<
 *                 str += " %s" % l[i]
 *             str += " ]"
 */
    if (unlikely(__pyx_v_A == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
      __PYX_ERR(0, 3895, __pyx_L1_error)
    }
    __pyx_t_4 = PyList_GET_SIZE(__pyx_v_A); if (unlikely(__pyx_t_4 == ((Py_ssize_t)-1))) __PYX_ERR(0, 3895, __pyx_L1_error)
    __pyx_t_10 = __pyx_t_4;
    for (__pyx_t_5 = 0; __pyx_t_5 < __pyx_t_10; __pyx_t_5+=1) {
      __pyx_v_i = __pyx_t_5;

      /* "automata/cautomata.pyx":3896
 *             str = "l=["
 *             for i in range(len(A)):
 *                 str += " %s" % l[i]             # <<<<<<<<<<<<<<
 *             str += " ]"
 *             print(str)
 */
      __pyx_t_3 = __Pyx_PyInt_From_int((__pyx_v_l[__pyx_v_i])); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3896, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_2 = __Pyx_PyString_Format(__pyx_kp_s_s_2, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 3896, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = PyNumber_InPlaceAdd(__pyx_v_str, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3896, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __Pyx_DECREF_SET(__pyx_v_str, __pyx_t_3);
      __pyx_t_3 = 0;
    }

    /* "automata/cautomata.pyx":3897
 *             for i in range(len(A)):
 *                 str += " %s" % l[i]
 *             str += " ]"             # <<<<<<<<<<<<<<
 *             print(str)
 *         sig_on()
 */
    __pyx_t_3 = PyNumber_InPlaceAdd(__pyx_v_str, __pyx_kp_s__60); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3897, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF_SET(__pyx_v_str, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":3898
 *                 str += " %s" % l[i]
 *             str += " ]"
 *             print(str)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         a = Permut(self.a[0], l, len(A), verb)
 */
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_str); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3898, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":3893
 *                 l[i] = d[c]  # l gives the old index from the new one
 *                 r.A.append(c)
 *         if verb:             # <<<<<<<<<<<<<<
 *             str = "l=["
 *             for i in range(len(A)):
 */
  }

  /* "automata/cautomata.pyx":3899
 *             str += " ]"
 *             print(str)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         a = Permut(self.a[0], l, len(A), verb)
 *         free(l)
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 3899, __pyx_L1_error)

  /* "automata/cautomata.pyx":3900
 *             print(str)
 *         sig_on()
 *         a = Permut(self.a[0], l, len(A), verb)             # <<<<<<<<<<<<<<
 *         free(l)
 *         sig_off()
 */
  if (unlikely(__pyx_v_A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 3900, __pyx_L1_error)
  }
  __pyx_t_4 = PyList_GET_SIZE(__pyx_v_A); if (unlikely(__pyx_t_4 == ((Py_ssize_t)-1))) __PYX_ERR(0, 3900, __pyx_L1_error)
  __pyx_v_a = Permut((__pyx_v_self->a[0]), __pyx_v_l, __pyx_t_4, __pyx_v_verb);

  /* "automata/cautomata.pyx":3901
 *         sig_on()
 *         a = Permut(self.a[0], l, len(A), verb)
 *         free(l)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.a[0] = a
 */
  free(__pyx_v_l);

  /* "automata/cautomata.pyx":3902
 *         a = Permut(self.a[0], l, len(A), verb)
 *         free(l)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.a[0] = a
 *         r.a.na = len(A)
 */
  sig_off();

  /* "automata/cautomata.pyx":3903
 *         free(l)
 *         sig_off()
 *         r.a[0] = a             # <<<<<<<<<<<<<<
 *         r.a.na = len(A)
 *         return r
 */
  (__pyx_v_r->a[0]) = __pyx_v_a;

  /* "automata/cautomata.pyx":3904
 *         sig_off()
 *         r.a[0] = a
 *         r.a.na = len(A)             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  if (unlikely(__pyx_v_A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 3904, __pyx_L1_error)
  }
  __pyx_t_4 = PyList_GET_SIZE(__pyx_v_A); if (unlikely(__pyx_t_4 == ((Py_ssize_t)-1))) __PYX_ERR(0, 3904, __pyx_L1_error)
  __pyx_v_r->a->na = __pyx_t_4;

  /* "automata/cautomata.pyx":3905
 *         r.a[0] = a
 *         r.a.na = len(A)
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def permut_in_place(self, list A, bool verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":3819
 *         self.A = [d[c] for c in self.A]
 * 
 *     def permut(self, list A, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Permutes (and eventually remove) letters of the alphabet,
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.permut", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF(__pyx_v_c);
  __Pyx_XDECREF(__pyx_v_str);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3907
 *         return r
 * 
 *     def permut_in_place(self, list A, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Permutes (and eventually remove) letters of the alphabet in-place,
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_99permut_in_place(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_98permut_in_place[] = "\n        Permutes (and eventually remove) letters of the alphabet in-place,\n        without changing the language restricted to the new alphabet.\n\n        INPUT:\n\n        - ``A``  -- list of letters in the new order (number can be less to\n          the alphabet)\n        - ``verb`` -- boolean (default: ``False``) fix to ``True`` for\n          activation the verbose mode\n\n        EXAMPLES::\n\n            sage: a = dag.Word([0,1,2])\n            sage: a.alphabet\n            [0, 1, 2]\n            sage: a.permut_in_place([2,1,0])\n            sage: a.alphabet\n            [2, 1, 0]\n            sage: a.has_same_language_as(dag.Word([0,1,2]))\n            True\n\n            sage: a = dag.AnyWord(['a', 'b', 'c'])\n            sage: a.alphabet\n            ['a', 'c', 'b']\n            sage: a.permut_in_place(['a', 'b'])\n            sage: a.alphabet\n            ['a', 'b']\n            sage: a.has_same_language_as(dag.AnyWord(['a', 'b']))\n            True\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: l = [ 'b', 'c', 'a']\n            sage: a.permut_in_place(l)\n            sage: a.alphabet\n            ['b', 'a']\n\n        TESTS::\n\n            sage: a = dag.Word(['a', 'b'])\n            sage: a.permut_in_place([0,1])\n            sage: a.alphabet\n            []\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_99permut_in_place(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_A = 0;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("permut_in_place (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_A,&__pyx_n_s_verb,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_A)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "permut_in_place") < 0)) __PYX_ERR(0, 3907, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_A = ((PyObject*)values[0]);
    if (values[1]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 3907, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("permut_in_place", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 3907, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.permut_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_A), (&PyList_Type), 1, "A", 1))) __PYX_ERR(0, 3907, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_98permut_in_place(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_A, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_98permut_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_A, bool __pyx_v_verb) {
  int *__pyx_v_l;
  int __pyx_v_i;
  int __pyx_v_nA;
  PyObject *__pyx_v_A2 = 0;
  PyObject *__pyx_v_d = NULL;
  PyObject *__pyx_v_c = NULL;
  PyObject *__pyx_v_str = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  Py_ssize_t __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  int __pyx_t_9;
  Py_ssize_t __pyx_t_10;
  __Pyx_RefNannySetupContext("permut_in_place", 0);

  /* "automata/cautomata.pyx":3955
 *         cdef int *l
 *         cdef int i
 *         cdef int nA = len(A)             # <<<<<<<<<<<<<<
 *         cdef list A2
 * 
 */
  if (unlikely(__pyx_v_A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 3955, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_GET_SIZE(__pyx_v_A); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 3955, __pyx_L1_error)
  __pyx_v_nA = __pyx_t_1;

  /* "automata/cautomata.pyx":3958
 *         cdef list A2
 * 
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("A=%s" % A)
 *         sig_on()
 */
  __pyx_t_2 = (__pyx_v_verb != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":3959
 * 
 *         if verb:
 *             print("A=%s" % A)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         l = <int*>malloc(sizeof(int) * nA)
 */
    __pyx_t_3 = __Pyx_PyString_Format(__pyx_kp_s_A_s, __pyx_v_A); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3959, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3959, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3958
 *         cdef list A2
 * 
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("A=%s" % A)
 *         sig_on()
 */
  }

  /* "automata/cautomata.pyx":3960
 *         if verb:
 *             print("A=%s" % A)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         l = <int*>malloc(sizeof(int) * nA)
 *         sig_off()
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 3960, __pyx_L1_error)

  /* "automata/cautomata.pyx":3961
 *             print("A=%s" % A)
 *         sig_on()
 *         l = <int*>malloc(sizeof(int) * nA)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if l is NULL:
 */
  __pyx_v_l = ((int *)malloc(((sizeof(int)) * __pyx_v_nA)));

  /* "automata/cautomata.pyx":3962
 *         sig_on()
 *         l = <int*>malloc(sizeof(int) * nA)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "
 */
  sig_off();

  /* "automata/cautomata.pyx":3963
 *         l = <int*>malloc(sizeof(int) * nA)
 *         sig_off()
 *         if l is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "permut_in_place")
 */
  __pyx_t_2 = ((__pyx_v_l == NULL) != 0);
  if (unlikely(__pyx_t_2)) {

    /* "automata/cautomata.pyx":3964
 *         sig_off()
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "             # <<<<<<<<<<<<<<
 *                               "permut_in_place")
 *         for i in range(self.a.na):
 */
    __pyx_t_4 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__61, NULL); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3964, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_Raise(__pyx_t_4, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __PYX_ERR(0, 3964, __pyx_L1_error)

    /* "automata/cautomata.pyx":3963
 *         l = <int*>malloc(sizeof(int) * nA)
 *         sig_off()
 *         if l is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "permut_in_place")
 */
  }

  /* "automata/cautomata.pyx":3966
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "permut_in_place")
 *         for i in range(self.a.na):             # <<<<<<<<<<<<<<
 *             l[i] = -1
 *         d = {}
 */
  __pyx_t_5 = __pyx_v_self->a->na;
  __pyx_t_6 = __pyx_t_5;
  for (__pyx_t_7 = 0; __pyx_t_7 < __pyx_t_6; __pyx_t_7+=1) {
    __pyx_v_i = __pyx_t_7;

    /* "automata/cautomata.pyx":3967
 *                               "permut_in_place")
 *         for i in range(self.a.na):
 *             l[i] = -1             # <<<<<<<<<<<<<<
 *         d = {}
 *         for i, c in enumerate(self.A):
 */
    (__pyx_v_l[__pyx_v_i]) = -1;
  }

  /* "automata/cautomata.pyx":3968
 *         for i in range(self.a.na):
 *             l[i] = -1
 *         d = {}             # <<<<<<<<<<<<<<
 *         for i, c in enumerate(self.A):
 *             d[c] = i
 */
  __pyx_t_4 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3968, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_v_d = ((PyObject*)__pyx_t_4);
  __pyx_t_4 = 0;

  /* "automata/cautomata.pyx":3969
 *             l[i] = -1
 *         d = {}
 *         for i, c in enumerate(self.A):             # <<<<<<<<<<<<<<
 *             d[c] = i
 *         A2 = []
 */
  __pyx_t_5 = 0;
  __pyx_t_4 = __pyx_v_self->A; __Pyx_INCREF(__pyx_t_4); __pyx_t_1 = 0;
  for (;;) {
    if (__pyx_t_1 >= PyList_GET_SIZE(__pyx_t_4)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_1); __Pyx_INCREF(__pyx_t_3); __pyx_t_1++; if (unlikely(0 < 0)) __PYX_ERR(0, 3969, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_4, __pyx_t_1); __pyx_t_1++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3969, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_3);
    __pyx_t_3 = 0;
    __pyx_v_i = __pyx_t_5;
    __pyx_t_5 = (__pyx_t_5 + 1);

    /* "automata/cautomata.pyx":3970
 *         d = {}
 *         for i, c in enumerate(self.A):
 *             d[c] = i             # <<<<<<<<<<<<<<
 *         A2 = []
 *         for i, c in enumerate(A):
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3970, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_v_c, __pyx_t_3) < 0)) __PYX_ERR(0, 3970, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":3969
 *             l[i] = -1
 *         d = {}
 *         for i, c in enumerate(self.A):             # <<<<<<<<<<<<<<
 *             d[c] = i
 *         A2 = []
 */
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "automata/cautomata.pyx":3971
 *         for i, c in enumerate(self.A):
 *             d[c] = i
 *         A2 = []             # <<<<<<<<<<<<<<
 *         for i, c in enumerate(A):
 *             if d.has_key(c):
 */
  __pyx_t_4 = PyList_New(0); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3971, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __pyx_v_A2 = ((PyObject*)__pyx_t_4);
  __pyx_t_4 = 0;

  /* "automata/cautomata.pyx":3972
 *             d[c] = i
 *         A2 = []
 *         for i, c in enumerate(A):             # <<<<<<<<<<<<<<
 *             if d.has_key(c):
 *                 l[i] = d[c]  # l gives the old index from the new one
 */
  __pyx_t_5 = 0;
  __pyx_t_4 = __pyx_v_A; __Pyx_INCREF(__pyx_t_4); __pyx_t_1 = 0;
  for (;;) {
    if (__pyx_t_1 >= PyList_GET_SIZE(__pyx_t_4)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_3 = PyList_GET_ITEM(__pyx_t_4, __pyx_t_1); __Pyx_INCREF(__pyx_t_3); __pyx_t_1++; if (unlikely(0 < 0)) __PYX_ERR(0, 3972, __pyx_L1_error)
    #else
    __pyx_t_3 = PySequence_ITEM(__pyx_t_4, __pyx_t_1); __pyx_t_1++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3972, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_3);
    __pyx_t_3 = 0;
    __pyx_v_i = __pyx_t_5;
    __pyx_t_5 = (__pyx_t_5 + 1);

    /* "automata/cautomata.pyx":3973
 *         A2 = []
 *         for i, c in enumerate(A):
 *             if d.has_key(c):             # <<<<<<<<<<<<<<
 *                 l[i] = d[c]  # l gives the old index from the new one
 *                 A2.append(c)
 */
    __pyx_t_2 = PyDict_Contains(__pyx_v_d, __pyx_v_c); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 3973, __pyx_L1_error)
    __pyx_t_8 = (__pyx_t_2 != 0);
    if (__pyx_t_8) {

      /* "automata/cautomata.pyx":3974
 *         for i, c in enumerate(A):
 *             if d.has_key(c):
 *                 l[i] = d[c]  # l gives the old index from the new one             # <<<<<<<<<<<<<<
 *                 A2.append(c)
 *                 sig_check()
 */
      __pyx_t_3 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_c); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3974, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_6 = __Pyx_PyInt_As_int(__pyx_t_3); if (unlikely((__pyx_t_6 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 3974, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      (__pyx_v_l[__pyx_v_i]) = __pyx_t_6;

      /* "automata/cautomata.pyx":3975
 *             if d.has_key(c):
 *                 l[i] = d[c]  # l gives the old index from the new one
 *                 A2.append(c)             # <<<<<<<<<<<<<<
 *                 sig_check()
 *         if verb:
 */
      __pyx_t_9 = __Pyx_PyList_Append(__pyx_v_A2, __pyx_v_c); if (unlikely(__pyx_t_9 == ((int)-1))) __PYX_ERR(0, 3975, __pyx_L1_error)

      /* "automata/cautomata.pyx":3976
 *                 l[i] = d[c]  # l gives the old index from the new one
 *                 A2.append(c)
 *                 sig_check()             # <<<<<<<<<<<<<<
 *         if verb:
 *             str = "l=["
 */
      __pyx_t_6 = sig_check(); if (unlikely(__pyx_t_6 == ((int)0))) __PYX_ERR(0, 3976, __pyx_L1_error)

      /* "automata/cautomata.pyx":3973
 *         A2 = []
 *         for i, c in enumerate(A):
 *             if d.has_key(c):             # <<<<<<<<<<<<<<
 *                 l[i] = d[c]  # l gives the old index from the new one
 *                 A2.append(c)
 */
    }

    /* "automata/cautomata.pyx":3972
 *             d[c] = i
 *         A2 = []
 *         for i, c in enumerate(A):             # <<<<<<<<<<<<<<
 *             if d.has_key(c):
 *                 l[i] = d[c]  # l gives the old index from the new one
 */
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

  /* "automata/cautomata.pyx":3977
 *                 A2.append(c)
 *                 sig_check()
 *         if verb:             # <<<<<<<<<<<<<<
 *             str = "l=["
 *             for i in range(len(A)):
 */
  __pyx_t_8 = (__pyx_v_verb != 0);
  if (__pyx_t_8) {

    /* "automata/cautomata.pyx":3978
 *                 sig_check()
 *         if verb:
 *             str = "l=["             # <<<<<<<<<<<<<<
 *             for i in range(len(A)):
 *                 str += " %s" % l[i]
 */
    __Pyx_INCREF(__pyx_kp_s_l_2);
    __pyx_v_str = __pyx_kp_s_l_2;

    /* "automata/cautomata.pyx":3979
 *         if verb:
 *             str = "l=["
 *             for i in range(len(A)):             # <<<<<<<<<<<<<<
 *                 str += " %s" % l[i]
 *             str += " ]"
 */
    if (unlikely(__pyx_v_A == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
      __PYX_ERR(0, 3979, __pyx_L1_error)
    }
    __pyx_t_1 = PyList_GET_SIZE(__pyx_v_A); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 3979, __pyx_L1_error)
    __pyx_t_10 = __pyx_t_1;
    for (__pyx_t_5 = 0; __pyx_t_5 < __pyx_t_10; __pyx_t_5+=1) {
      __pyx_v_i = __pyx_t_5;

      /* "automata/cautomata.pyx":3980
 *             str = "l=["
 *             for i in range(len(A)):
 *                 str += " %s" % l[i]             # <<<<<<<<<<<<<<
 *             str += " ]"
 *             print(str)
 */
      __pyx_t_4 = __Pyx_PyInt_From_int((__pyx_v_l[__pyx_v_i])); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3980, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_3 = __Pyx_PyString_Format(__pyx_kp_s_s_2, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 3980, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = PyNumber_InPlaceAdd(__pyx_v_str, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3980, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_DECREF_SET(__pyx_v_str, __pyx_t_4);
      __pyx_t_4 = 0;
    }

    /* "automata/cautomata.pyx":3981
 *             for i in range(len(A)):
 *                 str += " %s" % l[i]
 *             str += " ]"             # <<<<<<<<<<<<<<
 *             print(str)
 *         sig_on()
 */
    __pyx_t_4 = PyNumber_InPlaceAdd(__pyx_v_str, __pyx_kp_s__60); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3981, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF_SET(__pyx_v_str, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3982
 *                 str += " %s" % l[i]
 *             str += " ]"
 *             print(str)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         PermutOP(self.a[0], l, len(A), verb)
 */
    __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_str); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 3982, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":3977
 *                 A2.append(c)
 *                 sig_check()
 *         if verb:             # <<<<<<<<<<<<<<
 *             str = "l=["
 *             for i in range(len(A)):
 */
  }

  /* "automata/cautomata.pyx":3983
 *             str += " ]"
 *             print(str)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         PermutOP(self.a[0], l, len(A), verb)
 *         free(l)
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 3983, __pyx_L1_error)

  /* "automata/cautomata.pyx":3984
 *             print(str)
 *         sig_on()
 *         PermutOP(self.a[0], l, len(A), verb)             # <<<<<<<<<<<<<<
 *         free(l)
 *         sig_off()
 */
  if (unlikely(__pyx_v_A == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 3984, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_GET_SIZE(__pyx_v_A); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 3984, __pyx_L1_error)
  PermutOP((__pyx_v_self->a[0]), __pyx_v_l, __pyx_t_1, __pyx_v_verb);

  /* "automata/cautomata.pyx":3985
 *         sig_on()
 *         PermutOP(self.a[0], l, len(A), verb)
 *         free(l)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         self.A = A2
 */
  free(__pyx_v_l);

  /* "automata/cautomata.pyx":3986
 *         PermutOP(self.a[0], l, len(A), verb)
 *         free(l)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         self.A = A2
 *         self.a.na = len(A2)
 */
  sig_off();

  /* "automata/cautomata.pyx":3987
 *         free(l)
 *         sig_off()
 *         self.A = A2             # <<<<<<<<<<<<<<
 *         self.a.na = len(A2)
 * 
 */
  __Pyx_INCREF(__pyx_v_A2);
  __Pyx_GIVEREF(__pyx_v_A2);
  __Pyx_GOTREF(__pyx_v_self->A);
  __Pyx_DECREF(__pyx_v_self->A);
  __pyx_v_self->A = __pyx_v_A2;

  /* "automata/cautomata.pyx":3988
 *         sig_off()
 *         self.A = A2
 *         self.a.na = len(A2)             # <<<<<<<<<<<<<<
 * 
 *     def mirror_deterministic(self):
 */
  __pyx_t_1 = PyList_GET_SIZE(__pyx_v_A2); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 3988, __pyx_L1_error)
  __pyx_v_self->a->na = __pyx_t_1;

  /* "automata/cautomata.pyx":3907
 *         return r
 * 
 *     def permut_in_place(self, list A, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Permutes (and eventually remove) letters of the alphabet in-place,
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.permut_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_A2);
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF(__pyx_v_c);
  __Pyx_XDECREF(__pyx_v_str);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":3990
 *         self.a.na = len(A2)
 * 
 *     def mirror_deterministic(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return a :class:`DeterministicAutomaton`, whose language is the mirror of the
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_101mirror_deterministic(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_100mirror_deterministic[] = "\n        Return a :class:`DeterministicAutomaton`, whose language is the mirror of the\n        language of self.\n        We assume the result to be deterministic!\n        If it is not the case, you should rather use mirror()\n        to get a correct result.\n\n        OUTPUT:\n\n        Return a :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            sage: a = dag.Word(['a', 'b', 'c', 'b'])\n            sage: b = a.mirror_deterministic()\n            sage: b\n            DeterministicAutomaton with 5 states and an alphabet of 3 letters\n            sage: b.has_same_language_as(dag.Word(['b', 'c', 'b', 'a']))\n            True\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.mirror_deterministic()\n            DeterministicAutomaton with 4 states and an alphabet of 2 letters\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([('a','a',0), ('a','b',1), ('b','a',0)], i='a')\n            sage: b = a.mirror_deterministic()\n            sage: b\n            DeterministicAutomaton with 2 states and an alphabet of 2 letters\n            sage: b.has_same_language_as(a.mirror().determinize())\n            False\n            sage: b.states\n            ['a', 'b']\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_101mirror_deterministic(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("mirror_deterministic (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_100mirror_deterministic(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_100mirror_deterministic(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = 0;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  __Pyx_RefNannySetupContext("mirror_deterministic", 0);

  /* "automata/cautomata.pyx":4028
 *         cdef DeterministicAutomaton r
 * 
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r.a[0] = MirrorDet(self.a[0])
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4028, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":4029
 * 
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         r.a[0] = MirrorDet(self.a[0])
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 4029, __pyx_L1_error)

  /* "automata/cautomata.pyx":4030
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         r.a[0] = MirrorDet(self.a[0])             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.A = self.A
 */
  (__pyx_v_r->a[0]) = MirrorDet((__pyx_v_self->a[0]));

  /* "automata/cautomata.pyx":4031
 *         sig_on()
 *         r.a[0] = MirrorDet(self.a[0])
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         r.S = self.S
 */
  sig_off();

  /* "automata/cautomata.pyx":4032
 *         r.a[0] = MirrorDet(self.a[0])
 *         sig_off()
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         r.S = self.S
 *         return r
 */
  __pyx_t_1 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":4033
 *         sig_off()
 *         r.A = self.A
 *         r.S = self.S             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  __pyx_t_1 = __pyx_v_self->S;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->S);
  __Pyx_DECREF(__pyx_v_r->S);
  __pyx_v_r->S = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":4034
 *         r.A = self.A
 *         r.S = self.S
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def mirror(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":3990
 *         self.a.na = len(A2)
 * 
 *     def mirror_deterministic(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return a :class:`DeterministicAutomaton`, whose language is the mirror of the
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.mirror_deterministic", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4036
 *         return r
 * 
 *     def mirror(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return a :class:`CAutomaton`, whose language is the mirror of the
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_103mirror(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_102mirror[] = "\n        Return a :class:`CAutomaton`, whose language is the mirror of the\n        language of self.\n\n        OUTPUT:\n\n        Return a :class:`CAutomaton`\n\n        EXAMPLES::\n\n            sage: a = dag.Word(['a', 'b', 'c', 'b'])\n            sage: b = a.mirror()\n            sage: b\n            CAutomaton with 5 states and an alphabet of 3 letters\n            sage: b.determinize().has_same_language_as(dag.Word(['b', 'c', 'b', 'a']))\n            True\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.mirror()\n            CAutomaton with 4 states and an alphabet of 2 letters\n\n        TESTS::\n        \n            sage: a = DeterministicAutomaton([('a','a',0), ('a','b',1), ('b','a',0)], i='a')\n            sage: a.mirror()\n            CAutomaton with 2 states and an alphabet of 2 letters\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_103mirror(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("mirror (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_102mirror(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_102mirror(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  struct __pyx_obj_8automata_9cautomata_CAutomaton *__pyx_v_r = 0;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  __Pyx_RefNannySetupContext("mirror", 0);

  /* "automata/cautomata.pyx":4067
 *         cdef CAutomaton r
 * 
 *         r = CAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r.a[0] = Mirror(self.a[0])
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_CAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4067, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_CAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":4068
 * 
 *         r = CAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         r.a[0] = Mirror(self.a[0])
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 4068, __pyx_L1_error)

  /* "automata/cautomata.pyx":4069
 *         r = CAutomaton(None)
 *         sig_on()
 *         r.a[0] = Mirror(self.a[0])             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.A = self.A
 */
  (__pyx_v_r->a[0]) = Mirror((__pyx_v_self->a[0]));

  /* "automata/cautomata.pyx":4070
 *         sig_on()
 *         r.a[0] = Mirror(self.a[0])
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         r.S = self.S
 */
  sig_off();

  /* "automata/cautomata.pyx":4071
 *         r.a[0] = Mirror(self.a[0])
 *         sig_off()
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         r.S = self.S
 *         return r
 */
  __pyx_t_1 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":4072
 *         sig_off()
 *         r.A = self.A
 *         r.S = self.S             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  __pyx_t_1 = __pyx_v_self->S;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->S);
  __Pyx_DECREF(__pyx_v_r->S);
  __pyx_v_r->S = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":4073
 *         r.A = self.A
 *         r.S = self.S
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def strongly_connected_components(self, bool no_trivials=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4036
 *         return r
 * 
 *     def mirror(self):             # <<<<<<<<<<<<<<
 *         """
 *         Return a :class:`CAutomaton`, whose language is the mirror of the
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.mirror", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4075
 *         return r
 * 
 *     def strongly_connected_components(self, bool no_trivials=False):             # <<<<<<<<<<<<<<
 *         r"""
 *         Determine a partition into strongly connected components.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_105strongly_connected_components(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_104strongly_connected_components[] = "\n        Determine a partition into strongly connected components.\n        A strongly connected component is a minimal subset of the set\n        of states such that\n        there is no path going outside of the subset, from a state of\n        the subset to a state of the subset.\n        This computation is done by computing an efficient topological\n        ordering of the graph.\n\n        INPUT:\n\n        - ``no_trivials`` -- bool (default: ``False``) If True, do not take into\n          account components without any transition from itself to itself\n          (such component contains only one element).\n\n        OUTPUT:\n\n        Return the list of strongly connected components, given as a list of\n        list of states.\n\n        EXAMPLES::\n\n            sage: a = dag.Word(['a', 'b']).concatenate(dag.AnyWord(['a', 'b']))\n            sage: a\n            DeterministicAutomaton with 3 states and an alphabet of 2 letters\n            sage: a.strongly_connected_components()\n            [[0], [2], [1]]\n            \n            sage: a = dag.Random(20, [0, 1, 2])\n            sage: a.strongly_connected_components()     # random\n            [[4],\n             [12, 15],\n             [2, 6, 13, 18],\n             [3, 5, 7, 8, 10, 11, 16, 19],\n             [0, 14],\n             [17],\n             [1],\n             [9]]\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (1,0,'b'), (2, 3, 'b')], i=0)\n            sage: a.strongly_connected_components()\n            [[0, 1], [3], [2]]\n\n            sage: a = DeterministicAutomaton([('a', 'a', 0), ('a', 'b', 1), ('b', 'a', 0)], i='a')\n            sage: a.strongly_connected_components()\n            [[0, 1]]\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_105strongly_connected_components(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  bool __pyx_v_no_trivials;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("strongly_connected_components (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_no_trivials,0};
    PyObject* values[1] = {0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_no_trivials);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "strongly_connected_components") < 0)) __PYX_ERR(0, 4075, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_no_trivials = __Pyx_PyInt_As_bool(values[0]); if (unlikely((__pyx_v_no_trivials == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4075, __pyx_L3_error)
    } else {
      __pyx_v_no_trivials = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("strongly_connected_components", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 4075, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.strongly_connected_components", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_104strongly_connected_components(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_no_trivials);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_104strongly_connected_components(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, bool __pyx_v_no_trivials) {
  int *__pyx_v_l;
  CYTHON_UNUSED int __pyx_v_ncc;
  PyObject *__pyx_v_l2 = 0;
  int __pyx_v_i;
  int __pyx_v_trivial;
  Py_ssize_t __pyx_v_j;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  PyObject *__pyx_t_7 = NULL;
  int __pyx_t_8;
  Py_ssize_t __pyx_t_9;
  PyObject *(*__pyx_t_10)(PyObject *);
  PyObject *__pyx_t_11 = NULL;
  Py_ssize_t __pyx_t_12;
  Py_ssize_t __pyx_t_13;
  Py_ssize_t __pyx_t_14;
  Py_ssize_t __pyx_t_15;
  PyObject *__pyx_t_16 = NULL;
  __Pyx_RefNannySetupContext("strongly_connected_components", 0);

  /* "automata/cautomata.pyx":4129
 *         cdef int i
 * 
 *         sig_on()             # <<<<<<<<<<<<<<
 *         l = <int*>malloc(sizeof(int) * self.a.n)
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 4129, __pyx_L1_error)

  /* "automata/cautomata.pyx":4130
 * 
 *         sig_on()
 *         l = <int*>malloc(sizeof(int) * self.a.n)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if l is NULL:
 */
  __pyx_v_l = ((int *)malloc(((sizeof(int)) * __pyx_v_self->a->n)));

  /* "automata/cautomata.pyx":4131
 *         sig_on()
 *         l = <int*>malloc(sizeof(int) * self.a.n)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "
 */
  sig_off();

  /* "automata/cautomata.pyx":4132
 *         l = <int*>malloc(sizeof(int) * self.a.n)
 *         sig_off()
 *         if l is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "strongly_connected_component.")
 */
  __pyx_t_2 = ((__pyx_v_l == NULL) != 0);
  if (unlikely(__pyx_t_2)) {

    /* "automata/cautomata.pyx":4133
 *         sig_off()
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "             # <<<<<<<<<<<<<<
 *                               "strongly_connected_component.")
 *         sig_on()
 */
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__62, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4133, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 4133, __pyx_L1_error)

    /* "automata/cautomata.pyx":4132
 *         l = <int*>malloc(sizeof(int) * self.a.n)
 *         sig_off()
 *         if l is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "strongly_connected_component.")
 */
  }

  /* "automata/cautomata.pyx":4135
 *             raise MemoryError("Failed to allocate memory for l in "
 *                               "strongly_connected_component.")
 *         sig_on()             # <<<<<<<<<<<<<<
 *         ncc = StronglyConnectedComponents(self.a[0], l)
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 4135, __pyx_L1_error)

  /* "automata/cautomata.pyx":4136
 *                               "strongly_connected_component.")
 *         sig_on()
 *         ncc = StronglyConnectedComponents(self.a[0], l)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         # inverse la liste
 */
  __pyx_v_ncc = StronglyConnectedComponents((__pyx_v_self->a[0]), __pyx_v_l);

  /* "automata/cautomata.pyx":4137
 *         sig_on()
 *         ncc = StronglyConnectedComponents(self.a[0], l)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         # inverse la liste
 *         l2 = {}
 */
  sig_off();

  /* "automata/cautomata.pyx":4139
 *         sig_off()
 *         # inverse la liste
 *         l2 = {}             # <<<<<<<<<<<<<<
 *         for i in range(self.a.n):
 *             if not l2.has_key(l[i]):
 */
  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_l2 = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":4140
 *         # inverse la liste
 *         l2 = {}
 *         for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *             if not l2.has_key(l[i]):
 *                 l2[l[i]] = []
 */
  __pyx_t_1 = __pyx_v_self->a->n;
  __pyx_t_4 = __pyx_t_1;
  for (__pyx_t_5 = 0; __pyx_t_5 < __pyx_t_4; __pyx_t_5+=1) {
    __pyx_v_i = __pyx_t_5;

    /* "automata/cautomata.pyx":4141
 *         l2 = {}
 *         for i in range(self.a.n):
 *             if not l2.has_key(l[i]):             # <<<<<<<<<<<<<<
 *                 l2[l[i]] = []
 *             l2[l[i]].append(i)
 */
    __pyx_t_3 = __Pyx_PyInt_From_int((__pyx_v_l[__pyx_v_i])); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4141, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_2 = PyDict_Contains(__pyx_v_l2, __pyx_t_3); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 4141, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_6 = ((!(__pyx_t_2 != 0)) != 0);
    if (__pyx_t_6) {

      /* "automata/cautomata.pyx":4142
 *         for i in range(self.a.n):
 *             if not l2.has_key(l[i]):
 *                 l2[l[i]] = []             # <<<<<<<<<<<<<<
 *             l2[l[i]].append(i)
 *         if no_trivials:
 */
      __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4142, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_7 = __Pyx_PyInt_From_int((__pyx_v_l[__pyx_v_i])); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 4142, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      if (unlikely(PyDict_SetItem(__pyx_v_l2, __pyx_t_7, __pyx_t_3) < 0)) __PYX_ERR(0, 4142, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":4141
 *         l2 = {}
 *         for i in range(self.a.n):
 *             if not l2.has_key(l[i]):             # <<<<<<<<<<<<<<
 *                 l2[l[i]] = []
 *             l2[l[i]].append(i)
 */
    }

    /* "automata/cautomata.pyx":4143
 *             if not l2.has_key(l[i]):
 *                 l2[l[i]] = []
 *             l2[l[i]].append(i)             # <<<<<<<<<<<<<<
 *         if no_trivials:
 *             for i in l2.keys():
 */
    __pyx_t_3 = __Pyx_PyInt_From_int((__pyx_v_l[__pyx_v_i])); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4143, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_7 = __Pyx_PyDict_GetItem(__pyx_v_l2, __pyx_t_3); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 4143, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_7);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4143, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_8 = __Pyx_PyObject_Append(__pyx_t_7, __pyx_t_3); if (unlikely(__pyx_t_8 == ((int)-1))) __PYX_ERR(0, 4143, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  }

  /* "automata/cautomata.pyx":4144
 *                 l2[l[i]] = []
 *             l2[l[i]].append(i)
 *         if no_trivials:             # <<<<<<<<<<<<<<
 *             for i in l2.keys():
 *                 if len(l2[i]) == 1:
 */
  __pyx_t_6 = (__pyx_v_no_trivials != 0);
  if (__pyx_t_6) {

    /* "automata/cautomata.pyx":4145
 *             l2[l[i]].append(i)
 *         if no_trivials:
 *             for i in l2.keys():             # <<<<<<<<<<<<<<
 *                 if len(l2[i]) == 1:
 *                     trivial = True
 */
    __pyx_t_3 = __Pyx_PyDict_Keys(__pyx_v_l2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4145, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    if (likely(PyList_CheckExact(__pyx_t_3)) || PyTuple_CheckExact(__pyx_t_3)) {
      __pyx_t_7 = __pyx_t_3; __Pyx_INCREF(__pyx_t_7); __pyx_t_9 = 0;
      __pyx_t_10 = NULL;
    } else {
      __pyx_t_9 = -1; __pyx_t_7 = PyObject_GetIter(__pyx_t_3); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 4145, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_7);
      __pyx_t_10 = Py_TYPE(__pyx_t_7)->tp_iternext; if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4145, __pyx_L1_error)
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    for (;;) {
      if (likely(!__pyx_t_10)) {
        if (likely(PyList_CheckExact(__pyx_t_7))) {
          if (__pyx_t_9 >= PyList_GET_SIZE(__pyx_t_7)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyList_GET_ITEM(__pyx_t_7, __pyx_t_9); __Pyx_INCREF(__pyx_t_3); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 4145, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_7, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4145, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        } else {
          if (__pyx_t_9 >= PyTuple_GET_SIZE(__pyx_t_7)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_7, __pyx_t_9); __Pyx_INCREF(__pyx_t_3); __pyx_t_9++; if (unlikely(0 < 0)) __PYX_ERR(0, 4145, __pyx_L1_error)
          #else
          __pyx_t_3 = PySequence_ITEM(__pyx_t_7, __pyx_t_9); __pyx_t_9++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4145, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          #endif
        }
      } else {
        __pyx_t_3 = __pyx_t_10(__pyx_t_7);
        if (unlikely(!__pyx_t_3)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 4145, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_3);
      }
      __pyx_t_1 = __Pyx_PyInt_As_int(__pyx_t_3); if (unlikely((__pyx_t_1 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 4145, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_v_i = __pyx_t_1;

      /* "automata/cautomata.pyx":4146
 *         if no_trivials:
 *             for i in l2.keys():
 *                 if len(l2[i]) == 1:             # <<<<<<<<<<<<<<
 *                     trivial = True
 *                     for j in range(len(self.A)):
 */
      __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4146, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_11 = __Pyx_PyDict_GetItem(__pyx_v_l2, __pyx_t_3); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4146, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_12 = PyObject_Length(__pyx_t_11); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 4146, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __pyx_t_6 = ((__pyx_t_12 == 1) != 0);
      if (__pyx_t_6) {

        /* "automata/cautomata.pyx":4147
 *             for i in l2.keys():
 *                 if len(l2[i]) == 1:
 *                     trivial = True             # <<<<<<<<<<<<<<
 *                     for j in range(len(self.A)):
 *                         if self.a.e[l2[i][0]].f[j] == l2[i][0]:
 */
        __pyx_v_trivial = 1;

        /* "automata/cautomata.pyx":4148
 *                 if len(l2[i]) == 1:
 *                     trivial = True
 *                     for j in range(len(self.A)):             # <<<<<<<<<<<<<<
 *                         if self.a.e[l2[i][0]].f[j] == l2[i][0]:
 *                             trivial = False
 */
        __pyx_t_11 = __pyx_v_self->A;
        __Pyx_INCREF(__pyx_t_11);
        if (unlikely(__pyx_t_11 == Py_None)) {
          PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
          __PYX_ERR(0, 4148, __pyx_L1_error)
        }
        __pyx_t_12 = PyList_GET_SIZE(__pyx_t_11); if (unlikely(__pyx_t_12 == ((Py_ssize_t)-1))) __PYX_ERR(0, 4148, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_13 = __pyx_t_12;
        for (__pyx_t_14 = 0; __pyx_t_14 < __pyx_t_13; __pyx_t_14+=1) {
          __pyx_v_j = __pyx_t_14;

          /* "automata/cautomata.pyx":4149
 *                     trivial = True
 *                     for j in range(len(self.A)):
 *                         if self.a.e[l2[i][0]].f[j] == l2[i][0]:             # <<<<<<<<<<<<<<
 *                             trivial = False
 *                             break
 */
          __pyx_t_11 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4149, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __pyx_t_3 = __Pyx_PyDict_GetItem(__pyx_v_l2, __pyx_t_11); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4149, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __pyx_t_11 = __Pyx_GetItemInt(__pyx_t_3, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4149, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
          __pyx_t_15 = __Pyx_PyIndex_AsSsize_t(__pyx_t_11); if (unlikely((__pyx_t_15 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 4149, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __pyx_t_11 = __Pyx_PyInt_From_int(((__pyx_v_self->a->e[__pyx_t_15]).f[__pyx_v_j])); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4149, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4149, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __pyx_t_16 = __Pyx_PyDict_GetItem(__pyx_v_l2, __pyx_t_3); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 4149, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_16);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
          __pyx_t_3 = __Pyx_GetItemInt(__pyx_t_16, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4149, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
          __pyx_t_16 = PyObject_RichCompare(__pyx_t_11, __pyx_t_3, Py_EQ); __Pyx_XGOTREF(__pyx_t_16); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 4149, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
          __pyx_t_6 = __Pyx_PyObject_IsTrue(__pyx_t_16); if (unlikely(__pyx_t_6 < 0)) __PYX_ERR(0, 4149, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
          if (__pyx_t_6) {

            /* "automata/cautomata.pyx":4150
 *                     for j in range(len(self.A)):
 *                         if self.a.e[l2[i][0]].f[j] == l2[i][0]:
 *                             trivial = False             # <<<<<<<<<<<<<<
 *                             break
 *                     if trivial:
 */
            __pyx_v_trivial = 0;

            /* "automata/cautomata.pyx":4151
 *                         if self.a.e[l2[i][0]].f[j] == l2[i][0]:
 *                             trivial = False
 *                             break             # <<<<<<<<<<<<<<
 *                     if trivial:
 *                         # on retire cette composante qui est triviale
 */
            goto __pyx_L12_break;

            /* "automata/cautomata.pyx":4149
 *                     trivial = True
 *                     for j in range(len(self.A)):
 *                         if self.a.e[l2[i][0]].f[j] == l2[i][0]:             # <<<<<<<<<<<<<<
 *                             trivial = False
 *                             break
 */
          }
        }
        __pyx_L12_break:;

        /* "automata/cautomata.pyx":4152
 *                             trivial = False
 *                             break
 *                     if trivial:             # <<<<<<<<<<<<<<
 *                         # on retire cette composante qui est triviale
 *                         l2.pop(i)
 */
        __pyx_t_6 = (__pyx_v_trivial != 0);
        if (__pyx_t_6) {

          /* "automata/cautomata.pyx":4154
 *                     if trivial:
 *                         # on retire cette composante qui est triviale
 *                         l2.pop(i)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         free(l)
 */
          __pyx_t_16 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 4154, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_16);
          __pyx_t_3 = __Pyx_PyDict_Pop(__pyx_v_l2, __pyx_t_16, ((PyObject *)NULL)); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4154, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

          /* "automata/cautomata.pyx":4152
 *                             trivial = False
 *                             break
 *                     if trivial:             # <<<<<<<<<<<<<<
 *                         # on retire cette composante qui est triviale
 *                         l2.pop(i)
 */
        }

        /* "automata/cautomata.pyx":4146
 *         if no_trivials:
 *             for i in l2.keys():
 *                 if len(l2[i]) == 1:             # <<<<<<<<<<<<<<
 *                     trivial = True
 *                     for j in range(len(self.A)):
 */
      }

      /* "automata/cautomata.pyx":4145
 *             l2[l[i]].append(i)
 *         if no_trivials:
 *             for i in l2.keys():             # <<<<<<<<<<<<<<
 *                 if len(l2[i]) == 1:
 *                     trivial = True
 */
    }
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;

    /* "automata/cautomata.pyx":4144
 *                 l2[l[i]] = []
 *             l2[l[i]].append(i)
 *         if no_trivials:             # <<<<<<<<<<<<<<
 *             for i in l2.keys():
 *                 if len(l2[i]) == 1:
 */
  }

  /* "automata/cautomata.pyx":4155
 *                         # on retire cette composante qui est triviale
 *                         l2.pop(i)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         free(l)
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 4155, __pyx_L1_error)

  /* "automata/cautomata.pyx":4156
 *                         l2.pop(i)
 *         sig_on()
 *         free(l)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return l2.values()
 */
  free(__pyx_v_l);

  /* "automata/cautomata.pyx":4157
 *         sig_on()
 *         free(l)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return l2.values()
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":4158
 *         free(l)
 *         sig_off()
 *         return l2.values()             # <<<<<<<<<<<<<<
 * 
 *     def sub_automaton(self, list l, bool keep_states_labels=True, bool verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_7 = __Pyx_PyDict_Values(__pyx_v_l2); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 4158, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_r = __pyx_t_7;
  __pyx_t_7 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4075
 *         return r
 * 
 *     def strongly_connected_components(self, bool no_trivials=False):             # <<<<<<<<<<<<<<
 *         r"""
 *         Determine a partition into strongly connected components.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_7);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_16);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.strongly_connected_components", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_l2);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4160
 *         return l2.values()
 * 
 *     def sub_automaton(self, list l, bool keep_states_labels=True, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute the sub automaton whose states are given by the set ``l``.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_107sub_automaton(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_106sub_automaton[] = "\n        Compute the sub automaton whose states are given by the set ``l``.\n\n        INPUT:\n\n        - ``l``  -- list of states to keep\n\n        - ``verb`` -- boolean (default: ``False``) set to ``True`` to activate\n          the verbose mode\n\n        - ``keep_states_labels``  -- boolean (default: ``True``) keep the labels of states\n\n        OUTPUT:\n\n        Return a :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            sage: a = dag.Word(['a', 'b', 'c'])\n            sage: a.sub_automaton([0,1])\n            DeterministicAutomaton with 2 states and an alphabet of 3 letters\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = a.sub_automaton([0,1])\n            sage: b\n            DeterministicAutomaton with 2 states and an alphabet of 2 letters\n            sage: b.has_same_language_as(a)\n            True\n\n        TESTS::\n\n            sage: a = dag.Word(['a','b','a'])\n            sage: a.sub_automaton([3,4])\n            Traceback (most recent call last):\n            ...\n            ValueError: Element 4 of the list given is not a state (i.e. between 0 and 4).\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_107sub_automaton(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_l = 0;
  bool __pyx_v_keep_states_labels;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("sub_automaton (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_l,&__pyx_n_s_keep_states_labels,&__pyx_n_s_verb,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_l)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_keep_states_labels);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "sub_automaton") < 0)) __PYX_ERR(0, 4160, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_l = ((PyObject*)values[0]);
    if (values[1]) {
      __pyx_v_keep_states_labels = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_keep_states_labels == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4160, __pyx_L3_error)
    } else {
      __pyx_v_keep_states_labels = ((bool)1);
    }
    if (values[2]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[2]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4160, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("sub_automaton", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 4160, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.sub_automaton", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_l), (&PyList_Type), 1, "l", 1))) __PYX_ERR(0, 4160, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_106sub_automaton(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_l, __pyx_v_keep_states_labels, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_106sub_automaton(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_l, bool __pyx_v_keep_states_labels, bool __pyx_v_verb) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = 0;
  int __pyx_v_i;
  int __pyx_v_n;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  Py_ssize_t __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  Py_ssize_t __pyx_t_3;
  int __pyx_t_4;
  int __pyx_t_5;
  PyObject *__pyx_t_6 = NULL;
  int __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  int __pyx_t_10;
  int __pyx_t_11;
  __Pyx_RefNannySetupContext("sub_automaton", 0);

  /* "automata/cautomata.pyx":4202
 *         cdef int i, n
 *         # check that the list l is correct
 *         if len(l) != len(set(l)):             # <<<<<<<<<<<<<<
 *             raise ValueError("A state of the list appears several times")
 *         n = self.a.n
 */
  if (unlikely(__pyx_v_l == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 4202, __pyx_L1_error)
  }
  __pyx_t_1 = PyList_GET_SIZE(__pyx_v_l); if (unlikely(__pyx_t_1 == ((Py_ssize_t)-1))) __PYX_ERR(0, 4202, __pyx_L1_error)
  __pyx_t_2 = PySet_New(__pyx_v_l); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4202, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PySet_GET_SIZE(__pyx_t_2); if (unlikely(__pyx_t_3 == ((Py_ssize_t)-1))) __PYX_ERR(0, 4202, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_4 = ((__pyx_t_1 != __pyx_t_3) != 0);
  if (unlikely(__pyx_t_4)) {

    /* "automata/cautomata.pyx":4203
 *         # check that the list l is correct
 *         if len(l) != len(set(l)):
 *             raise ValueError("A state of the list appears several times")             # <<<<<<<<<<<<<<
 *         n = self.a.n
 *         for i in l:
 */
    __pyx_t_2 = __Pyx_PyObject_Call(__pyx_builtin_ValueError, __pyx_tuple__63, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4203, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_Raise(__pyx_t_2, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_ERR(0, 4203, __pyx_L1_error)

    /* "automata/cautomata.pyx":4202
 *         cdef int i, n
 *         # check that the list l is correct
 *         if len(l) != len(set(l)):             # <<<<<<<<<<<<<<
 *             raise ValueError("A state of the list appears several times")
 *         n = self.a.n
 */
  }

  /* "automata/cautomata.pyx":4204
 *         if len(l) != len(set(l)):
 *             raise ValueError("A state of the list appears several times")
 *         n = self.a.n             # <<<<<<<<<<<<<<
 *         for i in l:
 *             if i < 0 or i >= n:
 */
  __pyx_t_5 = __pyx_v_self->a->n;
  __pyx_v_n = __pyx_t_5;

  /* "automata/cautomata.pyx":4205
 *             raise ValueError("A state of the list appears several times")
 *         n = self.a.n
 *         for i in l:             # <<<<<<<<<<<<<<
 *             if i < 0 or i >= n:
 *                 raise ValueError("Element %s of the list given is not a state (i.e. between 0 and %s)."% (i, n))
 */
  if (unlikely(__pyx_v_l == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
    __PYX_ERR(0, 4205, __pyx_L1_error)
  }
  __pyx_t_2 = __pyx_v_l; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
  for (;;) {
    if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_6 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_6); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 4205, __pyx_L1_error)
    #else
    __pyx_t_6 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 4205, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_6);
    #endif
    __pyx_t_5 = __Pyx_PyInt_As_int(__pyx_t_6); if (unlikely((__pyx_t_5 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 4205, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_6); __pyx_t_6 = 0;
    __pyx_v_i = __pyx_t_5;

    /* "automata/cautomata.pyx":4206
 *         n = self.a.n
 *         for i in l:
 *             if i < 0 or i >= n:             # <<<<<<<<<<<<<<
 *                 raise ValueError("Element %s of the list given is not a state (i.e. between 0 and %s)."% (i, n))
 *         r = DeterministicAutomaton(None)
 */
    __pyx_t_7 = ((__pyx_v_i < 0) != 0);
    if (!__pyx_t_7) {
    } else {
      __pyx_t_4 = __pyx_t_7;
      goto __pyx_L7_bool_binop_done;
    }
    __pyx_t_7 = ((__pyx_v_i >= __pyx_v_n) != 0);
    __pyx_t_4 = __pyx_t_7;
    __pyx_L7_bool_binop_done:;
    if (unlikely(__pyx_t_4)) {

      /* "automata/cautomata.pyx":4207
 *         for i in l:
 *             if i < 0 or i >= n:
 *                 raise ValueError("Element %s of the list given is not a state (i.e. between 0 and %s)."% (i, n))             # <<<<<<<<<<<<<<
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 */
      __pyx_t_6 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 4207, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_6);
      __pyx_t_8 = __Pyx_PyInt_From_int(__pyx_v_n); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 4207, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = PyTuple_New(2); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 4207, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_GIVEREF(__pyx_t_6);
      PyTuple_SET_ITEM(__pyx_t_9, 0, __pyx_t_6);
      __Pyx_GIVEREF(__pyx_t_8);
      PyTuple_SET_ITEM(__pyx_t_9, 1, __pyx_t_8);
      __pyx_t_6 = 0;
      __pyx_t_8 = 0;
      __pyx_t_8 = __Pyx_PyString_Format(__pyx_kp_s_Element_s_of_the_list_given_is_n, __pyx_t_9); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 4207, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_8); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 4207, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_Raise(__pyx_t_9, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __PYX_ERR(0, 4207, __pyx_L1_error)

      /* "automata/cautomata.pyx":4206
 *         n = self.a.n
 *         for i in l:
 *             if i < 0 or i >= n:             # <<<<<<<<<<<<<<
 *                 raise ValueError("Element %s of the list given is not a state (i.e. between 0 and %s)."% (i, n))
 *         r = DeterministicAutomaton(None)
 */
    }

    /* "automata/cautomata.pyx":4205
 *             raise ValueError("A state of the list appears several times")
 *         n = self.a.n
 *         for i in l:             # <<<<<<<<<<<<<<
 *             if i < 0 or i >= n:
 *                 raise ValueError("Element %s of the list given is not a state (i.e. between 0 and %s)."% (i, n))
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":4208
 *             if i < 0 or i >= n:
 *                 raise ValueError("Element %s of the list given is not a state (i.e. between 0 and %s)."% (i, n))
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r.a[0] = SubAutomaton(self.a[0], list_to_Dict(l), verb)
 */
  __pyx_t_2 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4208, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":4209
 *                 raise ValueError("Element %s of the list given is not a state (i.e. between 0 and %s)."% (i, n))
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         r.a[0] = SubAutomaton(self.a[0], list_to_Dict(l), verb)
 *         sig_off()
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 4209, __pyx_L1_error)

  /* "automata/cautomata.pyx":4210
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         r.a[0] = SubAutomaton(self.a[0], list_to_Dict(l), verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.A = self.A
 */
  (__pyx_v_r->a[0]) = SubAutomaton((__pyx_v_self->a[0]), __pyx_f_8automata_9cautomata_list_to_Dict(__pyx_v_l), __pyx_v_verb);

  /* "automata/cautomata.pyx":4211
 *         sig_on()
 *         r.a[0] = SubAutomaton(self.a[0], list_to_Dict(l), verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         if keep_states_labels and self.S is not None:
 */
  sig_off();

  /* "automata/cautomata.pyx":4212
 *         r.a[0] = SubAutomaton(self.a[0], list_to_Dict(l), verb)
 *         sig_off()
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         if keep_states_labels and self.S is not None:
 *             r.S = []
 */
  __pyx_t_2 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_2);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":4213
 *         sig_off()
 *         r.A = self.A
 *         if keep_states_labels and self.S is not None:             # <<<<<<<<<<<<<<
 *             r.S = []
 *             for i in l:
 */
  __pyx_t_7 = (__pyx_v_keep_states_labels != 0);
  if (__pyx_t_7) {
  } else {
    __pyx_t_4 = __pyx_t_7;
    goto __pyx_L10_bool_binop_done;
  }
  __pyx_t_7 = (__pyx_v_self->S != ((PyObject*)Py_None));
  __pyx_t_10 = (__pyx_t_7 != 0);
  __pyx_t_4 = __pyx_t_10;
  __pyx_L10_bool_binop_done:;
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":4214
 *         r.A = self.A
 *         if keep_states_labels and self.S is not None:
 *             r.S = []             # <<<<<<<<<<<<<<
 *             for i in l:
 *                 r.S.append(self.S[i])
 */
    __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4214, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_GIVEREF(__pyx_t_2);
    __Pyx_GOTREF(__pyx_v_r->S);
    __Pyx_DECREF(__pyx_v_r->S);
    __pyx_v_r->S = ((PyObject*)__pyx_t_2);
    __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":4215
 *         if keep_states_labels and self.S is not None:
 *             r.S = []
 *             for i in l:             # <<<<<<<<<<<<<<
 *                 r.S.append(self.S[i])
 *         return r
 */
    if (unlikely(__pyx_v_l == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not iterable");
      __PYX_ERR(0, 4215, __pyx_L1_error)
    }
    __pyx_t_2 = __pyx_v_l; __Pyx_INCREF(__pyx_t_2); __pyx_t_3 = 0;
    for (;;) {
      if (__pyx_t_3 >= PyList_GET_SIZE(__pyx_t_2)) break;
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_9 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_3); __Pyx_INCREF(__pyx_t_9); __pyx_t_3++; if (unlikely(0 < 0)) __PYX_ERR(0, 4215, __pyx_L1_error)
      #else
      __pyx_t_9 = PySequence_ITEM(__pyx_t_2, __pyx_t_3); __pyx_t_3++; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 4215, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      #endif
      __pyx_t_5 = __Pyx_PyInt_As_int(__pyx_t_9); if (unlikely((__pyx_t_5 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 4215, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_v_i = __pyx_t_5;

      /* "automata/cautomata.pyx":4216
 *             r.S = []
 *             for i in l:
 *                 r.S.append(self.S[i])             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
      if (unlikely(__pyx_v_r->S == Py_None)) {
        PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "append");
        __PYX_ERR(0, 4216, __pyx_L1_error)
      }
      if (unlikely(__pyx_v_self->S == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 4216, __pyx_L1_error)
      }
      __pyx_t_9 = __Pyx_GetItemInt_List(__pyx_v_self->S, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 4216, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_9);
      __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_r->S, __pyx_t_9); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 4216, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;

      /* "automata/cautomata.pyx":4215
 *         if keep_states_labels and self.S is not None:
 *             r.S = []
 *             for i in l:             # <<<<<<<<<<<<<<
 *                 r.S.append(self.S[i])
 *         return r
 */
    }
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":4213
 *         sig_off()
 *         r.A = self.A
 *         if keep_states_labels and self.S is not None:             # <<<<<<<<<<<<<<
 *             r.S = []
 *             for i in l:
 */
  }

  /* "automata/cautomata.pyx":4217
 *             for i in l:
 *                 r.S.append(self.S[i])
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def simplify(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4160
 *         return l2.values()
 * 
 *     def sub_automaton(self, list l, bool keep_states_labels=True, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute the sub automaton whose states are given by the set ``l``.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_6);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.sub_automaton", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4219
 *         return r
 * 
 *     def simplify(self):             # <<<<<<<<<<<<<<
 *         """
 *         Prune and minimize self.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_109simplify(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_108simplify[] = "\n        Prune and minimize self.\n        This gives a canonical automaton for the language of self.\n\n        OUTPUT:\n\n        :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            sage: a = dag.Word(['a','b','a','b'])\n            sage: a.shift_list_in_place(['a','b'])\n            sage: a\n            DeterministicAutomaton with 5 states and an alphabet of 2 letters\n            sage: a.simplify()\n            DeterministicAutomaton with 3 states and an alphabet of 2 letters\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_109simplify(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("simplify (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_108simplify(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_108simplify(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  __Pyx_RefNannySetupContext("simplify", 0);

  /* "automata/cautomata.pyx":4238
 * 
 *         """
 *         return self.prune().minimize()             # <<<<<<<<<<<<<<
 * 
 *     def minimize(self, verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_prune); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
    }
  }
  __pyx_t_2 = (__pyx_t_4) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_4) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
  if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_t_2, __pyx_n_s_minimize); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
    __pyx_t_2 = PyMethod_GET_SELF(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
      __Pyx_INCREF(__pyx_t_2);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_3, function);
    }
  }
  __pyx_t_1 = (__pyx_t_2) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_2) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4238, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4219
 *         return r
 * 
 *     def simplify(self):             # <<<<<<<<<<<<<<
 *         """
 *         Prune and minimize self.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.simplify", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4240
 *         return self.prune().minimize()
 * 
 *     def minimize(self, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute the minimal automaton
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_111minimize(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_110minimize[] = "\n        Compute the minimal automaton\n        by Hopcroft's algorithm\n        see [Hopcroft]\n\n        INPUT:\n\n         - ``verb`` -- boolean (default: ``False``) set to ``True`` to\n           activate the verbose mode\n\n\n        OUTPUT:\n\n        Return a minimized :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([('a','b',0),('a','c',1),('b','a',0),\n            ....:                   ('b','d',1),('c','e',0),('c','f',1),\n            ....:                   ('d','e',0),('d','f',1),('e','e',0),\n            ....:                   ('e','f',1),('f','f',0),('f','f',1)],\n            ....:                   i='a', final_states=['c','d','e'])\n            sage: a.minimize()\n            DeterministicAutomaton with 3 states and an alphabet of 2 letters\n\n            sage: a = DeterministicAutomaton([(0,1,0), (0,5,1), (1,2,1), (1,6,0),\n            ....:                   (2,0,0), (2,2,1), (3,2,0), (3,6,1),\n            ....:                   (4,7,0), (4,5,1), (5,2,0), (5,6,1),\n            ....:                   (6,6,0), (6,4,1), (7,6,0), (7,2,1)],\n            ....:                   i=0, final_states=[2,6])\n            sage: a.minimize()\n            DeterministicAutomaton with 5 states and an alphabet of 2 letters\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.minimize()\n            DeterministicAutomaton with 3 states and an alphabet of 2 letters\n\n            sage: a = DeterministicAutomaton([(10,10,'x'),(10,20,'y'),(20,20,'z'),                    (20,10,'y'),(20,30,'x'),(30,30,'y'),(30,10,'z'),(30,20,'x'),                    (10,30,'z')], i=10)\n            sage: a.minimize()\n            DeterministicAutomaton with 1 state and an alphabet of 3 letters\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([('a','b',0),('a','c',1),('b','a',0),\n            ....:                   ('b','d',1),('c','e',0),('c','f',1),\n           "" ....:                   ('d','e',0),('d','f',1),('e','e',0),\n            ....:                   ('e','f',1),('f','f',0),('f','f',1)],\n            ....:                   i='a', final_states=['c','d','e'])\n            sage: b = DeterministicAutomaton([(0, 0, 0), (0, 2, 1), (1, 1, 0),\n            ....:                   (1, 0, 1), (2, 2, 0), (2, 2, 1)],\n            ....:                  A=[0, 1], i=1, final_states=[0])\n            sage: a.minimize() == b\n            True\n            \n            sage: a = DeterministicAutomaton([(0,1,0), (0,5,1), (1,2,1), (1,6,0),\n            ....:                   (2,0,0), (2,2,1), (3,2,0), (3,6,1),\n            ....:                   (4,7,0), (4,5,1), (5,2,0), (5,6,1),\n            ....:                   (6,6,0), (6,4,1), (7,6,0), (7,2,1)],\n            ....:                   i=0, final_states=[2,6])\n            sage: b = DeterministicAutomaton([(0, 0, 0), (0, 2, 1), (1, 3, 0),\n            ....:                   (1, 0, 1), (2, 4, 0), (2, 1, 1),\n            ....:                   (3, 2, 0), (3, 3, 1), (4, 0, 0),\n            ....:                   (4, 3, 1)], i=2, final_states=[0, 3])\n            sage: a.minimize() == b\n            True\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.minimize(True)\n            transition i[0][0] = [ ]\n            transition i[0][1] = [ ]\n            transition i[1][0] = [ 0 ]\n            transition i[1][1] = [ ]\n            transition i[2][0] = [ ]\n            transition i[2][1] = [ ]\n            transition i[3][0] = [ ]\n            transition i[3][1] = [ 2 ]\n            transition i[4][0] = [ 1 2 3 4 ]\n            transition i[4][1] = [ 0 1 3 4 ]\n            partition = [ 0 1 2 3 4 ]\n            partitioni = [ 0 1 2 3 4 ]\n            Initial partition :\n            class 0 : 0 1 2 3\n            class 1 : 4\n            split 1 0...\n            new visited class : 0 (1 parent of 4)\n            re-visited c""lass : 0 (2 parent of 4)\n            re-visited class : 0 (3 parent of 4)\n            new visited class : 1 (4 parent of 4)\n            class 0 : 1 2 3 0\n            class 1 : 4\n            2 class encountered\n            class 0 : l = 0 3 4 = h\n            class 1 : l = 4 5 5 = h\n            split 1 1...\n            new visited class : 2 (0 parent of 4)\n            new visited class : 0 (1 parent of 4)\n            re-visited class : 0 (3 parent of 4)\n            new visited class : 1 (4 parent of 4)\n            class 0 : 1 3 2\n            class 1 : 4\n            class 2 : 0\n            3 class encountered\n            class 2 : l = 3 4 4 = h\n            class 0 : l = 0 2 3 = h\n            class 1 : l = 4 5 5 = h\n            split 3 0...\n            class 0 : 1 3\n            class 1 : 4\n            class 2 : 0\n            class 3 : 2\n            0 class encountered\n            split 3 1...\n            class 0 : 1 3\n            class 1 : 4\n            class 2 : 0\n            class 3 : 2\n            0 class encountered\n            split 2 0...\n            class 0 : 1 3\n            class 1 : 4\n            class 2 : 0\n            class 3 : 2\n            0 class encountered\n            split 2 1...\n            class 0 : 1 3\n            class 1 : 4\n            class 2 : 0\n            class 3 : 2\n            0 class encountered\n            Final partition :\n            class 0 : 1 3\n            class 1 : 4\n            class 2 : 0\n            class 3 : 2\n            a.i = 0 class 2\n            removes the sink state  1...\n            DeterministicAutomaton with 3 states and an alphabet of 2 letters\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_111minimize(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_verb = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("minimize (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_verb,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)Py_False);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "minimize") < 0)) __PYX_ERR(0, 4240, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_verb = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("minimize", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 4240, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.minimize", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_110minimize(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_110minimize(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_verb) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = 0;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  bool __pyx_t_3;
  __Pyx_RefNannySetupContext("minimize", 0);

  /* "automata/cautomata.pyx":4383
 *         cdef DeterministicAutomaton r
 * 
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r.a[0] = Minimise(self.a[0], verb)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4383, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":4384
 * 
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         r.a[0] = Minimise(self.a[0], verb)
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 4384, __pyx_L1_error)

  /* "automata/cautomata.pyx":4385
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         r.a[0] = Minimise(self.a[0], verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.A = self.A
 */
  __pyx_t_3 = __Pyx_PyInt_As_bool(__pyx_v_verb); if (unlikely((__pyx_t_3 == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4385, __pyx_L1_error)
  (__pyx_v_r->a[0]) = Minimise((__pyx_v_self->a[0]), __pyx_t_3);

  /* "automata/cautomata.pyx":4386
 *         sig_on()
 *         r.a[0] = Minimise(self.a[0], verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         return r
 */
  sig_off();

  /* "automata/cautomata.pyx":4387
 *         r.a[0] = Minimise(self.a[0], verb)
 *         sig_off()
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  __pyx_t_1 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_1);
  __Pyx_GIVEREF(__pyx_t_1);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":4388
 *         sig_off()
 *         r.A = self.A
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def adjacency_matrix(self, sparse=None):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4240
 *         return self.prune().minimize()
 * 
 *     def minimize(self, verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute the minimal automaton
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.minimize", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4390
 *         return r
 * 
 *     def adjacency_matrix(self, sparse=None):             # <<<<<<<<<<<<<<
 *         """
 *         Compute the adjacency matrix of the :class:`DeterministicAutomaton`
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_113adjacency_matrix(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_112adjacency_matrix[] = "\n        Compute the adjacency matrix of the :class:`DeterministicAutomaton`\n\n        INPUT:\n\n        - ``sparse`` -- indicate if the return matrix is sparse or not\n\n        OUTPUT:\n\n        Return the corresponding adjacency matrix\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.adjacency_matrix()\n            [0 1 0 0]\n            [0 0 0 0]\n            [0 0 0 1]\n            [0 0 0 0]\n\n            sage: a = dag.Word(['a','b','a','c'])\n            sage: a.adjacency_matrix()\n            [0 1 0 0 0]\n            [0 0 1 0 0]\n            [0 0 0 1 0]\n            [0 0 0 0 1]\n            [0 0 0 0 0]\n\n            sage: a = dag.AnyLetter(['a','b','c'])\n            sage: a.adjacency_matrix()\n            [0 3]\n            [0 0]\n\n            sage: a = dag.Random(500, ['a', 'b', 'c'])\n            sage: a.adjacency_matrix()\n            500 x 500 sparse matrix over Integer Ring (use the '.str()' method to see the entries)\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_113adjacency_matrix(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_sparse = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("adjacency_matrix (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_sparse,0};
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_sparse);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "adjacency_matrix") < 0)) __PYX_ERR(0, 4390, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_sparse = values[0];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("adjacency_matrix", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 4390, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.adjacency_matrix", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_112adjacency_matrix(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_sparse);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_112adjacency_matrix(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_sparse) {
  int __pyx_v_i;
  int __pyx_v_j;
  int __pyx_v_f;
  PyObject *__pyx_v_d = 0;
  PyObject *__pyx_v_matrix = NULL;
  PyObject *__pyx_v_IntegerRing = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  PyObject *__pyx_t_12 = NULL;
  __Pyx_RefNannySetupContext("adjacency_matrix", 0);
  __Pyx_INCREF(__pyx_v_sparse);

  /* "automata/cautomata.pyx":4432
 *         cdef dict d
 * 
 *         if sparse is None:             # <<<<<<<<<<<<<<
 *             if self.a.n <= 128:
 *                 sparse = False
 */
  __pyx_t_1 = (__pyx_v_sparse == Py_None);
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":4433
 * 
 *         if sparse is None:
 *             if self.a.n <= 128:             # <<<<<<<<<<<<<<
 *                 sparse = False
 *             else:
 */
    __pyx_t_2 = ((__pyx_v_self->a->n <= 0x80) != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":4434
 *         if sparse is None:
 *             if self.a.n <= 128:
 *                 sparse = False             # <<<<<<<<<<<<<<
 *             else:
 *                 sparse = True
 */
      __Pyx_INCREF(Py_False);
      __Pyx_DECREF_SET(__pyx_v_sparse, Py_False);

      /* "automata/cautomata.pyx":4433
 * 
 *         if sparse is None:
 *             if self.a.n <= 128:             # <<<<<<<<<<<<<<
 *                 sparse = False
 *             else:
 */
      goto __pyx_L4;
    }

    /* "automata/cautomata.pyx":4436
 *                 sparse = False
 *             else:
 *                 sparse = True             # <<<<<<<<<<<<<<
 * 
 *         d = {}
 */
    /*else*/ {
      __Pyx_INCREF(Py_True);
      __Pyx_DECREF_SET(__pyx_v_sparse, Py_True);
    }
    __pyx_L4:;

    /* "automata/cautomata.pyx":4432
 *         cdef dict d
 * 
 *         if sparse is None:             # <<<<<<<<<<<<<<
 *             if self.a.n <= 128:
 *                 sparse = False
 */
  }

  /* "automata/cautomata.pyx":4438
 *                 sparse = True
 * 
 *         d = {}             # <<<<<<<<<<<<<<
 *         for i in range(self.a.n):
 *             for j in range(self.a.na):
 */
  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4438, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_d = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":4439
 * 
 *         d = {}
 *         for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *             for j in range(self.a.na):
 *                 f = self.a.e[i].f[j]
 */
  __pyx_t_4 = __pyx_v_self->a->n;
  __pyx_t_5 = __pyx_t_4;
  for (__pyx_t_6 = 0; __pyx_t_6 < __pyx_t_5; __pyx_t_6+=1) {
    __pyx_v_i = __pyx_t_6;

    /* "automata/cautomata.pyx":4440
 *         d = {}
 *         for i in range(self.a.n):
 *             for j in range(self.a.na):             # <<<<<<<<<<<<<<
 *                 f = self.a.e[i].f[j]
 *                 if f != -1:
 */
    __pyx_t_7 = __pyx_v_self->a->na;
    __pyx_t_8 = __pyx_t_7;
    for (__pyx_t_9 = 0; __pyx_t_9 < __pyx_t_8; __pyx_t_9+=1) {
      __pyx_v_j = __pyx_t_9;

      /* "automata/cautomata.pyx":4441
 *         for i in range(self.a.n):
 *             for j in range(self.a.na):
 *                 f = self.a.e[i].f[j]             # <<<<<<<<<<<<<<
 *                 if f != -1:
 *                     if d.has_key((i, f)):
 */
      __pyx_v_f = ((__pyx_v_self->a->e[__pyx_v_i]).f[__pyx_v_j]);

      /* "automata/cautomata.pyx":4442
 *             for j in range(self.a.na):
 *                 f = self.a.e[i].f[j]
 *                 if f != -1:             # <<<<<<<<<<<<<<
 *                     if d.has_key((i, f)):
 *                         d[(i, f)] += 1
 */
      __pyx_t_2 = ((__pyx_v_f != -1L) != 0);
      if (__pyx_t_2) {

        /* "automata/cautomata.pyx":4443
 *                 f = self.a.e[i].f[j]
 *                 if f != -1:
 *                     if d.has_key((i, f)):             # <<<<<<<<<<<<<<
 *                         d[(i, f)] += 1
 *                     else:
 */
        __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4443, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_10 = __Pyx_PyInt_From_int(__pyx_v_f); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4443, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_11 = PyTuple_New(2); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4443, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_GIVEREF(__pyx_t_3);
        PyTuple_SET_ITEM(__pyx_t_11, 0, __pyx_t_3);
        __Pyx_GIVEREF(__pyx_t_10);
        PyTuple_SET_ITEM(__pyx_t_11, 1, __pyx_t_10);
        __pyx_t_3 = 0;
        __pyx_t_10 = 0;
        __pyx_t_2 = PyDict_Contains(__pyx_v_d, __pyx_t_11); if (unlikely(__pyx_t_2 == ((int)-1))) __PYX_ERR(0, 4443, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
        __pyx_t_1 = (__pyx_t_2 != 0);
        if (__pyx_t_1) {

          /* "automata/cautomata.pyx":4444
 *                 if f != -1:
 *                     if d.has_key((i, f)):
 *                         d[(i, f)] += 1             # <<<<<<<<<<<<<<
 *                     else:
 *                         d[(i, f)] = 1
 */
          __pyx_t_11 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4444, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __pyx_t_10 = __Pyx_PyInt_From_int(__pyx_v_f); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4444, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4444, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_GIVEREF(__pyx_t_11);
          PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_11);
          __Pyx_GIVEREF(__pyx_t_10);
          PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_10);
          __pyx_t_11 = 0;
          __pyx_t_10 = 0;
          __pyx_t_10 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_t_3); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4444, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __pyx_t_11 = __Pyx_PyInt_AddObjC(__pyx_t_10, __pyx_int_1, 1, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4444, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
          if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_t_3, __pyx_t_11) < 0)) __PYX_ERR(0, 4444, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

          /* "automata/cautomata.pyx":4443
 *                 f = self.a.e[i].f[j]
 *                 if f != -1:
 *                     if d.has_key((i, f)):             # <<<<<<<<<<<<<<
 *                         d[(i, f)] += 1
 *                     else:
 */
          goto __pyx_L10;
        }

        /* "automata/cautomata.pyx":4446
 *                         d[(i, f)] += 1
 *                     else:
 *                         d[(i, f)] = 1             # <<<<<<<<<<<<<<
 *         from sage.matrix.constructor import matrix
 *         from sage.rings.integer_ring import IntegerRing
 */
        /*else*/ {
          __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4446, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __pyx_t_11 = __Pyx_PyInt_From_int(__pyx_v_f); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4446, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __pyx_t_10 = PyTuple_New(2); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4446, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_GIVEREF(__pyx_t_3);
          PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_t_3);
          __Pyx_GIVEREF(__pyx_t_11);
          PyTuple_SET_ITEM(__pyx_t_10, 1, __pyx_t_11);
          __pyx_t_3 = 0;
          __pyx_t_11 = 0;
          if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_t_10, __pyx_int_1) < 0)) __PYX_ERR(0, 4446, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        }
        __pyx_L10:;

        /* "automata/cautomata.pyx":4442
 *             for j in range(self.a.na):
 *                 f = self.a.e[i].f[j]
 *                 if f != -1:             # <<<<<<<<<<<<<<
 *                     if d.has_key((i, f)):
 *                         d[(i, f)] += 1
 */
      }
    }
  }

  /* "automata/cautomata.pyx":4447
 *                     else:
 *                         d[(i, f)] = 1
 *         from sage.matrix.constructor import matrix             # <<<<<<<<<<<<<<
 *         from sage.rings.integer_ring import IntegerRing
 *         return matrix(IntegerRing(), self.a.n, self.a.n, d, sparse=sparse)
 */
  __pyx_t_10 = PyList_New(1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4447, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __Pyx_INCREF(__pyx_n_s_matrix);
  __Pyx_GIVEREF(__pyx_n_s_matrix);
  PyList_SET_ITEM(__pyx_t_10, 0, __pyx_n_s_matrix);
  __pyx_t_11 = __Pyx_Import(__pyx_n_s_sage_matrix_constructor, __pyx_t_10, -1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4447, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_11);
  __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
  __pyx_t_10 = __Pyx_ImportFrom(__pyx_t_11, __pyx_n_s_matrix); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4447, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __Pyx_INCREF(__pyx_t_10);
  __pyx_v_matrix = __pyx_t_10;
  __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
  __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;

  /* "automata/cautomata.pyx":4448
 *                         d[(i, f)] = 1
 *         from sage.matrix.constructor import matrix
 *         from sage.rings.integer_ring import IntegerRing             # <<<<<<<<<<<<<<
 *         return matrix(IntegerRing(), self.a.n, self.a.n, d, sparse=sparse)
 * 
 */
  __pyx_t_11 = PyList_New(1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4448, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_11);
  __Pyx_INCREF(__pyx_n_s_IntegerRing);
  __Pyx_GIVEREF(__pyx_n_s_IntegerRing);
  PyList_SET_ITEM(__pyx_t_11, 0, __pyx_n_s_IntegerRing);
  __pyx_t_10 = __Pyx_Import(__pyx_n_s_sage_rings_integer_ring, __pyx_t_11, -1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4448, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
  __pyx_t_11 = __Pyx_ImportFrom(__pyx_t_10, __pyx_n_s_IntegerRing); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4448, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_11);
  __Pyx_INCREF(__pyx_t_11);
  __pyx_v_IntegerRing = __pyx_t_11;
  __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
  __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

  /* "automata/cautomata.pyx":4449
 *         from sage.matrix.constructor import matrix
 *         from sage.rings.integer_ring import IntegerRing
 *         return matrix(IntegerRing(), self.a.n, self.a.n, d, sparse=sparse)             # <<<<<<<<<<<<<<
 * 
 *     def delete_state(self, int i):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_IntegerRing);
  __pyx_t_11 = __pyx_v_IntegerRing; __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_11);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_11, function);
    }
  }
  __pyx_t_10 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_11, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_10);
  __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
  __pyx_t_11 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_11);
  __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_12 = PyTuple_New(4); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 4449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_12);
  __Pyx_GIVEREF(__pyx_t_10);
  PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_t_10);
  __Pyx_GIVEREF(__pyx_t_11);
  PyTuple_SET_ITEM(__pyx_t_12, 1, __pyx_t_11);
  __Pyx_GIVEREF(__pyx_t_3);
  PyTuple_SET_ITEM(__pyx_t_12, 2, __pyx_t_3);
  __Pyx_INCREF(__pyx_v_d);
  __Pyx_GIVEREF(__pyx_v_d);
  PyTuple_SET_ITEM(__pyx_t_12, 3, __pyx_v_d);
  __pyx_t_10 = 0;
  __pyx_t_11 = 0;
  __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  if (PyDict_SetItem(__pyx_t_3, __pyx_n_s_sparse, __pyx_v_sparse) < 0) __PYX_ERR(0, 4449, __pyx_L1_error)
  __pyx_t_11 = __Pyx_PyObject_Call(__pyx_v_matrix, __pyx_t_12, __pyx_t_3); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4449, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_11);
  __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_11;
  __pyx_t_11 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4390
 *         return r
 * 
 *     def adjacency_matrix(self, sparse=None):             # <<<<<<<<<<<<<<
 *         """
 *         Compute the adjacency matrix of the :class:`DeterministicAutomaton`
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.adjacency_matrix", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF(__pyx_v_matrix);
  __Pyx_XDECREF(__pyx_v_IntegerRing);
  __Pyx_XDECREF(__pyx_v_sparse);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4451
 *         return matrix(IntegerRing(), self.a.n, self.a.n, d, sparse=sparse)
 * 
 *     def delete_state(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Gives a copy of the :class:`DeterministicAutomaton` but
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_115delete_state(PyObject *__pyx_v_self, PyObject *__pyx_arg_i); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_114delete_state[] = "\n        Gives a copy of the :class:`DeterministicAutomaton` but\n        without the state ``i``.\n\n        INPUT:\n\n        - ``i``  - int - the state to remove\n\n        OUTPUT:\n\n        :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.delete_state(2)\n            DeterministicAutomaton with 3 states and an alphabet of 2 letters\n            sage: a.delete_state(2).delete_state(1)\n            DeterministicAutomaton with 2 states and an alphabet of 2 letters\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([('a', 'a', 0), ('a', 'b', 1), ('b', 'a', 0), ('b', 'c', 1), ('c', 'a', 0)], i='a')\n            sage: a = a.delete_state(a.states.index('b'))\n            sage: b = DeterministicAutomaton([('a', 'a', 0), ('c', 'a', 0)], A=[0, 1], i='a')\n            sage: a == b\n            True\n\n            sage: a = dag.AnyWord(['a','b'])\n            sage: a.delete_state(1)\n            Traceback (most recent call last):\n            ...\n            ValueError: 1 is not a state (should be between 0 and 0)\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_115delete_state(PyObject *__pyx_v_self, PyObject *__pyx_arg_i) {
  int __pyx_v_i;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("delete_state (wrapper)", 0);
  assert(__pyx_arg_i); {
    __pyx_v_i = __Pyx_PyInt_As_int(__pyx_arg_i); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 4451, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.delete_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_114delete_state(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((int)__pyx_v_i));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_114delete_state(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = 0;
  PyObject *__pyx_v_j = NULL;
  PyObject *__pyx_v_s = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  Py_ssize_t __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("delete_state", 0);

  /* "automata/cautomata.pyx":4488
 *         """
 *         cdef DeterministicAutomaton r
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("%s is not a state (should be between 0 and %s)"%(i, self.a.n-1))
 *         r = DeterministicAutomaton(None)
 */
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":4489
 *         cdef DeterministicAutomaton r
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("%s is not a state (should be between 0 and %s)"%(i, self.a.n-1))             # <<<<<<<<<<<<<<
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4489, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyInt_From_long((__pyx_v_self->a->n - 1)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4489, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4489, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_s_is_not_a_state_should_be_betw, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4489, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4489, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_5, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __PYX_ERR(0, 4489, __pyx_L1_error)

    /* "automata/cautomata.pyx":4488
 *         """
 *         cdef DeterministicAutomaton r
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("%s is not a state (should be between 0 and %s)"%(i, self.a.n-1))
 *         r = DeterministicAutomaton(None)
 */
  }

  /* "automata/cautomata.pyx":4490
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("%s is not a state (should be between 0 and %s)"%(i, self.a.n-1))
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r.a[0] = DeleteVertex(self.a[0], i)
 */
  __pyx_t_5 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4490, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_5);
  __pyx_t_5 = 0;

  /* "automata/cautomata.pyx":4491
 *             raise ValueError("%s is not a state (should be between 0 and %s)"%(i, self.a.n-1))
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         r.a[0] = DeleteVertex(self.a[0], i)
 *         sig_off()
 */
  __pyx_t_6 = sig_on(); if (unlikely(__pyx_t_6 == ((int)0))) __PYX_ERR(0, 4491, __pyx_L1_error)

  /* "automata/cautomata.pyx":4492
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         r.a[0] = DeleteVertex(self.a[0], i)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.A = self.A
 */
  (__pyx_v_r->a[0]) = DeleteVertex((__pyx_v_self->a[0]), __pyx_v_i);

  /* "automata/cautomata.pyx":4493
 *         sig_on()
 *         r.a[0] = DeleteVertex(self.a[0], i)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.A = self.A
 *         if self.S is not None:
 */
  sig_off();

  /* "automata/cautomata.pyx":4494
 *         r.a[0] = DeleteVertex(self.a[0], i)
 *         sig_off()
 *         r.A = self.A             # <<<<<<<<<<<<<<
 *         if self.S is not None:
 *             r.S = [s for j,s in enumerate(self.S) if j != i]
 */
  __pyx_t_5 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_5);
  __Pyx_GIVEREF(__pyx_t_5);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_5);
  __pyx_t_5 = 0;

  /* "automata/cautomata.pyx":4495
 *         sig_off()
 *         r.A = self.A
 *         if self.S is not None:             # <<<<<<<<<<<<<<
 *             r.S = [s for j,s in enumerate(self.S) if j != i]
 *         return r
 */
  __pyx_t_1 = (__pyx_v_self->S != ((PyObject*)Py_None));
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":4496
 *         r.A = self.A
 *         if self.S is not None:
 *             r.S = [s for j,s in enumerate(self.S) if j != i]             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4496, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_int_0);
    __pyx_t_4 = __pyx_int_0;
    __pyx_t_3 = __pyx_v_self->S; __Pyx_INCREF(__pyx_t_3); __pyx_t_7 = 0;
    for (;;) {
      if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_3)) break;
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_8 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_7); __Pyx_INCREF(__pyx_t_8); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 4496, __pyx_L1_error)
      #else
      __pyx_t_8 = PySequence_ITEM(__pyx_t_3, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 4496, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      #endif
      __Pyx_XDECREF_SET(__pyx_v_s, __pyx_t_8);
      __pyx_t_8 = 0;
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_XDECREF_SET(__pyx_v_j, __pyx_t_4);
      __pyx_t_8 = __Pyx_PyInt_AddObjC(__pyx_t_4, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 4496, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4);
      __pyx_t_4 = __pyx_t_8;
      __pyx_t_8 = 0;
      __pyx_t_8 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 4496, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = PyObject_RichCompare(__pyx_v_j, __pyx_t_8, Py_NE); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 4496, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 4496, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      if (__pyx_t_2) {
        if (unlikely(__Pyx_ListComp_Append(__pyx_t_5, (PyObject*)__pyx_v_s))) __PYX_ERR(0, 4496, __pyx_L1_error)
      }
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GIVEREF(__pyx_t_5);
    __Pyx_GOTREF(__pyx_v_r->S);
    __Pyx_DECREF(__pyx_v_r->S);
    __pyx_v_r->S = ((PyObject*)__pyx_t_5);
    __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":4495
 *         sig_off()
 *         r.A = self.A
 *         if self.S is not None:             # <<<<<<<<<<<<<<
 *             r.S = [s for j,s in enumerate(self.S) if j != i]
 *         return r
 */
  }

  /* "automata/cautomata.pyx":4497
 *         if self.S is not None:
 *             r.S = [s for j,s in enumerate(self.S) if j != i]
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def delete_state_in_place(self, int i):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4451
 *         return matrix(IntegerRing(), self.a.n, self.a.n, d, sparse=sparse)
 * 
 *     def delete_state(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Gives a copy of the :class:`DeterministicAutomaton` but
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.delete_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_j);
  __Pyx_XDECREF(__pyx_v_s);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4499
 *         return r
 * 
 *     def delete_state_in_place(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Delete vertex ``i`` in-place.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_117delete_state_in_place(PyObject *__pyx_v_self, PyObject *__pyx_arg_i); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_116delete_state_in_place[] = "\n        Delete vertex ``i`` in-place.\n\n        INPUT:\n\n        - ``i``  -- int number of vertex to remove\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.delete_state_in_place(2)\n            sage: a\n            DeterministicAutomaton with 3 states and an alphabet of 2 letters\n            sage: a.delete_state_in_place(1)\n            sage: a\n            DeterministicAutomaton with 2 states and an alphabet of 2 letters\n\n        TESTS::\n\n            sage: a = dag.AnyWord(['a','b'])\n            sage: a.delete_state_in_place(1)\n            Traceback (most recent call last):\n            ...\n            ValueError: 1 is not a state (should be between 0 and 0)\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_117delete_state_in_place(PyObject *__pyx_v_self, PyObject *__pyx_arg_i) {
  int __pyx_v_i;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("delete_state_in_place (wrapper)", 0);
  assert(__pyx_arg_i); {
    __pyx_v_i = __Pyx_PyInt_As_int(__pyx_arg_i); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 4499, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.delete_state_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_116delete_state_in_place(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((int)__pyx_v_i));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_116delete_state_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i) {
  PyObject *__pyx_v_j = NULL;
  PyObject *__pyx_v_s = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  Py_ssize_t __pyx_t_7;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  __Pyx_RefNannySetupContext("delete_state_in_place", 0);

  /* "automata/cautomata.pyx":4526
 * 
 *         """
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("%s is not a state (should be between 0 and %s)"%(i, self.a.n-1))
 *         sig_on()
 */
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":4527
 *         """
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("%s is not a state (should be between 0 and %s)"%(i, self.a.n-1))             # <<<<<<<<<<<<<<
 *         sig_on()
 *         DeleteVertexOP(self.a, i)
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4527, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyInt_From_long((__pyx_v_self->a->n - 1)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4527, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_5 = PyTuple_New(2); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4527, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_GIVEREF(__pyx_t_3);
    PyTuple_SET_ITEM(__pyx_t_5, 0, __pyx_t_3);
    __Pyx_GIVEREF(__pyx_t_4);
    PyTuple_SET_ITEM(__pyx_t_5, 1, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_s_is_not_a_state_should_be_betw, __pyx_t_5); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4527, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4527, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_5, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __PYX_ERR(0, 4527, __pyx_L1_error)

    /* "automata/cautomata.pyx":4526
 * 
 *         """
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("%s is not a state (should be between 0 and %s)"%(i, self.a.n-1))
 *         sig_on()
 */
  }

  /* "automata/cautomata.pyx":4528
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("%s is not a state (should be between 0 and %s)"%(i, self.a.n-1))
 *         sig_on()             # <<<<<<<<<<<<<<
 *         DeleteVertexOP(self.a, i)
 *         sig_off()
 */
  __pyx_t_6 = sig_on(); if (unlikely(__pyx_t_6 == ((int)0))) __PYX_ERR(0, 4528, __pyx_L1_error)

  /* "automata/cautomata.pyx":4529
 *             raise ValueError("%s is not a state (should be between 0 and %s)"%(i, self.a.n-1))
 *         sig_on()
 *         DeleteVertexOP(self.a, i)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if self.S is not None:
 */
  DeleteVertexOP(__pyx_v_self->a, __pyx_v_i);

  /* "automata/cautomata.pyx":4530
 *         sig_on()
 *         DeleteVertexOP(self.a, i)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if self.S is not None:
 *             self.S = [s for j,s in enumerate(self.S) if j != i]
 */
  sig_off();

  /* "automata/cautomata.pyx":4531
 *         DeleteVertexOP(self.a, i)
 *         sig_off()
 *         if self.S is not None:             # <<<<<<<<<<<<<<
 *             self.S = [s for j,s in enumerate(self.S) if j != i]
 * 
 */
  __pyx_t_1 = (__pyx_v_self->S != ((PyObject*)Py_None));
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":4532
 *         sig_off()
 *         if self.S is not None:
 *             self.S = [s for j,s in enumerate(self.S) if j != i]             # <<<<<<<<<<<<<<
 * 
 *     def spectral_radius(self, bool approx=True, bool couple=False, bool only_non_trivial=False, bool verb=False):
 */
    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4532, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_INCREF(__pyx_int_0);
    __pyx_t_4 = __pyx_int_0;
    __pyx_t_3 = __pyx_v_self->S; __Pyx_INCREF(__pyx_t_3); __pyx_t_7 = 0;
    for (;;) {
      if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_3)) break;
      #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
      __pyx_t_8 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_7); __Pyx_INCREF(__pyx_t_8); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 4532, __pyx_L1_error)
      #else
      __pyx_t_8 = PySequence_ITEM(__pyx_t_3, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 4532, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      #endif
      __Pyx_XDECREF_SET(__pyx_v_s, __pyx_t_8);
      __pyx_t_8 = 0;
      __Pyx_INCREF(__pyx_t_4);
      __Pyx_XDECREF_SET(__pyx_v_j, __pyx_t_4);
      __pyx_t_8 = __Pyx_PyInt_AddObjC(__pyx_t_4, __pyx_int_1, 1, 0); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 4532, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __Pyx_DECREF(__pyx_t_4);
      __pyx_t_4 = __pyx_t_8;
      __pyx_t_8 = 0;
      __pyx_t_8 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 4532, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_8);
      __pyx_t_9 = PyObject_RichCompare(__pyx_v_j, __pyx_t_8, Py_NE); __Pyx_XGOTREF(__pyx_t_9); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 4532, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_9); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 4532, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
      if (__pyx_t_2) {
        if (unlikely(__Pyx_ListComp_Append(__pyx_t_5, (PyObject*)__pyx_v_s))) __PYX_ERR(0, 4532, __pyx_L1_error)
      }
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_GIVEREF(__pyx_t_5);
    __Pyx_GOTREF(__pyx_v_self->S);
    __Pyx_DECREF(__pyx_v_self->S);
    __pyx_v_self->S = ((PyObject*)__pyx_t_5);
    __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":4531
 *         DeleteVertexOP(self.a, i)
 *         sig_off()
 *         if self.S is not None:             # <<<<<<<<<<<<<<
 *             self.S = [s for j,s in enumerate(self.S) if j != i]
 * 
 */
  }

  /* "automata/cautomata.pyx":4499
 *         return r
 * 
 *     def delete_state_in_place(self, int i):             # <<<<<<<<<<<<<<
 *         """
 *         Delete vertex ``i`` in-place.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.delete_state_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_j);
  __Pyx_XDECREF(__pyx_v_s);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4534
 *             self.S = [s for j,s in enumerate(self.S) if j != i]
 * 
 *     def spectral_radius(self, bool approx=True, bool couple=False, bool only_non_trivial=False, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Return the spectral radius of the underlying graph.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_119spectral_radius(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_118spectral_radius[] = "\n        Return the spectral radius of the underlying graph.\n\n        INPUT:\n\n        - ``approx`` - boolean (default: ``True``) If True gives an approximation,\n          otherwise gives the exact value as an algebraic number. \n\n        - ``only_non_trivial`` - boolean (default: ``False``) - if True,\n          don't take into account strongly connected components of\n          cardinality one.\n\n        - ``couple``- boolean (default: ``False``) - return a interval\n        containing the spectral radius (only when ``approx`` is ``True``)\n\n        - ``verb`` - boolean (default: ``False``) - set to ``True`` to activate\n          the verbose mode\n\n        OUTPUT:\n\n        A positive real algebraic number if approx is False,\n        and an float number otherwise.\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.spectral_radius()\n            0.0000000000...\n            \n            sage: a = DeterministicAutomaton([(10,10,'a'),(10,20,'b'),(20,10,'a')], i=10)\n            sage: a.spectral_radius()\n            1.61803398...\n            \n            sage: a = DeterministicAutomaton([(10,10,'a'),(10,20,'b'),(20,10,'a')], i=10)\n            sage: a.spectral_radius(couple=True)\n            (1.61803398..., 1.61803398...)\n            \n            sage: a = DeterministicAutomaton([(10,10,'a'),(10,20,'b'),(20,10,'a')], i=10)\n            sage: a.spectral_radius(approx=False).minpoly()\n            x^2 - x - 1\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_119spectral_radius(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  bool __pyx_v_approx;
  bool __pyx_v_couple;
  bool __pyx_v_only_non_trivial;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("spectral_radius (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_approx,&__pyx_n_s_couple,&__pyx_n_s_only_non_trivial,&__pyx_n_s_verb,0};
    PyObject* values[4] = {0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_approx);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_couple);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_only_non_trivial);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "spectral_radius") < 0)) __PYX_ERR(0, 4534, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_approx = __Pyx_PyInt_As_bool(values[0]); if (unlikely((__pyx_v_approx == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4534, __pyx_L3_error)
    } else {
      __pyx_v_approx = ((bool)1);
    }
    if (values[1]) {
      __pyx_v_couple = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_couple == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4534, __pyx_L3_error)
    } else {
      __pyx_v_couple = ((bool)0);
    }
    if (values[2]) {
      __pyx_v_only_non_trivial = __Pyx_PyInt_As_bool(values[2]); if (unlikely((__pyx_v_only_non_trivial == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4534, __pyx_L3_error)
    } else {
      __pyx_v_only_non_trivial = ((bool)0);
    }
    if (values[3]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[3]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4534, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("spectral_radius", 0, 0, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 4534, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.spectral_radius", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_118spectral_radius(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_approx, __pyx_v_couple, __pyx_v_only_non_trivial, __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4605
 *                         r = max(b.adjacency_matrix().charpoly().real_roots())
 *                         sp = (r,r)
 *                     spm = max([sp, spm], key=lambda x:x[0])             # <<<<<<<<<<<<<<
 *                     if verb:
 *                         print("spm=%s" % spm)
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_15spectral_radius_lambda(PyObject *__pyx_self, PyObject *__pyx_v_x); /*proto*/
static PyMethodDef __pyx_mdef_8automata_9cautomata_22DeterministicAutomaton_15spectral_radius_lambda = {"lambda", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_15spectral_radius_lambda, METH_O, 0};
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_15spectral_radius_lambda(PyObject *__pyx_self, PyObject *__pyx_v_x) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("lambda (wrapper)", 0);
  __pyx_r = __pyx_lambda_funcdef_lambda(__pyx_self, ((PyObject *)__pyx_v_x));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_lambda_funcdef_lambda(CYTHON_UNUSED PyObject *__pyx_self, PyObject *__pyx_v_x) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("lambda", 0);
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_x, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4605, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.spectral_radius.lambda", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4534
 *             self.S = [s for j,s in enumerate(self.S) if j != i]
 * 
 *     def spectral_radius(self, bool approx=True, bool couple=False, bool only_non_trivial=False, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Return the spectral radius of the underlying graph.
 */

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_118spectral_radius(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, bool __pyx_v_approx, bool __pyx_v_couple, bool __pyx_v_only_non_trivial, bool __pyx_v_verb) {
  PyObject *__pyx_v_a = NULL;
  PyObject *__pyx_v_l = NULL;
  PyObject *__pyx_v_r = NULL;
  PyObject *__pyx_v_spm = NULL;
  PyObject *__pyx_v_c = NULL;
  PyObject *__pyx_v_b = NULL;
  PyObject *__pyx_v_g = NULL;
  PyObject *__pyx_v_sp = NULL;
  PyObject *__pyx_v_m = NULL;
  PyObject *__pyx_v_cp = NULL;
  PyObject *__pyx_v_fs = NULL;
  PyObject *__pyx_v_f = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_real_part = NULL;
  PyObject *__pyx_v_AlgebraicRealField = NULL;
  PyObject *__pyx_v_ro = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  Py_ssize_t __pyx_t_5;
  PyObject *(*__pyx_t_6)(PyObject *);
  int __pyx_t_7;
  Py_ssize_t __pyx_t_8;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  PyObject *(*__pyx_t_12)(PyObject *);
  PyObject *__pyx_t_13 = NULL;
  PyObject *__pyx_t_14 = NULL;
  Py_ssize_t __pyx_t_15;
  PyObject *(*__pyx_t_16)(PyObject *);
  __Pyx_RefNannySetupContext("spectral_radius", 0);

  /* "automata/cautomata.pyx":4577
 * 
 *         """
 *         a = self.minimize()             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("minimal Automata : %s" % a)
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_minimize); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4577, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4577, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_a = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":4578
 *         """
 *         a = self.minimize()
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("minimal Automata : %s" % a)
 *         l = a.strongly_connected_components()
 */
  __pyx_t_4 = (__pyx_v_verb != 0);
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":4579
 *         a = self.minimize()
 *         if verb:
 *             print("minimal Automata : %s" % a)             # <<<<<<<<<<<<<<
 *         l = a.strongly_connected_components()
 *         if verb:
 */
    __pyx_t_1 = __Pyx_PyString_FormatSafe(__pyx_kp_s_minimal_Automata_s, __pyx_v_a); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4579, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4579, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":4578
 *         """
 *         a = self.minimize()
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("minimal Automata : %s" % a)
 *         l = a.strongly_connected_components()
 */
  }

  /* "automata/cautomata.pyx":4580
 *         if verb:
 *             print("minimal Automata : %s" % a)
 *         l = a.strongly_connected_components()             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("%s component strongly connex." % len(l))
 */
  __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_strongly_connected_components); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4580, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_1);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_1, function);
    }
  }
  __pyx_t_2 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4580, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_l = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":4581
 *             print("minimal Automata : %s" % a)
 *         l = a.strongly_connected_components()
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("%s component strongly connex." % len(l))
 *         r = 0  # valeur propre maximale trouve
 */
  __pyx_t_4 = (__pyx_v_verb != 0);
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":4582
 *         l = a.strongly_connected_components()
 *         if verb:
 *             print("%s component strongly connex." % len(l))             # <<<<<<<<<<<<<<
 *         r = 0  # valeur propre maximale trouve
 *         spm = (0,0) #encadrement de l'approximation maximale trouve
 */
    __pyx_t_5 = PyObject_Length(__pyx_v_l); if (unlikely(__pyx_t_5 == ((Py_ssize_t)-1))) __PYX_ERR(0, 4582, __pyx_L1_error)
    __pyx_t_2 = PyInt_FromSsize_t(__pyx_t_5); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4582, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_1 = __Pyx_PyString_Format(__pyx_kp_s_s_component_strongly_connex, __pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4582, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4582, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":4581
 *             print("minimal Automata : %s" % a)
 *         l = a.strongly_connected_components()
 *         if verb:             # <<<<<<<<<<<<<<
 *             print("%s component strongly connex." % len(l))
 *         r = 0  # valeur propre maximale trouve
 */
  }

  /* "automata/cautomata.pyx":4583
 *         if verb:
 *             print("%s component strongly connex." % len(l))
 *         r = 0  # valeur propre maximale trouve             # <<<<<<<<<<<<<<
 *         spm = (0,0) #encadrement de l'approximation maximale trouve
 *         for c in l:
 */
  __Pyx_INCREF(__pyx_int_0);
  __pyx_v_r = __pyx_int_0;

  /* "automata/cautomata.pyx":4584
 *             print("%s component strongly connex." % len(l))
 *         r = 0  # valeur propre maximale trouve
 *         spm = (0,0) #encadrement de l'approximation maximale trouve             # <<<<<<<<<<<<<<
 *         for c in l:
 *             if not only_non_trivial or len(c) > 1:
 */
  __Pyx_INCREF(__pyx_tuple__64);
  __pyx_v_spm = __pyx_tuple__64;

  /* "automata/cautomata.pyx":4585
 *         r = 0  # valeur propre maximale trouve
 *         spm = (0,0) #encadrement de l'approximation maximale trouve
 *         for c in l:             # <<<<<<<<<<<<<<
 *             if not only_non_trivial or len(c) > 1:
 *                 if verb:
 */
  if (likely(PyList_CheckExact(__pyx_v_l)) || PyTuple_CheckExact(__pyx_v_l)) {
    __pyx_t_2 = __pyx_v_l; __Pyx_INCREF(__pyx_t_2); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
  } else {
    __pyx_t_5 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_v_l); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4585, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_6 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 4585, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_6)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_1); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 4585, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4585, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_1); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 4585, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4585, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_6(__pyx_t_2);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 4585, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    __Pyx_XDECREF_SET(__pyx_v_c, __pyx_t_1);
    __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":4586
 *         spm = (0,0) #encadrement de l'approximation maximale trouve
 *         for c in l:
 *             if not only_non_trivial or len(c) > 1:             # <<<<<<<<<<<<<<
 *                 if verb:
 *                     print("component with %s states..." % len(c))
 */
    __pyx_t_7 = ((!(__pyx_v_only_non_trivial != 0)) != 0);
    if (!__pyx_t_7) {
    } else {
      __pyx_t_4 = __pyx_t_7;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_t_8 = PyObject_Length(__pyx_v_c); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1))) __PYX_ERR(0, 4586, __pyx_L1_error)
    __pyx_t_7 = ((__pyx_t_8 > 1) != 0);
    __pyx_t_4 = __pyx_t_7;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_4) {

      /* "automata/cautomata.pyx":4587
 *         for c in l:
 *             if not only_non_trivial or len(c) > 1:
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("component with %s states..." % len(c))
 *                 b = a.sub_automaton(c)
 */
      __pyx_t_4 = (__pyx_v_verb != 0);
      if (__pyx_t_4) {

        /* "automata/cautomata.pyx":4588
 *             if not only_non_trivial or len(c) > 1:
 *                 if verb:
 *                     print("component with %s states..." % len(c))             # <<<<<<<<<<<<<<
 *                 b = a.sub_automaton(c)
 *                 if approx:
 */
        __pyx_t_8 = PyObject_Length(__pyx_v_c); if (unlikely(__pyx_t_8 == ((Py_ssize_t)-1))) __PYX_ERR(0, 4588, __pyx_L1_error)
        __pyx_t_1 = PyInt_FromSsize_t(__pyx_t_8); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4588, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_3 = __Pyx_PyString_Format(__pyx_kp_s_component_with_s_states, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4588, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4588, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

        /* "automata/cautomata.pyx":4587
 *         for c in l:
 *             if not only_non_trivial or len(c) > 1:
 *                 if verb:             # <<<<<<<<<<<<<<
 *                     print("component with %s states..." % len(c))
 *                 b = a.sub_automaton(c)
 */
      }

      /* "automata/cautomata.pyx":4589
 *                 if verb:
 *                     print("component with %s states..." % len(c))
 *                 b = a.sub_automaton(c)             # <<<<<<<<<<<<<<
 *                 if approx:
 *                     g = b.get_digraph()
 */
      __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_sub_automaton); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4589, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_9 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
        __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_3);
        if (likely(__pyx_t_9)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_9);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_3, function);
        }
      }
      __pyx_t_1 = (__pyx_t_9) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_9, __pyx_v_c) : __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_c);
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4589, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_XDECREF_SET(__pyx_v_b, __pyx_t_1);
      __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":4590
 *                     print("component with %s states..." % len(c))
 *                 b = a.sub_automaton(c)
 *                 if approx:             # <<<<<<<<<<<<<<
 *                     g = b.get_digraph()
 *                     if verb:
 */
      __pyx_t_4 = (__pyx_v_approx != 0);
      if (__pyx_t_4) {

        /* "automata/cautomata.pyx":4591
 *                 b = a.sub_automaton(c)
 *                 if approx:
 *                     g = b.get_digraph()             # <<<<<<<<<<<<<<
 *                     if verb:
 *                         print("g=%s" % g)
 */
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_b, __pyx_n_s_get_digraph); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4591, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_9 = NULL;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_3);
          if (likely(__pyx_t_9)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
            __Pyx_INCREF(__pyx_t_9);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_3, function);
          }
        }
        __pyx_t_1 = (__pyx_t_9) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_9) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
        __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4591, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_XDECREF_SET(__pyx_v_g, __pyx_t_1);
        __pyx_t_1 = 0;

        /* "automata/cautomata.pyx":4592
 *                 if approx:
 *                     g = b.get_digraph()
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("g=%s" % g)
 *                     if g.is_aperiodic():
 */
        __pyx_t_4 = (__pyx_v_verb != 0);
        if (__pyx_t_4) {

          /* "automata/cautomata.pyx":4593
 *                     g = b.get_digraph()
 *                     if verb:
 *                         print("g=%s" % g)             # <<<<<<<<<<<<<<
 *                     if g.is_aperiodic():
 *                         if verb:
 */
          __pyx_t_1 = __Pyx_PyString_FormatSafe(__pyx_kp_s_g_s, __pyx_v_g); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4593, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4593, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

          /* "automata/cautomata.pyx":4592
 *                 if approx:
 *                     g = b.get_digraph()
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("g=%s" % g)
 *                     if g.is_aperiodic():
 */
        }

        /* "automata/cautomata.pyx":4594
 *                     if verb:
 *                         print("g=%s" % g)
 *                     if g.is_aperiodic():             # <<<<<<<<<<<<<<
 *                         if verb:
 *                             print("aperiodic")
 */
        __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_g, __pyx_n_s_is_aperiodic); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4594, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __pyx_t_9 = NULL;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
          __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_1);
          if (likely(__pyx_t_9)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
            __Pyx_INCREF(__pyx_t_9);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_1, function);
          }
        }
        __pyx_t_3 = (__pyx_t_9) ? __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_9) : __Pyx_PyObject_CallNoArg(__pyx_t_1);
        __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
        if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4594, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 4594, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        if (__pyx_t_4) {

          /* "automata/cautomata.pyx":4595
 *                         print("g=%s" % g)
 *                     if g.is_aperiodic():
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print("aperiodic")
 *                         sp = g.spectral_radius()
 */
          __pyx_t_4 = (__pyx_v_verb != 0);
          if (__pyx_t_4) {

            /* "automata/cautomata.pyx":4596
 *                     if g.is_aperiodic():
 *                         if verb:
 *                             print("aperiodic")             # <<<<<<<<<<<<<<
 *                         sp = g.spectral_radius()
 *                         if verb:
 */
            __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__65, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4596, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_3);
            __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

            /* "automata/cautomata.pyx":4595
 *                         print("g=%s" % g)
 *                     if g.is_aperiodic():
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print("aperiodic")
 *                         sp = g.spectral_radius()
 */
          }

          /* "automata/cautomata.pyx":4597
 *                         if verb:
 *                             print("aperiodic")
 *                         sp = g.spectral_radius()             # <<<<<<<<<<<<<<
 *                         if verb:
 *                             print("sp=%s" % sp)
 */
          __pyx_t_1 = __Pyx_PyObject_GetAttrStr(__pyx_v_g, __pyx_n_s_spectral_radius); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4597, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __pyx_t_9 = NULL;
          if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_1))) {
            __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_1);
            if (likely(__pyx_t_9)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_1);
              __Pyx_INCREF(__pyx_t_9);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_1, function);
            }
          }
          __pyx_t_3 = (__pyx_t_9) ? __Pyx_PyObject_CallOneArg(__pyx_t_1, __pyx_t_9) : __Pyx_PyObject_CallNoArg(__pyx_t_1);
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4597, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
          __Pyx_XDECREF_SET(__pyx_v_sp, __pyx_t_3);
          __pyx_t_3 = 0;

          /* "automata/cautomata.pyx":4598
 *                             print("aperiodic")
 *                         sp = g.spectral_radius()
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print("sp=%s" % sp)
 *                     else:
 */
          __pyx_t_4 = (__pyx_v_verb != 0);
          if (__pyx_t_4) {

            /* "automata/cautomata.pyx":4599
 *                         sp = g.spectral_radius()
 *                         if verb:
 *                             print("sp=%s" % sp)             # <<<<<<<<<<<<<<
 *                     else:
 *                         if verb:
 */
            __pyx_t_3 = __Pyx_PyString_FormatSafe(__pyx_kp_s_sp_s, __pyx_v_sp); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4599, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_3);
            __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4599, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_1);
            __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
            __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

            /* "automata/cautomata.pyx":4598
 *                             print("aperiodic")
 *                         sp = g.spectral_radius()
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print("sp=%s" % sp)
 *                     else:
 */
          }

          /* "automata/cautomata.pyx":4594
 *                     if verb:
 *                         print("g=%s" % g)
 *                     if g.is_aperiodic():             # <<<<<<<<<<<<<<
 *                         if verb:
 *                             print("aperiodic")
 */
          goto __pyx_L13;
        }

        /* "automata/cautomata.pyx":4601
 *                             print("sp=%s" % sp)
 *                     else:
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print("non aperiodic")
 *                         r = max(b.adjacency_matrix().charpoly().real_roots())
 */
        /*else*/ {
          __pyx_t_4 = (__pyx_v_verb != 0);
          if (__pyx_t_4) {

            /* "automata/cautomata.pyx":4602
 *                     else:
 *                         if verb:
 *                             print("non aperiodic")             # <<<<<<<<<<<<<<
 *                         r = max(b.adjacency_matrix().charpoly().real_roots())
 *                         sp = (r,r)
 */
            __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_print, __pyx_tuple__66, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4602, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_1);
            __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

            /* "automata/cautomata.pyx":4601
 *                             print("sp=%s" % sp)
 *                     else:
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print("non aperiodic")
 *                         r = max(b.adjacency_matrix().charpoly().real_roots())
 */
          }

          /* "automata/cautomata.pyx":4603
 *                         if verb:
 *                             print("non aperiodic")
 *                         r = max(b.adjacency_matrix().charpoly().real_roots())             # <<<<<<<<<<<<<<
 *                         sp = (r,r)
 *                     spm = max([sp, spm], key=lambda x:x[0])
 */
          __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_v_b, __pyx_n_s_adjacency_matrix); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4603, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __pyx_t_11 = NULL;
          if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_10))) {
            __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_10);
            if (likely(__pyx_t_11)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
              __Pyx_INCREF(__pyx_t_11);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_10, function);
            }
          }
          __pyx_t_9 = (__pyx_t_11) ? __Pyx_PyObject_CallOneArg(__pyx_t_10, __pyx_t_11) : __Pyx_PyObject_CallNoArg(__pyx_t_10);
          __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
          if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 4603, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
          __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_9, __pyx_n_s_charpoly); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4603, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
          __pyx_t_9 = NULL;
          if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_10))) {
            __pyx_t_9 = PyMethod_GET_SELF(__pyx_t_10);
            if (likely(__pyx_t_9)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
              __Pyx_INCREF(__pyx_t_9);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_10, function);
            }
          }
          __pyx_t_3 = (__pyx_t_9) ? __Pyx_PyObject_CallOneArg(__pyx_t_10, __pyx_t_9) : __Pyx_PyObject_CallNoArg(__pyx_t_10);
          __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
          if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4603, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
          __pyx_t_10 = __Pyx_PyObject_GetAttrStr(__pyx_t_3, __pyx_n_s_real_roots); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4603, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
          __pyx_t_3 = NULL;
          if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_10))) {
            __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_10);
            if (likely(__pyx_t_3)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_10);
              __Pyx_INCREF(__pyx_t_3);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_10, function);
            }
          }
          __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_10, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_10);
          __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
          if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4603, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
          __pyx_t_10 = __Pyx_PyObject_CallOneArg(__pyx_builtin_max, __pyx_t_1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4603, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
          __Pyx_DECREF_SET(__pyx_v_r, __pyx_t_10);
          __pyx_t_10 = 0;

          /* "automata/cautomata.pyx":4604
 *                             print("non aperiodic")
 *                         r = max(b.adjacency_matrix().charpoly().real_roots())
 *                         sp = (r,r)             # <<<<<<<<<<<<<<
 *                     spm = max([sp, spm], key=lambda x:x[0])
 *                     if verb:
 */
          __pyx_t_10 = PyTuple_New(2); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4604, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_INCREF(__pyx_v_r);
          __Pyx_GIVEREF(__pyx_v_r);
          PyTuple_SET_ITEM(__pyx_t_10, 0, __pyx_v_r);
          __Pyx_INCREF(__pyx_v_r);
          __Pyx_GIVEREF(__pyx_v_r);
          PyTuple_SET_ITEM(__pyx_t_10, 1, __pyx_v_r);
          __Pyx_XDECREF_SET(__pyx_v_sp, __pyx_t_10);
          __pyx_t_10 = 0;
        }
        __pyx_L13:;

        /* "automata/cautomata.pyx":4605
 *                         r = max(b.adjacency_matrix().charpoly().real_roots())
 *                         sp = (r,r)
 *                     spm = max([sp, spm], key=lambda x:x[0])             # <<<<<<<<<<<<<<
 *                     if verb:
 *                         print("spm=%s" % spm)
 */
        __pyx_t_10 = PyList_New(2); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4605, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_INCREF(__pyx_v_sp);
        __Pyx_GIVEREF(__pyx_v_sp);
        PyList_SET_ITEM(__pyx_t_10, 0, __pyx_v_sp);
        __Pyx_INCREF(__pyx_v_spm);
        __Pyx_GIVEREF(__pyx_v_spm);
        PyList_SET_ITEM(__pyx_t_10, 1, __pyx_v_spm);
        __pyx_t_1 = PyTuple_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4605, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_GIVEREF(__pyx_t_10);
        PyTuple_SET_ITEM(__pyx_t_1, 0, __pyx_t_10);
        __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4605, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_3 = __Pyx_CyFunction_NewEx(&__pyx_mdef_8automata_9cautomata_22DeterministicAutomaton_15spectral_radius_lambda, 0, __pyx_n_s_spectral_radius_locals_lambda, NULL, __pyx_n_s_automata_cautomata, __pyx_d, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4605, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        if (PyDict_SetItem(__pyx_t_10, __pyx_n_s_key, __pyx_t_3) < 0) __PYX_ERR(0, 4605, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_max, __pyx_t_1, __pyx_t_10); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4605, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_DECREF_SET(__pyx_v_spm, __pyx_t_3);
        __pyx_t_3 = 0;

        /* "automata/cautomata.pyx":4606
 *                         sp = (r,r)
 *                     spm = max([sp, spm], key=lambda x:x[0])
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("spm=%s" % spm)
 *                 else:
 */
        __pyx_t_4 = (__pyx_v_verb != 0);
        if (__pyx_t_4) {

          /* "automata/cautomata.pyx":4607
 *                     spm = max([sp, spm], key=lambda x:x[0])
 *                     if verb:
 *                         print("spm=%s" % spm)             # <<<<<<<<<<<<<<
 *                 else:
 *                     m = b.adjacency_matrix()
 */
          __pyx_t_3 = __Pyx_PyString_FormatSafe(__pyx_kp_s_spm_s, __pyx_v_spm); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4607, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __pyx_t_10 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_3); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4607, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

          /* "automata/cautomata.pyx":4606
 *                         sp = (r,r)
 *                     spm = max([sp, spm], key=lambda x:x[0])
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("spm=%s" % spm)
 *                 else:
 */
        }

        /* "automata/cautomata.pyx":4590
 *                     print("component with %s states..." % len(c))
 *                 b = a.sub_automaton(c)
 *                 if approx:             # <<<<<<<<<<<<<<
 *                     g = b.get_digraph()
 *                     if verb:
 */
        goto __pyx_L11;
      }

      /* "automata/cautomata.pyx":4609
 *                         print("spm=%s" % spm)
 *                 else:
 *                     m = b.adjacency_matrix()             # <<<<<<<<<<<<<<
 *                     cp = m.charpoly()
 *                     fs = cp.factor()
 */
      /*else*/ {
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_b, __pyx_n_s_adjacency_matrix); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4609, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_1 = NULL;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
          __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_3);
          if (likely(__pyx_t_1)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
            __Pyx_INCREF(__pyx_t_1);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_3, function);
          }
        }
        __pyx_t_10 = (__pyx_t_1) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_1) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
        if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4609, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_XDECREF_SET(__pyx_v_m, __pyx_t_10);
        __pyx_t_10 = 0;

        /* "automata/cautomata.pyx":4610
 *                 else:
 *                     m = b.adjacency_matrix()
 *                     cp = m.charpoly()             # <<<<<<<<<<<<<<
 *                     fs = cp.factor()
 *                     if verb:
 */
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_m, __pyx_n_s_charpoly); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4610, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_1 = NULL;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
          __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_3);
          if (likely(__pyx_t_1)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
            __Pyx_INCREF(__pyx_t_1);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_3, function);
          }
        }
        __pyx_t_10 = (__pyx_t_1) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_1) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
        if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4610, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_XDECREF_SET(__pyx_v_cp, __pyx_t_10);
        __pyx_t_10 = 0;

        /* "automata/cautomata.pyx":4611
 *                     m = b.adjacency_matrix()
 *                     cp = m.charpoly()
 *                     fs = cp.factor()             # <<<<<<<<<<<<<<
 *                     if verb:
 *                         print(fs)
 */
        __pyx_t_3 = __Pyx_PyObject_GetAttrStr(__pyx_v_cp, __pyx_n_s_factor); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4611, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __pyx_t_1 = NULL;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
          __pyx_t_1 = PyMethod_GET_SELF(__pyx_t_3);
          if (likely(__pyx_t_1)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
            __Pyx_INCREF(__pyx_t_1);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_3, function);
          }
        }
        __pyx_t_10 = (__pyx_t_1) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_1) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
        __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;
        if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4611, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
        __Pyx_XDECREF_SET(__pyx_v_fs, __pyx_t_10);
        __pyx_t_10 = 0;

        /* "automata/cautomata.pyx":4612
 *                     cp = m.charpoly()
 *                     fs = cp.factor()
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print(fs)
 *                     for f in fs:
 */
        __pyx_t_4 = (__pyx_v_verb != 0);
        if (__pyx_t_4) {

          /* "automata/cautomata.pyx":4613
 *                     fs = cp.factor()
 *                     if verb:
 *                         print(fs)             # <<<<<<<<<<<<<<
 *                     for f in fs:
 *                         if verb:
 */
          __pyx_t_10 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_fs); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4613, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;

          /* "automata/cautomata.pyx":4612
 *                     cp = m.charpoly()
 *                     fs = cp.factor()
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print(fs)
 *                     for f in fs:
 */
        }

        /* "automata/cautomata.pyx":4614
 *                     if verb:
 *                         print(fs)
 *                     for f in fs:             # <<<<<<<<<<<<<<
 *                         if verb:
 *                             print(f)
 */
        if (likely(PyList_CheckExact(__pyx_v_fs)) || PyTuple_CheckExact(__pyx_v_fs)) {
          __pyx_t_10 = __pyx_v_fs; __Pyx_INCREF(__pyx_t_10); __pyx_t_8 = 0;
          __pyx_t_12 = NULL;
        } else {
          __pyx_t_8 = -1; __pyx_t_10 = PyObject_GetIter(__pyx_v_fs); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 4614, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_10);
          __pyx_t_12 = Py_TYPE(__pyx_t_10)->tp_iternext; if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 4614, __pyx_L1_error)
        }
        for (;;) {
          if (likely(!__pyx_t_12)) {
            if (likely(PyList_CheckExact(__pyx_t_10))) {
              if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_10)) break;
              #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
              __pyx_t_3 = PyList_GET_ITEM(__pyx_t_10, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 4614, __pyx_L1_error)
              #else
              __pyx_t_3 = PySequence_ITEM(__pyx_t_10, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4614, __pyx_L1_error)
              __Pyx_GOTREF(__pyx_t_3);
              #endif
            } else {
              if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_10)) break;
              #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
              __pyx_t_3 = PyTuple_GET_ITEM(__pyx_t_10, __pyx_t_8); __Pyx_INCREF(__pyx_t_3); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 4614, __pyx_L1_error)
              #else
              __pyx_t_3 = PySequence_ITEM(__pyx_t_10, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4614, __pyx_L1_error)
              __Pyx_GOTREF(__pyx_t_3);
              #endif
            }
          } else {
            __pyx_t_3 = __pyx_t_12(__pyx_t_10);
            if (unlikely(!__pyx_t_3)) {
              PyObject* exc_type = PyErr_Occurred();
              if (exc_type) {
                if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
                else __PYX_ERR(0, 4614, __pyx_L1_error)
              }
              break;
            }
            __Pyx_GOTREF(__pyx_t_3);
          }
          __Pyx_XDECREF_SET(__pyx_v_f, __pyx_t_3);
          __pyx_t_3 = 0;

          /* "automata/cautomata.pyx":4615
 *                         print(fs)
 *                     for f in fs:
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print(f)
 *                         from sage.functions.other import real_part
 */
          __pyx_t_4 = (__pyx_v_verb != 0);
          if (__pyx_t_4) {

            /* "automata/cautomata.pyx":4616
 *                     for f in fs:
 *                         if verb:
 *                             print(f)             # <<<<<<<<<<<<<<
 *                         from sage.functions.other import real_part
 *                         from sage.rings.qqbar import AlgebraicRealField
 */
            __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_v_f); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4616, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_3);
            __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

            /* "automata/cautomata.pyx":4615
 *                         print(fs)
 *                     for f in fs:
 *                         if verb:             # <<<<<<<<<<<<<<
 *                             print(f)
 *                         from sage.functions.other import real_part
 */
          }

          /* "automata/cautomata.pyx":4617
 *                         if verb:
 *                             print(f)
 *                         from sage.functions.other import real_part             # <<<<<<<<<<<<<<
 *                         from sage.rings.qqbar import AlgebraicRealField
 *                         r = max([ro[0] for ro in f[0].roots(ring=AlgebraicRealField())] + [r])
 */
          __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4617, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_INCREF(__pyx_n_s_real_part);
          __Pyx_GIVEREF(__pyx_n_s_real_part);
          PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_real_part);
          __pyx_t_1 = __Pyx_Import(__pyx_n_s_sage_functions_other, __pyx_t_3, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4617, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
          __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_1, __pyx_n_s_real_part); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4617, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_INCREF(__pyx_t_3);
          __Pyx_XDECREF_SET(__pyx_v_real_part, __pyx_t_3);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

          /* "automata/cautomata.pyx":4618
 *                             print(f)
 *                         from sage.functions.other import real_part
 *                         from sage.rings.qqbar import AlgebraicRealField             # <<<<<<<<<<<<<<
 *                         r = max([ro[0] for ro in f[0].roots(ring=AlgebraicRealField())] + [r])
 *         if approx:
 */
          __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4618, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_INCREF(__pyx_n_s_AlgebraicRealField);
          __Pyx_GIVEREF(__pyx_n_s_AlgebraicRealField);
          PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_AlgebraicRealField);
          __pyx_t_3 = __Pyx_Import(__pyx_n_s_sage_rings_qqbar, __pyx_t_1, -1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4618, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
          __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_3, __pyx_n_s_AlgebraicRealField); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4618, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_INCREF(__pyx_t_1);
          __Pyx_XDECREF_SET(__pyx_v_AlgebraicRealField, __pyx_t_1);
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

          /* "automata/cautomata.pyx":4619
 *                         from sage.functions.other import real_part
 *                         from sage.rings.qqbar import AlgebraicRealField
 *                         r = max([ro[0] for ro in f[0].roots(ring=AlgebraicRealField())] + [r])             # <<<<<<<<<<<<<<
 *         if approx:
 *             if couple:
 */
          __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4619, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __pyx_t_1 = __Pyx_GetItemInt(__pyx_v_f, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4619, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __pyx_t_9 = __Pyx_PyObject_GetAttrStr(__pyx_t_1, __pyx_n_s_roots); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 4619, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_9);
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
          __pyx_t_1 = __Pyx_PyDict_NewPresized(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4619, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_INCREF(__pyx_v_AlgebraicRealField);
          __pyx_t_13 = __pyx_v_AlgebraicRealField; __pyx_t_14 = NULL;
          if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_13))) {
            __pyx_t_14 = PyMethod_GET_SELF(__pyx_t_13);
            if (likely(__pyx_t_14)) {
              PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_13);
              __Pyx_INCREF(__pyx_t_14);
              __Pyx_INCREF(function);
              __Pyx_DECREF_SET(__pyx_t_13, function);
            }
          }
          __pyx_t_11 = (__pyx_t_14) ? __Pyx_PyObject_CallOneArg(__pyx_t_13, __pyx_t_14) : __Pyx_PyObject_CallNoArg(__pyx_t_13);
          __Pyx_XDECREF(__pyx_t_14); __pyx_t_14 = 0;
          if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4619, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
          if (PyDict_SetItem(__pyx_t_1, __pyx_n_s_ring, __pyx_t_11) < 0) __PYX_ERR(0, 4619, __pyx_L1_error)
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __pyx_t_11 = __Pyx_PyObject_Call(__pyx_t_9, __pyx_empty_tuple, __pyx_t_1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4619, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
          if (likely(PyList_CheckExact(__pyx_t_11)) || PyTuple_CheckExact(__pyx_t_11)) {
            __pyx_t_1 = __pyx_t_11; __Pyx_INCREF(__pyx_t_1); __pyx_t_15 = 0;
            __pyx_t_16 = NULL;
          } else {
            __pyx_t_15 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_11); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4619, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_1);
            __pyx_t_16 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 4619, __pyx_L1_error)
          }
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          for (;;) {
            if (likely(!__pyx_t_16)) {
              if (likely(PyList_CheckExact(__pyx_t_1))) {
                if (__pyx_t_15 >= PyList_GET_SIZE(__pyx_t_1)) break;
                #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
                __pyx_t_11 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_15); __Pyx_INCREF(__pyx_t_11); __pyx_t_15++; if (unlikely(0 < 0)) __PYX_ERR(0, 4619, __pyx_L1_error)
                #else
                __pyx_t_11 = PySequence_ITEM(__pyx_t_1, __pyx_t_15); __pyx_t_15++; if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4619, __pyx_L1_error)
                __Pyx_GOTREF(__pyx_t_11);
                #endif
              } else {
                if (__pyx_t_15 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
                #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
                __pyx_t_11 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_15); __Pyx_INCREF(__pyx_t_11); __pyx_t_15++; if (unlikely(0 < 0)) __PYX_ERR(0, 4619, __pyx_L1_error)
                #else
                __pyx_t_11 = PySequence_ITEM(__pyx_t_1, __pyx_t_15); __pyx_t_15++; if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4619, __pyx_L1_error)
                __Pyx_GOTREF(__pyx_t_11);
                #endif
              }
            } else {
              __pyx_t_11 = __pyx_t_16(__pyx_t_1);
              if (unlikely(!__pyx_t_11)) {
                PyObject* exc_type = PyErr_Occurred();
                if (exc_type) {
                  if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
                  else __PYX_ERR(0, 4619, __pyx_L1_error)
                }
                break;
              }
              __Pyx_GOTREF(__pyx_t_11);
            }
            __Pyx_XDECREF_SET(__pyx_v_ro, __pyx_t_11);
            __pyx_t_11 = 0;
            __pyx_t_11 = __Pyx_GetItemInt(__pyx_v_ro, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4619, __pyx_L1_error)
            __Pyx_GOTREF(__pyx_t_11);
            if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_t_11))) __PYX_ERR(0, 4619, __pyx_L1_error)
            __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          }
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
          __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4619, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_INCREF(__pyx_v_r);
          __Pyx_GIVEREF(__pyx_v_r);
          PyList_SET_ITEM(__pyx_t_1, 0, __pyx_v_r);
          __pyx_t_11 = PyNumber_Add(__pyx_t_3, __pyx_t_1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 4619, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_11);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
          __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
          __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_builtin_max, __pyx_t_11); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4619, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
          __Pyx_DECREF_SET(__pyx_v_r, __pyx_t_1);
          __pyx_t_1 = 0;

          /* "automata/cautomata.pyx":4614
 *                     if verb:
 *                         print(fs)
 *                     for f in fs:             # <<<<<<<<<<<<<<
 *                         if verb:
 *                             print(f)
 */
        }
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      }
      __pyx_L11:;

      /* "automata/cautomata.pyx":4586
 *         spm = (0,0) #encadrement de l'approximation maximale trouve
 *         for c in l:
 *             if not only_non_trivial or len(c) > 1:             # <<<<<<<<<<<<<<
 *                 if verb:
 *                     print("component with %s states..." % len(c))
 */
    }

    /* "automata/cautomata.pyx":4585
 *         r = 0  # valeur propre maximale trouve
 *         spm = (0,0) #encadrement de l'approximation maximale trouve
 *         for c in l:             # <<<<<<<<<<<<<<
 *             if not only_non_trivial or len(c) > 1:
 *                 if verb:
 */
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":4620
 *                         from sage.rings.qqbar import AlgebraicRealField
 *                         r = max([ro[0] for ro in f[0].roots(ring=AlgebraicRealField())] + [r])
 *         if approx:             # <<<<<<<<<<<<<<
 *             if couple:
 *                 return spm
 */
  __pyx_t_4 = (__pyx_v_approx != 0);
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":4621
 *                         r = max([ro[0] for ro in f[0].roots(ring=AlgebraicRealField())] + [r])
 *         if approx:
 *             if couple:             # <<<<<<<<<<<<<<
 *                 return spm
 *             else:
 */
    __pyx_t_4 = (__pyx_v_couple != 0);
    if (__pyx_t_4) {

      /* "automata/cautomata.pyx":4622
 *         if approx:
 *             if couple:
 *                 return spm             # <<<<<<<<<<<<<<
 *             else:
 *                 return spm[1]
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_v_spm);
      __pyx_r = __pyx_v_spm;
      goto __pyx_L0;

      /* "automata/cautomata.pyx":4621
 *                         r = max([ro[0] for ro in f[0].roots(ring=AlgebraicRealField())] + [r])
 *         if approx:
 *             if couple:             # <<<<<<<<<<<<<<
 *                 return spm
 *             else:
 */
    }

    /* "automata/cautomata.pyx":4624
 *                 return spm
 *             else:
 *                 return spm[1]             # <<<<<<<<<<<<<<
 *         else:
 *             return r
 */
    /*else*/ {
      __Pyx_XDECREF(__pyx_r);
      __pyx_t_2 = __Pyx_GetItemInt(__pyx_v_spm, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4624, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_r = __pyx_t_2;
      __pyx_t_2 = 0;
      goto __pyx_L0;
    }

    /* "automata/cautomata.pyx":4620
 *                         from sage.rings.qqbar import AlgebraicRealField
 *                         r = max([ro[0] for ro in f[0].roots(ring=AlgebraicRealField())] + [r])
 *         if approx:             # <<<<<<<<<<<<<<
 *             if couple:
 *                 return spm
 */
  }

  /* "automata/cautomata.pyx":4626
 *                 return spm[1]
 *         else:
 *             return r             # <<<<<<<<<<<<<<
 * 
 *     def has_empty_language(self):
 */
  /*else*/ {
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_v_r);
    __pyx_r = __pyx_v_r;
    goto __pyx_L0;
  }

  /* "automata/cautomata.pyx":4534
 *             self.S = [s for j,s in enumerate(self.S) if j != i]
 * 
 *     def spectral_radius(self, bool approx=True, bool couple=False, bool only_non_trivial=False, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Return the spectral radius of the underlying graph.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.spectral_radius", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_a);
  __Pyx_XDECREF(__pyx_v_l);
  __Pyx_XDECREF(__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_spm);
  __Pyx_XDECREF(__pyx_v_c);
  __Pyx_XDECREF(__pyx_v_b);
  __Pyx_XDECREF(__pyx_v_g);
  __Pyx_XDECREF(__pyx_v_sp);
  __Pyx_XDECREF(__pyx_v_m);
  __Pyx_XDECREF(__pyx_v_cp);
  __Pyx_XDECREF(__pyx_v_fs);
  __Pyx_XDECREF(__pyx_v_f);
  __Pyx_XDECREF(__pyx_v_real_part);
  __Pyx_XDECREF(__pyx_v_AlgebraicRealField);
  __Pyx_XDECREF(__pyx_v_ro);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4628
 *             return r
 * 
 *     def has_empty_language(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Test if the  :class:`DeterministicAutomaton` has an empty language.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_121has_empty_language(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_120has_empty_language[] = "\n        Test if the  :class:`DeterministicAutomaton` has an empty language.\n\n        OUTPUT:\n\n        Return ``True`` the :class:`DeterministicAutomaton` has a empty language\n        ``False`` if not\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.has_empty_language()\n            False\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_121has_empty_language(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("has_empty_language (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_120has_empty_language(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_120has_empty_language(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  bool __pyx_v_res;
  PyObject *__pyx_v_answ = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("has_empty_language", 0);

  /* "automata/cautomata.pyx":4644
 * 
 *         """
 *         sig_on()             # <<<<<<<<<<<<<<
 *         res = emptyLanguage(self.a[0])
 *         answ = c_bool(res)
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 4644, __pyx_L1_error)

  /* "automata/cautomata.pyx":4645
 *         """
 *         sig_on()
 *         res = emptyLanguage(self.a[0])             # <<<<<<<<<<<<<<
 *         answ = c_bool(res)
 *         sig_off()
 */
  __pyx_v_res = emptyLanguage((__pyx_v_self->a[0]));

  /* "automata/cautomata.pyx":4646
 *         sig_on()
 *         res = emptyLanguage(self.a[0])
 *         answ = c_bool(res)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return answ
 */
  __pyx_t_2 = __Pyx_PyInt_From_bool(__pyx_v_res); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4646, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4646, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_answ = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":4647
 *         res = emptyLanguage(self.a[0])
 *         answ = c_bool(res)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return answ
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":4648
 *         answ = c_bool(res)
 *         sig_off()
 *         return answ             # <<<<<<<<<<<<<<
 * 
 *     def has_same_language_as(self, DeterministicAutomaton a, bool minimized=False,
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_answ);
  __pyx_r = __pyx_v_answ;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4628
 *             return r
 * 
 *     def has_empty_language(self):             # <<<<<<<<<<<<<<
 *         r"""
 *         Test if the  :class:`DeterministicAutomaton` has an empty language.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.has_empty_language", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_answ);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4650
 *         return answ
 * 
 *     def has_same_language_as(self, DeterministicAutomaton a, bool minimized=False,             # <<<<<<<<<<<<<<
 *                         bool pruned=False, bool verb=False):
 *         """
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_123has_same_language_as(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_122has_same_language_as[] = "\n        Test if the languages of :class:`DeterministicAutomaton` ``self`` and ``a`` are\n        equal or not.\n        If the alphabets are differents it returns False, even if the automata describe the same languages.\n\n        INPUT:\n\n        - ``a``  -- the :class:`DeterministicAutomaton` to compare\n\n        - ``minimized``  -- (default: ``False``) if minimization is\n          required or not\n\n        - ``pruned``  -- (default: ``False``) if emondation is required or not\n\n        - ``verb`` -- boolean (default: ``False``) set to ``True`` to activate\n          the verbose mode\n\n        OUTPUT:\n\n        Return ``True`` if the both :class:`DeterministicAutomaton` have\n        the same language and same alphabet ``False`` if not\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = DeterministicAutomaton([(3, 2, 'a'), (1, 2, 'd')], i=3)\n            sage: c = DeterministicAutomaton([(3, 2, 'd'), (1, 2, 'c')], i=2)\n            sage: a.has_same_language_as(b)\n            False\n            sage: a.has_same_language_as(c)\n            False\n            sage: c = DeterministicAutomaton([(3, 2, 'd'), (1, 2, 'c')])\n            sage: a.has_same_language_as(c)\n            False\n\n            sage: a = DeterministicAutomaton([(0,0,0), (0,1,1), (1,1,0), (1,1,1)], i=0)\n            sage: dag.AnyWord([0,1]).has_same_language_as(a)\n            True\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_123has_same_language_as(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a = 0;
  bool __pyx_v_minimized;
  bool __pyx_v_pruned;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("has_same_language_as (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a,&__pyx_n_s_minimized,&__pyx_n_s_pruned,&__pyx_n_s_verb,0};
    PyObject* values[4] = {0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_minimized);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_pruned);
          if (value) { values[2] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[3] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "has_same_language_as") < 0)) __PYX_ERR(0, 4650, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  4: values[3] = PyTuple_GET_ITEM(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)values[0]);
    if (values[1]) {
      __pyx_v_minimized = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_minimized == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4650, __pyx_L3_error)
    } else {
      __pyx_v_minimized = ((bool)0);
    }
    if (values[2]) {
      __pyx_v_pruned = __Pyx_PyInt_As_bool(values[2]); if (unlikely((__pyx_v_pruned == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4651, __pyx_L3_error)
    } else {

      /* "automata/cautomata.pyx":4651
 * 
 *     def has_same_language_as(self, DeterministicAutomaton a, bool minimized=False,
 *                         bool pruned=False, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Test if the languages of :class:`DeterministicAutomaton` ``self`` and ``a`` are
 */
      __pyx_v_pruned = ((bool)0);
    }
    if (values[3]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[3]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4651, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("has_same_language_as", 0, 1, 4, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 4650, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.has_same_language_as", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_a), __pyx_ptype_8automata_9cautomata_DeterministicAutomaton, 1, "a", 0))) __PYX_ERR(0, 4650, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_122has_same_language_as(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_a, __pyx_v_minimized, __pyx_v_pruned, __pyx_v_verb);

  /* "automata/cautomata.pyx":4650
 *         return answ
 * 
 *     def has_same_language_as(self, DeterministicAutomaton a, bool minimized=False,             # <<<<<<<<<<<<<<
 *                         bool pruned=False, bool verb=False):
 *         """
 */

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_122has_same_language_as(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, bool __pyx_v_minimized, bool __pyx_v_pruned, bool __pyx_v_verb) {
  Dict __pyx_v_d;
  int __pyx_v_i;
  int __pyx_v_j;
  bool __pyx_v_res;
  PyObject *__pyx_v_answ = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  int __pyx_t_9;
  int __pyx_t_10;
  int __pyx_t_11;
  __Pyx_RefNannySetupContext("has_same_language_as", 0);

  /* "automata/cautomata.pyx":4693
 *         cdef Dict d
 *         cdef int i, j
 *         if set(self.A) != set(a.A):             # <<<<<<<<<<<<<<
 *             return False
 *         sig_on()
 */
  __pyx_t_1 = PySet_New(__pyx_v_self->A); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4693, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = PySet_New(__pyx_v_a->A); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4693, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = PyObject_RichCompare(__pyx_t_1, __pyx_t_2, Py_NE); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4693, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 4693, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":4694
 *         cdef int i, j
 *         if set(self.A) != set(a.A):
 *             return False             # <<<<<<<<<<<<<<
 *         sig_on()
 *         d = NewDict(self.a.na)
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":4693
 *         cdef Dict d
 *         cdef int i, j
 *         if set(self.A) != set(a.A):             # <<<<<<<<<<<<<<
 *             return False
 *         sig_on()
 */
  }

  /* "automata/cautomata.pyx":4695
 *         if set(self.A) != set(a.A):
 *             return False
 *         sig_on()             # <<<<<<<<<<<<<<
 *         d = NewDict(self.a.na)
 *         sig_off()
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 4695, __pyx_L1_error)

  /* "automata/cautomata.pyx":4696
 *             return False
 *         sig_on()
 *         d = NewDict(self.a.na)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         for i in range(self.a.na):
 */
  __pyx_v_d = NewDict(__pyx_v_self->a->na);

  /* "automata/cautomata.pyx":4697
 *         sig_on()
 *         d = NewDict(self.a.na)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         for i in range(self.a.na):
 *             for j in range(a.a.na):
 */
  sig_off();

  /* "automata/cautomata.pyx":4698
 *         d = NewDict(self.a.na)
 *         sig_off()
 *         for i in range(self.a.na):             # <<<<<<<<<<<<<<
 *             for j in range(a.a.na):
 *                 if self.A[i] == a.A[j]:
 */
  __pyx_t_5 = __pyx_v_self->a->na;
  __pyx_t_6 = __pyx_t_5;
  for (__pyx_t_7 = 0; __pyx_t_7 < __pyx_t_6; __pyx_t_7+=1) {
    __pyx_v_i = __pyx_t_7;

    /* "automata/cautomata.pyx":4699
 *         sig_off()
 *         for i in range(self.a.na):
 *             for j in range(a.a.na):             # <<<<<<<<<<<<<<
 *                 if self.A[i] == a.A[j]:
 *                     d.e[i] = j
 */
    __pyx_t_8 = __pyx_v_a->a->na;
    __pyx_t_9 = __pyx_t_8;
    for (__pyx_t_10 = 0; __pyx_t_10 < __pyx_t_9; __pyx_t_10+=1) {
      __pyx_v_j = __pyx_t_10;

      /* "automata/cautomata.pyx":4700
 *         for i in range(self.a.na):
 *             for j in range(a.a.na):
 *                 if self.A[i] == a.A[j]:             # <<<<<<<<<<<<<<
 *                     d.e[i] = j
 *                     if verb:
 */
      if (unlikely(__pyx_v_self->A == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 4700, __pyx_L1_error)
      }
      __pyx_t_3 = __Pyx_GetItemInt_List(__pyx_v_self->A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4700, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      if (unlikely(__pyx_v_a->A == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 4700, __pyx_L1_error)
      }
      __pyx_t_2 = __Pyx_GetItemInt_List(__pyx_v_a->A, __pyx_v_j, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4700, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_2);
      __pyx_t_1 = PyObject_RichCompare(__pyx_t_3, __pyx_t_2, Py_EQ); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4700, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_4 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_4 < 0)) __PYX_ERR(0, 4700, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
      if (__pyx_t_4) {

        /* "automata/cautomata.pyx":4701
 *             for j in range(a.a.na):
 *                 if self.A[i] == a.A[j]:
 *                     d.e[i] = j             # <<<<<<<<<<<<<<
 *                     if verb:
 *                         print("%d -> %d" % (i, j))
 */
        (__pyx_v_d.e[__pyx_v_i]) = __pyx_v_j;

        /* "automata/cautomata.pyx":4702
 *                 if self.A[i] == a.A[j]:
 *                     d.e[i] = j
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("%d -> %d" % (i, j))
 *                     break
 */
        __pyx_t_4 = (__pyx_v_verb != 0);
        if (__pyx_t_4) {

          /* "automata/cautomata.pyx":4703
 *                     d.e[i] = j
 *                     if verb:
 *                         print("%d -> %d" % (i, j))             # <<<<<<<<<<<<<<
 *                     break
 *                 sig_check()
 */
          __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 4703, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_1);
          __pyx_t_2 = __Pyx_PyInt_From_int(__pyx_v_j); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4703, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4703, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_GIVEREF(__pyx_t_1);
          PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_t_1);
          __Pyx_GIVEREF(__pyx_t_2);
          PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_2);
          __pyx_t_1 = 0;
          __pyx_t_2 = 0;
          __pyx_t_2 = __Pyx_PyString_Format(__pyx_kp_s_d_d, __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4703, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_2);
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
          __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_print, __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4703, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_3);
          __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
          __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

          /* "automata/cautomata.pyx":4702
 *                 if self.A[i] == a.A[j]:
 *                     d.e[i] = j
 *                     if verb:             # <<<<<<<<<<<<<<
 *                         print("%d -> %d" % (i, j))
 *                     break
 */
        }

        /* "automata/cautomata.pyx":4704
 *                     if verb:
 *                         print("%d -> %d" % (i, j))
 *                     break             # <<<<<<<<<<<<<<
 *                 sig_check()
 *         if verb:
 */
        goto __pyx_L7_break;

        /* "automata/cautomata.pyx":4700
 *         for i in range(self.a.na):
 *             for j in range(a.a.na):
 *                 if self.A[i] == a.A[j]:             # <<<<<<<<<<<<<<
 *                     d.e[i] = j
 *                     if verb:
 */
      }

      /* "automata/cautomata.pyx":4705
 *                         print("%d -> %d" % (i, j))
 *                     break
 *                 sig_check()             # <<<<<<<<<<<<<<
 *         if verb:
 *             sig_on()
 */
      __pyx_t_11 = sig_check(); if (unlikely(__pyx_t_11 == ((int)0))) __PYX_ERR(0, 4705, __pyx_L1_error)
    }
    __pyx_L7_break:;
  }

  /* "automata/cautomata.pyx":4706
 *                     break
 *                 sig_check()
 *         if verb:             # <<<<<<<<<<<<<<
 *             sig_on()
 *             printDict(d)
 */
  __pyx_t_4 = (__pyx_v_verb != 0);
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":4707
 *                 sig_check()
 *         if verb:
 *             sig_on()             # <<<<<<<<<<<<<<
 *             printDict(d)
 *             sig_off()
 */
    __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 4707, __pyx_L1_error)

    /* "automata/cautomata.pyx":4708
 *         if verb:
 *             sig_on()
 *             printDict(d)             # <<<<<<<<<<<<<<
 *             sig_off()
 *         sig_on()
 */
    printDict(__pyx_v_d);

    /* "automata/cautomata.pyx":4709
 *             sig_on()
 *             printDict(d)
 *             sig_off()             # <<<<<<<<<<<<<<
 *         sig_on()
 *         res = equalsLanguages(self.a, a.a, d, minimized, pruned, verb)
 */
    sig_off();

    /* "automata/cautomata.pyx":4706
 *                     break
 *                 sig_check()
 *         if verb:             # <<<<<<<<<<<<<<
 *             sig_on()
 *             printDict(d)
 */
  }

  /* "automata/cautomata.pyx":4710
 *             printDict(d)
 *             sig_off()
 *         sig_on()             # <<<<<<<<<<<<<<
 *         res = equalsLanguages(self.a, a.a, d, minimized, pruned, verb)
 *         answ = c_bool(res)
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 4710, __pyx_L1_error)

  /* "automata/cautomata.pyx":4711
 *             sig_off()
 *         sig_on()
 *         res = equalsLanguages(self.a, a.a, d, minimized, pruned, verb)             # <<<<<<<<<<<<<<
 *         answ = c_bool(res)
 *         FreeDict(&d)
 */
  __pyx_v_res = equalsLanguages(__pyx_v_self->a, __pyx_v_a->a, __pyx_v_d, __pyx_v_minimized, __pyx_v_pruned, __pyx_v_verb);

  /* "automata/cautomata.pyx":4712
 *         sig_on()
 *         res = equalsLanguages(self.a, a.a, d, minimized, pruned, verb)
 *         answ = c_bool(res)             # <<<<<<<<<<<<<<
 *         FreeDict(&d)
 *         sig_off()
 */
  __pyx_t_3 = __Pyx_PyInt_From_bool(__pyx_v_res); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4712, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_2 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_3); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4712, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_answ = __pyx_t_2;
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":4713
 *         res = equalsLanguages(self.a, a.a, d, minimized, pruned, verb)
 *         answ = c_bool(res)
 *         FreeDict(&d)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         sig_on()
 */
  FreeDict((&__pyx_v_d));

  /* "automata/cautomata.pyx":4714
 *         answ = c_bool(res)
 *         FreeDict(&d)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         sig_on()
 *         FreeDict(&d)
 */
  sig_off();

  /* "automata/cautomata.pyx":4715
 *         FreeDict(&d)
 *         sig_off()
 *         sig_on()             # <<<<<<<<<<<<<<
 *         FreeDict(&d)
 *         sig_off()
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 4715, __pyx_L1_error)

  /* "automata/cautomata.pyx":4716
 *         sig_off()
 *         sig_on()
 *         FreeDict(&d)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return answ
 */
  FreeDict((&__pyx_v_d));

  /* "automata/cautomata.pyx":4717
 *         sig_on()
 *         FreeDict(&d)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return answ
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":4718
 *         FreeDict(&d)
 *         sig_off()
 *         return answ             # <<<<<<<<<<<<<<
 * 
 *     def intersect(self, DeterministicAutomaton a, bool verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_answ);
  __pyx_r = __pyx_v_answ;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4650
 *         return answ
 * 
 *     def has_same_language_as(self, DeterministicAutomaton a, bool minimized=False,             # <<<<<<<<<<<<<<
 *                         bool pruned=False, bool verb=False):
 *         """
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.has_same_language_as", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_answ);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4720
 *         return answ
 * 
 *     def intersect(self, DeterministicAutomaton a, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Determine if the languages of the :class:`DeterministicAutomaton` ``self``
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_125intersect(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_124intersect[] = "\n        Determine if the languages of the :class:`DeterministicAutomaton` ``self``\n        and ``a`` have a non-empty intersection.\n\n        INPUT:\n\n        -  ``a``  -- the :class:`Detautomaton` to intersect\n\n        - ``verb`` -- boolean (default: ``False``) True to activate\n          the verbose mode\n\n        OUTPUT:\n\n        Return ``True`` if the intersection of the languages is non-empty,\n        return ``False`` otherwise.\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"ababb\")\n            sage: b = dag.Word(\"aba\")\n            sage: a.intersect(b)\n            False\n            sage: a.prefix_closure().intersect(b)\n            True\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = DeterministicAutomaton([(3, 2, 'a'), (1, 2, 'd')], i=2)\n            sage: a.intersect(b)\n            True\n            sage: b = DeterministicAutomaton([(3, 2, 'a'), (1, 2, 'd')])\n            sage: a.intersect(b)\n            False\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_125intersect(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a = 0;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("intersect (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a,&__pyx_n_s_verb,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "intersect") < 0)) __PYX_ERR(0, 4720, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)values[0]);
    if (values[1]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4720, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("intersect", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 4720, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.intersect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_a), __pyx_ptype_8automata_9cautomata_DeterministicAutomaton, 1, "a", 0))) __PYX_ERR(0, 4720, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_124intersect(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_a, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_124intersect(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, bool __pyx_v_verb) {
  bool __pyx_v_res;
  PyObject *__pyx_v_answ = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("intersect", 0);

  /* "automata/cautomata.pyx":4754
 *             False
 *         """
 *         sig_on()             # <<<<<<<<<<<<<<
 *         res = Intersect(self.a[0], a.a[0], verb)
 *         answ = c_bool(res)
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 4754, __pyx_L1_error)

  /* "automata/cautomata.pyx":4755
 *         """
 *         sig_on()
 *         res = Intersect(self.a[0], a.a[0], verb)             # <<<<<<<<<<<<<<
 *         answ = c_bool(res)
 *         sig_off()
 */
  __pyx_v_res = Intersect((__pyx_v_self->a[0]), (__pyx_v_a->a[0]), __pyx_v_verb);

  /* "automata/cautomata.pyx":4756
 *         sig_on()
 *         res = Intersect(self.a[0], a.a[0], verb)
 *         answ = c_bool(res)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return answ
 */
  __pyx_t_2 = __Pyx_PyInt_From_bool(__pyx_v_res); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 4756, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4756, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_answ = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":4757
 *         res = Intersect(self.a[0], a.a[0], verb)
 *         answ = c_bool(res)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return answ
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":4758
 *         answ = c_bool(res)
 *         sig_off()
 *         return answ             # <<<<<<<<<<<<<<
 * 
 *     def find_word(self, bool verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_answ);
  __pyx_r = __pyx_v_answ;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4720
 *         return answ
 * 
 *     def intersect(self, DeterministicAutomaton a, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Determine if the languages of the :class:`DeterministicAutomaton` ``self``
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.intersect", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_answ);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4760
 *         return answ
 * 
 *     def find_word(self, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Find a word in the language of the automaton
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_127find_word(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_126find_word[] = "\n        Find a word in the language of the automaton\n\n        INPUT:\n\n        - ``verb`` -- (default: ``False``)  the verbose parameter\n\n        OUTPUT:\n\n        return a word of the language as a list\n        of letters if it exists, otherwise return None\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"gabian\")\n            sage: a.find_word()\n            ['g', 'a', 'b', 'i', 'a', 'n']\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.find_word()\n            []\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')])\n            sage: a.find_word()\n\n            sage: a = DeterministicAutomaton([(0, 0, 'x'), (0, 1, 'y')], i=0, final_states=[1])\n            sage: a.find_word()\n            ['y']\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_127find_word(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("find_word (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_verb,0};
    PyObject* values[1] = {0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[0] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "find_word") < 0)) __PYX_ERR(0, 4760, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[0]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4760, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("find_word", 0, 0, 1, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 4760, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.find_word", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_126find_word(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_126find_word(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, bool __pyx_v_verb) {
  Dict __pyx_v_w;
  PyObject *__pyx_v_r = 0;
  bool __pyx_v_res;
  int __pyx_v_i;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  int __pyx_t_5;
  int __pyx_t_6;
  __Pyx_RefNannySetupContext("find_word", 0);

  /* "automata/cautomata.pyx":4792
 *         cdef list r
 * 
 *         sig_on()             # <<<<<<<<<<<<<<
 *         res = findWord(self.a[0], &w, verb)
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 4792, __pyx_L1_error)

  /* "automata/cautomata.pyx":4793
 * 
 *         sig_on()
 *         res = findWord(self.a[0], &w, verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if not res:
 */
  __pyx_v_res = findWord((__pyx_v_self->a[0]), (&__pyx_v_w), __pyx_v_verb);

  /* "automata/cautomata.pyx":4794
 *         sig_on()
 *         res = findWord(self.a[0], &w, verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if not res:
 *             return None
 */
  sig_off();

  /* "automata/cautomata.pyx":4795
 *         res = findWord(self.a[0], &w, verb)
 *         sig_off()
 *         if not res:             # <<<<<<<<<<<<<<
 *             return None
 *         r = []
 */
  __pyx_t_2 = ((!(__pyx_v_res != 0)) != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":4796
 *         sig_off()
 *         if not res:
 *             return None             # <<<<<<<<<<<<<<
 *         r = []
 *         for i in range(w.n):
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_r = Py_None; __Pyx_INCREF(Py_None);
    goto __pyx_L0;

    /* "automata/cautomata.pyx":4795
 *         res = findWord(self.a[0], &w, verb)
 *         sig_off()
 *         if not res:             # <<<<<<<<<<<<<<
 *             return None
 *         r = []
 */
  }

  /* "automata/cautomata.pyx":4797
 *         if not res:
 *             return None
 *         r = []             # <<<<<<<<<<<<<<
 *         for i in range(w.n):
 *             r.append(self.A[w.e[i]])
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4797, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_r = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":4798
 *             return None
 *         r = []
 *         for i in range(w.n):             # <<<<<<<<<<<<<<
 *             r.append(self.A[w.e[i]])
 *         sig_on()
 */
  __pyx_t_1 = __pyx_v_w.n;
  __pyx_t_4 = __pyx_t_1;
  for (__pyx_t_5 = 0; __pyx_t_5 < __pyx_t_4; __pyx_t_5+=1) {
    __pyx_v_i = __pyx_t_5;

    /* "automata/cautomata.pyx":4799
 *         r = []
 *         for i in range(w.n):
 *             r.append(self.A[w.e[i]])             # <<<<<<<<<<<<<<
 *         sig_on()
 *         FreeDict(&w)
 */
    if (unlikely(__pyx_v_self->A == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 4799, __pyx_L1_error)
    }
    __pyx_t_3 = __Pyx_GetItemInt_List(__pyx_v_self->A, (__pyx_v_w.e[__pyx_v_i]), int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4799, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_6 = __Pyx_PyList_Append(__pyx_v_r, __pyx_t_3); if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 4799, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  }

  /* "automata/cautomata.pyx":4800
 *         for i in range(w.n):
 *             r.append(self.A[w.e[i]])
 *         sig_on()             # <<<<<<<<<<<<<<
 *         FreeDict(&w)
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 4800, __pyx_L1_error)

  /* "automata/cautomata.pyx":4801
 *             r.append(self.A[w.e[i]])
 *         sig_on()
 *         FreeDict(&w)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return r
 */
  FreeDict((&__pyx_v_w));

  /* "automata/cautomata.pyx":4802
 *         sig_on()
 *         FreeDict(&w)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":4803
 *         FreeDict(&w)
 *         sig_off()
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def shortest_word(self, i=None, f=None, bool verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_r);
  __pyx_r = __pyx_v_r;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4760
 *         return answ
 * 
 *     def find_word(self, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Find a word in the language of the automaton
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.find_word", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4805
 *         return r
 * 
 *     def shortest_word(self, i=None, f=None, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute a shortest words of the language of self.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_129shortest_word(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_128shortest_word[] = "\n        Compute a shortest words of the language of self.\n\n        INPUT:\n\n        - ``i`` -- (default: None)  the initial state\n\n        - ``f`` -- (default: None)  the final state\n\n        - ``verb`` -- (default: False)  the verbose parameter\n\n        OUTPUT:\n\n        return a word, as list of letters, or None if the language is empty.\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"gabian\")\n            sage: a.shortest_word()\n            ['g', 'a', 'b', 'i', 'a', 'n']\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')])\n            sage: a.shortest_word(i=2, f=3)\n            ['b']\n\n            sage: a = DeterministicAutomaton([(0, 0, 'x'), (0, 1, 'y')], i=0, final_states=[1])\n            sage: a.shortest_word()\n            ['y']\n\n            sage: a = dag.Empty(['a', 'b'])\n            sage: a.shortest_word()\n            \n\n        TESTS::\n\n            sage: a = dag.AnyWord(\"ab\")\n            sage: a.shortest_word(i=-2)\n            Traceback (most recent call last):\n            ...\n            ValueError: -2 is not a state (i.e. between 0 and 0)\n\n            sage: a = dag.AnyWord(\"ab\")\n            sage: a.shortest_word(f=-2)\n            Traceback (most recent call last):\n            ...\n            ValueError: -2 is not a state (i.e. between 0 and 0)\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_129shortest_word(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_i = 0;
  PyObject *__pyx_v_f = 0;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("shortest_word (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_i,&__pyx_n_s_f,&__pyx_n_s_verb,0};
    PyObject* values[3] = {0,0,0};
    values[0] = ((PyObject *)Py_None);
    values[1] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_f);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "shortest_word") < 0)) __PYX_ERR(0, 4805, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_i = values[0];
    __pyx_v_f = values[1];
    if (values[2]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[2]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4805, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("shortest_word", 0, 0, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 4805, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.shortest_word", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_128shortest_word(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_i, __pyx_v_f, __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_128shortest_word(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_i, PyObject *__pyx_v_f, bool __pyx_v_verb) {
  Dict __pyx_v_w;
  bool __pyx_v_res;
  PyObject *__pyx_v_r = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  int __pyx_t_6;
  Py_ssize_t __pyx_t_7;
  PyObject *(*__pyx_t_8)(PyObject *);
  Py_ssize_t __pyx_t_9;
  int __pyx_t_10;
  __Pyx_RefNannySetupContext("shortest_word", 0);
  __Pyx_INCREF(__pyx_v_i);
  __Pyx_INCREF(__pyx_v_f);

  /* "automata/cautomata.pyx":4855
 *         """
 *         cdef Dict w
 *         if i is None:             # <<<<<<<<<<<<<<
 *             i = self.a.i
 *         else:
 */
  __pyx_t_1 = (__pyx_v_i == Py_None);
  __pyx_t_2 = (__pyx_t_1 != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":4856
 *         cdef Dict w
 *         if i is None:
 *             i = self.a.i             # <<<<<<<<<<<<<<
 *         else:
 *             if i < -1 or i >= self.a.n:
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_self->a->i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4856, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":4855
 *         """
 *         cdef Dict w
 *         if i is None:             # <<<<<<<<<<<<<<
 *             i = self.a.i
 *         else:
 */
    goto __pyx_L3;
  }

  /* "automata/cautomata.pyx":4858
 *             i = self.a.i
 *         else:
 *             if i < -1 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (i, self.a.n-1))
 *         if f is None:
 */
  /*else*/ {
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_i, __pyx_int_neg_1, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4858, __pyx_L1_error)
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 4858, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (!__pyx_t_1) {
    } else {
      __pyx_t_2 = __pyx_t_1;
      goto __pyx_L5_bool_binop_done;
    }
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4858, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = PyObject_RichCompare(__pyx_v_i, __pyx_t_3, Py_GE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4858, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_1 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_1 < 0)) __PYX_ERR(0, 4858, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_2 = __pyx_t_1;
    __pyx_L5_bool_binop_done:;
    if (unlikely(__pyx_t_2)) {

      /* "automata/cautomata.pyx":4859
 *         else:
 *             if i < -1 or i >= self.a.n:
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (i, self.a.n-1))             # <<<<<<<<<<<<<<
 *         if f is None:
 *             f = -1
 */
      __pyx_t_4 = __Pyx_PyInt_From_long((__pyx_v_self->a->n - 1)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4859, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4859, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_v_i);
      __Pyx_GIVEREF(__pyx_v_i);
      PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_i);
      __Pyx_GIVEREF(__pyx_t_4);
      PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_4);
      __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_s_is_not_a_state_i_e_between_0, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4859, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4859, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_Raise(__pyx_t_3, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __PYX_ERR(0, 4859, __pyx_L1_error)

      /* "automata/cautomata.pyx":4858
 *             i = self.a.i
 *         else:
 *             if i < -1 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (i, self.a.n-1))
 *         if f is None:
 */
    }
  }
  __pyx_L3:;

  /* "automata/cautomata.pyx":4860
 *             if i < -1 or i >= self.a.n:
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (i, self.a.n-1))
 *         if f is None:             # <<<<<<<<<<<<<<
 *             f = -1
 *         else:
 */
  __pyx_t_2 = (__pyx_v_f == Py_None);
  __pyx_t_1 = (__pyx_t_2 != 0);
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":4861
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (i, self.a.n-1))
 *         if f is None:
 *             f = -1             # <<<<<<<<<<<<<<
 *         else:
 *             if f < -1 or f >= self.a.n:
 */
    __Pyx_INCREF(__pyx_int_neg_1);
    __Pyx_DECREF_SET(__pyx_v_f, __pyx_int_neg_1);

    /* "automata/cautomata.pyx":4860
 *             if i < -1 or i >= self.a.n:
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (i, self.a.n-1))
 *         if f is None:             # <<<<<<<<<<<<<<
 *             f = -1
 *         else:
 */
    goto __pyx_L7;
  }

  /* "automata/cautomata.pyx":4863
 *             f = -1
 *         else:
 *             if f < -1 or f >= self.a.n:             # <<<<<<<<<<<<<<
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (f, self.a.n-1))
 *         sig_on()
 */
  /*else*/ {
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_f, __pyx_int_neg_1, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4863, __pyx_L1_error)
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 4863, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (!__pyx_t_2) {
    } else {
      __pyx_t_1 = __pyx_t_2;
      goto __pyx_L9_bool_binop_done;
    }
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4863, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = PyObject_RichCompare(__pyx_v_f, __pyx_t_3, Py_GE); __Pyx_XGOTREF(__pyx_t_4); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4863, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_4); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 4863, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_1 = __pyx_t_2;
    __pyx_L9_bool_binop_done:;
    if (unlikely(__pyx_t_1)) {

      /* "automata/cautomata.pyx":4864
 *         else:
 *             if f < -1 or f >= self.a.n:
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (f, self.a.n-1))             # <<<<<<<<<<<<<<
 *         sig_on()
 *         res = shortestWord(self.a[0], &w, i, f, verb)
 */
      __pyx_t_4 = __Pyx_PyInt_From_long((__pyx_v_self->a->n - 1)); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4864, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4864, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_v_f);
      __Pyx_GIVEREF(__pyx_v_f);
      PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_f);
      __Pyx_GIVEREF(__pyx_t_4);
      PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_4);
      __pyx_t_4 = 0;
      __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_s_is_not_a_state_i_e_between_0, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4864, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4864, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __Pyx_Raise(__pyx_t_3, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __PYX_ERR(0, 4864, __pyx_L1_error)

      /* "automata/cautomata.pyx":4863
 *             f = -1
 *         else:
 *             if f < -1 or f >= self.a.n:             # <<<<<<<<<<<<<<
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (f, self.a.n-1))
 *         sig_on()
 */
    }
  }
  __pyx_L7:;

  /* "automata/cautomata.pyx":4865
 *             if f < -1 or f >= self.a.n:
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (f, self.a.n-1))
 *         sig_on()             # <<<<<<<<<<<<<<
 *         res = shortestWord(self.a[0], &w, i, f, verb)
 *         sig_off()
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 4865, __pyx_L1_error)

  /* "automata/cautomata.pyx":4866
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (f, self.a.n-1))
 *         sig_on()
 *         res = shortestWord(self.a[0], &w, i, f, verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if not res:
 */
  __pyx_t_5 = __Pyx_PyInt_As_int(__pyx_v_i); if (unlikely((__pyx_t_5 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 4866, __pyx_L1_error)
  __pyx_t_6 = __Pyx_PyInt_As_int(__pyx_v_f); if (unlikely((__pyx_t_6 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 4866, __pyx_L1_error)
  __pyx_v_res = shortestWord((__pyx_v_self->a[0]), (&__pyx_v_w), __pyx_t_5, __pyx_t_6, __pyx_v_verb);

  /* "automata/cautomata.pyx":4867
 *         sig_on()
 *         res = shortestWord(self.a[0], &w, i, f, verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if not res:
 *             return None
 */
  sig_off();

  /* "automata/cautomata.pyx":4868
 *         res = shortestWord(self.a[0], &w, i, f, verb)
 *         sig_off()
 *         if not res:             # <<<<<<<<<<<<<<
 *             return None
 *         r = []
 */
  __pyx_t_1 = ((!(__pyx_v_res != 0)) != 0);
  if (__pyx_t_1) {

    /* "automata/cautomata.pyx":4869
 *         sig_off()
 *         if not res:
 *             return None             # <<<<<<<<<<<<<<
 *         r = []
 *         for i in range(w.n):
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_r = Py_None; __Pyx_INCREF(Py_None);
    goto __pyx_L0;

    /* "automata/cautomata.pyx":4868
 *         res = shortestWord(self.a[0], &w, i, f, verb)
 *         sig_off()
 *         if not res:             # <<<<<<<<<<<<<<
 *             return None
 *         r = []
 */
  }

  /* "automata/cautomata.pyx":4870
 *         if not res:
 *             return None
 *         r = []             # <<<<<<<<<<<<<<
 *         for i in range(w.n):
 *             r.append(self.A[w.e[i]])
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4870, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_r = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":4871
 *             return None
 *         r = []
 *         for i in range(w.n):             # <<<<<<<<<<<<<<
 *             r.append(self.A[w.e[i]])
 *         sig_on()
 */
  __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_w.n); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4871, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_4 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4871, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_4);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (likely(PyList_CheckExact(__pyx_t_4)) || PyTuple_CheckExact(__pyx_t_4)) {
    __pyx_t_3 = __pyx_t_4; __Pyx_INCREF(__pyx_t_3); __pyx_t_7 = 0;
    __pyx_t_8 = NULL;
  } else {
    __pyx_t_7 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4871, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_8 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 4871, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
  for (;;) {
    if (likely(!__pyx_t_8)) {
      if (likely(PyList_CheckExact(__pyx_t_3))) {
        if (__pyx_t_7 >= PyList_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_7); __Pyx_INCREF(__pyx_t_4); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 4871, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_3, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4871, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      } else {
        if (__pyx_t_7 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_4 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_7); __Pyx_INCREF(__pyx_t_4); __pyx_t_7++; if (unlikely(0 < 0)) __PYX_ERR(0, 4871, __pyx_L1_error)
        #else
        __pyx_t_4 = PySequence_ITEM(__pyx_t_3, __pyx_t_7); __pyx_t_7++; if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4871, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_4);
        #endif
      }
    } else {
      __pyx_t_4 = __pyx_t_8(__pyx_t_3);
      if (unlikely(!__pyx_t_4)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 4871, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_4);
    }
    __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_4);
    __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":4872
 *         r = []
 *         for i in range(w.n):
 *             r.append(self.A[w.e[i]])             # <<<<<<<<<<<<<<
 *         sig_on()
 *         FreeDict(&w)
 */
    if (unlikely(__pyx_v_self->A == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 4872, __pyx_L1_error)
    }
    __pyx_t_9 = __Pyx_PyIndex_AsSsize_t(__pyx_v_i); if (unlikely((__pyx_t_9 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 4872, __pyx_L1_error)
    __pyx_t_4 = __Pyx_GetItemInt_List(__pyx_v_self->A, (__pyx_v_w.e[__pyx_t_9]), int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 4872, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __pyx_t_10 = __Pyx_PyList_Append(__pyx_v_r, __pyx_t_4); if (unlikely(__pyx_t_10 == ((int)-1))) __PYX_ERR(0, 4872, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;

    /* "automata/cautomata.pyx":4871
 *             return None
 *         r = []
 *         for i in range(w.n):             # <<<<<<<<<<<<<<
 *             r.append(self.A[w.e[i]])
 *         sig_on()
 */
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":4873
 *         for i in range(w.n):
 *             r.append(self.A[w.e[i]])
 *         sig_on()             # <<<<<<<<<<<<<<
 *         FreeDict(&w)
 *         sig_off()
 */
  __pyx_t_6 = sig_on(); if (unlikely(__pyx_t_6 == ((int)0))) __PYX_ERR(0, 4873, __pyx_L1_error)

  /* "automata/cautomata.pyx":4874
 *             r.append(self.A[w.e[i]])
 *         sig_on()
 *         FreeDict(&w)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return r
 */
  FreeDict((&__pyx_v_w));

  /* "automata/cautomata.pyx":4875
 *         sig_on()
 *         FreeDict(&w)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":4876
 *         FreeDict(&w)
 *         sig_off()
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def shortest_words(self, i=None, bool verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_r);
  __pyx_r = __pyx_v_r;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4805
 *         return r
 * 
 *     def shortest_word(self, i=None, f=None, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute a shortest words of the language of self.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.shortest_word", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XDECREF(__pyx_v_f);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4878
 *         return r
 * 
 *     def shortest_words(self, i=None, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute the list of shortest words from the initial state to every state.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_131shortest_words(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_130shortest_words[] = "\n        Compute the list of shortest words from the initial state to every state.\n\n        INPUT:\n\n        - ``i`` -- (default: None) - the initial state\n\n        - ``verb`` -- bool (default: False) - the verbose parameter\n\n        OUTPUT:\n\n        return a list of words, as a list of list of letters.\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"abaa\")\n            sage: a.shortest_words()\n            [[], ['a'], ['a', 'b'], ['a', 'b', 'a'], ['a', 'b', 'a', 'a']]\n\n            sage: a = dag.AnyWord(\"ab\")\n            sage: a.shortest_words()\n            [[]]\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.shortest_words()\n            [[], ['a'], [], []]\n\n        TESTS::\n\n            sage: a = dag.AnyWord(\"ab\")\n            sage: a.shortest_words(i=-2)\n            Traceback (most recent call last):\n            ...\n            ValueError: -2 is not a state (i.e. between 0 and 0)\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_131shortest_words(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_i = 0;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("shortest_words (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_i,&__pyx_n_s_verb,0};
    PyObject* values[2] = {0,0};
    values[0] = ((PyObject *)Py_None);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "shortest_words") < 0)) __PYX_ERR(0, 4878, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_i = values[0];
    if (values[1]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4878, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("shortest_words", 0, 0, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 4878, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.shortest_words", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_130shortest_words(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_i, __pyx_v_verb);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_130shortest_words(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_i, bool __pyx_v_verb) {
  Dict *__pyx_v_w;
  bool __pyx_v_res;
  PyObject *__pyx_v_rt = NULL;
  int __pyx_v_j;
  PyObject *__pyx_v_r = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  int __pyx_t_7;
  Py_ssize_t __pyx_t_8;
  PyObject *(*__pyx_t_9)(PyObject *);
  Py_ssize_t __pyx_t_10;
  int __pyx_t_11;
  int __pyx_t_12;
  __Pyx_RefNannySetupContext("shortest_words", 0);
  __Pyx_INCREF(__pyx_v_i);

  /* "automata/cautomata.pyx":4915
 *         """
 *         cdef Dict* w
 *         sig_on()             # <<<<<<<<<<<<<<
 *         w = <Dict*>malloc(sizeof(Dict) * self.a.n)
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 4915, __pyx_L1_error)

  /* "automata/cautomata.pyx":4916
 *         cdef Dict* w
 *         sig_on()
 *         w = <Dict*>malloc(sizeof(Dict) * self.a.n)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if w is NULL:
 */
  __pyx_v_w = ((Dict *)malloc(((sizeof(Dict)) * __pyx_v_self->a->n)));

  /* "automata/cautomata.pyx":4917
 *         sig_on()
 *         w = <Dict*>malloc(sizeof(Dict) * self.a.n)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if w is NULL:
 *             raise MemoryError("Failed to allocate memory for w in "
 */
  sig_off();

  /* "automata/cautomata.pyx":4918
 *         w = <Dict*>malloc(sizeof(Dict) * self.a.n)
 *         sig_off()
 *         if w is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for w in "
 *                               "shortest_words")
 */
  __pyx_t_2 = ((__pyx_v_w == NULL) != 0);
  if (unlikely(__pyx_t_2)) {

    /* "automata/cautomata.pyx":4919
 *         sig_off()
 *         if w is NULL:
 *             raise MemoryError("Failed to allocate memory for w in "             # <<<<<<<<<<<<<<
 *                               "shortest_words")
 *         if i is None:
 */
    __pyx_t_3 = __Pyx_PyObject_Call(__pyx_builtin_MemoryError, __pyx_tuple__67, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4919, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 4919, __pyx_L1_error)

    /* "automata/cautomata.pyx":4918
 *         w = <Dict*>malloc(sizeof(Dict) * self.a.n)
 *         sig_off()
 *         if w is NULL:             # <<<<<<<<<<<<<<
 *             raise MemoryError("Failed to allocate memory for w in "
 *                               "shortest_words")
 */
  }

  /* "automata/cautomata.pyx":4921
 *             raise MemoryError("Failed to allocate memory for w in "
 *                               "shortest_words")
 *         if i is None:             # <<<<<<<<<<<<<<
 *             i = self.a.i
 *         else:
 */
  __pyx_t_2 = (__pyx_v_i == Py_None);
  __pyx_t_4 = (__pyx_t_2 != 0);
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":4922
 *                               "shortest_words")
 *         if i is None:
 *             i = self.a.i             # <<<<<<<<<<<<<<
 *         else:
 *             if i < -1 or i >= self.a.n:
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_self->a->i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4922, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_3);
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":4921
 *             raise MemoryError("Failed to allocate memory for w in "
 *                               "shortest_words")
 *         if i is None:             # <<<<<<<<<<<<<<
 *             i = self.a.i
 *         else:
 */
    goto __pyx_L4;
  }

  /* "automata/cautomata.pyx":4924
 *             i = self.a.i
 *         else:
 *             if i < -1 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (i, self.a.n-1))
 *         sig_on()
 */
  /*else*/ {
    __pyx_t_3 = PyObject_RichCompare(__pyx_v_i, __pyx_int_neg_1, Py_LT); __Pyx_XGOTREF(__pyx_t_3); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4924, __pyx_L1_error)
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_3); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 4924, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (!__pyx_t_2) {
    } else {
      __pyx_t_4 = __pyx_t_2;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4924, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = PyObject_RichCompare(__pyx_v_i, __pyx_t_3, Py_GE); __Pyx_XGOTREF(__pyx_t_5); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4924, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 4924, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_4 = __pyx_t_2;
    __pyx_L6_bool_binop_done:;
    if (unlikely(__pyx_t_4)) {

      /* "automata/cautomata.pyx":4925
 *         else:
 *             if i < -1 or i >= self.a.n:
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (i, self.a.n-1))             # <<<<<<<<<<<<<<
 *         sig_on()
 *         res = shortestWords(self.a[0], w, i, verb)
 */
      __pyx_t_5 = __Pyx_PyInt_From_long((__pyx_v_self->a->n - 1)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4925, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_3 = PyTuple_New(2); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4925, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_INCREF(__pyx_v_i);
      __Pyx_GIVEREF(__pyx_v_i);
      PyTuple_SET_ITEM(__pyx_t_3, 0, __pyx_v_i);
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_3, 1, __pyx_t_5);
      __pyx_t_5 = 0;
      __pyx_t_5 = __Pyx_PyString_Format(__pyx_kp_s_s_is_not_a_state_i_e_between_0, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4925, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4925, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_Raise(__pyx_t_3, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __PYX_ERR(0, 4925, __pyx_L1_error)

      /* "automata/cautomata.pyx":4924
 *             i = self.a.i
 *         else:
 *             if i < -1 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (i, self.a.n-1))
 *         sig_on()
 */
    }
  }
  __pyx_L4:;

  /* "automata/cautomata.pyx":4926
 *             if i < -1 or i >= self.a.n:
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (i, self.a.n-1))
 *         sig_on()             # <<<<<<<<<<<<<<
 *         res = shortestWords(self.a[0], w, i, verb)
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 4926, __pyx_L1_error)

  /* "automata/cautomata.pyx":4927
 *                 raise ValueError("%s is not a state (i.e. between 0 and %s)" % (i, self.a.n-1))
 *         sig_on()
 *         res = shortestWords(self.a[0], w, i, verb)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if not res:
 */
  __pyx_t_1 = __Pyx_PyInt_As_int(__pyx_v_i); if (unlikely((__pyx_t_1 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 4927, __pyx_L1_error)
  __pyx_v_res = shortestWords((__pyx_v_self->a[0]), __pyx_v_w, __pyx_t_1, __pyx_v_verb);

  /* "automata/cautomata.pyx":4928
 *         sig_on()
 *         res = shortestWords(self.a[0], w, i, verb)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if not res:
 *             return None
 */
  sig_off();

  /* "automata/cautomata.pyx":4929
 *         res = shortestWords(self.a[0], w, i, verb)
 *         sig_off()
 *         if not res:             # <<<<<<<<<<<<<<
 *             return None
 *         rt = []
 */
  __pyx_t_4 = ((!(__pyx_v_res != 0)) != 0);
  if (__pyx_t_4) {

    /* "automata/cautomata.pyx":4930
 *         sig_off()
 *         if not res:
 *             return None             # <<<<<<<<<<<<<<
 *         rt = []
 *         for j in range(self.a.n):
 */
    __Pyx_XDECREF(__pyx_r);
    __pyx_r = Py_None; __Pyx_INCREF(Py_None);
    goto __pyx_L0;

    /* "automata/cautomata.pyx":4929
 *         res = shortestWords(self.a[0], w, i, verb)
 *         sig_off()
 *         if not res:             # <<<<<<<<<<<<<<
 *             return None
 *         rt = []
 */
  }

  /* "automata/cautomata.pyx":4931
 *         if not res:
 *             return None
 *         rt = []             # <<<<<<<<<<<<<<
 *         for j in range(self.a.n):
 *             r = []
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4931, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_rt = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":4932
 *             return None
 *         rt = []
 *         for j in range(self.a.n):             # <<<<<<<<<<<<<<
 *             r = []
 *             for i in range(w[j].n):
 */
  __pyx_t_1 = __pyx_v_self->a->n;
  __pyx_t_6 = __pyx_t_1;
  for (__pyx_t_7 = 0; __pyx_t_7 < __pyx_t_6; __pyx_t_7+=1) {
    __pyx_v_j = __pyx_t_7;

    /* "automata/cautomata.pyx":4933
 *         rt = []
 *         for j in range(self.a.n):
 *             r = []             # <<<<<<<<<<<<<<
 *             for i in range(w[j].n):
 *                 r.append(self.A[w[j].e[i]])
 */
    __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4933, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_XDECREF_SET(__pyx_v_r, ((PyObject*)__pyx_t_3));
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":4934
 *         for j in range(self.a.n):
 *             r = []
 *             for i in range(w[j].n):             # <<<<<<<<<<<<<<
 *                 r.append(self.A[w[j].e[i]])
 *             rt.append(r)
 */
    __pyx_t_3 = __Pyx_PyInt_From_int((__pyx_v_w[__pyx_v_j]).n); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4934, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_5 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4934, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (likely(PyList_CheckExact(__pyx_t_5)) || PyTuple_CheckExact(__pyx_t_5)) {
      __pyx_t_3 = __pyx_t_5; __Pyx_INCREF(__pyx_t_3); __pyx_t_8 = 0;
      __pyx_t_9 = NULL;
    } else {
      __pyx_t_8 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_t_5); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4934, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __pyx_t_9 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 4934, __pyx_L1_error)
    }
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    for (;;) {
      if (likely(!__pyx_t_9)) {
        if (likely(PyList_CheckExact(__pyx_t_3))) {
          if (__pyx_t_8 >= PyList_GET_SIZE(__pyx_t_3)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_5 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_8); __Pyx_INCREF(__pyx_t_5); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 4934, __pyx_L1_error)
          #else
          __pyx_t_5 = PySequence_ITEM(__pyx_t_3, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4934, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          #endif
        } else {
          if (__pyx_t_8 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
          #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
          __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_8); __Pyx_INCREF(__pyx_t_5); __pyx_t_8++; if (unlikely(0 < 0)) __PYX_ERR(0, 4934, __pyx_L1_error)
          #else
          __pyx_t_5 = PySequence_ITEM(__pyx_t_3, __pyx_t_8); __pyx_t_8++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4934, __pyx_L1_error)
          __Pyx_GOTREF(__pyx_t_5);
          #endif
        }
      } else {
        __pyx_t_5 = __pyx_t_9(__pyx_t_3);
        if (unlikely(!__pyx_t_5)) {
          PyObject* exc_type = PyErr_Occurred();
          if (exc_type) {
            if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
            else __PYX_ERR(0, 4934, __pyx_L1_error)
          }
          break;
        }
        __Pyx_GOTREF(__pyx_t_5);
      }
      __Pyx_DECREF_SET(__pyx_v_i, __pyx_t_5);
      __pyx_t_5 = 0;

      /* "automata/cautomata.pyx":4935
 *             r = []
 *             for i in range(w[j].n):
 *                 r.append(self.A[w[j].e[i]])             # <<<<<<<<<<<<<<
 *             rt.append(r)
 *             sig_on()
 */
      if (unlikely(__pyx_v_self->A == Py_None)) {
        PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
        __PYX_ERR(0, 4935, __pyx_L1_error)
      }
      __pyx_t_10 = __Pyx_PyIndex_AsSsize_t(__pyx_v_i); if (unlikely((__pyx_t_10 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 4935, __pyx_L1_error)
      __pyx_t_5 = __Pyx_GetItemInt_List(__pyx_v_self->A, ((__pyx_v_w[__pyx_v_j]).e[__pyx_t_10]), int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4935, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_r, __pyx_t_5); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 4935, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

      /* "automata/cautomata.pyx":4934
 *         for j in range(self.a.n):
 *             r = []
 *             for i in range(w[j].n):             # <<<<<<<<<<<<<<
 *                 r.append(self.A[w[j].e[i]])
 *             rt.append(r)
 */
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":4936
 *             for i in range(w[j].n):
 *                 r.append(self.A[w[j].e[i]])
 *             rt.append(r)             # <<<<<<<<<<<<<<
 *             sig_on()
 *             FreeDict(&w[j])
 */
    __pyx_t_11 = __Pyx_PyList_Append(__pyx_v_rt, __pyx_v_r); if (unlikely(__pyx_t_11 == ((int)-1))) __PYX_ERR(0, 4936, __pyx_L1_error)

    /* "automata/cautomata.pyx":4937
 *                 r.append(self.A[w[j].e[i]])
 *             rt.append(r)
 *             sig_on()             # <<<<<<<<<<<<<<
 *             FreeDict(&w[j])
 *             sig_off()
 */
    __pyx_t_12 = sig_on(); if (unlikely(__pyx_t_12 == ((int)0))) __PYX_ERR(0, 4937, __pyx_L1_error)

    /* "automata/cautomata.pyx":4938
 *             rt.append(r)
 *             sig_on()
 *             FreeDict(&w[j])             # <<<<<<<<<<<<<<
 *             sig_off()
 *         sig_on()
 */
    FreeDict((&(__pyx_v_w[__pyx_v_j])));

    /* "automata/cautomata.pyx":4939
 *             sig_on()
 *             FreeDict(&w[j])
 *             sig_off()             # <<<<<<<<<<<<<<
 *         sig_on()
 *         free(w)
 */
    sig_off();
  }

  /* "automata/cautomata.pyx":4940
 *             FreeDict(&w[j])
 *             sig_off()
 *         sig_on()             # <<<<<<<<<<<<<<
 *         free(w)
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 4940, __pyx_L1_error)

  /* "automata/cautomata.pyx":4941
 *             sig_off()
 *         sig_on()
 *         free(w)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return rt
 */
  free(__pyx_v_w);

  /* "automata/cautomata.pyx":4942
 *         sig_on()
 *         free(w)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return rt
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":4943
 *         free(w)
 *         sig_off()
 *         return rt             # <<<<<<<<<<<<<<
 * 
 *     def recognized_word(self, w):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_rt);
  __pyx_r = __pyx_v_rt;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4878
 *         return r
 * 
 *     def shortest_words(self, i=None, bool verb=False):             # <<<<<<<<<<<<<<
 *         """
 *         Compute the list of shortest words from the initial state to every state.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.shortest_words", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_rt);
  __Pyx_XDECREF(__pyx_v_r);
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4945
 *         return rt
 * 
 *     def recognized_word(self, w):             # <<<<<<<<<<<<<<
 *         """
 *         Determine if the word ``w`` is recognized or nor not by the automaton
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_133recognized_word(PyObject *__pyx_v_self, PyObject *__pyx_v_w); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_132recognized_word[] = "\n        Determine if the word ``w`` is recognized or nor not by the automaton\n\n        INPUT:\n\n        - ``w`` -- a list of letters\n\n        OUTPUT:\n\n        return ``True`` if the word is recognized, otherwise ``False``\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"abaa\")\n            sage: a.recognized_word(\"aba\")\n            False\n            sage: a.recognized_word(\"abaa\")\n            True\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.recognized_word(['a', 'b', 'b'])\n            False\n            sage: a.recognized_word(\"a\")\n            True\n\n        TESTS::\n\n            sage: a = dag.Word(\"ab\")\n            sage: a.recognized_word(['a', 0])\n            Traceback (most recent call last):\n            ...\n            KeyError: 0\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_133recognized_word(PyObject *__pyx_v_self, PyObject *__pyx_v_w) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("recognized_word (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_132recognized_word(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((PyObject *)__pyx_v_w));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_132recognized_word(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_w) {
  int __pyx_v_i;
  int __pyx_v_e;
  PyObject *__pyx_v_d = 0;
  PyObject *__pyx_v_a = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *(*__pyx_t_6)(PyObject *);
  Py_ssize_t __pyx_t_7;
  __Pyx_RefNannySetupContext("recognized_word", 0);

  /* "automata/cautomata.pyx":4982
 *         cdef int i, e
 *         cdef dict d
 *         e = self.a.i             # <<<<<<<<<<<<<<
 *         if e == -1:
 *             return False
 */
  __pyx_t_1 = __pyx_v_self->a->i;
  __pyx_v_e = __pyx_t_1;

  /* "automata/cautomata.pyx":4983
 *         cdef dict d
 *         e = self.a.i
 *         if e == -1:             # <<<<<<<<<<<<<<
 *             return False
 *         d = {}
 */
  __pyx_t_2 = ((__pyx_v_e == -1L) != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":4984
 *         e = self.a.i
 *         if e == -1:
 *             return False             # <<<<<<<<<<<<<<
 *         d = {}
 *         for i, a in enumerate(self.A):
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":4983
 *         cdef dict d
 *         e = self.a.i
 *         if e == -1:             # <<<<<<<<<<<<<<
 *             return False
 *         d = {}
 */
  }

  /* "automata/cautomata.pyx":4985
 *         if e == -1:
 *             return False
 *         d = {}             # <<<<<<<<<<<<<<
 *         for i, a in enumerate(self.A):
 *             d[a] = i
 */
  __pyx_t_3 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4985, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_d = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":4986
 *             return False
 *         d = {}
 *         for i, a in enumerate(self.A):             # <<<<<<<<<<<<<<
 *             d[a] = i
 *         for a in w:
 */
  __pyx_t_1 = 0;
  __pyx_t_3 = __pyx_v_self->A; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
  for (;;) {
    if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    __pyx_t_5 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_5); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 4986, __pyx_L1_error)
    #else
    __pyx_t_5 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4986, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    #endif
    __Pyx_XDECREF_SET(__pyx_v_a, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_v_i = __pyx_t_1;
    __pyx_t_1 = (__pyx_t_1 + 1);

    /* "automata/cautomata.pyx":4987
 *         d = {}
 *         for i, a in enumerate(self.A):
 *             d[a] = i             # <<<<<<<<<<<<<<
 *         for a in w:
 *             e = self.a.e[e].f[d[a]]
 */
    __pyx_t_5 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4987, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    if (unlikely(PyDict_SetItem(__pyx_v_d, __pyx_v_a, __pyx_t_5) < 0)) __PYX_ERR(0, 4987, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":4986
 *             return False
 *         d = {}
 *         for i, a in enumerate(self.A):             # <<<<<<<<<<<<<<
 *             d[a] = i
 *         for a in w:
 */
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":4988
 *         for i, a in enumerate(self.A):
 *             d[a] = i
 *         for a in w:             # <<<<<<<<<<<<<<
 *             e = self.a.e[e].f[d[a]]
 *             if e == -1:
 */
  if (likely(PyList_CheckExact(__pyx_v_w)) || PyTuple_CheckExact(__pyx_v_w)) {
    __pyx_t_3 = __pyx_v_w; __Pyx_INCREF(__pyx_t_3); __pyx_t_4 = 0;
    __pyx_t_6 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_3 = PyObject_GetIter(__pyx_v_w); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4988, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_6 = Py_TYPE(__pyx_t_3)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 4988, __pyx_L1_error)
  }
  for (;;) {
    if (likely(!__pyx_t_6)) {
      if (likely(PyList_CheckExact(__pyx_t_3))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyList_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_5); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 4988, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4988, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_3)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_5 = PyTuple_GET_ITEM(__pyx_t_3, __pyx_t_4); __Pyx_INCREF(__pyx_t_5); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 4988, __pyx_L1_error)
        #else
        __pyx_t_5 = PySequence_ITEM(__pyx_t_3, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4988, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_5);
        #endif
      }
    } else {
      __pyx_t_5 = __pyx_t_6(__pyx_t_3);
      if (unlikely(!__pyx_t_5)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 4988, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_5);
    }
    __Pyx_XDECREF_SET(__pyx_v_a, __pyx_t_5);
    __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":4989
 *             d[a] = i
 *         for a in w:
 *             e = self.a.e[e].f[d[a]]             # <<<<<<<<<<<<<<
 *             if e == -1:
 *                 return False
 */
    __pyx_t_5 = __Pyx_PyDict_GetItem(__pyx_v_d, __pyx_v_a); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4989, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_7 = __Pyx_PyIndex_AsSsize_t(__pyx_t_5); if (unlikely((__pyx_t_7 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 4989, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_v_e = ((__pyx_v_self->a->e[__pyx_v_e]).f[__pyx_t_7]);

    /* "automata/cautomata.pyx":4990
 *         for a in w:
 *             e = self.a.e[e].f[d[a]]
 *             if e == -1:             # <<<<<<<<<<<<<<
 *                 return False
 *         return c_bool(self.a.e[e].final)
 */
    __pyx_t_2 = ((__pyx_v_e == -1L) != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":4991
 *             e = self.a.e[e].f[d[a]]
 *             if e == -1:
 *                 return False             # <<<<<<<<<<<<<<
 *         return c_bool(self.a.e[e].final)
 * 
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(Py_False);
      __pyx_r = Py_False;
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      goto __pyx_L0;

      /* "automata/cautomata.pyx":4990
 *         for a in w:
 *             e = self.a.e[e].f[d[a]]
 *             if e == -1:             # <<<<<<<<<<<<<<
 *                 return False
 *         return c_bool(self.a.e[e].final)
 */
    }

    /* "automata/cautomata.pyx":4988
 *         for i, a in enumerate(self.A):
 *             d[a] = i
 *         for a in w:             # <<<<<<<<<<<<<<
 *             e = self.a.e[e].f[d[a]]
 *             if e == -1:
 */
  }
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":4992
 *             if e == -1:
 *                 return False
 *         return c_bool(self.a.e[e].final)             # <<<<<<<<<<<<<<
 * 
 *     def add_state(self, bool final, label=""):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_3 = __Pyx_PyInt_From_bool((__pyx_v_self->a->e[__pyx_v_e]).final); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 4992, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_t_5 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_3); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 4992, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_5;
  __pyx_t_5 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4945
 *         return rt
 * 
 *     def recognized_word(self, w):             # <<<<<<<<<<<<<<
 *         """
 *         Determine if the word ``w`` is recognized or nor not by the automaton
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.recognized_word", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_d);
  __Pyx_XDECREF(__pyx_v_a);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":4994
 *         return c_bool(self.a.e[e].final)
 * 
 *     def add_state(self, bool final, label=""):             # <<<<<<<<<<<<<<
 *         """
 *         Add a state in the automaton
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_135add_state(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_134add_state[] = "\n        Add a state in the automaton\n\n        INPUT:\n\n        - ``final`` -- boolean indicate if the added state is final\n        \n        - ``label`` (default: \"\") -- label of the new state\n\n        OUTPUT:\n\n        return the new state (which is an integer)\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"abaa\")\n            sage: s = a.add_state(true)\n            sage: a.add_transition(2,'b',s)\n            sage: a.recognized_word(\"abb\")\n            True\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.add_state(True)\n            4\n            sage: a.add_state(False)\n            5\n\n            sage: a = DeterministicAutomaton([(10,10,'x'),(10,20,'y'),(20,20,'z'),                (20,10,'y'),(20,30,'x'),(30,30,'y'),(30,10,'z'),(30,20,'x'),                (10,30,'z')], i=10)\n            sage: a\n            DeterministicAutomaton with 3 states and an alphabet of 3 letters\n            sage: a.add_state(True)\n            3\n            sage: a\n            DeterministicAutomaton with 4 states and an alphabet of 3 letters\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_135add_state(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  bool __pyx_v_final;
  PyObject *__pyx_v_label = 0;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("add_state (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_final,&__pyx_n_s_label,0};
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)__pyx_kp_s__68);
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_final)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_label);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "add_state") < 0)) __PYX_ERR(0, 4994, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_final = __Pyx_PyInt_As_bool(values[0]); if (unlikely((__pyx_v_final == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 4994, __pyx_L3_error)
    __pyx_v_label = values[1];
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("add_state", 0, 1, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 4994, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.add_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_134add_state(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_final, __pyx_v_label);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_134add_state(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, bool __pyx_v_final, PyObject *__pyx_v_label) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  int __pyx_t_3;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  __Pyx_RefNannySetupContext("add_state", 0);

  /* "automata/cautomata.pyx":5033
 * 
 *         """
 *         sig_on()             # <<<<<<<<<<<<<<
 *         AddState(self.a, final)
 *         sig_off()
 */
  __pyx_t_1 = sig_on(); if (unlikely(__pyx_t_1 == ((int)0))) __PYX_ERR(0, 5033, __pyx_L1_error)

  /* "automata/cautomata.pyx":5034
 *         """
 *         sig_on()
 *         AddState(self.a, final)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         if self.S is not None:
 */
  AddState(__pyx_v_self->a, __pyx_v_final);

  /* "automata/cautomata.pyx":5035
 *         sig_on()
 *         AddState(self.a, final)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         if self.S is not None:
 *             self.S.append(label)
 */
  sig_off();

  /* "automata/cautomata.pyx":5036
 *         AddState(self.a, final)
 *         sig_off()
 *         if self.S is not None:             # <<<<<<<<<<<<<<
 *             self.S.append(label)
 *         return self.a.n-1
 */
  __pyx_t_2 = (__pyx_v_self->S != ((PyObject*)Py_None));
  __pyx_t_3 = (__pyx_t_2 != 0);
  if (__pyx_t_3) {

    /* "automata/cautomata.pyx":5037
 *         sig_off()
 *         if self.S is not None:
 *             self.S.append(label)             # <<<<<<<<<<<<<<
 *         return self.a.n-1
 * 
 */
    if (unlikely(__pyx_v_self->S == Py_None)) {
      PyErr_Format(PyExc_AttributeError, "'NoneType' object has no attribute '%.30s'", "append");
      __PYX_ERR(0, 5037, __pyx_L1_error)
    }
    __pyx_t_4 = __Pyx_PyList_Append(__pyx_v_self->S, __pyx_v_label); if (unlikely(__pyx_t_4 == ((int)-1))) __PYX_ERR(0, 5037, __pyx_L1_error)

    /* "automata/cautomata.pyx":5036
 *         AddState(self.a, final)
 *         sig_off()
 *         if self.S is not None:             # <<<<<<<<<<<<<<
 *             self.S.append(label)
 *         return self.a.n-1
 */
  }

  /* "automata/cautomata.pyx":5038
 *         if self.S is not None:
 *             self.S.append(label)
 *         return self.a.n-1             # <<<<<<<<<<<<<<
 * 
 *     def add_transition(self, int i, l, int j):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_5 = __Pyx_PyInt_From_long((__pyx_v_self->a->n - 1)); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 5038, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __pyx_r = __pyx_t_5;
  __pyx_t_5 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":4994
 *         return c_bool(self.a.e[e].final)
 * 
 *     def add_state(self, bool final, label=""):             # <<<<<<<<<<<<<<
 *         """
 *         Add a state in the automaton
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.add_state", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":5040
 *         return self.a.n-1
 * 
 *     def add_transition(self, int i, l, int j):             # <<<<<<<<<<<<<<
 *         """
 *         Add an edge in the automaton
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_137add_transition(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_136add_transition[] = "\n        Add an edge in the automaton\n\n        INPUT:\n\n        - ``i`` - int - the first state\n\n        - ``l`` -- the label of edge\n\n        - ``j`` - int - the second state\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"abaa\")\n            sage: a.add_transition(2,'a',4)\n            sage: a.recognized_word(\"aba\")\n            True\n\n            sage: a = dag.Word(\"abaa\")\n            sage: s = a.add_state(true)\n            sage: a.add_transition(2,'b',s)\n            sage: a.recognized_word(\"abb\")\n            True\n\n        TESTS::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.add_transition(2,'a',1)\n            sage: a == DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b'), (2, 1, 'a')], i=0)\n            True\n            sage: a.add_transition(2,'v',1)\n            Traceback (most recent call last):\n            ...\n            ValueError: The letter v doesn't exist.\n            sage: a.add_transition(2,'v',6)\n            Traceback (most recent call last):\n            ...\n            ValueError: The state 6 doesn't exist.\n            sage: a.add_transition(5,'v',6)\n            Traceback (most recent call last):\n            ...\n            ValueError: The state 5 doesn't exist.\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_137add_transition(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_i;
  PyObject *__pyx_v_l = 0;
  int __pyx_v_j;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("add_transition (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_i,&__pyx_n_s_l,&__pyx_n_s_j,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_i)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_l)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("add_transition", 1, 3, 3, 1); __PYX_ERR(0, 5040, __pyx_L3_error)
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_j)) != 0)) kw_args--;
        else {
          __Pyx_RaiseArgtupleInvalid("add_transition", 1, 3, 3, 2); __PYX_ERR(0, 5040, __pyx_L3_error)
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "add_transition") < 0)) __PYX_ERR(0, 5040, __pyx_L3_error)
      }
    } else if (PyTuple_GET_SIZE(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
      values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
      values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
    }
    __pyx_v_i = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_i == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 5040, __pyx_L3_error)
    __pyx_v_l = values[1];
    __pyx_v_j = __Pyx_PyInt_As_int(values[2]); if (unlikely((__pyx_v_j == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 5040, __pyx_L3_error)
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("add_transition", 1, 3, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 5040, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.add_transition", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_136add_transition(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_i, __pyx_v_l, __pyx_v_j);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_136add_transition(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_i, PyObject *__pyx_v_l, int __pyx_v_j) {
  PyObject *__pyx_v_k = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  int __pyx_t_9;
  PyObject *__pyx_t_10 = NULL;
  PyObject *__pyx_t_11 = NULL;
  Py_ssize_t __pyx_t_12;
  __Pyx_RefNannySetupContext("add_transition", 0);

  /* "automata/cautomata.pyx":5085
 * 
 *         """
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state %s doesn't exist." % i)
 *         if j< 0 or j >= self.a.n:
 */
  __pyx_t_2 = ((__pyx_v_i < 0) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_i >= __pyx_v_self->a->n) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L4_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":5086
 *         """
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("The state %s doesn't exist." % i)             # <<<<<<<<<<<<<<
 *         if j< 0 or j >= self.a.n:
 *             raise ValueError("The state %s doesn't exist." % j)
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5086, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_The_state_s_doesn_t_exist, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 5086, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5086, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 5086, __pyx_L1_error)

    /* "automata/cautomata.pyx":5085
 * 
 *         """
 *         if i < 0 or i >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state %s doesn't exist." % i)
 *         if j< 0 or j >= self.a.n:
 */
  }

  /* "automata/cautomata.pyx":5087
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("The state %s doesn't exist." % i)
 *         if j< 0 or j >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state %s doesn't exist." % j)
 *         try:
 */
  __pyx_t_2 = ((__pyx_v_j < 0) != 0);
  if (!__pyx_t_2) {
  } else {
    __pyx_t_1 = __pyx_t_2;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_2 = ((__pyx_v_j >= __pyx_v_self->a->n) != 0);
  __pyx_t_1 = __pyx_t_2;
  __pyx_L7_bool_binop_done:;
  if (unlikely(__pyx_t_1)) {

    /* "automata/cautomata.pyx":5088
 *             raise ValueError("The state %s doesn't exist." % i)
 *         if j< 0 or j >= self.a.n:
 *             raise ValueError("The state %s doesn't exist." % j)             # <<<<<<<<<<<<<<
 *         try:
 *             k = self.A.index(l)
 */
    __pyx_t_3 = __Pyx_PyInt_From_int(__pyx_v_j); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5088, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = __Pyx_PyString_Format(__pyx_kp_s_The_state_s_doesn_t_exist, __pyx_t_3); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 5088, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_4);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5088, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_Raise(__pyx_t_3, 0, 0, 0);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __PYX_ERR(0, 5088, __pyx_L1_error)

    /* "automata/cautomata.pyx":5087
 *         if i < 0 or i >= self.a.n:
 *             raise ValueError("The state %s doesn't exist." % i)
 *         if j< 0 or j >= self.a.n:             # <<<<<<<<<<<<<<
 *             raise ValueError("The state %s doesn't exist." % j)
 *         try:
 */
  }

  /* "automata/cautomata.pyx":5089
 *         if j< 0 or j >= self.a.n:
 *             raise ValueError("The state %s doesn't exist." % j)
 *         try:             # <<<<<<<<<<<<<<
 *             k = self.A.index(l)
 *         except Exception:
 */
  {
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ExceptionSave(&__pyx_t_5, &__pyx_t_6, &__pyx_t_7);
    __Pyx_XGOTREF(__pyx_t_5);
    __Pyx_XGOTREF(__pyx_t_6);
    __Pyx_XGOTREF(__pyx_t_7);
    /*try:*/ {

      /* "automata/cautomata.pyx":5090
 *             raise ValueError("The state %s doesn't exist." % j)
 *         try:
 *             k = self.A.index(l)             # <<<<<<<<<<<<<<
 *         except Exception:
 *             raise ValueError("The letter %s doesn't exist." % l)
 */
      __pyx_t_4 = __Pyx_PyObject_GetAttrStr(__pyx_v_self->A, __pyx_n_s_index); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 5090, __pyx_L9_error)
      __Pyx_GOTREF(__pyx_t_4);
      __pyx_t_8 = NULL;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_4))) {
        __pyx_t_8 = PyMethod_GET_SELF(__pyx_t_4);
        if (likely(__pyx_t_8)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_4);
          __Pyx_INCREF(__pyx_t_8);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_4, function);
        }
      }
      __pyx_t_3 = (__pyx_t_8) ? __Pyx_PyObject_Call2Args(__pyx_t_4, __pyx_t_8, __pyx_v_l) : __Pyx_PyObject_CallOneArg(__pyx_t_4, __pyx_v_l);
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5090, __pyx_L9_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_v_k = __pyx_t_3;
      __pyx_t_3 = 0;

      /* "automata/cautomata.pyx":5089
 *         if j< 0 or j >= self.a.n:
 *             raise ValueError("The state %s doesn't exist." % j)
 *         try:             # <<<<<<<<<<<<<<
 *             k = self.A.index(l)
 *         except Exception:
 */
    }
    __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
    __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
    goto __pyx_L14_try_end;
    __pyx_L9_error:;
    __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":5091
 *         try:
 *             k = self.A.index(l)
 *         except Exception:             # <<<<<<<<<<<<<<
 *             raise ValueError("The letter %s doesn't exist." % l)
 *         sig_on()
 */
    __pyx_t_9 = __Pyx_PyErr_ExceptionMatches(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])));
    if (__pyx_t_9) {
      __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.add_transition", __pyx_clineno, __pyx_lineno, __pyx_filename);
      if (__Pyx_GetException(&__pyx_t_3, &__pyx_t_4, &__pyx_t_8) < 0) __PYX_ERR(0, 5091, __pyx_L11_except_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GOTREF(__pyx_t_8);

      /* "automata/cautomata.pyx":5092
 *             k = self.A.index(l)
 *         except Exception:
 *             raise ValueError("The letter %s doesn't exist." % l)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         self.a.e[i].f[k] = j
 */
      __pyx_t_10 = __Pyx_PyString_FormatSafe(__pyx_kp_s_The_letter_s_doesn_t_exist, __pyx_v_l); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 5092, __pyx_L11_except_error)
      __Pyx_GOTREF(__pyx_t_10);
      __pyx_t_11 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_10); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5092, __pyx_L11_except_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_Raise(__pyx_t_11, 0, 0, 0);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __PYX_ERR(0, 5092, __pyx_L11_except_error)
    }
    goto __pyx_L11_except_error;
    __pyx_L11_except_error:;

    /* "automata/cautomata.pyx":5089
 *         if j< 0 or j >= self.a.n:
 *             raise ValueError("The state %s doesn't exist." % j)
 *         try:             # <<<<<<<<<<<<<<
 *             k = self.A.index(l)
 *         except Exception:
 */
    __Pyx_XGIVEREF(__pyx_t_5);
    __Pyx_XGIVEREF(__pyx_t_6);
    __Pyx_XGIVEREF(__pyx_t_7);
    __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
    goto __pyx_L1_error;
    __pyx_L14_try_end:;
  }

  /* "automata/cautomata.pyx":5093
 *         except Exception:
 *             raise ValueError("The letter %s doesn't exist." % l)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         self.a.e[i].f[k] = j
 *         sig_off()
 */
  __pyx_t_9 = sig_on(); if (unlikely(__pyx_t_9 == ((int)0))) __PYX_ERR(0, 5093, __pyx_L1_error)

  /* "automata/cautomata.pyx":5094
 *             raise ValueError("The letter %s doesn't exist." % l)
 *         sig_on()
 *         self.a.e[i].f[k] = j             # <<<<<<<<<<<<<<
 *         sig_off()
 * 
 */
  __pyx_t_12 = __Pyx_PyIndex_AsSsize_t(__pyx_v_k); if (unlikely((__pyx_t_12 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 5094, __pyx_L1_error)
  ((__pyx_v_self->a->e[__pyx_v_i]).f[__pyx_t_12]) = __pyx_v_j;

  /* "automata/cautomata.pyx":5095
 *         sig_on()
 *         self.a.e[i].f[k] = j
 *         sig_off()             # <<<<<<<<<<<<<<
 * 
 *     @property
 */
  sig_off();

  /* "automata/cautomata.pyx":5040
 *         return self.a.n-1
 * 
 *     def add_transition(self, int i, l, int j):             # <<<<<<<<<<<<<<
 *         """
 *         Add an edge in the automaton
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.add_transition", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_k);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":5098
 * 
 *     @property
 *     def n_states(self):             # <<<<<<<<<<<<<<
 *         """
 *         return the numbers of states
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_8n_states_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_8n_states_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_8n_states___get__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_8n_states___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);

  /* "automata/cautomata.pyx":5117
 * 
 *         """
 *         return self.a.n             # <<<<<<<<<<<<<<
 * 
 *     @property
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5117, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":5098
 * 
 *     @property
 *     def n_states(self):             # <<<<<<<<<<<<<<
 *         """
 *         return the numbers of states
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.n_states.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":5120
 * 
 *     @property
 *     def n_letters(self):             # <<<<<<<<<<<<<<
 *         """
 *         return the numbers of letters of the alphabet.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_9n_letters_1__get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_9n_letters_1__get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__get__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_9n_letters___get__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_9n_letters___get__(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__get__", 0);

  /* "automata/cautomata.pyx":5139
 * 
 *         """
 *         return self.a.na             # <<<<<<<<<<<<<<
 * 
 *     def bigger_alphabet(self, A):
 */
  __Pyx_XDECREF(__pyx_r);
  __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_self->a->na); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5139, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":5120
 * 
 *     @property
 *     def n_letters(self):             # <<<<<<<<<<<<<<
 *         """
 *         return the numbers of letters of the alphabet.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.n_letters.__get__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":5141
 *         return self.a.na
 * 
 *     def bigger_alphabet(self, A):             # <<<<<<<<<<<<<<
 *         """
 *         Gives a copy of the :class:`DeterministicAutomaton`, but with the
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_139bigger_alphabet(PyObject *__pyx_v_self, PyObject *__pyx_v_A); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_138bigger_alphabet[] = "\n        Gives a copy of the :class:`DeterministicAutomaton`, but with the\n        bigger alphabet ``A``.\n\n        INPUT:\n\n        - ``A`` --  alphabet of the new automaton. We assume that it\n          contains the current alphabet of the automaton.\n\n        OUTPUT:\n\n        return a :class:`DeterministicAutomaton` with a bigger alphabet ``nA``\n\n        EXAMPLES::\n\n            sage: a = dag.AnyLetter(['a', 'b'])\n            sage: a.bigger_alphabet(['a','b','c'])\n            DeterministicAutomaton with 2 states and an alphabet of 3 letters\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')])\n            sage: a.bigger_alphabet(['a','b','c'])\n            DeterministicAutomaton with 4 states and an alphabet of 3 letters\n\n        TESTS::\n\n            sage: a = dag.AnyWord(['a', 'b'])\n            sage: a.bigger_alphabet(['a','1','c'])\n            Traceback (most recent call last):\n            ...\n            ValueError: Letter 'b' not found in the new alphabet\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_139bigger_alphabet(PyObject *__pyx_v_self, PyObject *__pyx_v_A) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("bigger_alphabet (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_138bigger_alphabet(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((PyObject *)__pyx_v_A));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_138bigger_alphabet(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, PyObject *__pyx_v_A) {
  Dict __pyx_v_d;
  int __pyx_v_i;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_r = 0;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  int __pyx_t_3;
  int __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  PyObject *__pyx_t_6 = NULL;
  PyObject *__pyx_t_7 = NULL;
  PyObject *__pyx_t_8 = NULL;
  PyObject *__pyx_t_9 = NULL;
  PyObject *__pyx_t_10 = NULL;
  int __pyx_t_11;
  PyObject *__pyx_t_12 = NULL;
  Py_ssize_t __pyx_t_13;
  __Pyx_RefNannySetupContext("bigger_alphabet", 0);

  /* "automata/cautomata.pyx":5177
 *         cdef int i
 *         cdef DeterministicAutomaton r
 *         r = DeterministicAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         d = NewDict(self.a.na)
 */
  __pyx_t_1 = __Pyx_PyObject_Call(((PyObject *)__pyx_ptype_8automata_9cautomata_DeterministicAutomaton), __pyx_tuple__22, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5177, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_v_r = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":5178
 *         cdef DeterministicAutomaton r
 *         r = DeterministicAutomaton(None)
 *         sig_on()             # <<<<<<<<<<<<<<
 *         d = NewDict(self.a.na)
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 5178, __pyx_L1_error)

  /* "automata/cautomata.pyx":5179
 *         r = DeterministicAutomaton(None)
 *         sig_on()
 *         d = NewDict(self.a.na)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         for i in range(self.a.na):
 */
  __pyx_v_d = NewDict(__pyx_v_self->a->na);

  /* "automata/cautomata.pyx":5180
 *         sig_on()
 *         d = NewDict(self.a.na)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         for i in range(self.a.na):
 *             try:
 */
  sig_off();

  /* "automata/cautomata.pyx":5181
 *         d = NewDict(self.a.na)
 *         sig_off()
 *         for i in range(self.a.na):             # <<<<<<<<<<<<<<
 *             try:
 *                 d.e[i] = A.index(self.A[i])
 */
  __pyx_t_2 = __pyx_v_self->a->na;
  __pyx_t_3 = __pyx_t_2;
  for (__pyx_t_4 = 0; __pyx_t_4 < __pyx_t_3; __pyx_t_4+=1) {
    __pyx_v_i = __pyx_t_4;

    /* "automata/cautomata.pyx":5182
 *         sig_off()
 *         for i in range(self.a.na):
 *             try:             # <<<<<<<<<<<<<<
 *                 d.e[i] = A.index(self.A[i])
 *             except Exception:
 */
    {
      __Pyx_PyThreadState_declare
      __Pyx_PyThreadState_assign
      __Pyx_ExceptionSave(&__pyx_t_5, &__pyx_t_6, &__pyx_t_7);
      __Pyx_XGOTREF(__pyx_t_5);
      __Pyx_XGOTREF(__pyx_t_6);
      __Pyx_XGOTREF(__pyx_t_7);
      /*try:*/ {

        /* "automata/cautomata.pyx":5183
 *         for i in range(self.a.na):
 *             try:
 *                 d.e[i] = A.index(self.A[i])             # <<<<<<<<<<<<<<
 *             except Exception:
 *                 raise ValueError("Letter %r not found in the new alphabet"%self.A[i])
 */
        __pyx_t_8 = __Pyx_PyObject_GetAttrStr(__pyx_v_A, __pyx_n_s_index); if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 5183, __pyx_L5_error)
        __Pyx_GOTREF(__pyx_t_8);
        if (unlikely(__pyx_v_self->A == Py_None)) {
          PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
          __PYX_ERR(0, 5183, __pyx_L5_error)
        }
        __pyx_t_9 = __Pyx_GetItemInt_List(__pyx_v_self->A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 5183, __pyx_L5_error)
        __Pyx_GOTREF(__pyx_t_9);
        __pyx_t_10 = NULL;
        if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_8))) {
          __pyx_t_10 = PyMethod_GET_SELF(__pyx_t_8);
          if (likely(__pyx_t_10)) {
            PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_8);
            __Pyx_INCREF(__pyx_t_10);
            __Pyx_INCREF(function);
            __Pyx_DECREF_SET(__pyx_t_8, function);
          }
        }
        __pyx_t_1 = (__pyx_t_10) ? __Pyx_PyObject_Call2Args(__pyx_t_8, __pyx_t_10, __pyx_t_9) : __Pyx_PyObject_CallOneArg(__pyx_t_8, __pyx_t_9);
        __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
        __Pyx_DECREF(__pyx_t_9); __pyx_t_9 = 0;
        if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5183, __pyx_L5_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_DECREF(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_11 = __Pyx_PyInt_As_int(__pyx_t_1); if (unlikely((__pyx_t_11 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 5183, __pyx_L5_error)
        __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
        (__pyx_v_d.e[__pyx_v_i]) = __pyx_t_11;

        /* "automata/cautomata.pyx":5182
 *         sig_off()
 *         for i in range(self.a.na):
 *             try:             # <<<<<<<<<<<<<<
 *                 d.e[i] = A.index(self.A[i])
 *             except Exception:
 */
      }
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_XDECREF(__pyx_t_6); __pyx_t_6 = 0;
      __Pyx_XDECREF(__pyx_t_7); __pyx_t_7 = 0;
      goto __pyx_L12_try_end;
      __pyx_L5_error:;
      __Pyx_XDECREF(__pyx_t_10); __pyx_t_10 = 0;
      __Pyx_XDECREF(__pyx_t_9); __pyx_t_9 = 0;
      __Pyx_XDECREF(__pyx_t_8); __pyx_t_8 = 0;
      __Pyx_XDECREF(__pyx_t_1); __pyx_t_1 = 0;

      /* "automata/cautomata.pyx":5184
 *             try:
 *                 d.e[i] = A.index(self.A[i])
 *             except Exception:             # <<<<<<<<<<<<<<
 *                 raise ValueError("Letter %r not found in the new alphabet"%self.A[i])
 *             sig_check()
 */
      __pyx_t_11 = __Pyx_PyErr_ExceptionMatches(((PyObject *)(&((PyTypeObject*)PyExc_Exception)[0])));
      if (__pyx_t_11) {
        __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.bigger_alphabet", __pyx_clineno, __pyx_lineno, __pyx_filename);
        if (__Pyx_GetException(&__pyx_t_1, &__pyx_t_8, &__pyx_t_9) < 0) __PYX_ERR(0, 5184, __pyx_L7_except_error)
        __Pyx_GOTREF(__pyx_t_1);
        __Pyx_GOTREF(__pyx_t_8);
        __Pyx_GOTREF(__pyx_t_9);

        /* "automata/cautomata.pyx":5185
 *                 d.e[i] = A.index(self.A[i])
 *             except Exception:
 *                 raise ValueError("Letter %r not found in the new alphabet"%self.A[i])             # <<<<<<<<<<<<<<
 *             sig_check()
 *         sig_on()
 */
        if (unlikely(__pyx_v_self->A == Py_None)) {
          PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
          __PYX_ERR(0, 5185, __pyx_L7_except_error)
        }
        __pyx_t_10 = __Pyx_GetItemInt_List(__pyx_v_self->A, __pyx_v_i, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 5185, __pyx_L7_except_error)
        __Pyx_GOTREF(__pyx_t_10);
        __pyx_t_12 = __Pyx_PyString_FormatSafe(__pyx_kp_s_Letter_r_not_found_in_the_new_al, __pyx_t_10); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 5185, __pyx_L7_except_error)
        __Pyx_GOTREF(__pyx_t_12);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __pyx_t_10 = __Pyx_PyObject_CallOneArg(__pyx_builtin_ValueError, __pyx_t_12); if (unlikely(!__pyx_t_10)) __PYX_ERR(0, 5185, __pyx_L7_except_error)
        __Pyx_GOTREF(__pyx_t_10);
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __Pyx_Raise(__pyx_t_10, 0, 0, 0);
        __Pyx_DECREF(__pyx_t_10); __pyx_t_10 = 0;
        __PYX_ERR(0, 5185, __pyx_L7_except_error)
      }
      goto __pyx_L7_except_error;
      __pyx_L7_except_error:;

      /* "automata/cautomata.pyx":5182
 *         sig_off()
 *         for i in range(self.a.na):
 *             try:             # <<<<<<<<<<<<<<
 *                 d.e[i] = A.index(self.A[i])
 *             except Exception:
 */
      __Pyx_XGIVEREF(__pyx_t_5);
      __Pyx_XGIVEREF(__pyx_t_6);
      __Pyx_XGIVEREF(__pyx_t_7);
      __Pyx_ExceptionReset(__pyx_t_5, __pyx_t_6, __pyx_t_7);
      goto __pyx_L1_error;
      __pyx_L12_try_end:;
    }

    /* "automata/cautomata.pyx":5186
 *             except Exception:
 *                 raise ValueError("Letter %r not found in the new alphabet"%self.A[i])
 *             sig_check()             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r.a[0] = BiggerAlphabet(self.a[0], d, len(A))
 */
    __pyx_t_11 = sig_check(); if (unlikely(__pyx_t_11 == ((int)0))) __PYX_ERR(0, 5186, __pyx_L1_error)
  }

  /* "automata/cautomata.pyx":5187
 *                 raise ValueError("Letter %r not found in the new alphabet"%self.A[i])
 *             sig_check()
 *         sig_on()             # <<<<<<<<<<<<<<
 *         r.a[0] = BiggerAlphabet(self.a[0], d, len(A))
 *         sig_off()
 */
  __pyx_t_2 = sig_on(); if (unlikely(__pyx_t_2 == ((int)0))) __PYX_ERR(0, 5187, __pyx_L1_error)

  /* "automata/cautomata.pyx":5188
 *             sig_check()
 *         sig_on()
 *         r.a[0] = BiggerAlphabet(self.a[0], d, len(A))             # <<<<<<<<<<<<<<
 *         sig_off()
 *         r.A = A
 */
  __pyx_t_13 = PyObject_Length(__pyx_v_A); if (unlikely(__pyx_t_13 == ((Py_ssize_t)-1))) __PYX_ERR(0, 5188, __pyx_L1_error)
  (__pyx_v_r->a[0]) = BiggerAlphabet((__pyx_v_self->a[0]), __pyx_v_d, __pyx_t_13);

  /* "automata/cautomata.pyx":5189
 *         sig_on()
 *         r.a[0] = BiggerAlphabet(self.a[0], d, len(A))
 *         sig_off()             # <<<<<<<<<<<<<<
 *         r.A = A
 *         return r
 */
  sig_off();

  /* "automata/cautomata.pyx":5190
 *         r.a[0] = BiggerAlphabet(self.a[0], d, len(A))
 *         sig_off()
 *         r.A = A             # <<<<<<<<<<<<<<
 *         return r
 * 
 */
  if (!(likely(PyList_CheckExact(__pyx_v_A))||((__pyx_v_A) == Py_None)||(PyErr_Format(PyExc_TypeError, "Expected %.16s, got %.200s", "list", Py_TYPE(__pyx_v_A)->tp_name), 0))) __PYX_ERR(0, 5190, __pyx_L1_error)
  __pyx_t_9 = __pyx_v_A;
  __Pyx_INCREF(__pyx_t_9);
  __Pyx_GIVEREF(__pyx_t_9);
  __Pyx_GOTREF(__pyx_v_r->A);
  __Pyx_DECREF(__pyx_v_r->A);
  __pyx_v_r->A = ((PyObject*)__pyx_t_9);
  __pyx_t_9 = 0;

  /* "automata/cautomata.pyx":5191
 *         sig_off()
 *         r.A = A
 *         return r             # <<<<<<<<<<<<<<
 * 
 *     def complementary_in_place(self):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(((PyObject *)__pyx_v_r));
  __pyx_r = ((PyObject *)__pyx_v_r);
  goto __pyx_L0;

  /* "automata/cautomata.pyx":5141
 *         return self.a.na
 * 
 *     def bigger_alphabet(self, A):             # <<<<<<<<<<<<<<
 *         """
 *         Gives a copy of the :class:`DeterministicAutomaton`, but with the
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_8);
  __Pyx_XDECREF(__pyx_t_9);
  __Pyx_XDECREF(__pyx_t_10);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.bigger_alphabet", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_r);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":5193
 *         return r
 * 
 *     def complementary_in_place(self):             # <<<<<<<<<<<<<<
 *         """
 *         Change the language of the automaton to the complementary in-place.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_141complementary_in_place(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_140complementary_in_place[] = "\n        Change the language of the automaton to the complementary in-place.\n        If the language of self was L and the alphabet is A,\n        then the new language of self is A^*\\L\n        (i.e. words over the alphabet A that are not in L)\n\n        OUTPUT:\n\n        return None\n        (the operation is in-place)\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"abaa\")\n            sage: a.complementary_in_place()\n            sage: a\n            DeterministicAutomaton with 6 states and an alphabet of 2 letters\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.complementary_in_place()\n            sage: a\n            DeterministicAutomaton with 5 states and an alphabet of 2 letters\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_141complementary_in_place(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("complementary_in_place (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_140complementary_in_place(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_140complementary_in_place(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_v_i = 0;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *(*__pyx_t_5)(PyObject *);
  Py_ssize_t __pyx_t_6;
  Py_ssize_t __pyx_t_7;
  __Pyx_RefNannySetupContext("complementary_in_place", 0);

  /* "automata/cautomata.pyx":5218
 *         """
 *         cdef i
 *         self.complete_in_place()             # <<<<<<<<<<<<<<
 *         for i in range(self.a.n):
 *             self.a.e[i].final = not self.a.e[i].final
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_complete_in_place); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5218, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5218, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":5219
 *         cdef i
 *         self.complete_in_place()
 *         for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *             self.a.e[i].final = not self.a.e[i].final
 * 
 */
  __pyx_t_1 = __Pyx_PyInt_From_int(__pyx_v_self->a->n); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5219, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_CallOneArg(__pyx_builtin_range, __pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5219, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (likely(PyList_CheckExact(__pyx_t_2)) || PyTuple_CheckExact(__pyx_t_2)) {
    __pyx_t_1 = __pyx_t_2; __Pyx_INCREF(__pyx_t_1); __pyx_t_4 = 0;
    __pyx_t_5 = NULL;
  } else {
    __pyx_t_4 = -1; __pyx_t_1 = PyObject_GetIter(__pyx_t_2); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5219, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_5 = Py_TYPE(__pyx_t_1)->tp_iternext; if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 5219, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  for (;;) {
    if (likely(!__pyx_t_5)) {
      if (likely(PyList_CheckExact(__pyx_t_1))) {
        if (__pyx_t_4 >= PyList_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyList_GET_ITEM(__pyx_t_1, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 5219, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5219, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      } else {
        if (__pyx_t_4 >= PyTuple_GET_SIZE(__pyx_t_1)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_2 = PyTuple_GET_ITEM(__pyx_t_1, __pyx_t_4); __Pyx_INCREF(__pyx_t_2); __pyx_t_4++; if (unlikely(0 < 0)) __PYX_ERR(0, 5219, __pyx_L1_error)
        #else
        __pyx_t_2 = PySequence_ITEM(__pyx_t_1, __pyx_t_4); __pyx_t_4++; if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5219, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_2);
        #endif
      }
    } else {
      __pyx_t_2 = __pyx_t_5(__pyx_t_1);
      if (unlikely(!__pyx_t_2)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 5219, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_2);
    }
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_2);
    __pyx_t_2 = 0;

    /* "automata/cautomata.pyx":5220
 *         self.complete_in_place()
 *         for i in range(self.a.n):
 *             self.a.e[i].final = not self.a.e[i].final             # <<<<<<<<<<<<<<
 * 
 *     def complementary(self):
 */
    __pyx_t_6 = __Pyx_PyIndex_AsSsize_t(__pyx_v_i); if (unlikely((__pyx_t_6 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 5220, __pyx_L1_error)
    __pyx_t_7 = __Pyx_PyIndex_AsSsize_t(__pyx_v_i); if (unlikely((__pyx_t_7 == (Py_ssize_t)-1) && PyErr_Occurred())) __PYX_ERR(0, 5220, __pyx_L1_error)
    (__pyx_v_self->a->e[__pyx_t_7]).final = (!((__pyx_v_self->a->e[__pyx_t_6]).final != 0));

    /* "automata/cautomata.pyx":5219
 *         cdef i
 *         self.complete_in_place()
 *         for i in range(self.a.n):             # <<<<<<<<<<<<<<
 *             self.a.e[i].final = not self.a.e[i].final
 * 
 */
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":5193
 *         return r
 * 
 *     def complementary_in_place(self):             # <<<<<<<<<<<<<<
 *         """
 *         Change the language of the automaton to the complementary in-place.
 */

  /* function exit code */
  __pyx_r = Py_None; __Pyx_INCREF(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.complementary_in_place", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_i);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":5222
 *             self.a.e[i].final = not self.a.e[i].final
 * 
 *     def complementary(self):             # <<<<<<<<<<<<<<
 *         """
 *         Gives an automaton whose language is the complementary.
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_143complementary(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_142complementary[] = "\n        Gives an automaton whose language is the complementary.\n\n        OUTPUT:\n\n        :class:`DeterministicAutomaton`\n        return  a new automaton whose language is the complementary\n        of the language of ``self``\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"abaa\")\n            sage: a.complementary()\n            DeterministicAutomaton with 6 states and an alphabet of 2 letters\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.complementary()\n            DeterministicAutomaton with 5 states and an alphabet of 2 letters\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_143complementary(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("complementary (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_142complementary(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_142complementary(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_v_a = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  PyObject *__pyx_t_3 = NULL;
  __Pyx_RefNannySetupContext("complementary", 0);

  /* "automata/cautomata.pyx":5242
 *             DeterministicAutomaton with 5 states and an alphabet of 2 letters
 *         """
 *         a = self.copy()             # <<<<<<<<<<<<<<
 *         a.complementary_in_place()
 *         return a
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_copy); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5242, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5242, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_a = __pyx_t_1;
  __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":5243
 *         """
 *         a = self.copy()
 *         a.complementary_in_place()             # <<<<<<<<<<<<<<
 *         return a
 * 
 */
  __pyx_t_2 = __Pyx_PyObject_GetAttrStr(__pyx_v_a, __pyx_n_s_complementary_in_place); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 5243, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  __pyx_t_1 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5243, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":5244
 *         a = self.copy()
 *         a.complementary_in_place()
 *         return a             # <<<<<<<<<<<<<<
 * 
 *     def included(self, DeterministicAutomaton a, bool pruned=False, bool verb=False):
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_a);
  __pyx_r = __pyx_v_a;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":5222
 *             self.a.e[i].final = not self.a.e[i].final
 * 
 *     def complementary(self):             # <<<<<<<<<<<<<<
 *         """
 *         Gives an automaton whose language is the complementary.
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.complementary", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_a);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":5246
 *         return a
 * 
 *     def included(self, DeterministicAutomaton a, bool pruned=False, bool verb=False):             # <<<<<<<<<<<<<<
 *         r"""
 *         Test if the language of self is included in the language of ``a``
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_145included(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_144included[] = "\n        Test if the language of self is included in the language of ``a``\n\n        INPUT:\n\n        - ``a`` --  a :class:`DeterministicAutomaton`\n\n        - ``pruned`` -- (default: False) - set to True if the automaton self is\n          already pruned, in order to avoid unuseful computation.\n\n        - ``verb`` -- (default: False) - verbose parameter\n\n        OUTPUT:\n\n        Boolean\n        return ``True`` if the language of ``self`` is included in the\n        language of ``a``, otherwise return ``False`` \n\n        EXAMPLES::\n\n            sage: a = dag.AnyWord(\"ab\")\n            sage: b = dag.Word(\"aba\")\n            sage: b.included(a)\n            True\n            sage: a.included(b)\n            False\n\n            sage: a = dag.AnyWord(\"abc\")\n            sage: b = dag.AnyWord(\"ab\")\n            sage: a.included(b)\n            False\n            sage: b.included(a)\n            True\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.included(a)\n            True\n            sage: b = DeterministicAutomaton([(0, 1, 'c')], i=0)\n            sage: a.included(b)\n            False\n            sage: b = DeterministicAutomaton([(0, 1, 'a')], i=0)\n            sage: b.included(a)\n            True\n            sage: b = DeterministicAutomaton([(0, 1, 'c')])\n            sage: b.included(a)\n            True\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_145included(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a = 0;
  bool __pyx_v_pruned;
  bool __pyx_v_verb;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("included (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_a,&__pyx_n_s_pruned,&__pyx_n_s_verb,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_a)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_pruned);
          if (value) { values[1] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_verb);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "included") < 0)) __PYX_ERR(0, 5246, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  3: values[2] = PyTuple_GET_ITEM(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_a = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)values[0]);
    if (values[1]) {
      __pyx_v_pruned = __Pyx_PyInt_As_bool(values[1]); if (unlikely((__pyx_v_pruned == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 5246, __pyx_L3_error)
    } else {
      __pyx_v_pruned = ((bool)0);
    }
    if (values[2]) {
      __pyx_v_verb = __Pyx_PyInt_As_bool(values[2]); if (unlikely((__pyx_v_verb == ((bool)-1)) && PyErr_Occurred())) __PYX_ERR(0, 5246, __pyx_L3_error)
    } else {
      __pyx_v_verb = ((bool)0);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("included", 0, 1, 3, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 5246, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.included", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_a), __pyx_ptype_8automata_9cautomata_DeterministicAutomaton, 1, "a", 0))) __PYX_ERR(0, 5246, __pyx_L1_error)
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_144included(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_a, __pyx_v_pruned, __pyx_v_verb);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_144included(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a, bool __pyx_v_pruned, bool __pyx_v_verb) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_b = 0;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_a2 = 0;
  PyObject *__pyx_v_A = 0;
  bool __pyx_v_res;
  PyObject *__pyx_v_answ = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  PyObject *__pyx_t_4 = NULL;
  int __pyx_t_5;
  __Pyx_RefNannySetupContext("included", 0);

  /* "automata/cautomata.pyx":5296
 *         cdef DeterministicAutomaton b, a2
 *         cdef list A
 *         if self.A != a.A:             # <<<<<<<<<<<<<<
 *             A = list(set(a.A+self.A))
 *             b = self.bigger_alphabet(A)
 */
  __pyx_t_1 = PyObject_RichCompare(__pyx_v_self->A, __pyx_v_a->A, Py_NE); __Pyx_XGOTREF(__pyx_t_1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5296, __pyx_L1_error)
  __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 5296, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":5297
 *         cdef list A
 *         if self.A != a.A:
 *             A = list(set(a.A+self.A))             # <<<<<<<<<<<<<<
 *             b = self.bigger_alphabet(A)
 *             a2 = a.bigger_alphabet(A)
 */
    __pyx_t_1 = PyNumber_Add(__pyx_v_a->A, __pyx_v_self->A); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __pyx_t_3 = PySet_New(__pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = PySequence_List(__pyx_t_3); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5297, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_A = ((PyObject*)__pyx_t_1);
    __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":5298
 *         if self.A != a.A:
 *             A = list(set(a.A+self.A))
 *             b = self.bigger_alphabet(A)             # <<<<<<<<<<<<<<
 *             a2 = a.bigger_alphabet(A)
 *         else:
 */
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_bigger_alphabet); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
      }
    }
    __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_4, __pyx_v_A) : __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_A);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5298, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (!(likely(((__pyx_t_1) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_1, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 5298, __pyx_L1_error)
    __pyx_v_b = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
    __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":5299
 *             A = list(set(a.A+self.A))
 *             b = self.bigger_alphabet(A)
 *             a2 = a.bigger_alphabet(A)             # <<<<<<<<<<<<<<
 *         else:
 *             b = self
 */
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_a), __pyx_n_s_bigger_alphabet); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5299, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_4 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_4)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_4);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
      }
    }
    __pyx_t_1 = (__pyx_t_4) ? __Pyx_PyObject_Call2Args(__pyx_t_3, __pyx_t_4, __pyx_v_A) : __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_v_A);
    __Pyx_XDECREF(__pyx_t_4); __pyx_t_4 = 0;
    if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5299, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_1);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (!(likely(((__pyx_t_1) == Py_None) || likely(__Pyx_TypeTest(__pyx_t_1, __pyx_ptype_8automata_9cautomata_DeterministicAutomaton))))) __PYX_ERR(0, 5299, __pyx_L1_error)
    __pyx_v_a2 = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_t_1);
    __pyx_t_1 = 0;

    /* "automata/cautomata.pyx":5296
 *         cdef DeterministicAutomaton b, a2
 *         cdef list A
 *         if self.A != a.A:             # <<<<<<<<<<<<<<
 *             A = list(set(a.A+self.A))
 *             b = self.bigger_alphabet(A)
 */
    goto __pyx_L3;
  }

  /* "automata/cautomata.pyx":5301
 *             a2 = a.bigger_alphabet(A)
 *         else:
 *             b = self             # <<<<<<<<<<<<<<
 *             a2 = a
 *         sig_on()
 */
  /*else*/ {
    __Pyx_INCREF(((PyObject *)__pyx_v_self));
    __pyx_v_b = __pyx_v_self;

    /* "automata/cautomata.pyx":5302
 *         else:
 *             b = self
 *             a2 = a             # <<<<<<<<<<<<<<
 *         sig_on()
 *         res = Included(b.a[0], a2.a[0], pruned, verb)
 */
    __Pyx_INCREF(((PyObject *)__pyx_v_a));
    __pyx_v_a2 = __pyx_v_a;
  }
  __pyx_L3:;

  /* "automata/cautomata.pyx":5303
 *             b = self
 *             a2 = a
 *         sig_on()             # <<<<<<<<<<<<<<
 *         res = Included(b.a[0], a2.a[0], pruned, verb)
 *         answ = c_bool(res)
 */
  __pyx_t_5 = sig_on(); if (unlikely(__pyx_t_5 == ((int)0))) __PYX_ERR(0, 5303, __pyx_L1_error)

  /* "automata/cautomata.pyx":5304
 *             a2 = a
 *         sig_on()
 *         res = Included(b.a[0], a2.a[0], pruned, verb)             # <<<<<<<<<<<<<<
 *         answ = c_bool(res)
 *         sig_off()
 */
  __pyx_v_res = Included((__pyx_v_b->a[0]), (__pyx_v_a2->a[0]), __pyx_v_pruned, __pyx_v_verb);

  /* "automata/cautomata.pyx":5305
 *         sig_on()
 *         res = Included(b.a[0], a2.a[0], pruned, verb)
 *         answ = c_bool(res)             # <<<<<<<<<<<<<<
 *         sig_off()
 *         return answ
 */
  __pyx_t_1 = __Pyx_PyInt_From_bool(__pyx_v_res); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 5305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_3 = __Pyx_PyObject_CallOneArg(((PyObject *)__pyx_ptype_7cpython_4bool_bool), __pyx_t_1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5305, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_answ = __pyx_t_3;
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":5306
 *         res = Included(b.a[0], a2.a[0], pruned, verb)
 *         answ = c_bool(res)
 *         sig_off()             # <<<<<<<<<<<<<<
 *         return answ
 * 
 */
  sig_off();

  /* "automata/cautomata.pyx":5307
 *         answ = c_bool(res)
 *         sig_off()
 *         return answ             # <<<<<<<<<<<<<<
 * 
 * #        d = {}
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_answ);
  __pyx_r = __pyx_v_answ;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":5246
 *         return a
 * 
 *     def included(self, DeterministicAutomaton a, bool pruned=False, bool verb=False):             # <<<<<<<<<<<<<<
 *         r"""
 *         Test if the language of self is included in the language of ``a``
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_4);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.included", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF((PyObject *)__pyx_v_b);
  __Pyx_XDECREF((PyObject *)__pyx_v_a2);
  __Pyx_XDECREF(__pyx_v_A);
  __Pyx_XDECREF(__pyx_v_answ);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "automata/cautomata.pyx":5331
 * 
 * 
 *     def random_word(self, int nmin=-1, int nmax=100):             # <<<<<<<<<<<<<<
 *         r"""
 *         Return a random word recognized by the automaton, by following a
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_147random_word(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_146random_word[] = "\n        Return a random word recognized by the automaton, by following a\n        random path in the automaton from the initial state. If we don't fall\n        into the set of final states before reaching the maximal length\n        ``nmax``, then return ``word not found!``.\n\n        INPUT:\n\n        - ``nmin`` -- (default: -1) - minimal length of the word\n\n        - ``nmax`` -- (default: 100) - maximal length of the word\n\n        OUTPUT:\n\n        Return a random word of length between ``nmin`` and ``nmax`` if found.\n        Otherwise return ``word not found!``.\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"abaa\")\n            sage: a.random_word()\n            ['a', 'b', 'a', 'a']\n\n            sage: a = dag.AnyWord(\"ab\")\n            sage: a.random_word()\n            []\n\n            sage: a = dag.Word(\"aba\").union(dag.Word(\"bab\"))\n            sage: a.random_word()   # random\n            ['a', 'b', 'a']\n\n            sage: a = dag.Empty(['a', 'b'])\n            sage: a.random_word()\n            'word not found!'\n\n        ";
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_147random_word(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_nmin;
  int __pyx_v_nmax;
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("random_word (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&__pyx_n_s_nmin,&__pyx_n_s_nmax,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = PyTuple_GET_SIZE(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = PyDict_Size(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_nmin);
          if (value) { values[0] = value; kw_args--; }
        }
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args > 0) {
          PyObject* value = __Pyx_PyDict_GetItemStr(__pyx_kwds, __pyx_n_s_nmax);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args > 0)) {
        if (unlikely(__Pyx_ParseOptionalKeywords(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "random_word") < 0)) __PYX_ERR(0, 5331, __pyx_L3_error)
      }
    } else {
      switch (PyTuple_GET_SIZE(__pyx_args)) {
        case  2: values[1] = PyTuple_GET_ITEM(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = PyTuple_GET_ITEM(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    if (values[0]) {
      __pyx_v_nmin = __Pyx_PyInt_As_int(values[0]); if (unlikely((__pyx_v_nmin == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 5331, __pyx_L3_error)
    } else {
      __pyx_v_nmin = ((int)-1);
    }
    if (values[1]) {
      __pyx_v_nmax = __Pyx_PyInt_As_int(values[1]); if (unlikely((__pyx_v_nmax == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 5331, __pyx_L3_error)
    } else {
      __pyx_v_nmax = ((int)0x64);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  __Pyx_RaiseArgtupleInvalid("random_word", 0, 0, 2, PyTuple_GET_SIZE(__pyx_args)); __PYX_ERR(0, 5331, __pyx_L3_error)
  __pyx_L3_error:;
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.random_word", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __Pyx_RefNannyFinishContext();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_146random_word(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), __pyx_v_nmin, __pyx_v_nmax);

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_146random_word(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, int __pyx_v_nmin, int __pyx_v_nmax) {
  int __pyx_v_i;
  CYTHON_UNUSED int __pyx_v_j;
  int __pyx_v_l;
  int __pyx_v_na;
  PyObject *__pyx_v_w = 0;
  PyObject *__pyx_v_li = 0;
  PyObject *__pyx_v_random = NULL;
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  int __pyx_t_2;
  PyObject *__pyx_t_3 = NULL;
  Py_ssize_t __pyx_t_4;
  PyObject *__pyx_t_5 = NULL;
  int __pyx_t_6;
  int __pyx_t_7;
  int __pyx_t_8;
  int __pyx_t_9;
  int __pyx_t_10;
  PyObject *__pyx_t_11 = NULL;
  PyObject *__pyx_t_12 = NULL;
  PyObject *__pyx_t_13 = NULL;
  PyObject *__pyx_t_14 = NULL;
  int __pyx_t_15;
  PyObject *__pyx_t_16 = NULL;
  int __pyx_t_17;
  int __pyx_t_18;
  __Pyx_RefNannySetupContext("random_word", 0);

  /* "automata/cautomata.pyx":5370
 *         cdef int i, j, l, na
 *         cdef list w, li
 *         i = self.a.i             # <<<<<<<<<<<<<<
 *         if i == -1:
 *             return "word not found!"
 */
  __pyx_t_1 = __pyx_v_self->a->i;
  __pyx_v_i = __pyx_t_1;

  /* "automata/cautomata.pyx":5371
 *         cdef list w, li
 *         i = self.a.i
 *         if i == -1:             # <<<<<<<<<<<<<<
 *             return "word not found!"
 *         w = []
 */
  __pyx_t_2 = ((__pyx_v_i == -1L) != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":5372
 *         i = self.a.i
 *         if i == -1:
 *             return "word not found!"             # <<<<<<<<<<<<<<
 *         w = []
 *         na = len(self.A)
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_kp_s_word_not_found);
    __pyx_r = __pyx_kp_s_word_not_found;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":5371
 *         cdef list w, li
 *         i = self.a.i
 *         if i == -1:             # <<<<<<<<<<<<<<
 *             return "word not found!"
 *         w = []
 */
  }

  /* "automata/cautomata.pyx":5373
 *         if i == -1:
 *             return "word not found!"
 *         w = []             # <<<<<<<<<<<<<<
 *         na = len(self.A)
 *         if nmin < 0:
 */
  __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5373, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __pyx_v_w = ((PyObject*)__pyx_t_3);
  __pyx_t_3 = 0;

  /* "automata/cautomata.pyx":5374
 *             return "word not found!"
 *         w = []
 *         na = len(self.A)             # <<<<<<<<<<<<<<
 *         if nmin < 0:
 *             nmin = 0
 */
  __pyx_t_3 = __pyx_v_self->A;
  __Pyx_INCREF(__pyx_t_3);
  if (unlikely(__pyx_t_3 == Py_None)) {
    PyErr_SetString(PyExc_TypeError, "object of type 'NoneType' has no len()");
    __PYX_ERR(0, 5374, __pyx_L1_error)
  }
  __pyx_t_4 = PyList_GET_SIZE(__pyx_t_3); if (unlikely(__pyx_t_4 == ((Py_ssize_t)-1))) __PYX_ERR(0, 5374, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_na = __pyx_t_4;

  /* "automata/cautomata.pyx":5375
 *         w = []
 *         na = len(self.A)
 *         if nmin < 0:             # <<<<<<<<<<<<<<
 *             nmin = 0
 *         from sage.misc.prandom import random
 */
  __pyx_t_2 = ((__pyx_v_nmin < 0) != 0);
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":5376
 *         na = len(self.A)
 *         if nmin < 0:
 *             nmin = 0             # <<<<<<<<<<<<<<
 *         from sage.misc.prandom import random
 *         for j in range(nmin):
 */
    __pyx_v_nmin = 0;

    /* "automata/cautomata.pyx":5375
 *         w = []
 *         na = len(self.A)
 *         if nmin < 0:             # <<<<<<<<<<<<<<
 *             nmin = 0
 *         from sage.misc.prandom import random
 */
  }

  /* "automata/cautomata.pyx":5377
 *         if nmin < 0:
 *             nmin = 0
 *         from sage.misc.prandom import random             # <<<<<<<<<<<<<<
 *         for j in range(nmin):
 *             li = [l for l in range(na) if self.successor(i, l) != -1]
 */
  __pyx_t_3 = PyList_New(1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5377, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_n_s_random);
  __Pyx_GIVEREF(__pyx_n_s_random);
  PyList_SET_ITEM(__pyx_t_3, 0, __pyx_n_s_random);
  __pyx_t_5 = __Pyx_Import(__pyx_n_s_sage_misc_prandom, __pyx_t_3, -1); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 5377, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_5);
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_ImportFrom(__pyx_t_5, __pyx_n_s_random); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5377, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_3);
  __Pyx_INCREF(__pyx_t_3);
  __pyx_v_random = __pyx_t_3;
  __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
  __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;

  /* "automata/cautomata.pyx":5378
 *             nmin = 0
 *         from sage.misc.prandom import random
 *         for j in range(nmin):             # <<<<<<<<<<<<<<
 *             li = [l for l in range(na) if self.successor(i, l) != -1]
 *             l = li[(int)(random() * len(li))]
 */
  __pyx_t_1 = __pyx_v_nmin;
  __pyx_t_6 = __pyx_t_1;
  for (__pyx_t_7 = 0; __pyx_t_7 < __pyx_t_6; __pyx_t_7+=1) {
    __pyx_v_j = __pyx_t_7;

    /* "automata/cautomata.pyx":5379
 *         from sage.misc.prandom import random
 *         for j in range(nmin):
 *             li = [l for l in range(na) if self.successor(i, l) != -1]             # <<<<<<<<<<<<<<
 *             l = li[(int)(random() * len(li))]
 *             w.append(self.A[l])
 */
    __pyx_t_5 = PyList_New(0); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 5379, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_8 = __pyx_v_na;
    __pyx_t_9 = __pyx_t_8;
    for (__pyx_t_10 = 0; __pyx_t_10 < __pyx_t_9; __pyx_t_10+=1) {
      __pyx_v_l = __pyx_t_10;
      __pyx_t_11 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_successor); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5379, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __pyx_t_12 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 5379, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __pyx_t_13 = __Pyx_PyInt_From_int(__pyx_v_l); if (unlikely(!__pyx_t_13)) __PYX_ERR(0, 5379, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_13);
      __pyx_t_14 = NULL;
      __pyx_t_15 = 0;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_11))) {
        __pyx_t_14 = PyMethod_GET_SELF(__pyx_t_11);
        if (likely(__pyx_t_14)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
          __Pyx_INCREF(__pyx_t_14);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_11, function);
          __pyx_t_15 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_11)) {
        PyObject *__pyx_temp[3] = {__pyx_t_14, __pyx_t_12, __pyx_t_13};
        __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_15, 2+__pyx_t_15); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5379, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_14); __pyx_t_14 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_11)) {
        PyObject *__pyx_temp[3] = {__pyx_t_14, __pyx_t_12, __pyx_t_13};
        __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_15, 2+__pyx_t_15); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5379, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_14); __pyx_t_14 = 0;
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
        __Pyx_DECREF(__pyx_t_13); __pyx_t_13 = 0;
      } else
      #endif
      {
        __pyx_t_16 = PyTuple_New(2+__pyx_t_15); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 5379, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_16);
        if (__pyx_t_14) {
          __Pyx_GIVEREF(__pyx_t_14); PyTuple_SET_ITEM(__pyx_t_16, 0, __pyx_t_14); __pyx_t_14 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_12);
        PyTuple_SET_ITEM(__pyx_t_16, 0+__pyx_t_15, __pyx_t_12);
        __Pyx_GIVEREF(__pyx_t_13);
        PyTuple_SET_ITEM(__pyx_t_16, 1+__pyx_t_15, __pyx_t_13);
        __pyx_t_12 = 0;
        __pyx_t_13 = 0;
        __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_11, __pyx_t_16, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5379, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_3);
        __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
      }
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __pyx_t_11 = __Pyx_PyInt_NeObjC(__pyx_t_3, __pyx_int_neg_1, -1L, 0); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5379, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_11); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 5379, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      if (__pyx_t_2) {
        __pyx_t_11 = __Pyx_PyInt_From_int(__pyx_v_l); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5379, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        if (unlikely(__Pyx_ListComp_Append(__pyx_t_5, (PyObject*)__pyx_t_11))) __PYX_ERR(0, 5379, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      }
    }
    __Pyx_XDECREF_SET(__pyx_v_li, ((PyObject*)__pyx_t_5));
    __pyx_t_5 = 0;

    /* "automata/cautomata.pyx":5380
 *         for j in range(nmin):
 *             li = [l for l in range(na) if self.successor(i, l) != -1]
 *             l = li[(int)(random() * len(li))]             # <<<<<<<<<<<<<<
 *             w.append(self.A[l])
 *             i = self.successor(i, l)
 */
    __Pyx_INCREF(__pyx_v_random);
    __pyx_t_11 = __pyx_v_random; __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_11))) {
      __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_11);
      if (likely(__pyx_t_3)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
        __Pyx_INCREF(__pyx_t_3);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_11, function);
      }
    }
    __pyx_t_5 = (__pyx_t_3) ? __Pyx_PyObject_CallOneArg(__pyx_t_11, __pyx_t_3) : __Pyx_PyObject_CallNoArg(__pyx_t_11);
    __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
    if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 5380, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_4 = PyList_GET_SIZE(__pyx_v_li); if (unlikely(__pyx_t_4 == ((Py_ssize_t)-1))) __PYX_ERR(0, 5380, __pyx_L1_error)
    __pyx_t_11 = PyInt_FromSsize_t(__pyx_t_4); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5380, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __pyx_t_3 = PyNumber_Multiply(__pyx_t_5, __pyx_t_11); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5380, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_11 = __Pyx_PyNumber_Int(__pyx_t_3); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5380, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyObject_GetItem(__pyx_v_li, __pyx_t_11); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5380, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_8 = __Pyx_PyInt_As_int(__pyx_t_3); if (unlikely((__pyx_t_8 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 5380, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_l = __pyx_t_8;

    /* "automata/cautomata.pyx":5381
 *             li = [l for l in range(na) if self.successor(i, l) != -1]
 *             l = li[(int)(random() * len(li))]
 *             w.append(self.A[l])             # <<<<<<<<<<<<<<
 *             i = self.successor(i, l)
 *         # continue the word to get into a final state
 */
    if (unlikely(__pyx_v_self->A == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 5381, __pyx_L1_error)
    }
    __pyx_t_3 = __Pyx_GetItemInt_List(__pyx_v_self->A, __pyx_v_l, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5381, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_w, __pyx_t_3); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 5381, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":5382
 *             l = li[(int)(random() * len(li))]
 *             w.append(self.A[l])
 *             i = self.successor(i, l)             # <<<<<<<<<<<<<<
 *         # continue the word to get into a final state
 *         for j in range(nmax-nmin):
 */
    __pyx_t_11 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_successor); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5382, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __pyx_t_5 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 5382, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_5);
    __pyx_t_16 = __Pyx_PyInt_From_int(__pyx_v_l); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 5382, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_16);
    __pyx_t_13 = NULL;
    __pyx_t_8 = 0;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_11))) {
      __pyx_t_13 = PyMethod_GET_SELF(__pyx_t_11);
      if (likely(__pyx_t_13)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_11);
        __Pyx_INCREF(__pyx_t_13);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_11, function);
        __pyx_t_8 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_11)) {
      PyObject *__pyx_temp[3] = {__pyx_t_13, __pyx_t_5, __pyx_t_16};
      __pyx_t_3 = __Pyx_PyFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5382, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_11)) {
      PyObject *__pyx_temp[3] = {__pyx_t_13, __pyx_t_5, __pyx_t_16};
      __pyx_t_3 = __Pyx_PyCFunction_FastCall(__pyx_t_11, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5382, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
    } else
    #endif
    {
      __pyx_t_12 = PyTuple_New(2+__pyx_t_8); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 5382, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      if (__pyx_t_13) {
        __Pyx_GIVEREF(__pyx_t_13); PyTuple_SET_ITEM(__pyx_t_12, 0, __pyx_t_13); __pyx_t_13 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_5);
      PyTuple_SET_ITEM(__pyx_t_12, 0+__pyx_t_8, __pyx_t_5);
      __Pyx_GIVEREF(__pyx_t_16);
      PyTuple_SET_ITEM(__pyx_t_12, 1+__pyx_t_8, __pyx_t_16);
      __pyx_t_5 = 0;
      __pyx_t_16 = 0;
      __pyx_t_3 = __Pyx_PyObject_Call(__pyx_t_11, __pyx_t_12, NULL); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5382, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_3);
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
    }
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_8 = __Pyx_PyInt_As_int(__pyx_t_3); if (unlikely((__pyx_t_8 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 5382, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_v_i = __pyx_t_8;
  }

  /* "automata/cautomata.pyx":5384
 *             i = self.successor(i, l)
 *         # continue the word to get into a final state
 *         for j in range(nmax-nmin):             # <<<<<<<<<<<<<<
 *             if self.a.e[i].final:
 *                 break
 */
  __pyx_t_1 = (__pyx_v_nmax - __pyx_v_nmin);
  __pyx_t_6 = __pyx_t_1;
  for (__pyx_t_7 = 0; __pyx_t_7 < __pyx_t_6; __pyx_t_7+=1) {
    __pyx_v_j = __pyx_t_7;

    /* "automata/cautomata.pyx":5385
 *         # continue the word to get into a final state
 *         for j in range(nmax-nmin):
 *             if self.a.e[i].final:             # <<<<<<<<<<<<<<
 *                 break
 *             li = [l for l in range(na) if self.successor(i, l) != -1]
 */
    __pyx_t_2 = ((__pyx_v_self->a->e[__pyx_v_i]).final != 0);
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":5386
 *         for j in range(nmax-nmin):
 *             if self.a.e[i].final:
 *                 break             # <<<<<<<<<<<<<<
 *             li = [l for l in range(na) if self.successor(i, l) != -1]
 *             if li == []:
 */
      goto __pyx_L11_break;

      /* "automata/cautomata.pyx":5385
 *         # continue the word to get into a final state
 *         for j in range(nmax-nmin):
 *             if self.a.e[i].final:             # <<<<<<<<<<<<<<
 *                 break
 *             li = [l for l in range(na) if self.successor(i, l) != -1]
 */
    }

    /* "automata/cautomata.pyx":5387
 *             if self.a.e[i].final:
 *                 break
 *             li = [l for l in range(na) if self.successor(i, l) != -1]             # <<<<<<<<<<<<<<
 *             if li == []:
 *                 return "word not found!"
 */
    __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5387, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_8 = __pyx_v_na;
    __pyx_t_9 = __pyx_t_8;
    for (__pyx_t_10 = 0; __pyx_t_10 < __pyx_t_9; __pyx_t_10+=1) {
      __pyx_v_l = __pyx_t_10;
      __pyx_t_12 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_successor); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 5387, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __pyx_t_16 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 5387, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_16);
      __pyx_t_5 = __Pyx_PyInt_From_int(__pyx_v_l); if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 5387, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_5);
      __pyx_t_13 = NULL;
      __pyx_t_15 = 0;
      if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_12))) {
        __pyx_t_13 = PyMethod_GET_SELF(__pyx_t_12);
        if (likely(__pyx_t_13)) {
          PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_12);
          __Pyx_INCREF(__pyx_t_13);
          __Pyx_INCREF(function);
          __Pyx_DECREF_SET(__pyx_t_12, function);
          __pyx_t_15 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (PyFunction_Check(__pyx_t_12)) {
        PyObject *__pyx_temp[3] = {__pyx_t_13, __pyx_t_16, __pyx_t_5};
        __pyx_t_11 = __Pyx_PyFunction_FastCall(__pyx_t_12, __pyx_temp+1-__pyx_t_15, 2+__pyx_t_15); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5387, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (__Pyx_PyFastCFunction_Check(__pyx_t_12)) {
        PyObject *__pyx_temp[3] = {__pyx_t_13, __pyx_t_16, __pyx_t_5};
        __pyx_t_11 = __Pyx_PyCFunction_FastCall(__pyx_t_12, __pyx_temp+1-__pyx_t_15, 2+__pyx_t_15); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5387, __pyx_L1_error)
        __Pyx_XDECREF(__pyx_t_13); __pyx_t_13 = 0;
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
        __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      {
        __pyx_t_14 = PyTuple_New(2+__pyx_t_15); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 5387, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_14);
        if (__pyx_t_13) {
          __Pyx_GIVEREF(__pyx_t_13); PyTuple_SET_ITEM(__pyx_t_14, 0, __pyx_t_13); __pyx_t_13 = NULL;
        }
        __Pyx_GIVEREF(__pyx_t_16);
        PyTuple_SET_ITEM(__pyx_t_14, 0+__pyx_t_15, __pyx_t_16);
        __Pyx_GIVEREF(__pyx_t_5);
        PyTuple_SET_ITEM(__pyx_t_14, 1+__pyx_t_15, __pyx_t_5);
        __pyx_t_16 = 0;
        __pyx_t_5 = 0;
        __pyx_t_11 = __Pyx_PyObject_Call(__pyx_t_12, __pyx_t_14, NULL); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5387, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_11);
        __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
      }
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __pyx_t_12 = __Pyx_PyInt_NeObjC(__pyx_t_11, __pyx_int_neg_1, -1L, 0); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 5387, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_12);
      __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
      __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 5387, __pyx_L1_error)
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      if (__pyx_t_2) {
        __pyx_t_12 = __Pyx_PyInt_From_int(__pyx_v_l); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 5387, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_12);
        if (unlikely(__Pyx_ListComp_Append(__pyx_t_3, (PyObject*)__pyx_t_12))) __PYX_ERR(0, 5387, __pyx_L1_error)
        __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      }
    }
    __Pyx_XDECREF_SET(__pyx_v_li, ((PyObject*)__pyx_t_3));
    __pyx_t_3 = 0;

    /* "automata/cautomata.pyx":5388
 *                 break
 *             li = [l for l in range(na) if self.successor(i, l) != -1]
 *             if li == []:             # <<<<<<<<<<<<<<
 *                 return "word not found!"
 *             l = li[(int)(random() * len(li))]
 */
    __pyx_t_3 = PyList_New(0); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5388, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_12 = PyObject_RichCompare(__pyx_v_li, __pyx_t_3, Py_EQ); __Pyx_XGOTREF(__pyx_t_12); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 5388, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_2 = __Pyx_PyObject_IsTrue(__pyx_t_12); if (unlikely(__pyx_t_2 < 0)) __PYX_ERR(0, 5388, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
    if (__pyx_t_2) {

      /* "automata/cautomata.pyx":5389
 *             li = [l for l in range(na) if self.successor(i, l) != -1]
 *             if li == []:
 *                 return "word not found!"             # <<<<<<<<<<<<<<
 *             l = li[(int)(random() * len(li))]
 *             w.append(self.A[l])
 */
      __Pyx_XDECREF(__pyx_r);
      __Pyx_INCREF(__pyx_kp_s_word_not_found);
      __pyx_r = __pyx_kp_s_word_not_found;
      goto __pyx_L0;

      /* "automata/cautomata.pyx":5388
 *                 break
 *             li = [l for l in range(na) if self.successor(i, l) != -1]
 *             if li == []:             # <<<<<<<<<<<<<<
 *                 return "word not found!"
 *             l = li[(int)(random() * len(li))]
 */
    }

    /* "automata/cautomata.pyx":5390
 *             if li == []:
 *                 return "word not found!"
 *             l = li[(int)(random() * len(li))]             # <<<<<<<<<<<<<<
 *             w.append(self.A[l])
 *             i = self.successor(i, l)
 */
    __Pyx_INCREF(__pyx_v_random);
    __pyx_t_3 = __pyx_v_random; __pyx_t_11 = NULL;
    if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_11 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_11)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_11);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
      }
    }
    __pyx_t_12 = (__pyx_t_11) ? __Pyx_PyObject_CallOneArg(__pyx_t_3, __pyx_t_11) : __Pyx_PyObject_CallNoArg(__pyx_t_3);
    __Pyx_XDECREF(__pyx_t_11); __pyx_t_11 = 0;
    if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 5390, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_12);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_4 = PyList_GET_SIZE(__pyx_v_li); if (unlikely(__pyx_t_4 == ((Py_ssize_t)-1))) __PYX_ERR(0, 5390, __pyx_L1_error)
    __pyx_t_3 = PyInt_FromSsize_t(__pyx_t_4); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5390, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_11 = PyNumber_Multiply(__pyx_t_12, __pyx_t_3); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5390, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = __Pyx_PyNumber_Int(__pyx_t_11); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5390, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_t_11 = __Pyx_PyObject_GetItem(__pyx_v_li, __pyx_t_3); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5390, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_8 = __Pyx_PyInt_As_int(__pyx_t_11); if (unlikely((__pyx_t_8 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 5390, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_v_l = __pyx_t_8;

    /* "automata/cautomata.pyx":5391
 *                 return "word not found!"
 *             l = li[(int)(random() * len(li))]
 *             w.append(self.A[l])             # <<<<<<<<<<<<<<
 *             i = self.successor(i, l)
 *         if i < 0 or not self.a.e[i].final:
 */
    if (unlikely(__pyx_v_self->A == Py_None)) {
      PyErr_SetString(PyExc_TypeError, "'NoneType' object is not subscriptable");
      __PYX_ERR(0, 5391, __pyx_L1_error)
    }
    __pyx_t_11 = __Pyx_GetItemInt_List(__pyx_v_self->A, __pyx_v_l, int, 1, __Pyx_PyInt_From_int, 1, 1, 1); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5391, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_11);
    __pyx_t_17 = __Pyx_PyList_Append(__pyx_v_w, __pyx_t_11); if (unlikely(__pyx_t_17 == ((int)-1))) __PYX_ERR(0, 5391, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;

    /* "automata/cautomata.pyx":5392
 *             l = li[(int)(random() * len(li))]
 *             w.append(self.A[l])
 *             i = self.successor(i, l)             # <<<<<<<<<<<<<<
 *         if i < 0 or not self.a.e[i].final:
 *             return "word not found!"
 */
    __pyx_t_3 = __Pyx_PyObject_GetAttrStr(((PyObject *)__pyx_v_self), __pyx_n_s_successor); if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 5392, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_3);
    __pyx_t_12 = __Pyx_PyInt_From_int(__pyx_v_i); if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 5392, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_12);
    __pyx_t_14 = __Pyx_PyInt_From_int(__pyx_v_l); if (unlikely(!__pyx_t_14)) __PYX_ERR(0, 5392, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_14);
    __pyx_t_5 = NULL;
    __pyx_t_8 = 0;
    if (CYTHON_UNPACK_METHODS && likely(PyMethod_Check(__pyx_t_3))) {
      __pyx_t_5 = PyMethod_GET_SELF(__pyx_t_3);
      if (likely(__pyx_t_5)) {
        PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_3);
        __Pyx_INCREF(__pyx_t_5);
        __Pyx_INCREF(function);
        __Pyx_DECREF_SET(__pyx_t_3, function);
        __pyx_t_8 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_12, __pyx_t_14};
      __pyx_t_11 = __Pyx_PyFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5392, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_12, __pyx_t_14};
      __pyx_t_11 = __Pyx_PyCFunction_FastCall(__pyx_t_3, __pyx_temp+1-__pyx_t_8, 2+__pyx_t_8); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5392, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_5); __pyx_t_5 = 0;
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_12); __pyx_t_12 = 0;
      __Pyx_DECREF(__pyx_t_14); __pyx_t_14 = 0;
    } else
    #endif
    {
      __pyx_t_16 = PyTuple_New(2+__pyx_t_8); if (unlikely(!__pyx_t_16)) __PYX_ERR(0, 5392, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_16);
      if (__pyx_t_5) {
        __Pyx_GIVEREF(__pyx_t_5); PyTuple_SET_ITEM(__pyx_t_16, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      __Pyx_GIVEREF(__pyx_t_12);
      PyTuple_SET_ITEM(__pyx_t_16, 0+__pyx_t_8, __pyx_t_12);
      __Pyx_GIVEREF(__pyx_t_14);
      PyTuple_SET_ITEM(__pyx_t_16, 1+__pyx_t_8, __pyx_t_14);
      __pyx_t_12 = 0;
      __pyx_t_14 = 0;
      __pyx_t_11 = __Pyx_PyObject_Call(__pyx_t_3, __pyx_t_16, NULL); if (unlikely(!__pyx_t_11)) __PYX_ERR(0, 5392, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_11);
      __Pyx_DECREF(__pyx_t_16); __pyx_t_16 = 0;
    }
    __Pyx_DECREF(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_8 = __Pyx_PyInt_As_int(__pyx_t_11); if (unlikely((__pyx_t_8 == (int)-1) && PyErr_Occurred())) __PYX_ERR(0, 5392, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_11); __pyx_t_11 = 0;
    __pyx_v_i = __pyx_t_8;
  }
  __pyx_L11_break:;

  /* "automata/cautomata.pyx":5393
 *             w.append(self.A[l])
 *             i = self.successor(i, l)
 *         if i < 0 or not self.a.e[i].final:             # <<<<<<<<<<<<<<
 *             return "word not found!"
 *         return w
 */
  __pyx_t_18 = ((__pyx_v_i < 0) != 0);
  if (!__pyx_t_18) {
  } else {
    __pyx_t_2 = __pyx_t_18;
    goto __pyx_L18_bool_binop_done;
  }
  __pyx_t_18 = ((!((__pyx_v_self->a->e[__pyx_v_i]).final != 0)) != 0);
  __pyx_t_2 = __pyx_t_18;
  __pyx_L18_bool_binop_done:;
  if (__pyx_t_2) {

    /* "automata/cautomata.pyx":5394
 *             i = self.successor(i, l)
 *         if i < 0 or not self.a.e[i].final:
 *             return "word not found!"             # <<<<<<<<<<<<<<
 *         return w
 */
    __Pyx_XDECREF(__pyx_r);
    __Pyx_INCREF(__pyx_kp_s_word_not_found);
    __pyx_r = __pyx_kp_s_word_not_found;
    goto __pyx_L0;

    /* "automata/cautomata.pyx":5393
 *             w.append(self.A[l])
 *             i = self.successor(i, l)
 *         if i < 0 or not self.a.e[i].final:             # <<<<<<<<<<<<<<
 *             return "word not found!"
 *         return w
 */
  }

  /* "automata/cautomata.pyx":5395
 *         if i < 0 or not self.a.e[i].final:
 *             return "word not found!"
 *         return w             # <<<<<<<<<<<<<<
 */
  __Pyx_XDECREF(__pyx_r);
  __Pyx_INCREF(__pyx_v_w);
  __pyx_r = __pyx_v_w;
  goto __pyx_L0;

  /* "automata/cautomata.pyx":5331
 * 
 * 
 *     def random_word(self, int nmin=-1, int nmax=100):             # <<<<<<<<<<<<<<
 *         r"""
 *         Return a random word recognized by the automaton, by following a
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_3);
  __Pyx_XDECREF(__pyx_t_5);
  __Pyx_XDECREF(__pyx_t_11);
  __Pyx_XDECREF(__pyx_t_12);
  __Pyx_XDECREF(__pyx_t_13);
  __Pyx_XDECREF(__pyx_t_14);
  __Pyx_XDECREF(__pyx_t_16);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.random_word", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __Pyx_XDECREF(__pyx_v_w);
  __Pyx_XDECREF(__pyx_v_li);
  __Pyx_XDECREF(__pyx_v_random);
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_149__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_149__reduce_cython__(PyObject *__pyx_v_self, CYTHON_UNUSED PyObject *unused) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__reduce_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_148__reduce_cython__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_148__reduce_cython__(CYTHON_UNUSED struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__reduce_cython__", 0);

  /* "(tree fragment)":2
 * def __reduce_cython__(self):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")             # <<<<<<<<<<<<<<
 * def __setstate_cython__(self, __pyx_state):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 */
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_TypeError, __pyx_tuple__69, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 2, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_Raise(__pyx_t_1, 0, 0, 0);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __PYX_ERR(1, 2, __pyx_L1_error)

  /* "(tree fragment)":1
 * def __reduce_cython__(self):             # <<<<<<<<<<<<<<
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.__reduce_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "(tree fragment)":3
 * def __reduce_cython__(self):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 */

/* Python wrapper */
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_151__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state); /*proto*/
static PyObject *__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_151__setstate_cython__(PyObject *__pyx_v_self, PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = 0;
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__setstate_cython__ (wrapper)", 0);
  __pyx_r = __pyx_pf_8automata_9cautomata_22DeterministicAutomaton_150__setstate_cython__(((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)__pyx_v_self), ((PyObject *)__pyx_v___pyx_state));

  /* function exit code */
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

static PyObject *__pyx_pf_8automata_9cautomata_22DeterministicAutomaton_150__setstate_cython__(CYTHON_UNUSED struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *__pyx_v_self, CYTHON_UNUSED PyObject *__pyx_v___pyx_state) {
  PyObject *__pyx_r = NULL;
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__setstate_cython__", 0);

  /* "(tree fragment)":4
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")             # <<<<<<<<<<<<<<
 */
  __pyx_t_1 = __Pyx_PyObject_Call(__pyx_builtin_TypeError, __pyx_tuple__70, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(1, 4, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_Raise(__pyx_t_1, 0, 0, 0);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __PYX_ERR(1, 4, __pyx_L1_error)

  /* "(tree fragment)":3
 * def __reduce_cython__(self):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):             # <<<<<<<<<<<<<<
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 */

  /* function exit code */
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_AddTraceback("automata.cautomata.DeterministicAutomaton.__setstate_cython__", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __Pyx_XGIVEREF(__pyx_r);
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "cysignals/signals.pxd":55
 * # (PyErr_Occurred() is non-NULL). To Cython, it will look like
 * # cython_check_exception() actually raised the exception.
 * cdef inline void cython_check_exception() nogil except *:             # <<<<<<<<<<<<<<
 *     pass
 * 
 */

static CYTHON_INLINE void __pyx_f_9cysignals_7signals_cython_check_exception(void) {

  /* function exit code */
}

/* "cysignals/signals.pxd":61
 * cdef void verify_exc_value()
 * 
 * cdef inline PyObject* sig_occurred():             # <<<<<<<<<<<<<<
 *     """
 *     Borrowed reference to the exception which is currently being
 */

static CYTHON_INLINE PyObject *__pyx_f_9cysignals_7signals_sig_occurred(void) {
  PyObject *__pyx_r;
  __Pyx_RefNannyDeclarations
  int __pyx_t_1;
  __Pyx_RefNannySetupContext("sig_occurred", 0);

  /* "cysignals/signals.pxd":75
 *     exception is stored somewhere.
 *     """
 *     if unlikely(cysigs.exc_value is not NULL):             # <<<<<<<<<<<<<<
 *         verify_exc_value()
 *     return cysigs.exc_value
 */
  __pyx_t_1 = (unlikely((cysigs.exc_value != NULL)) != 0);
  if (__pyx_t_1) {

    /* "cysignals/signals.pxd":76
 *     """
 *     if unlikely(cysigs.exc_value is not NULL):
 *         verify_exc_value()             # <<<<<<<<<<<<<<
 *     return cysigs.exc_value
 * 
 */
    __pyx_f_9cysignals_7signals_verify_exc_value();

    /* "cysignals/signals.pxd":75
 *     exception is stored somewhere.
 *     """
 *     if unlikely(cysigs.exc_value is not NULL):             # <<<<<<<<<<<<<<
 *         verify_exc_value()
 *     return cysigs.exc_value
 */
  }

  /* "cysignals/signals.pxd":77
 *     if unlikely(cysigs.exc_value is not NULL):
 *         verify_exc_value()
 *     return cysigs.exc_value             # <<<<<<<<<<<<<<
 * 
 * 
 */
  __pyx_r = cysigs.exc_value;
  goto __pyx_L0;

  /* "cysignals/signals.pxd":61
 * cdef void verify_exc_value()
 * 
 * cdef inline PyObject* sig_occurred():             # <<<<<<<<<<<<<<
 *     """
 *     Borrowed reference to the exception which is currently being
 */

  /* function exit code */
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  return __pyx_r;
}

/* "cysignals/signals.pxd":91
 * 
 * 
 * cdef inline void __generate_declarations():             # <<<<<<<<<<<<<<
 *     cysigs
 *     _sig_on_interrupt_received
 */

static CYTHON_INLINE void __pyx_f_9cysignals_7signals___generate_declarations(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__generate_declarations", 0);

  /* "cysignals/signals.pxd":92
 * 
 * cdef inline void __generate_declarations():
 *     cysigs             # <<<<<<<<<<<<<<
 *     _sig_on_interrupt_received
 *     _sig_on_recover
 */
  (void)(cysigs);

  /* "cysignals/signals.pxd":93
 * cdef inline void __generate_declarations():
 *     cysigs
 *     _sig_on_interrupt_received             # <<<<<<<<<<<<<<
 *     _sig_on_recover
 *     _sig_off_warning
 */
  (void)(_sig_on_interrupt_received);

  /* "cysignals/signals.pxd":94
 *     cysigs
 *     _sig_on_interrupt_received
 *     _sig_on_recover             # <<<<<<<<<<<<<<
 *     _sig_off_warning
 *     print_backtrace
 */
  (void)(_sig_on_recover);

  /* "cysignals/signals.pxd":95
 *     _sig_on_interrupt_received
 *     _sig_on_recover
 *     _sig_off_warning             # <<<<<<<<<<<<<<
 *     print_backtrace
 */
  (void)(_sig_off_warning);

  /* "cysignals/signals.pxd":96
 *     _sig_on_recover
 *     _sig_off_warning
 *     print_backtrace             # <<<<<<<<<<<<<<
 */
  (void)(print_backtrace);

  /* "cysignals/signals.pxd":91
 * 
 * 
 * cdef inline void __generate_declarations():             # <<<<<<<<<<<<<<
 *     cysigs
 *     _sig_on_interrupt_received
 */

  /* function exit code */
  __Pyx_RefNannyFinishContext();
}

static PyObject *__pyx_tp_new_8automata_9cautomata_DeterministicAutomaton(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *p;
  PyObject *o;
  if (likely((t->tp_flags & Py_TPFLAGS_IS_ABSTRACT) == 0)) {
    o = (*t->tp_alloc)(t, 0);
  } else {
    o = (PyObject *) PyBaseObject_Type.tp_new(t, __pyx_empty_tuple, 0);
  }
  if (unlikely(!o)) return 0;
  p = ((struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)o);
  p->A = ((PyObject*)Py_None); Py_INCREF(Py_None);
  p->S = ((PyObject*)Py_None); Py_INCREF(Py_None);
  if (unlikely(__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_1__cinit__(o, __pyx_empty_tuple, NULL) < 0)) goto bad;
  return o;
  bad:
  Py_DECREF(o); o = 0;
  return NULL;
}

static void __pyx_tp_dealloc_8automata_9cautomata_DeterministicAutomaton(PyObject *o) {
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *p = (struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)o;
  #if CYTHON_USE_TP_FINALIZE
  if (unlikely(PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE) && Py_TYPE(o)->tp_finalize) && !_PyGC_FINALIZED(o)) {
    if (PyObject_CallFinalizerFromDealloc(o)) return;
  }
  #endif
  PyObject_GC_UnTrack(o);
  {
    PyObject *etype, *eval, *etb;
    PyErr_Fetch(&etype, &eval, &etb);
    ++Py_REFCNT(o);
    __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_5__dealloc__(o);
    --Py_REFCNT(o);
    PyErr_Restore(etype, eval, etb);
  }
  Py_CLEAR(p->A);
  Py_CLEAR(p->S);
  (*Py_TYPE(o)->tp_free)(o);
}

static int __pyx_tp_traverse_8automata_9cautomata_DeterministicAutomaton(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *p = (struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)o;
  if (p->A) {
    e = (*v)(p->A, a); if (e) return e;
  }
  if (p->S) {
    e = (*v)(p->S, a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_8automata_9cautomata_DeterministicAutomaton(PyObject *o) {
  PyObject* tmp;
  struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *p = (struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton *)o;
  tmp = ((PyObject*)p->A);
  p->A = ((PyObject*)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->S);
  p->S = ((PyObject*)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  return 0;
}

static PyObject *__pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_alphabet(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_8alphabet_1__get__(o);
}

static PyObject *__pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_initial_state(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_13initial_state_1__get__(o);
}

static PyObject *__pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_final_states(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_12final_states_1__get__(o);
}

static PyObject *__pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_states(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_6states_1__get__(o);
}

static PyObject *__pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_n_states(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_8n_states_1__get__(o);
}

static PyObject *__pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_n_letters(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_9n_letters_1__get__(o);
}

static PyMethodDef __pyx_methods_8automata_9cautomata_DeterministicAutomaton[] = {
  {"copy", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_7copy, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_6copy},
  {"__copy__", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_9__copy__, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_8__copy__},
  {"_latex_", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_13_latex_, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_12_latex_},
  {"string", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_17string, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_16string},
  {"is_equal_to", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_19is_equal_to, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_18is_equal_to},
  {"get_automaton", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_23get_automaton, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_22get_automaton},
  {"get_digraph", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_25get_digraph, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_24get_digraph},
  {"plot", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_27plot, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_26plot},
  {"set_alphabet", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_29set_alphabet, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_28set_alphabet},
  {"set_initial_state", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_31set_initial_state, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_30set_initial_state},
  {"set_final_states", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_33set_final_states, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_32set_final_states},
  {"is_final", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_35is_final, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_34is_final},
  {"set_final", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_37set_final, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_36set_final},
  {"successor", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_39successor, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_38successor},
  {"successors", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_41successors, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_40successors},
  {"path", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_43path, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_42path},
  {"set_successor", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_45set_successor, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_44set_successor},
  {"zero_complete_in_place", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_47zero_complete_in_place, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_46zero_complete_in_place},
  {"concatenate_with_zero_star", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_49concatenate_with_zero_star, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_48concatenate_with_zero_star},
  {"left_concatenate_with_zero_star", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_51left_concatenate_with_zero_star, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_50left_concatenate_with_zero_star},
  {"difference", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_53difference, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_52difference},
  {"prune_stop", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_55prune_stop, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_54prune_stop},
  {"prune_non_reachable", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_57prune_non_reachable, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_56prune_non_reachable},
  {"prune", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_59prune, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_58prune},
  {"product", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_61product, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_60product},
  {"intersection", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_63intersection, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_62intersection},
  {"is_complete", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_65is_complete, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_64is_complete},
  {"complete_in_place", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_67complete_in_place, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_66complete_in_place},
  {"prefix", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_69prefix, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_68prefix},
  {"prefix_closure", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_71prefix_closure, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_70prefix_closure},
  {"union", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_73union, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_72union},
  {"split", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_75split, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_74split},
  {"shift_in_place", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_77shift_in_place, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_76shift_in_place},
  {"shift_list_in_place", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_79shift_list_in_place, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_78shift_list_in_place},
  {"unshift", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_81unshift, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_80unshift},
  {"unshift_list", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_83unshift_list, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_82unshift_list},
  {"get_cautomaton", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_85get_cautomaton, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_84get_cautomaton},
  {"concatenate", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_87concatenate, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_86concatenate},
  {"project", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_89project, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_88project},
  {"project_on_ith", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_91project_on_ith, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_90project_on_ith},
  {"duplicate_transitions", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_93duplicate_transitions, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_92duplicate_transitions},
  {"relabel_in_place", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_95relabel_in_place, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_94relabel_in_place},
  {"permut", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_97permut, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_96permut},
  {"permut_in_place", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_99permut_in_place, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_98permut_in_place},
  {"mirror_deterministic", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_101mirror_deterministic, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_100mirror_deterministic},
  {"mirror", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_103mirror, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_102mirror},
  {"strongly_connected_components", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_105strongly_connected_components, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_104strongly_connected_components},
  {"sub_automaton", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_107sub_automaton, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_106sub_automaton},
  {"simplify", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_109simplify, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_108simplify},
  {"minimize", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_111minimize, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_110minimize},
  {"adjacency_matrix", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_113adjacency_matrix, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_112adjacency_matrix},
  {"delete_state", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_115delete_state, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_114delete_state},
  {"delete_state_in_place", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_117delete_state_in_place, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_116delete_state_in_place},
  {"spectral_radius", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_119spectral_radius, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_118spectral_radius},
  {"has_empty_language", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_121has_empty_language, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_120has_empty_language},
  {"has_same_language_as", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_123has_same_language_as, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_122has_same_language_as},
  {"intersect", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_125intersect, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_124intersect},
  {"find_word", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_127find_word, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_126find_word},
  {"shortest_word", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_129shortest_word, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_128shortest_word},
  {"shortest_words", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_131shortest_words, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_130shortest_words},
  {"recognized_word", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_133recognized_word, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_132recognized_word},
  {"add_state", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_135add_state, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_134add_state},
  {"add_transition", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_137add_transition, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_136add_transition},
  {"bigger_alphabet", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_139bigger_alphabet, METH_O, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_138bigger_alphabet},
  {"complementary_in_place", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_141complementary_in_place, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_140complementary_in_place},
  {"complementary", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_143complementary, METH_NOARGS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_142complementary},
  {"included", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_145included, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_144included},
  {"random_word", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_147random_word, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_146random_word},
  {"__reduce_cython__", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_149__reduce_cython__, METH_NOARGS, 0},
  {"__setstate_cython__", (PyCFunction)__pyx_pw_8automata_9cautomata_22DeterministicAutomaton_151__setstate_cython__, METH_O, 0},
  {0, 0, 0, 0}
};

static struct PyGetSetDef __pyx_getsets_8automata_9cautomata_DeterministicAutomaton[] = {
  {(char *)"alphabet", __pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_alphabet, 0, (char *)"\n        To get the :class:`DeterministicAutomaton` attribut alphabet\n\n        OUTPUT:\n\n        Return the alphabet ``A`` of the :class:`DeterministicAutomaton`\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.alphabet\n            ['a', 'b']\n\n            sage: a = dag.Word(['a', 1, None])\n            sage: a.alphabet\n            ['a', 1, None]\n        ", 0},
  {(char *)"initial_state", __pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_initial_state, 0, (char *)"\n        Get the initial state of the :class:`DeterministicAutomaton`\n\n        OUTPUT:\n\n        Return an int, index of the initial state ``i`` of :class:`DeterministicAutomaton`,\n        or -1 if there is no initial state.\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.initial_state\n            -1\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')], i=2)\n            sage: a.initial_state\n            2\n        ", 0},
  {(char *)"final_states", __pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_final_states, 0, (char *)"\n        Indicate all final states\n\n        OUTPUT:\n\n        Return the list of final states\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: a.final_states\n            [0, 1, 2, 3]\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')], final_states=[0,3])\n            sage: a.final_states\n            [0, 3]\n            sage: a = dag.Word(['a', 'b', None])\n            sage: a.final_states\n            [3]\n        ", 0},
  {(char *)"states", __pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_states, 0, (char *)"\n        Indicate all states of the automaton\n\n        OUTPUT:\n\n        Return the list of states\n\n        EXAMPLES::\n\n            sage: a = dag.Word(['a', 'b', None])\n            sage: a.states\n            [0, 1, 2, 3]\n        ", 0},
  {(char *)"n_states", __pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_n_states, 0, (char *)"\n        return the numbers of states\n\n        OUTPUT:\n\n        int\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"abaa\")\n            sage: a.n_states\n            5\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.n_states\n            4\n\n        ", 0},
  {(char *)"n_letters", __pyx_getprop_8automata_9cautomata_22DeterministicAutomaton_n_letters, 0, (char *)"\n        return the numbers of letters of the alphabet.\n\n        OUTPUT:\n\n        int\n\n        EXAMPLES::\n\n            sage: a = dag.Word(\"abaaca\")\n            sage: a.n_letters\n            3\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: a.n_letters\n            2\n\n        ", 0},
  {0, 0, 0, 0, 0}
};

static PyTypeObject __pyx_type_8automata_9cautomata_DeterministicAutomaton = {
  PyVarObject_HEAD_INIT(0, 0)
  "automata.cautomata.DeterministicAutomaton", /*tp_name*/
  sizeof(struct __pyx_obj_8automata_9cautomata_DeterministicAutomaton), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_8automata_9cautomata_DeterministicAutomaton, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  #if PY_MAJOR_VERSION < 3
  0, /*tp_compare*/
  #endif
  #if PY_MAJOR_VERSION >= 3
  0, /*tp_as_async*/
  #endif
  __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_11__repr__, /*tp_repr*/
  0, /*tp_as_number*/
  0, /*tp_as_sequence*/
  0, /*tp_as_mapping*/
  __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_15__hash__, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  0, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  "\n    Class :class:`DeterministicAutomaton`, this class encapsulates a C structure\n    for deterministic automata and implement methods to manipulate them.\n\n    EXAMPLES::\n\n        sage: DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n        DeterministicAutomaton with 4 states and an alphabet of 2 letters\n        sage: d = DiGraph({0: [1,2,3], 1: [0,2]})\n        sage: DeterministicAutomaton(d)\n        Warning: the automaton was not deterministic! (edge 0 -None-> 1 and edge 0 -None-> 2)\n        The result lost some informations.\n        DeterministicAutomaton with 4 states and an alphabet of 1 letter\n        sage: g = DiGraph({0:{1:'x',2:'z',3:'a'}, 2:{5:'o'}})\n        sage: DeterministicAutomaton(g)\n        DeterministicAutomaton with 5 states and an alphabet of 4 letters\n        sage: a = DeterministicAutomaton([(0, 1,'a') ,(2, 3,'b')], i = 2)\n        sage: a\n        DeterministicAutomaton with 4 states and an alphabet of 2 letters\n        sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')], final_states=[0,3])\n        sage: a\n        DeterministicAutomaton with 4 states and an alphabet of 2 letters\n        sage: b = DeterministicAutomaton(a)\n        sage: b\n        DeterministicAutomaton with 4 states and an alphabet of 2 letters\n        sage: c = Automaton({0:{1:'x',2:'z',3:'a'}, 2:{5:'o'}},initial_states=[0])\n        sage: b = DeterministicAutomaton(c)\n        sage: b\n        DeterministicAutomaton with 5 states and an alphabet of 4 letters\n        sage: dag.AnyWord([0, 1, 'a'])\n        DeterministicAutomaton with 1 state and an alphabet of 3 letters\n        sage: dag.Random(n=40, A=[None, -1, 1,2,3,'x','y','z'])  # random\n\n    ", /*tp_doc*/
  __pyx_tp_traverse_8automata_9cautomata_DeterministicAutomaton, /*tp_traverse*/
  __pyx_tp_clear_8automata_9cautomata_DeterministicAutomaton, /*tp_clear*/
  __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_21__richcmp__, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  __pyx_methods_8automata_9cautomata_DeterministicAutomaton, /*tp_methods*/
  0, /*tp_members*/
  __pyx_getsets_8automata_9cautomata_DeterministicAutomaton, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  __pyx_pw_8automata_9cautomata_22DeterministicAutomaton_3__init__, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_8automata_9cautomata_DeterministicAutomaton, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
  0, /*tp_del*/
  0, /*tp_version_tag*/
  #if PY_VERSION_HEX >= 0x030400a1
  0, /*tp_finalize*/
  #endif
};

static PyObject *__pyx_tp_new_8automata_9cautomata_CAutomaton(PyTypeObject *t, CYTHON_UNUSED PyObject *a, CYTHON_UNUSED PyObject *k) {
  struct __pyx_obj_8automata_9cautomata_CAutomaton *p;
  PyObject *o;
  if (likely((t->tp_flags & Py_TPFLAGS_IS_ABSTRACT) == 0)) {
    o = (*t->tp_alloc)(t, 0);
  } else {
    o = (PyObject *) PyBaseObject_Type.tp_new(t, __pyx_empty_tuple, 0);
  }
  if (unlikely(!o)) return 0;
  p = ((struct __pyx_obj_8automata_9cautomata_CAutomaton *)o);
  p->A = ((PyObject*)Py_None); Py_INCREF(Py_None);
  p->S = ((PyObject*)Py_None); Py_INCREF(Py_None);
  if (unlikely(__pyx_pw_8automata_9cautomata_10CAutomaton_1__cinit__(o, __pyx_empty_tuple, NULL) < 0)) goto bad;
  return o;
  bad:
  Py_DECREF(o); o = 0;
  return NULL;
}

static void __pyx_tp_dealloc_8automata_9cautomata_CAutomaton(PyObject *o) {
  struct __pyx_obj_8automata_9cautomata_CAutomaton *p = (struct __pyx_obj_8automata_9cautomata_CAutomaton *)o;
  #if CYTHON_USE_TP_FINALIZE
  if (unlikely(PyType_HasFeature(Py_TYPE(o), Py_TPFLAGS_HAVE_FINALIZE) && Py_TYPE(o)->tp_finalize) && !_PyGC_FINALIZED(o)) {
    if (PyObject_CallFinalizerFromDealloc(o)) return;
  }
  #endif
  PyObject_GC_UnTrack(o);
  {
    PyObject *etype, *eval, *etb;
    PyErr_Fetch(&etype, &eval, &etb);
    ++Py_REFCNT(o);
    __pyx_pw_8automata_9cautomata_10CAutomaton_5__dealloc__(o);
    --Py_REFCNT(o);
    PyErr_Restore(etype, eval, etb);
  }
  Py_CLEAR(p->A);
  Py_CLEAR(p->S);
  (*Py_TYPE(o)->tp_free)(o);
}

static int __pyx_tp_traverse_8automata_9cautomata_CAutomaton(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_8automata_9cautomata_CAutomaton *p = (struct __pyx_obj_8automata_9cautomata_CAutomaton *)o;
  if (p->A) {
    e = (*v)(p->A, a); if (e) return e;
  }
  if (p->S) {
    e = (*v)(p->S, a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_8automata_9cautomata_CAutomaton(PyObject *o) {
  PyObject* tmp;
  struct __pyx_obj_8automata_9cautomata_CAutomaton *p = (struct __pyx_obj_8automata_9cautomata_CAutomaton *)o;
  tmp = ((PyObject*)p->A);
  p->A = ((PyObject*)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  tmp = ((PyObject*)p->S);
  p->S = ((PyObject*)Py_None); Py_INCREF(Py_None);
  Py_XDECREF(tmp);
  return 0;
}

static PyObject *__pyx_getprop_8automata_9cautomata_10CAutomaton_n_states(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_8automata_9cautomata_10CAutomaton_8n_states_1__get__(o);
}

static PyObject *__pyx_getprop_8automata_9cautomata_10CAutomaton_initial_states(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_8automata_9cautomata_10CAutomaton_14initial_states_1__get__(o);
}

static PyObject *__pyx_getprop_8automata_9cautomata_10CAutomaton_final_states(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_8automata_9cautomata_10CAutomaton_12final_states_1__get__(o);
}

static PyObject *__pyx_getprop_8automata_9cautomata_10CAutomaton_alphabet(PyObject *o, CYTHON_UNUSED void *x) {
  return __pyx_pw_8automata_9cautomata_10CAutomaton_8alphabet_1__get__(o);
}

static PyMethodDef __pyx_methods_8automata_9cautomata_CAutomaton[] = {
  {"_latex_", (PyCFunction)__pyx_pw_8automata_9cautomata_10CAutomaton_9_latex_, METH_NOARGS, __pyx_doc_8automata_9cautomata_10CAutomaton_8_latex_},
  {"copy", (PyCFunction)__pyx_pw_8automata_9cautomata_10CAutomaton_11copy, METH_NOARGS, __pyx_doc_8automata_9cautomata_10CAutomaton_10copy},
  {"n_successors", (PyCFunction)__pyx_pw_8automata_9cautomata_10CAutomaton_13n_successors, METH_O, __pyx_doc_8automata_9cautomata_10CAutomaton_12n_successors},
  {"successor", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_10CAutomaton_15successor, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_10CAutomaton_14successor},
  {"label", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_10CAutomaton_17label, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_10CAutomaton_16label},
  {"is_final", (PyCFunction)__pyx_pw_8automata_9cautomata_10CAutomaton_19is_final, METH_O, __pyx_doc_8automata_9cautomata_10CAutomaton_18is_final},
  {"is_initial", (PyCFunction)__pyx_pw_8automata_9cautomata_10CAutomaton_21is_initial, METH_O, __pyx_doc_8automata_9cautomata_10CAutomaton_20is_initial},
  {"set_final", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_10CAutomaton_23set_final, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_10CAutomaton_22set_final},
  {"set_initial_state", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_10CAutomaton_25set_initial_state, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_10CAutomaton_24set_initial_state},
  {"add_transition", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_10CAutomaton_27add_transition, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_10CAutomaton_26add_transition},
  {"add_state", (PyCFunction)__pyx_pw_8automata_9cautomata_10CAutomaton_29add_state, METH_O, __pyx_doc_8automata_9cautomata_10CAutomaton_28add_state},
  {"bigger_alphabet", (PyCFunction)__pyx_pw_8automata_9cautomata_10CAutomaton_31bigger_alphabet, METH_O, __pyx_doc_8automata_9cautomata_10CAutomaton_30bigger_alphabet},
  {"add_path", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_10CAutomaton_33add_path, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_10CAutomaton_32add_path},
  {"determinize", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_10CAutomaton_35determinize, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_10CAutomaton_34determinize},
  {"plot", (PyCFunction)(void*)(PyCFunctionWithKeywords)__pyx_pw_8automata_9cautomata_10CAutomaton_37plot, METH_VARARGS|METH_KEYWORDS, __pyx_doc_8automata_9cautomata_10CAutomaton_36plot},
  {"__reduce_cython__", (PyCFunction)__pyx_pw_8automata_9cautomata_10CAutomaton_39__reduce_cython__, METH_NOARGS, 0},
  {"__setstate_cython__", (PyCFunction)__pyx_pw_8automata_9cautomata_10CAutomaton_41__setstate_cython__, METH_O, 0},
  {0, 0, 0, 0}
};

static struct PyGetSetDef __pyx_getsets_8automata_9cautomata_CAutomaton[] = {
  {(char *)"n_states", __pyx_getprop_8automata_9cautomata_10CAutomaton_n_states, 0, (char *)"\n        return the numbers of states\n\n        OUTPUT:\n\n        return the numbers of states\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0, 1, 'a'), (2, 3, 'b')], i=0)\n            sage: b = CAutomaton(a)\n            sage: b.n_states\n            4\n        ", 0},
  {(char *)"initial_states", __pyx_getprop_8automata_9cautomata_10CAutomaton_initial_states, 0, (char *)"\n        Return the set of initial states of the :class:`CAutomaton`\n\n        OUTPUT:\n\n        list\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: b = CAutomaton(a)\n            sage: b.initial_states\n            []\n            sage: a = DeterministicAutomaton([(10,11,'a') ,(12,13,'b')], i=12)\n            sage: b = CAutomaton(a)\n            sage: b.initial_states\n            [2]\n            sage: a = DeterministicAutomaton([(10,11,'a') ,(12,13,'b')], i=0).mirror()\n            sage: a.initial_states\n            [0, 1, 2, 3]\n        ", 0},
  {(char *)"final_states", __pyx_getprop_8automata_9cautomata_10CAutomaton_final_states, 0, (char *)"\n        Return the set of final states\n\n        OUTPUT:\n\n        list\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(10,11,'a') ,(12,13,'b')])\n            sage: b = CAutomaton(a)\n            sage: b.final_states\n            [0, 1, 2, 3]\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')], )\n            sage: b = CAutomaton(a)\n            sage: b.final_states\n            [0, 1, 2, 3]\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')], final_states=[0,3])\n            sage: b = CAutomaton(a)\n            sage: b.final_states\n            [0, 3]\n            sage: a = DeterministicAutomaton([(10,10,'x'),(10,20,'y'),(20,20,'z'),                (20,10,'y'),(20,30,'x'),(30,30,'y'),(30,10,'z'),(30,20,'x'),                (10,30,'z')], i=10)\n            sage: a.final_states\n            [0, 1, 2]\n        ", 0},
  {(char *)"alphabet", __pyx_getprop_8automata_9cautomata_10CAutomaton_alphabet, 0, (char *)"\n        To get the :class:`CAutomaton` attribut alphabet\n        Return the alphabet of the :class:`CAutomaton`\n\n        OUTPUT:\n\n        list\n\n        EXAMPLES::\n\n            sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n            sage: b = CAutomaton(a)\n            sage: b.alphabet\n            ['a', 'b']\n            sage: a = DeterministicAutomaton([(10,10,'x'),(10,20,'y'),(20,20,'z'),                (20,10,'y'),(20,30,'x'),(30,30,'y'),(30,10,'z'),(30,20,'x'),                (10,30,'z')], i=10)\n            sage: a.alphabet\n            ['y', 'x', 'z']\n        ", 0},
  {0, 0, 0, 0, 0}
};

static PyTypeObject __pyx_type_8automata_9cautomata_CAutomaton = {
  PyVarObject_HEAD_INIT(0, 0)
  "automata.cautomata.CAutomaton", /*tp_name*/
  sizeof(struct __pyx_obj_8automata_9cautomata_CAutomaton), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_8automata_9cautomata_CAutomaton, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  #if PY_MAJOR_VERSION < 3
  0, /*tp_compare*/
  #endif
  #if PY_MAJOR_VERSION >= 3
  0, /*tp_as_async*/
  #endif
  __pyx_pw_8automata_9cautomata_10CAutomaton_7__repr__, /*tp_repr*/
  0, /*tp_as_number*/
  0, /*tp_as_sequence*/
  0, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  0, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_HAVE_VERSION_TAG|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_HAVE_NEWBUFFER|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  "\n    Class :class:`CAutomaton`, this class encapsulates a C structure\n    for Automata and implement methods to manipulate them.\n\n    INPUT:\n\n    - ``a`` -- an automaton given as a list, a DiGraph, an Automaton, a DeterministicAutomaton or a CAutomaton\n\n    - ``I`` -- list (default: None)\n        The set of initial states.\n\n    - ``F`` -- list (default: None)\n        The set of final states.\n\n    - ``A``-- list (default: None)\n        The alphabet.\n\n    - ``keep_S`` -- bool (default: True)\n        Keep the labels of the states.\n\n    - ``verb`` -- bool (default: False)\n        Display informations for debugging.\n\n    OUTPUT:\n\n    Return a instance of :class:`CAutomaton`.\n\n    EXAMPLES::\n\n        sage: a = DeterministicAutomaton([(0,1,'a') ,(2,3,'b')])\n        sage: b = CAutomaton(a)\n        sage: b\n        CAutomaton with 4 states and an alphabet of 2 letters\n        sage: c = Automaton({0:{1:'x',2:'z',3:'a'}, 2:{5:'o'}},initial_states=[0])\n        sage: b = CAutomaton(c)\n        sage: b\n        CAutomaton with 5 states and an alphabet of 4 letters\n        sage: d = DiGraph({0: [1,2,3], 1: [0,2]})\n        sage: b = CAutomaton(d)\n        sage: b\n        CAutomaton with 4 states and an alphabet of 1 letter\n        sage: g =  CAutomaton([(0,1,'a') ,(2,3,'b')])\n        sage: g\n        CAutomaton with 4 states and an alphabet of 2 letters\n\n    ", /*tp_doc*/
  __pyx_tp_traverse_8automata_9cautomata_CAutomaton, /*tp_traverse*/
  __pyx_tp_clear_8automata_9cautomata_CAutomaton, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  __pyx_methods_8automata_9cautomata_CAutomaton, /*tp_methods*/
  0, /*tp_members*/
  __pyx_getsets_8automata_9cautomata_CAutomaton, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  __pyx_pw_8automata_9cautomata_10CAutomaton_3__init__, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_8automata_9cautomata_CAutomaton, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
  0, /*tp_del*/
  0, /*tp_version_tag*/
  #if PY_VERSION_HEX >= 0x030400a1
  0, /*tp_finalize*/
  #endif
};

static PyMethodDef __pyx_methods[] = {
  {0, 0, 0, 0}
};

#if PY_MAJOR_VERSION >= 3
#if CYTHON_PEP489_MULTI_PHASE_INIT
static PyObject* __pyx_pymod_create(PyObject *spec, PyModuleDef *def); /*proto*/
static int __pyx_pymod_exec_cautomata(PyObject* module); /*proto*/
static PyModuleDef_Slot __pyx_moduledef_slots[] = {
  {Py_mod_create, (void*)__pyx_pymod_create},
  {Py_mod_exec, (void*)__pyx_pymod_exec_cautomata},
  {0, NULL}
};
#endif

static struct PyModuleDef __pyx_moduledef = {
    PyModuleDef_HEAD_INIT,
    "cautomata",
    __pyx_k_Deterministic_automaton_of_Fini, /* m_doc */
  #if CYTHON_PEP489_MULTI_PHASE_INIT
    0, /* m_size */
  #else
    -1, /* m_size */
  #endif
    __pyx_methods /* m_methods */,
  #if CYTHON_PEP489_MULTI_PHASE_INIT
    __pyx_moduledef_slots, /* m_slots */
  #else
    NULL, /* m_reload */
  #endif
    NULL, /* m_traverse */
    NULL, /* m_clear */
    NULL /* m_free */
};
#endif
#ifndef CYTHON_SMALL_CODE
#if defined(__clang__)
    #define CYTHON_SMALL_CODE
#elif defined(__GNUC__) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 3))
    #define CYTHON_SMALL_CODE __attribute__((cold))
#else
    #define CYTHON_SMALL_CODE
#endif
#endif

static __Pyx_StringTabEntry __pyx_string_tab[] = {
  {&__pyx_kp_s_0_and_s, __pyx_k_0_and_s, sizeof(__pyx_k_0_and_s), 0, 0, 1, 0},
  {&__pyx_n_s_A, __pyx_k_A, sizeof(__pyx_k_A), 0, 0, 1, 1},
  {&__pyx_kp_s_A_label_of_a_transition_is_not_i, __pyx_k_A_label_of_a_transition_is_not_i, sizeof(__pyx_k_A_label_of_a_transition_is_not_i), 0, 0, 1, 0},
  {&__pyx_kp_s_A_s, __pyx_k_A_s, sizeof(__pyx_k_A_s), 0, 0, 1, 0},
  {&__pyx_kp_s_A_s_i_r_final_states_s, __pyx_k_A_s_i_r_final_states_s, sizeof(__pyx_k_A_s_i_r_final_states_s), 0, 0, 1, 0},
  {&__pyx_kp_s_A_state_of_the_list_appears_seve, __pyx_k_A_state_of_the_list_appears_seve, sizeof(__pyx_k_A_state_of_the_list_appears_seve), 0, 0, 1, 0},
  {&__pyx_n_s_AlgebraicRealField, __pyx_k_AlgebraicRealField, sizeof(__pyx_k_AlgebraicRealField), 0, 0, 1, 1},
  {&__pyx_kp_s_Alloc, __pyx_k_Alloc, sizeof(__pyx_k_Alloc), 0, 0, 1, 0},
  {&__pyx_kp_s_Alloc_s_s_and_init, __pyx_k_Alloc_s_s_and_init, sizeof(__pyx_k_Alloc_s_s_and_init), 0, 0, 1, 0},
  {&__pyx_n_s_Alphabet, __pyx_k_Alphabet, sizeof(__pyx_k_Alphabet), 0, 0, 1, 1},
  {&__pyx_kp_s_Alphabet_Changing_s_s_s, __pyx_k_Alphabet_Changing_s_s_s, sizeof(__pyx_k_Alphabet_Changing_s_s_s), 0, 0, 1, 0},
  {&__pyx_n_s_AttributeError, __pyx_k_AttributeError, sizeof(__pyx_k_AttributeError), 0, 0, 1, 1},
  {&__pyx_n_s_Automaton, __pyx_k_Automaton, sizeof(__pyx_k_Automaton), 0, 0, 1, 1},
  {&__pyx_kp_s_Av_s, __pyx_k_Av_s, sizeof(__pyx_k_Av_s), 0, 0, 1, 0},
  {&__pyx_n_s_CAutomaton, __pyx_k_CAutomaton, sizeof(__pyx_k_CAutomaton), 0, 0, 1, 1},
  {&__pyx_kp_s_CAutomaton_with_d_state, __pyx_k_CAutomaton_with_d_state, sizeof(__pyx_k_CAutomaton_with_d_state), 0, 0, 1, 0},
  {&__pyx_kp_s_Cannot_convert_the_input_to_CAut, __pyx_k_Cannot_convert_the_input_to_CAut, sizeof(__pyx_k_Cannot_convert_the_input_to_CAut), 0, 0, 1, 0},
  {&__pyx_kp_s_Cannot_convert_the_input_to_Dete, __pyx_k_Cannot_convert_the_input_to_Dete, sizeof(__pyx_k_Cannot_convert_the_input_to_Dete), 0, 0, 1, 0},
  {&__pyx_kp_s_Comparaison_or_not_implemented_f, __pyx_k_Comparaison_or_not_implemented_f, sizeof(__pyx_k_Comparaison_or_not_implemented_f), 0, 0, 1, 0},
  {&__pyx_kp_s_Could_not_allocate_the_transitio, __pyx_k_Could_not_allocate_the_transitio, sizeof(__pyx_k_Could_not_allocate_the_transitio), 0, 0, 1, 0},
  {&__pyx_n_s_DeterministicAutomaton, __pyx_k_DeterministicAutomaton, sizeof(__pyx_k_DeterministicAutomaton), 0, 0, 1, 1},
  {&__pyx_n_s_DeterministicAutomatonGenerators, __pyx_k_DeterministicAutomatonGenerators, sizeof(__pyx_k_DeterministicAutomatonGenerators), 0, 0, 1, 1},
  {&__pyx_kp_s_DeterministicAutomaton_2, __pyx_k_DeterministicAutomaton_2, sizeof(__pyx_k_DeterministicAutomaton_2), 0, 0, 1, 0},
  {&__pyx_kp_s_DeterministicAutomaton_s, __pyx_k_DeterministicAutomaton_s, sizeof(__pyx_k_DeterministicAutomaton_s), 0, 0, 1, 0},
  {&__pyx_kp_s_DeterministicAutomaton_with_d_st, __pyx_k_DeterministicAutomaton_with_d_st, sizeof(__pyx_k_DeterministicAutomaton_with_d_st), 0, 0, 1, 0},
  {&__pyx_kp_s_Determinize, __pyx_k_Determinize, sizeof(__pyx_k_Determinize), 0, 0, 1, 0},
  {&__pyx_n_s_DiGraph, __pyx_k_DiGraph, sizeof(__pyx_k_DiGraph), 0, 0, 1, 1},
  {&__pyx_kp_s_DiGraph_2, __pyx_k_DiGraph_2, sizeof(__pyx_k_DiGraph_2), 0, 0, 1, 0},
  {&__pyx_kp_s_Element_s_of_the_list_given_is_n, __pyx_k_Element_s_of_the_list_given_is_n, sizeof(__pyx_k_Element_s_of_the_list_given_is_n), 0, 0, 1, 0},
  {&__pyx_n_s_F, __pyx_k_F, sizeof(__pyx_k_F), 0, 0, 1, 1},
  {&__pyx_kp_s_Failed_to_allocate_memory_for_C, __pyx_k_Failed_to_allocate_memory_for_C, sizeof(__pyx_k_Failed_to_allocate_memory_for_C), 0, 0, 1, 0},
  {&__pyx_kp_s_Failed_to_allocate_memory_for_C_2, __pyx_k_Failed_to_allocate_memory_for_C_2, sizeof(__pyx_k_Failed_to_allocate_memory_for_C_2), 0, 0, 1, 0},
  {&__pyx_kp_s_Failed_to_allocate_memory_for_l, __pyx_k_Failed_to_allocate_memory_for_l, sizeof(__pyx_k_Failed_to_allocate_memory_for_l), 0, 0, 1, 0},
  {&__pyx_kp_s_Failed_to_allocate_memory_for_l_2, __pyx_k_Failed_to_allocate_memory_for_l_2, sizeof(__pyx_k_Failed_to_allocate_memory_for_l_2), 0, 0, 1, 0},
  {&__pyx_kp_s_Failed_to_allocate_memory_for_l_3, __pyx_k_Failed_to_allocate_memory_for_l_3, sizeof(__pyx_k_Failed_to_allocate_memory_for_l_3), 0, 0, 1, 0},
  {&__pyx_kp_s_Failed_to_allocate_memory_for_l_4, __pyx_k_Failed_to_allocate_memory_for_l_4, sizeof(__pyx_k_Failed_to_allocate_memory_for_l_4), 0, 0, 1, 0},
  {&__pyx_kp_s_Failed_to_allocate_memory_for_ll, __pyx_k_Failed_to_allocate_memory_for_ll, sizeof(__pyx_k_Failed_to_allocate_memory_for_ll), 0, 0, 1, 0},
  {&__pyx_kp_s_Failed_to_allocate_memory_for_ll_2, __pyx_k_Failed_to_allocate_memory_for_ll_2, sizeof(__pyx_k_Failed_to_allocate_memory_for_ll_2), 0, 0, 1, 0},
  {&__pyx_kp_s_Failed_to_allocate_memory_for_vl, __pyx_k_Failed_to_allocate_memory_for_vl, sizeof(__pyx_k_Failed_to_allocate_memory_for_vl), 0, 0, 1, 0},
  {&__pyx_kp_s_Failed_to_allocate_memory_for_vl_2, __pyx_k_Failed_to_allocate_memory_for_vl_2, sizeof(__pyx_k_Failed_to_allocate_memory_for_vl_2), 0, 0, 1, 0},
  {&__pyx_kp_s_Failed_to_allocate_memory_for_w, __pyx_k_Failed_to_allocate_memory_for_w, sizeof(__pyx_k_Failed_to_allocate_memory_for_w), 0, 0, 1, 0},
  {&__pyx_n_s_I, __pyx_k_I, sizeof(__pyx_k_I), 0, 0, 1, 1},
  {&__pyx_n_s_Image, __pyx_k_Image, sizeof(__pyx_k_Image), 0, 0, 1, 1},
  {&__pyx_n_s_ImportError, __pyx_k_ImportError, sizeof(__pyx_k_ImportError), 0, 0, 1, 1},
  {&__pyx_kp_s_Incorrect_set_of_final_states, __pyx_k_Incorrect_set_of_final_states, sizeof(__pyx_k_Incorrect_set_of_final_states), 0, 0, 1, 0},
  {&__pyx_n_s_IntegerRing, __pyx_k_IntegerRing, sizeof(__pyx_k_IntegerRing), 0, 0, 1, 1},
  {&__pyx_kp_s_Keys_s, __pyx_k_Keys_s, sizeof(__pyx_k_Keys_s), 0, 0, 1, 0},
  {&__pyx_n_s_LatexExpr, __pyx_k_LatexExpr, sizeof(__pyx_k_LatexExpr), 0, 0, 1, 1},
  {&__pyx_kp_s_Letter_r_not_found_in_the_new_al, __pyx_k_Letter_r_not_found_in_the_new_al, sizeof(__pyx_k_Letter_r_not_found_in_the_new_al), 0, 0, 1, 0},
  {&__pyx_kp_s_List, __pyx_k_List, sizeof(__pyx_k_List), 0, 0, 1, 0},
  {&__pyx_n_s_MemoryError, __pyx_k_MemoryError, sizeof(__pyx_k_MemoryError), 0, 0, 1, 1},
  {&__pyx_n_s_ModuleNotFoundError, __pyx_k_ModuleNotFoundError, sizeof(__pyx_k_ModuleNotFoundError), 0, 0, 1, 1},
  {&__pyx_kp_s_No_vertices_method, __pyx_k_No_vertices_method, sizeof(__pyx_k_No_vertices_method), 0, 0, 1, 0},
  {&__pyx_n_s_NotImplemented, __pyx_k_NotImplemented, sizeof(__pyx_k_NotImplemented), 0, 0, 1, 1},
  {&__pyx_n_s_NotImplementedError, __pyx_k_NotImplementedError, sizeof(__pyx_k_NotImplementedError), 0, 0, 1, 1},
  {&__pyx_kp_s_Ouvre_l_image_produite, __pyx_k_Ouvre_l_image_produite, sizeof(__pyx_k_Ouvre_l_image_produite), 0, 0, 1, 0},
  {&__pyx_n_s_PIL, __pyx_k_PIL, sizeof(__pyx_k_PIL), 0, 0, 1, 1},
  {&__pyx_kp_s_Prune_and_minimize, __pyx_k_Prune_and_minimize, sizeof(__pyx_k_Prune_and_minimize), 0, 0, 1, 0},
  {&__pyx_n_s_S, __pyx_k_S, sizeof(__pyx_k_S), 0, 0, 1, 1},
  {&__pyx_kp_s_Sage_automaton, __pyx_k_Sage_automaton, sizeof(__pyx_k_Sage_automaton), 0, 0, 1, 0},
  {&__pyx_kp_s_Test_if_dot_exists, __pyx_k_Test_if_dot_exists, sizeof(__pyx_k_Test_if_dot_exists), 0, 0, 1, 0},
  {&__pyx_kp_s_The_alphabets_are_differents, __pyx_k_The_alphabets_are_differents, sizeof(__pyx_k_The_alphabets_are_differents), 0, 0, 1, 0},
  {&__pyx_kp_s_The_automata_must_be_determistic, __pyx_k_The_automata_must_be_determistic, sizeof(__pyx_k_The_automata_must_be_determistic), 0, 0, 1, 0},
  {&__pyx_kp_s_The_dictionnary_is_not_injective, __pyx_k_The_dictionnary_is_not_injective, sizeof(__pyx_k_The_dictionnary_is_not_injective), 0, 0, 1, 0},
  {&__pyx_kp_s_The_initial_state_must_be_a_stat, __pyx_k_The_initial_state_must_be_a_stat, sizeof(__pyx_k_The_initial_state_must_be_a_stat), 0, 0, 1, 0},
  {&__pyx_kp_s_The_label_s_is_not_in_the_alphab, __pyx_k_The_label_s_is_not_in_the_alphab, sizeof(__pyx_k_The_label_s_is_not_in_the_alphab), 0, 0, 1, 0},
  {&__pyx_kp_s_The_letter_s_doesn_t_exist, __pyx_k_The_letter_s_doesn_t_exist, sizeof(__pyx_k_The_letter_s_doesn_t_exist), 0, 0, 1, 0},
  {&__pyx_kp_s_The_size_s_of_the_new_alphabet_h, __pyx_k_The_size_s_of_the_new_alphabet_h, sizeof(__pyx_k_The_size_s_of_the_new_alphabet_h), 0, 0, 1, 0},
  {&__pyx_kp_s_The_state_s_doesn_t_exist, __pyx_k_The_state_s_doesn_t_exist, sizeof(__pyx_k_The_state_s_doesn_t_exist), 0, 0, 1, 0},
  {&__pyx_kp_s_The_state_s_doesn_t_exist_2, __pyx_k_The_state_s_doesn_t_exist_2, sizeof(__pyx_k_The_state_s_doesn_t_exist_2), 0, 0, 1, 0},
  {&__pyx_kp_s_The_state_s_has_no_edge_number_s, __pyx_k_The_state_s_has_no_edge_number_s, sizeof(__pyx_k_The_state_s_has_no_edge_number_s), 0, 0, 1, 0},
  {&__pyx_kp_s_There_is_no_state_s, __pyx_k_There_is_no_state_s, sizeof(__pyx_k_There_is_no_state_s), 0, 0, 1, 0},
  {&__pyx_kp_s_This_transition_s_s_s_starts_fro, __pyx_k_This_transition_s_s_s_starts_fro, sizeof(__pyx_k_This_transition_s_s_s_starts_fro), 0, 0, 1, 0},
  {&__pyx_n_s_TypeError, __pyx_k_TypeError, sizeof(__pyx_k_TypeError), 0, 0, 1, 1},
  {&__pyx_n_s_ValueError, __pyx_k_ValueError, sizeof(__pyx_k_ValueError), 0, 0, 1, 1},
  {&__pyx_kp_s_Warning_Ignore_S_since_there_is, __pyx_k_Warning_Ignore_S_since_there_is, sizeof(__pyx_k_Warning_Ignore_S_since_there_is), 0, 0, 1, 0},
  {&__pyx_kp_s_Warning_Ignore_final_states_sinc, __pyx_k_Warning_Ignore_final_states_sinc, sizeof(__pyx_k_Warning_Ignore_final_states_sinc), 0, 0, 1, 0},
  {&__pyx_kp_s_Warning_Ignore_i_since_there_is, __pyx_k_Warning_Ignore_i_since_there_is, sizeof(__pyx_k_Warning_Ignore_i_since_there_is), 0, 0, 1, 0},
  {&__pyx_kp_s_Warning_informations_lost_during, __pyx_k_Warning_informations_lost_during, sizeof(__pyx_k_Warning_informations_lost_during), 0, 0, 1, 0},
  {&__pyx_kp_s_Warning_the_automaton_has_severa, __pyx_k_Warning_the_automaton_has_severa, sizeof(__pyx_k_Warning_the_automaton_has_severa), 0, 0, 1, 0},
  {&__pyx_kp_s_Warning_the_automaton_was_not_de, __pyx_k_Warning_the_automaton_was_not_de, sizeof(__pyx_k_Warning_the_automaton_was_not_de), 0, 0, 1, 0},
  {&__pyx_n_s_Word, __pyx_k_Word, sizeof(__pyx_k_Word), 0, 0, 1, 1},
  {&__pyx_kp_s_You_can_install_it_by_doing_sage, __pyx_k_You_can_install_it_by_doing_sage, sizeof(__pyx_k_You_can_install_it_by_doing_sage), 0, 0, 1, 0},
  {&__pyx_kp_s_You_cannot_plot_the_CAutomaton_w, __pyx_k_You_cannot_plot_the_CAutomaton_w, sizeof(__pyx_k_You_cannot_plot_the_CAutomaton_w), 0, 0, 1, 0},
  {&__pyx_kp_s__43, __pyx_k__43, sizeof(__pyx_k__43), 0, 0, 1, 0},
  {&__pyx_kp_s__44, __pyx_k__44, sizeof(__pyx_k__44), 0, 0, 1, 0},
  {&__pyx_kp_s__45, __pyx_k__45, sizeof(__pyx_k__45), 0, 0, 1, 0},
  {&__pyx_kp_s__48, __pyx_k__48, sizeof(__pyx_k__48), 0, 0, 1, 0},
  {&__pyx_kp_s__60, __pyx_k__60, sizeof(__pyx_k__60), 0, 0, 1, 0},
  {&__pyx_kp_s__68, __pyx_k__68, sizeof(__pyx_k__68), 0, 0, 1, 0},
  {&__pyx_n_s_a, __pyx_k_a, sizeof(__pyx_k_a), 0, 0, 1, 1},
  {&__pyx_kp_s_a_is_None, __pyx_k_a_is_None, sizeof(__pyx_k_a_is_None), 0, 0, 1, 0},
  {&__pyx_kp_s_a_s_A_s_b_s_A_s, __pyx_k_a_s_A_s_b_s_A_s, sizeof(__pyx_k_a_s_A_s_b_s_A_s), 0, 0, 1, 0},
  {&__pyx_n_s_adjacency_matrix, __pyx_k_adjacency_matrix, sizeof(__pyx_k_adjacency_matrix), 0, 0, 1, 1},
  {&__pyx_n_s_algo, __pyx_k_algo, sizeof(__pyx_k_algo), 0, 0, 1, 1},
  {&__pyx_kp_s_alloc_ll_size_s, __pyx_k_alloc_ll_size_s, sizeof(__pyx_k_alloc_ll_size_s), 0, 0, 1, 0},
  {&__pyx_kp_s_alloc_r_e_s_a_s_elements_so_tota, __pyx_k_alloc_r_e_s_a_s_elements_so_tota, sizeof(__pyx_k_alloc_r_e_s_a_s_elements_so_tota), 0, 0, 1, 0},
  {&__pyx_kp_s_alloc_s, __pyx_k_alloc_s, sizeof(__pyx_k_alloc_s), 0, 0, 1, 0},
  {&__pyx_n_s_alphabet, __pyx_k_alphabet, sizeof(__pyx_k_alphabet), 0, 0, 1, 1},
  {&__pyx_kp_s_and_an_alphabet_of_d_letter, __pyx_k_and_an_alphabet_of_d_letter, sizeof(__pyx_k_and_an_alphabet_of_d_letter), 0, 0, 1, 0},
  {&__pyx_n_s_aperiodic, __pyx_k_aperiodic, sizeof(__pyx_k_aperiodic), 0, 0, 1, 1},
  {&__pyx_n_s_append, __pyx_k_append, sizeof(__pyx_k_append), 0, 0, 1, 1},
  {&__pyx_n_s_approx, __pyx_k_approx, sizeof(__pyx_k_approx), 0, 0, 1, 1},
  {&__pyx_n_s_automata_cautomata, __pyx_k_automata_cautomata, sizeof(__pyx_k_automata_cautomata), 0, 0, 1, 1},
  {&__pyx_n_s_b, __pyx_k_b, sizeof(__pyx_k_b), 0, 0, 1, 1},
  {&__pyx_n_s_bigger_alphabet, __pyx_k_bigger_alphabet, sizeof(__pyx_k_bigger_alphabet), 0, 0, 1, 1},
  {&__pyx_kp_s_browse_transitions, __pyx_k_browse_transitions, sizeof(__pyx_k_browse_transitions), 0, 0, 1, 0},
  {&__pyx_n_s_charpoly, __pyx_k_charpoly, sizeof(__pyx_k_charpoly), 0, 0, 1, 1},
  {&__pyx_n_s_cline_in_traceback, __pyx_k_cline_in_traceback, sizeof(__pyx_k_cline_in_traceback), 0, 0, 1, 1},
  {&__pyx_n_s_complementary_in_place, __pyx_k_complementary_in_place, sizeof(__pyx_k_complementary_in_place), 0, 0, 1, 1},
  {&__pyx_n_s_complete_in_place, __pyx_k_complete_in_place, sizeof(__pyx_k_complete_in_place), 0, 0, 1, 1},
  {&__pyx_kp_s_component_with_s_states, __pyx_k_component_with_s_states, sizeof(__pyx_k_component_with_s_states), 0, 0, 1, 0},
  {&__pyx_n_s_concatenate, __pyx_k_concatenate, sizeof(__pyx_k_concatenate), 0, 0, 1, 1},
  {&__pyx_n_s_copy, __pyx_k_copy, sizeof(__pyx_k_copy), 0, 0, 1, 1},
  {&__pyx_n_s_couple, __pyx_k_couple, sizeof(__pyx_k_couple), 0, 0, 1, 1},
  {&__pyx_n_s_d, __pyx_k_d, sizeof(__pyx_k_d), 0, 0, 1, 1},
  {&__pyx_kp_s_d1_s_A2_s, __pyx_k_d1_s_A2_s, sizeof(__pyx_k_d1_s_A2_s), 0, 0, 1, 0},
  {&__pyx_kp_s_dC, __pyx_k_dC, sizeof(__pyx_k_dC), 0, 0, 1, 0},
  {&__pyx_kp_s_d_d, __pyx_k_d_d, sizeof(__pyx_k_d_d), 0, 0, 1, 0},
  {&__pyx_kp_s_d_is_not_a_state, __pyx_k_d_is_not_a_state, sizeof(__pyx_k_d_is_not_a_state), 0, 0, 1, 0},
  {&__pyx_kp_s_d_is_not_in_1_d, __pyx_k_d_is_not_in_1_d, sizeof(__pyx_k_d_is_not_in_1_d), 0, 0, 1, 0},
  {&__pyx_kp_s_d_is_not_the_index_of_a_state_i, __pyx_k_d_is_not_the_index_of_a_state_i, sizeof(__pyx_k_d_is_not_the_index_of_a_state_i), 0, 0, 1, 0},
  {&__pyx_kp_s_d_s, __pyx_k_d_s, sizeof(__pyx_k_d_s), 0, 0, 1, 0},
  {&__pyx_kp_s_d_s_s, __pyx_k_d_s_s, sizeof(__pyx_k_d_s_s), 0, 0, 1, 0},
  {&__pyx_n_s_dag, __pyx_k_dag, sizeof(__pyx_k_dag), 0, 0, 1, 1},
  {&__pyx_n_s_det, __pyx_k_det, sizeof(__pyx_k_det), 0, 0, 1, 1},
  {&__pyx_n_s_determinize, __pyx_k_determinize, sizeof(__pyx_k_determinize), 0, 0, 1, 1},
  {&__pyx_n_s_difference, __pyx_k_difference, sizeof(__pyx_k_difference), 0, 0, 1, 1},
  {&__pyx_kp_s_dot, __pyx_k_dot, sizeof(__pyx_k_dot), 0, 0, 1, 0},
  {&__pyx_n_s_dot2tex, __pyx_k_dot2tex, sizeof(__pyx_k_dot2tex), 0, 0, 1, 1},
  {&__pyx_kp_s_dot2tex_must_be_installed_in_ord, __pyx_k_dot2tex_must_be_installed_in_ord, sizeof(__pyx_k_dot2tex_must_be_installed_in_ord), 0, 0, 1, 0},
  {&__pyx_kp_s_dot2tex_must_be_installed_in_ord_2, __pyx_k_dot2tex_must_be_installed_in_ord_2, sizeof(__pyx_k_dot2tex_must_be_installed_in_ord_2), 0, 0, 1, 0},
  {&__pyx_n_s_draw, __pyx_k_draw, sizeof(__pyx_k_draw), 0, 0, 1, 1},
  {&__pyx_kp_s_dv_s, __pyx_k_dv_s, sizeof(__pyx_k_dv_s), 0, 0, 1, 0},
  {&__pyx_n_s_e, __pyx_k_e, sizeof(__pyx_k_e), 0, 0, 1, 1},
  {&__pyx_n_s_edge_labels, __pyx_k_edge_labels, sizeof(__pyx_k_edge_labels), 0, 0, 1, 1},
  {&__pyx_n_s_edges, __pyx_k_edges, sizeof(__pyx_k_edges), 0, 0, 1, 1},
  {&__pyx_kp_s_end, __pyx_k_end, sizeof(__pyx_k_end), 0, 0, 1, 0},
  {&__pyx_n_s_enumerate, __pyx_k_enumerate, sizeof(__pyx_k_enumerate), 0, 0, 1, 1},
  {&__pyx_n_s_f, __pyx_k_f, sizeof(__pyx_k_f), 0, 0, 1, 1},
  {&__pyx_n_s_factor, __pyx_k_factor, sizeof(__pyx_k_factor), 0, 0, 1, 1},
  {&__pyx_n_s_file, __pyx_k_file, sizeof(__pyx_k_file), 0, 0, 1, 1},
  {&__pyx_kp_s_file_s, __pyx_k_file_s, sizeof(__pyx_k_file_s), 0, 0, 1, 0},
  {&__pyx_n_s_final, __pyx_k_final, sizeof(__pyx_k_final), 0, 0, 1, 1},
  {&__pyx_kp_s_final_states, __pyx_k_final_states, sizeof(__pyx_k_final_states), 0, 0, 1, 0},
  {&__pyx_n_s_final_states_2, __pyx_k_final_states_2, sizeof(__pyx_k_final_states_2), 0, 0, 1, 1},
  {&__pyx_n_s_format, __pyx_k_format, sizeof(__pyx_k_format), 0, 0, 1, 1},
  {&__pyx_kp_s_free_plot, __pyx_k_free_plot, sizeof(__pyx_k_free_plot), 0, 0, 1, 0},
  {&__pyx_n_s_from_state, __pyx_k_from_state, sizeof(__pyx_k_from_state), 0, 0, 1, 1},
  {&__pyx_kp_s_g_s, __pyx_k_g_s, sizeof(__pyx_k_g_s), 0, 0, 1, 0},
  {&__pyx_kp_s_getNAutomaton_s_I_s_F_s_A_s, __pyx_k_getNAutomaton_s_I_s_F_s_A_s, sizeof(__pyx_k_getNAutomaton_s_I_s_F_s_A_s), 0, 0, 1, 0},
  {&__pyx_n_s_get_digraph, __pyx_k_get_digraph, sizeof(__pyx_k_get_digraph), 0, 0, 1, 1},
  {&__pyx_n_s_getstate, __pyx_k_getstate, sizeof(__pyx_k_getstate), 0, 0, 1, 1},
  {&__pyx_n_s_html, __pyx_k_html, sizeof(__pyx_k_html), 0, 0, 1, 1},
  {&__pyx_n_s_i, __pyx_k_i, sizeof(__pyx_k_i), 0, 0, 1, 1},
  {&__pyx_kp_s_i_s_is_not_the_index_of_a_state, __pyx_k_i_s_is_not_the_index_of_a_state, sizeof(__pyx_k_i_s_is_not_the_index_of_a_state), 0, 0, 1, 0},
  {&__pyx_kp_s_i_s_s, __pyx_k_i_s_s, sizeof(__pyx_k_i_s_s), 0, 0, 1, 0},
  {&__pyx_n_s_import, __pyx_k_import, sizeof(__pyx_k_import), 0, 0, 1, 1},
  {&__pyx_n_s_index, __pyx_k_index, sizeof(__pyx_k_index), 0, 0, 1, 1},
  {&__pyx_kp_s_index_i_d_cannot_be_negative, __pyx_k_index_i_d_cannot_be_negative, sizeof(__pyx_k_index_i_d_cannot_be_negative), 0, 0, 1, 0},
  {&__pyx_kp_s_index_i_d_must_be_smaller_than_t, __pyx_k_index_i_d_must_be_smaller_than_t, sizeof(__pyx_k_index_i_d_must_be_smaller_than_t), 0, 0, 1, 0},
  {&__pyx_kp_s_init, __pyx_k_init, sizeof(__pyx_k_init), 0, 0, 1, 0},
  {&__pyx_n_s_initial, __pyx_k_initial, sizeof(__pyx_k_initial), 0, 0, 1, 1},
  {&__pyx_kp_s_initial_states, __pyx_k_initial_states, sizeof(__pyx_k_initial_states), 0, 0, 1, 0},
  {&__pyx_n_s_initial_states_2, __pyx_k_initial_states_2, sizeof(__pyx_k_initial_states_2), 0, 0, 1, 1},
  {&__pyx_n_s_is_aperiodic, __pyx_k_is_aperiodic, sizeof(__pyx_k_is_aperiodic), 0, 0, 1, 1},
  {&__pyx_n_s_issubset, __pyx_k_issubset, sizeof(__pyx_k_issubset), 0, 0, 1, 1},
  {&__pyx_n_s_j, __pyx_k_j, sizeof(__pyx_k_j), 0, 0, 1, 1},
  {&__pyx_n_s_k, __pyx_k_k, sizeof(__pyx_k_k), 0, 0, 1, 1},
  {&__pyx_n_s_keep_S, __pyx_k_keep_S, sizeof(__pyx_k_keep_S), 0, 0, 1, 1},
  {&__pyx_n_s_keep_states_labels, __pyx_k_keep_states_labels, sizeof(__pyx_k_keep_states_labels), 0, 0, 1, 1},
  {&__pyx_n_s_keep_transitions_labels, __pyx_k_keep_transitions_labels, sizeof(__pyx_k_keep_transitions_labels), 0, 0, 1, 1},
  {&__pyx_n_s_key, __pyx_k_key, sizeof(__pyx_k_key), 0, 0, 1, 1},
  {&__pyx_n_s_keys, __pyx_k_keys, sizeof(__pyx_k_keys), 0, 0, 1, 1},
  {&__pyx_n_s_l, __pyx_k_l, sizeof(__pyx_k_l), 0, 0, 1, 1},
  {&__pyx_kp_s_l_2, __pyx_k_l_2, sizeof(__pyx_k_l_2), 0, 0, 1, 0},
  {&__pyx_n_s_label, __pyx_k_label, sizeof(__pyx_k_label), 0, 0, 1, 1},
  {&__pyx_n_s_label_sink, __pyx_k_label_sink, sizeof(__pyx_k_label_sink), 0, 0, 1, 1},
  {&__pyx_kp_s_len_s_s, __pyx_k_len_s_s, sizeof(__pyx_k_len_s_s), 0, 0, 1, 0},
  {&__pyx_kp_s_letter_s_of_the_word_s_is_not_in, __pyx_k_letter_s_of_the_word_s_is_not_in, sizeof(__pyx_k_letter_s_of_the_word_s_is_not_in), 0, 0, 1, 0},
  {&__pyx_n_s_li, __pyx_k_li, sizeof(__pyx_k_li), 0, 0, 1, 1},
  {&__pyx_kp_s_list, __pyx_k_list, sizeof(__pyx_k_list), 0, 0, 1, 0},
  {&__pyx_n_s_loops, __pyx_k_loops, sizeof(__pyx_k_loops), 0, 0, 1, 1},
  {&__pyx_n_s_main, __pyx_k_main, sizeof(__pyx_k_main), 0, 0, 1, 1},
  {&__pyx_n_s_matrix, __pyx_k_matrix, sizeof(__pyx_k_matrix), 0, 0, 1, 1},
  {&__pyx_n_s_max, __pyx_k_max, sizeof(__pyx_k_max), 0, 0, 1, 1},
  {&__pyx_kp_s_minimal_Automata_s, __pyx_k_minimal_Automata_s, sizeof(__pyx_k_minimal_Automata_s), 0, 0, 1, 0},
  {&__pyx_n_s_minimize, __pyx_k_minimize, sizeof(__pyx_k_minimize), 0, 0, 1, 1},
  {&__pyx_n_s_minimized, __pyx_k_minimized, sizeof(__pyx_k_minimized), 0, 0, 1, 1},
  {&__pyx_n_s_multiedges, __pyx_k_multiedges, sizeof(__pyx_k_multiedges), 0, 0, 1, 1},
  {&__pyx_n_s_name, __pyx_k_name, sizeof(__pyx_k_name), 0, 0, 1, 1},
  {&__pyx_n_s_nmax, __pyx_k_nmax, sizeof(__pyx_k_nmax), 0, 0, 1, 1},
  {&__pyx_n_s_nmin, __pyx_k_nmin, sizeof(__pyx_k_nmin), 0, 0, 1, 1},
  {&__pyx_kp_s_no, __pyx_k_no, sizeof(__pyx_k_no), 0, 0, 1, 0},
  {&__pyx_kp_s_no_default___reduce___due_to_non, __pyx_k_no_default___reduce___due_to_non, sizeof(__pyx_k_no_default___reduce___due_to_non), 0, 0, 1, 0},
  {&__pyx_n_s_no_trivials, __pyx_k_no_trivials, sizeof(__pyx_k_no_trivials), 0, 0, 1, 1},
  {&__pyx_kp_s_non_aperiodic, __pyx_k_non_aperiodic, sizeof(__pyx_k_non_aperiodic), 0, 0, 1, 0},
  {&__pyx_n_s_np, __pyx_k_np, sizeof(__pyx_k_np), 0, 0, 1, 1},
  {&__pyx_kp_s_np_must_be_positive, __pyx_k_np_must_be_positive, sizeof(__pyx_k_np_must_be_positive), 0, 0, 1, 0},
  {&__pyx_n_s_only_non_trivial, __pyx_k_only_non_trivial, sizeof(__pyx_k_only_non_trivial), 0, 0, 1, 1},
  {&__pyx_n_s_op_EQ, __pyx_k_op_EQ, sizeof(__pyx_k_op_EQ), 0, 0, 1, 1},
  {&__pyx_n_s_op_NE, __pyx_k_op_NE, sizeof(__pyx_k_op_NE), 0, 0, 1, 1},
  {&__pyx_n_s_open, __pyx_k_open, sizeof(__pyx_k_open), 0, 0, 1, 1},
  {&__pyx_n_s_other, __pyx_k_other, sizeof(__pyx_k_other), 0, 0, 1, 1},
  {&__pyx_kp_s_plot, __pyx_k_plot, sizeof(__pyx_k_plot), 0, 0, 1, 0},
  {&__pyx_n_s_plot_2, __pyx_k_plot_2, sizeof(__pyx_k_plot_2), 0, 0, 1, 1},
  {&__pyx_kp_s_png, __pyx_k_png, sizeof(__pyx_k_png), 0, 0, 1, 0},
  {&__pyx_n_s_pop, __pyx_k_pop, sizeof(__pyx_k_pop), 0, 0, 1, 1},
  {&__pyx_n_s_print, __pyx_k_print, sizeof(__pyx_k_print), 0, 0, 1, 1},
  {&__pyx_n_s_product, __pyx_k_product, sizeof(__pyx_k_product), 0, 0, 1, 1},
  {&__pyx_n_s_project, __pyx_k_project, sizeof(__pyx_k_project), 0, 0, 1, 1},
  {&__pyx_n_s_prune, __pyx_k_prune, sizeof(__pyx_k_prune), 0, 0, 1, 1},
  {&__pyx_n_s_pruned, __pyx_k_pruned, sizeof(__pyx_k_pruned), 0, 0, 1, 1},
  {&__pyx_kp_s_r_e_s_a_s_s_s, __pyx_k_r_e_s_a_s_s_s, sizeof(__pyx_k_r_e_s_a_s_s_s), 0, 0, 1, 0},
  {&__pyx_kp_s_r_is_not_a_letter_of_the_alphab, __pyx_k_r_is_not_a_letter_of_the_alphab, sizeof(__pyx_k_r_is_not_a_letter_of_the_alphab), 0, 0, 1, 0},
  {&__pyx_kp_s_r_is_not_in_the_alphabet_s, __pyx_k_r_is_not_in_the_alphabet_s, sizeof(__pyx_k_r_is_not_in_the_alphabet_s), 0, 0, 1, 0},
  {&__pyx_kp_s_r_r_r, __pyx_k_r_r_r, sizeof(__pyx_k_r_r_r), 0, 0, 1, 0},
  {&__pyx_n_s_random, __pyx_k_random, sizeof(__pyx_k_random), 0, 0, 1, 1},
  {&__pyx_n_s_range, __pyx_k_range, sizeof(__pyx_k_range), 0, 0, 1, 1},
  {&__pyx_n_s_read, __pyx_k_read, sizeof(__pyx_k_read), 0, 0, 1, 1},
  {&__pyx_n_s_real_part, __pyx_k_real_part, sizeof(__pyx_k_real_part), 0, 0, 1, 1},
  {&__pyx_n_s_real_roots, __pyx_k_real_roots, sizeof(__pyx_k_real_roots), 0, 0, 1, 1},
  {&__pyx_n_s_reduce, __pyx_k_reduce, sizeof(__pyx_k_reduce), 0, 0, 1, 1},
  {&__pyx_n_s_reduce_cython, __pyx_k_reduce_cython, sizeof(__pyx_k_reduce_cython), 0, 0, 1, 1},
  {&__pyx_n_s_reduce_ex, __pyx_k_reduce_ex, sizeof(__pyx_k_reduce_ex), 0, 0, 1, 1},
  {&__pyx_n_s_ring, __pyx_k_ring, sizeof(__pyx_k_ring), 0, 0, 1, 1},
  {&__pyx_n_s_roots, __pyx_k_roots, sizeof(__pyx_k_roots), 0, 0, 1, 1},
  {&__pyx_n_s_s, __pyx_k_s, sizeof(__pyx_k_s), 0, 0, 1, 1},
  {&__pyx_kp_s_s_2, __pyx_k_s_2, sizeof(__pyx_k_s_2), 0, 0, 1, 0},
  {&__pyx_kp_s_s_component_strongly_connex, __pyx_k_s_component_strongly_connex, sizeof(__pyx_k_s_component_strongly_connex), 0, 0, 1, 0},
  {&__pyx_kp_s_s_is_not_a_state, __pyx_k_s_is_not_a_state, sizeof(__pyx_k_s_is_not_a_state), 0, 0, 1, 0},
  {&__pyx_kp_s_s_is_not_a_state_i_e_between_0, __pyx_k_s_is_not_a_state_i_e_between_0, sizeof(__pyx_k_s_is_not_a_state_i_e_between_0), 0, 0, 1, 0},
  {&__pyx_kp_s_s_is_not_a_state_should_be_betw, __pyx_k_s_is_not_a_state_should_be_betw, sizeof(__pyx_k_s_is_not_a_state_should_be_betw), 0, 0, 1, 0},
  {&__pyx_kp_s_s_is_not_an_index_of_a_state_mu, __pyx_k_s_is_not_an_index_of_a_state_mu, sizeof(__pyx_k_s_is_not_an_index_of_a_state_mu), 0, 0, 1, 0},
  {&__pyx_n_s_sage_combinat_finite_state_machi, __pyx_k_sage_combinat_finite_state_machi, sizeof(__pyx_k_sage_combinat_finite_state_machi), 0, 0, 1, 1},
  {&__pyx_n_s_sage_combinat_words_cautomata_ge, __pyx_k_sage_combinat_words_cautomata_ge, sizeof(__pyx_k_sage_combinat_words_cautomata_ge), 0, 0, 1, 1},
  {&__pyx_n_s_sage_functions_other, __pyx_k_sage_functions_other, sizeof(__pyx_k_sage_functions_other), 0, 0, 1, 1},
  {&__pyx_n_s_sage_graphs_digraph, __pyx_k_sage_graphs_digraph, sizeof(__pyx_k_sage_graphs_digraph), 0, 0, 1, 1},
  {&__pyx_n_s_sage_matrix_constructor, __pyx_k_sage_matrix_constructor, sizeof(__pyx_k_sage_matrix_constructor), 0, 0, 1, 1},
  {&__pyx_n_s_sage_misc_html, __pyx_k_sage_misc_html, sizeof(__pyx_k_sage_misc_html), 0, 0, 1, 1},
  {&__pyx_n_s_sage_misc_latex, __pyx_k_sage_misc_latex, sizeof(__pyx_k_sage_misc_latex), 0, 0, 1, 1},
  {&__pyx_n_s_sage_misc_prandom, __pyx_k_sage_misc_prandom, sizeof(__pyx_k_sage_misc_prandom), 0, 0, 1, 1},
  {&__pyx_n_s_sage_misc_temporary_file, __pyx_k_sage_misc_temporary_file, sizeof(__pyx_k_sage_misc_temporary_file), 0, 0, 1, 1},
  {&__pyx_n_s_sage_rings_integer_ring, __pyx_k_sage_rings_integer_ring, sizeof(__pyx_k_sage_rings_integer_ring), 0, 0, 1, 1},
  {&__pyx_n_s_sage_rings_qqbar, __pyx_k_sage_rings_qqbar, sizeof(__pyx_k_sage_rings_qqbar), 0, 0, 1, 1},
  {&__pyx_n_s_sage_structure_richcmp, __pyx_k_sage_structure_richcmp, sizeof(__pyx_k_sage_structure_richcmp), 0, 0, 1, 1},
  {&__pyx_kp_s_set_successor_s_s_s_index_out_of, __pyx_k_set_successor_s_s_s_index_out_of, sizeof(__pyx_k_set_successor_s_s_s_index_out_of), 0, 0, 1, 0},
  {&__pyx_n_s_setstate, __pyx_k_setstate, sizeof(__pyx_k_setstate), 0, 0, 1, 1},
  {&__pyx_n_s_setstate_cython, __pyx_k_setstate_cython, sizeof(__pyx_k_setstate_cython), 0, 0, 1, 1},
  {&__pyx_n_s_shift_list_in_place, __pyx_k_shift_list_in_place, sizeof(__pyx_k_shift_list_in_place), 0, 0, 1, 1},
  {&__pyx_n_s_simplify, __pyx_k_simplify, sizeof(__pyx_k_simplify), 0, 0, 1, 1},
  {&__pyx_n_s_sink, __pyx_k_sink, sizeof(__pyx_k_sink), 0, 0, 1, 1},
  {&__pyx_n_s_sink_state, __pyx_k_sink_state, sizeof(__pyx_k_sink_state), 0, 0, 1, 1},
  {&__pyx_n_s_sort, __pyx_k_sort, sizeof(__pyx_k_sort), 0, 0, 1, 1},
  {&__pyx_kp_s_sp_s, __pyx_k_sp_s, sizeof(__pyx_k_sp_s), 0, 0, 1, 0},
  {&__pyx_n_s_sparse, __pyx_k_sparse, sizeof(__pyx_k_sparse), 0, 0, 1, 1},
  {&__pyx_n_s_spectral_radius, __pyx_k_spectral_radius, sizeof(__pyx_k_spectral_radius), 0, 0, 1, 1},
  {&__pyx_n_s_spectral_radius_locals_lambda, __pyx_k_spectral_radius_locals_lambda, sizeof(__pyx_k_spectral_radius_locals_lambda), 0, 0, 1, 1},
  {&__pyx_kp_s_spm_s, __pyx_k_spm_s, sizeof(__pyx_k_spm_s), 0, 0, 1, 0},
  {&__pyx_n_s_states, __pyx_k_states, sizeof(__pyx_k_states), 0, 0, 1, 1},
  {&__pyx_n_s_strongly_connected_components, __pyx_k_strongly_connected_components, sizeof(__pyx_k_strongly_connected_components), 0, 0, 1, 1},
  {&__pyx_n_s_sub_automaton, __pyx_k_sub_automaton, sizeof(__pyx_k_sub_automaton), 0, 0, 1, 1},
  {&__pyx_n_s_successor, __pyx_k_successor, sizeof(__pyx_k_successor), 0, 0, 1, 1},
  {&__pyx_n_s_sx, __pyx_k_sx, sizeof(__pyx_k_sx), 0, 0, 1, 1},
  {&__pyx_n_s_sy, __pyx_k_sy, sizeof(__pyx_k_sy), 0, 0, 1, 1},
  {&__pyx_n_s_test, __pyx_k_test, sizeof(__pyx_k_test), 0, 0, 1, 1},
  {&__pyx_n_s_tmp_filename, __pyx_k_tmp_filename, sizeof(__pyx_k_tmp_filename), 0, 0, 1, 1},
  {&__pyx_n_s_to_state, __pyx_k_to_state, sizeof(__pyx_k_to_state), 0, 0, 1, 1},
  {&__pyx_n_s_transitions, __pyx_k_transitions, sizeof(__pyx_k_transitions), 0, 0, 1, 1},
  {&__pyx_n_s_union, __pyx_k_union, sizeof(__pyx_k_union), 0, 0, 1, 1},
  {&__pyx_n_s_unshift, __pyx_k_unshift, sizeof(__pyx_k_unshift), 0, 0, 1, 1},
  {&__pyx_n_s_values, __pyx_k_values, sizeof(__pyx_k_values), 0, 0, 1, 1},
  {&__pyx_n_s_verb, __pyx_k_verb, sizeof(__pyx_k_verb), 0, 0, 1, 1},
  {&__pyx_n_s_vertices, __pyx_k_vertices, sizeof(__pyx_k_vertices), 0, 0, 1, 1},
  {&__pyx_n_s_vertices_and_edges, __pyx_k_vertices_and_edges, sizeof(__pyx_k_vertices_and_edges), 0, 0, 1, 1},
  {&__pyx_kp_s_vertices_s, __pyx_k_vertices_s, sizeof(__pyx_k_vertices_s), 0, 0, 1, 0},
  {&__pyx_kp_s_vl_NULL, __pyx_k_vl_NULL, sizeof(__pyx_k_vl_NULL), 0, 0, 1, 0},
  {&__pyx_n_s_vlabels, __pyx_k_vlabels, sizeof(__pyx_k_vlabels), 0, 0, 1, 1},
  {&__pyx_n_s_w, __pyx_k_w, sizeof(__pyx_k_w), 0, 0, 1, 1},
  {&__pyx_n_s_word_in, __pyx_k_word_in, sizeof(__pyx_k_word_in), 0, 0, 1, 1},
  {&__pyx_kp_s_word_not_found, __pyx_k_word_not_found, sizeof(__pyx_k_word_not_found), 0, 0, 1, 0},
  {&__pyx_n_s_word_out, __pyx_k_word_out, sizeof(__pyx_k_word_out), 0, 0, 1, 1},
  {&__pyx_kp_s_yes, __pyx_k_yes, sizeof(__pyx_k_yes), 0, 0, 1, 0},
  {&__pyx_n_s_z, __pyx_k_z, sizeof(__pyx_k_z), 0, 0, 1, 1},
  {0, 0, 0, 0, 0, 0, 0}
};
static CYTHON_SMALL_CODE int __Pyx_InitCachedBuiltins(void) {
  __pyx_builtin_range = __Pyx_GetBuiltinName(__pyx_n_s_range); if (!__pyx_builtin_range) __PYX_ERR(0, 159, __pyx_L1_error)
  __pyx_builtin_print = __Pyx_GetBuiltinName(__pyx_n_s_print); if (!__pyx_builtin_print) __PYX_ERR(0, 218, __pyx_L1_error)
  __pyx_builtin_AttributeError = __Pyx_GetBuiltinName(__pyx_n_s_AttributeError); if (!__pyx_builtin_AttributeError) __PYX_ERR(0, 244, __pyx_L1_error)
  __pyx_builtin_ValueError = __Pyx_GetBuiltinName(__pyx_n_s_ValueError); if (!__pyx_builtin_ValueError) __PYX_ERR(0, 282, __pyx_L1_error)
  __pyx_builtin_MemoryError = __Pyx_GetBuiltinName(__pyx_n_s_MemoryError); if (!__pyx_builtin_MemoryError) __PYX_ERR(0, 375, __pyx_L1_error)
  __pyx_builtin_enumerate = __Pyx_GetBuiltinName(__pyx_n_s_enumerate); if (!__pyx_builtin_enumerate) __PYX_ERR(0, 387, __pyx_L1_error)
  __pyx_builtin_ImportError = __Pyx_GetBuiltinName(__pyx_n_s_ImportError); if (!__pyx_builtin_ImportError) __PYX_ERR(0, 704, __pyx_L1_error)
  __pyx_builtin_open = __Pyx_GetBuiltinName(__pyx_n_s_open); if (!__pyx_builtin_open) __PYX_ERR(0, 721, __pyx_L1_error)
  __pyx_builtin_NotImplemented = __Pyx_GetBuiltinName(__pyx_n_s_NotImplemented); if (!__pyx_builtin_NotImplemented) __PYX_ERR(0, 1115, __pyx_L1_error)
  __pyx_builtin_NotImplementedError = __Pyx_GetBuiltinName(__pyx_n_s_NotImplementedError); if (!__pyx_builtin_NotImplementedError) __PYX_ERR(0, 1282, __pyx_L1_error)
  __pyx_builtin_TypeError = __Pyx_GetBuiltinName(__pyx_n_s_TypeError); if (!__pyx_builtin_TypeError) __PYX_ERR(1, 2, __pyx_L1_error)
  __pyx_builtin_max = __Pyx_GetBuiltinName(__pyx_n_s_max); if (!__pyx_builtin_max) __PYX_ERR(0, 4603, __pyx_L1_error)
  return 0;
  __pyx_L1_error:;
  return -1;
}

static CYTHON_SMALL_CODE int __Pyx_InitCachedConstants(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_InitCachedConstants", 0);

  /* "automata/cautomata.pyx":245
 *                 F = a.vertices()
 *             except AttributeError:
 *                     raise AttributeError("No vertices() method")             # <<<<<<<<<<<<<<
 *         else:
 *             F = a.F
 */
  __pyx_tuple__4 = PyTuple_Pack(1, __pyx_kp_s_No_vertices_method); if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 245, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__4);
  __Pyx_GIVEREF(__pyx_tuple__4);

  /* "automata/cautomata.pyx":338
 *     sig_off()
 *     if verb:
 *         print("init...")             # <<<<<<<<<<<<<<
 *     for i in range(n):
 *         d[V[i]] = i
 */
  __pyx_tuple__5 = PyTuple_Pack(1, __pyx_kp_s_init); if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 338, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__5);
  __Pyx_GIVEREF(__pyx_tuple__5);

  /* "automata/cautomata.pyx":345
 *         da[A[i]] = i
 *     if verb:
 *         print("final states...")             # <<<<<<<<<<<<<<
 *     for v in F:
 *         if not d.has_key(v):
 */
  __pyx_tuple__6 = PyTuple_Pack(1, __pyx_kp_s_final_states); if (unlikely(!__pyx_tuple__6)) __PYX_ERR(0, 345, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__6);
  __Pyx_GIVEREF(__pyx_tuple__6);

  /* "automata/cautomata.pyx":351
 *             FreeNAutomaton(&r)
 *             sig_off()
 *             raise ValueError("Incorrect set of final states.")             # <<<<<<<<<<<<<<
 *         if verb:
 *             print("d[%s]=%s" % (v, d[v]))
 */
  __pyx_tuple__7 = PyTuple_Pack(1, __pyx_kp_s_Incorrect_set_of_final_states); if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 351, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__7);
  __Pyx_GIVEREF(__pyx_tuple__7);

  /* "automata/cautomata.pyx":356
 *         r.e[d[v]].final = 1
 *     if verb:
 *         print("initial states...")             # <<<<<<<<<<<<<<
 *     for v in I:
 *         if not d.has_key(v):
 */
  __pyx_tuple__8 = PyTuple_Pack(1, __pyx_kp_s_initial_states); if (unlikely(!__pyx_tuple__8)) __PYX_ERR(0, 356, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__8);
  __Pyx_GIVEREF(__pyx_tuple__8);

  /* "automata/cautomata.pyx":369
 *     if verb:
 *         print(dt)
 *         print("browse transitions...")             # <<<<<<<<<<<<<<
 * 
 *     for e, f, l in a.edges():
 */
  __pyx_tuple__9 = PyTuple_Pack(1, __pyx_kp_s_browse_transitions); if (unlikely(!__pyx_tuple__9)) __PYX_ERR(0, 369, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__9);
  __Pyx_GIVEREF(__pyx_tuple__9);

  /* "automata/cautomata.pyx":378
 *     if verb:
 *         print(dt)
 *         print("Alloc...")             # <<<<<<<<<<<<<<
 *     for e in V:
 *         r.e[d[e]].n = len(dt[e])
 */
  __pyx_tuple__10 = PyTuple_Pack(1, __pyx_kp_s_Alloc); if (unlikely(!__pyx_tuple__10)) __PYX_ERR(0, 378, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__10);
  __Pyx_GIVEREF(__pyx_tuple__10);

  /* "automata/cautomata.pyx":499
 *         sig_off()
 *         if self.a is NULL:
 *             raise MemoryError("Failed to allocate memory for "             # <<<<<<<<<<<<<<
 *                               "C initialization of CAutomaton.")
 *         self.a.e = NULL
 */
  __pyx_tuple__11 = PyTuple_Pack(1, __pyx_kp_s_Failed_to_allocate_memory_for_C); if (unlikely(!__pyx_tuple__11)) __PYX_ERR(0, 499, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__11);
  __Pyx_GIVEREF(__pyx_tuple__11);

  /* "automata/cautomata.pyx":525
 *         if a is None:
 *             if verb:
 *                 print("a is None")             # <<<<<<<<<<<<<<
 *             return
 *         from sage.graphs.digraph import DiGraph
 */
  __pyx_tuple__12 = PyTuple_Pack(1, __pyx_kp_s_a_is_None); if (unlikely(!__pyx_tuple__12)) __PYX_ERR(0, 525, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__12);
  __Pyx_GIVEREF(__pyx_tuple__12);

  /* "automata/cautomata.pyx":531
 *         if isinstance(a, SageAutomaton):
 *             if verb:
 *                 print("Sage automaton...")             # <<<<<<<<<<<<<<
 *             L = []
 *             for t in a.transitions():
 */
  __pyx_tuple__13 = PyTuple_Pack(1, __pyx_kp_s_Sage_automaton); if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 531, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__13);
  __Pyx_GIVEREF(__pyx_tuple__13);

  /* "automata/cautomata.pyx":535
 *             for t in a.transitions():
 *                 if len(t.word_in) != 1 or len(t.word_out) != 0:
 *                     print("Warning: informations lost during the conversion.")             # <<<<<<<<<<<<<<
 *                 L.append((t.from_state, t.to_state, t.word_in[0]))
 *             if I is None:
 */
  __pyx_tuple__14 = PyTuple_Pack(1, __pyx_kp_s_Warning_informations_lost_during); if (unlikely(!__pyx_tuple__14)) __PYX_ERR(0, 535, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__14);
  __Pyx_GIVEREF(__pyx_tuple__14);

  /* "automata/cautomata.pyx":544
 *         if isinstance(a, list):
 *             if verb:
 *                 print("List...")             # <<<<<<<<<<<<<<
 *             a = DiGraph(a, multiedges=True, loops=True)
 *         if isinstance(a, DiGraph):
 */
  __pyx_tuple__15 = PyTuple_Pack(1, __pyx_kp_s_List); if (unlikely(!__pyx_tuple__15)) __PYX_ERR(0, 544, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__15);
  __Pyx_GIVEREF(__pyx_tuple__15);

  /* "automata/cautomata.pyx":548
 *         if isinstance(a, DiGraph):
 *             if verb:
 *                 print("DiGraph...")             # <<<<<<<<<<<<<<
 *             SL = set(a.edge_labels())
 *             if A is None:
 */
  __pyx_tuple__16 = PyTuple_Pack(1, __pyx_kp_s_DiGraph_2); if (unlikely(!__pyx_tuple__16)) __PYX_ERR(0, 548, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__16);
  __Pyx_GIVEREF(__pyx_tuple__16);

  /* "automata/cautomata.pyx":564
 *         elif isinstance(a, CAutomaton):
 *             if verb:
 *                 print("CAutomaton")             # <<<<<<<<<<<<<<
 *             na = a
 *             sig_on()
 */
  __pyx_tuple__17 = PyTuple_Pack(1, __pyx_n_s_CAutomaton); if (unlikely(!__pyx_tuple__17)) __PYX_ERR(0, 564, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__17);
  __Pyx_GIVEREF(__pyx_tuple__17);

  /* "automata/cautomata.pyx":573
 *         elif isinstance(a, DeterministicAutomaton):
 *             if verb:
 *                 print("DeterministicAutomaton")             # <<<<<<<<<<<<<<
 *             da = a
 *             self.a[0] = CopyN(da.a[0], verb=verb)
 */
  __pyx_tuple__18 = PyTuple_Pack(1, __pyx_n_s_DeterministicAutomaton); if (unlikely(!__pyx_tuple__18)) __PYX_ERR(0, 573, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__18);
  __Pyx_GIVEREF(__pyx_tuple__18);

  /* "automata/cautomata.pyx":578
 *             self.A = da.A
 *         else:
 *             raise ValueError("Cannot convert the input to CAutomaton.")             # <<<<<<<<<<<<<<
 * 
 *     def __dealloc__(self):
 */
  __pyx_tuple__19 = PyTuple_Pack(1, __pyx_kp_s_Cannot_convert_the_input_to_CAut); if (unlikely(!__pyx_tuple__19)) __PYX_ERR(0, 578, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__19);
  __Pyx_GIVEREF(__pyx_tuple__19);

  /* "automata/cautomata.pyx":705
 *             from dot2tex import dot2tex
 *         except ImportError:
 *             raise ModuleNotFoundError("dot2tex must be installed in order to have the LaTeX representation of the CAutomaton.\n\             # <<<<<<<<<<<<<<
 *                 You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.")
 *         cdef char** ll
 */
  __pyx_tuple__20 = PyTuple_Pack(1, __pyx_kp_s_dot2tex_must_be_installed_in_ord); if (unlikely(!__pyx_tuple__20)) __PYX_ERR(0, 705, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__20);
  __Pyx_GIVEREF(__pyx_tuple__20);

  /* "automata/cautomata.pyx":710
 *         ll = <char **> malloc(sizeof(char*) * self.a.na)
 *         if ll is NULL:
 *             raise MemoryError("Failed to allocate memory for ll in "             # <<<<<<<<<<<<<<
 *                               "_latex_")
 *         cdef int i
 */
  __pyx_tuple__21 = PyTuple_Pack(1, __pyx_kp_s_Failed_to_allocate_memory_for_ll); if (unlikely(!__pyx_tuple__21)) __PYX_ERR(0, 710, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__21);
  __Pyx_GIVEREF(__pyx_tuple__21);

  /* "automata/cautomata.pyx":739
 * 
 *         """
 *         r = CAutomaton(None)             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r.a[0] = CopyNAutomaton(self.a[0], self.a.n, self.a.na)
 */
  __pyx_tuple__22 = PyTuple_Pack(1, Py_None); if (unlikely(!__pyx_tuple__22)) __PYX_ERR(0, 739, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__22);
  __Pyx_GIVEREF(__pyx_tuple__22);

  /* "automata/cautomata.pyx":1159
 *         cdef int *l = <int *>malloc(sizeof(int)*len(li))
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "             # <<<<<<<<<<<<<<
 *                               "add_path")
 *         for i in range(len(li)):
 */
  __pyx_tuple__23 = PyTuple_Pack(1, __pyx_kp_s_Failed_to_allocate_memory_for_l); if (unlikely(!__pyx_tuple__23)) __PYX_ERR(0, 1159, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__23);
  __Pyx_GIVEREF(__pyx_tuple__23);

  /* "automata/cautomata.pyx":1239
 *         cdef bool de
 *         if verb:
 *             print("Test if dot exists...")             # <<<<<<<<<<<<<<
 *         sig_on()
 *         de = DotExists ()
 */
  __pyx_tuple__24 = PyTuple_Pack(1, __pyx_kp_s_Test_if_dot_exists); if (unlikely(!__pyx_tuple__24)) __PYX_ERR(0, 1239, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__24);
  __Pyx_GIVEREF(__pyx_tuple__24);

  /* "automata/cautomata.pyx":1245
 *         if de:
 *             if verb:
 *                 print(" -> yes !")             # <<<<<<<<<<<<<<
 *                 print("alloc ll (size=%s)..." % self.a.na)
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 */
  __pyx_tuple__25 = PyTuple_Pack(1, __pyx_kp_s_yes); if (unlikely(!__pyx_tuple__25)) __PYX_ERR(0, 1245, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__25);
  __Pyx_GIVEREF(__pyx_tuple__25);

  /* "automata/cautomata.pyx":1249
 *             ll = <char **>malloc(sizeof(char*) * self.a.na)
 *             if ll is NULL:
 *                 raise MemoryError("Failed to allocate memory for ll in "             # <<<<<<<<<<<<<<
 *                                   "plot")
 *             strA = []
 */
  __pyx_tuple__26 = PyTuple_Pack(1, __pyx_kp_s_Failed_to_allocate_memory_for_ll_2); if (unlikely(!__pyx_tuple__26)) __PYX_ERR(0, 1249, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__26);
  __Pyx_GIVEREF(__pyx_tuple__26);

  /* "automata/cautomata.pyx":1266
 *             sig_off()
 *             if verb:
 *                 print("Ouvre l'image produite...")             # <<<<<<<<<<<<<<
 *             from PIL import Image
 *             return Image.open(file+'.png')
 */
  __pyx_tuple__27 = PyTuple_Pack(1, __pyx_kp_s_Ouvre_l_image_produite); if (unlikely(!__pyx_tuple__27)) __PYX_ERR(0, 1266, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__27);
  __Pyx_GIVEREF(__pyx_tuple__27);

  /* "automata/cautomata.pyx":1281
 *         else:
 *             if verb:
 *                 print(" -> no.")             # <<<<<<<<<<<<<<
 *             raise NotImplementedError("You cannot plot the CAutomaton without dot. Install the dot command of the GraphViz package.")
 * 
 */
  __pyx_tuple__28 = PyTuple_Pack(1, __pyx_kp_s_no); if (unlikely(!__pyx_tuple__28)) __PYX_ERR(0, 1281, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__28);
  __Pyx_GIVEREF(__pyx_tuple__28);

  /* "automata/cautomata.pyx":1282
 *             if verb:
 *                 print(" -> no.")
 *             raise NotImplementedError("You cannot plot the CAutomaton without dot. Install the dot command of the GraphViz package.")             # <<<<<<<<<<<<<<
 * 
 * 
 */
  __pyx_tuple__29 = PyTuple_Pack(1, __pyx_kp_s_You_cannot_plot_the_CAutomaton_w); if (unlikely(!__pyx_tuple__29)) __PYX_ERR(0, 1282, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__29);
  __Pyx_GIVEREF(__pyx_tuple__29);

  /* "(tree fragment)":2
 * def __reduce_cython__(self):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")             # <<<<<<<<<<<<<<
 * def __setstate_cython__(self, __pyx_state):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 */
  __pyx_tuple__30 = PyTuple_Pack(1, __pyx_kp_s_no_default___reduce___due_to_non); if (unlikely(!__pyx_tuple__30)) __PYX_ERR(1, 2, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__30);
  __Pyx_GIVEREF(__pyx_tuple__30);

  /* "(tree fragment)":4
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")             # <<<<<<<<<<<<<<
 */
  __pyx_tuple__31 = PyTuple_Pack(1, __pyx_kp_s_no_default___reduce___due_to_non); if (unlikely(!__pyx_tuple__31)) __PYX_ERR(1, 4, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__31);
  __Pyx_GIVEREF(__pyx_tuple__31);

  /* "automata/cautomata.pyx":1331
 *         self.a = <Automaton *>malloc(sizeof(Automaton))
 *         if self.a is NULL:
 *             raise MemoryError("Failed to allocate memory for "             # <<<<<<<<<<<<<<
 *                               "C initialization of DeterministicAutomaton.")
 *         # initialise
 */
  __pyx_tuple__32 = PyTuple_Pack(1, __pyx_kp_s_Failed_to_allocate_memory_for_C_2); if (unlikely(!__pyx_tuple__32)) __PYX_ERR(0, 1331, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__32);
  __Pyx_GIVEREF(__pyx_tuple__32);

  /* "automata/cautomata.pyx":1377
 *                 self.a.na = len(A)
 *             if i is not None:
 *                 print("Warning: Ignore i since there is no state.")             # <<<<<<<<<<<<<<
 *             if final_states is not None:
 *                 print("Warning: Ignore final_states since there is no state.")
 */
  __pyx_tuple__33 = PyTuple_Pack(1, __pyx_kp_s_Warning_Ignore_i_since_there_is); if (unlikely(!__pyx_tuple__33)) __PYX_ERR(0, 1377, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__33);
  __Pyx_GIVEREF(__pyx_tuple__33);

  /* "automata/cautomata.pyx":1379
 *                 print("Warning: Ignore i since there is no state.")
 *             if final_states is not None:
 *                 print("Warning: Ignore final_states since there is no state.")             # <<<<<<<<<<<<<<
 *             if S is not None:
 *                 print("Warning: Ignore S since there is no state.")
 */
  __pyx_tuple__34 = PyTuple_Pack(1, __pyx_kp_s_Warning_Ignore_final_states_sinc); if (unlikely(!__pyx_tuple__34)) __PYX_ERR(0, 1379, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__34);
  __Pyx_GIVEREF(__pyx_tuple__34);

  /* "automata/cautomata.pyx":1381
 *                 print("Warning: Ignore final_states since there is no state.")
 *             if S is not None:
 *                 print("Warning: Ignore S since there is no state.")             # <<<<<<<<<<<<<<
 *             return
 *         from sage.graphs.digraph import DiGraph
 */
  __pyx_tuple__35 = PyTuple_Pack(1, __pyx_kp_s_Warning_Ignore_S_since_there_is); if (unlikely(!__pyx_tuple__35)) __PYX_ERR(0, 1381, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__35);
  __Pyx_GIVEREF(__pyx_tuple__35);

  /* "automata/cautomata.pyx":1398
 *                     i = I[0]
 *                 else:
 *                     print("Warning: the automaton has several initial states.")             # <<<<<<<<<<<<<<
 *             if final_states is None:
 *                 final_states = a.final_states()
 */
  __pyx_tuple__36 = PyTuple_Pack(1, __pyx_kp_s_Warning_the_automaton_has_severa); if (unlikely(!__pyx_tuple__36)) __PYX_ERR(0, 1398, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__36);
  __Pyx_GIVEREF(__pyx_tuple__36);

  /* "automata/cautomata.pyx":1404
 *         if isinstance(a, list):
 *             if verb:
 *                 print("list...")             # <<<<<<<<<<<<<<
 *             if S is None:
 *                 a = DiGraph(a, multiedges=True, loops=True)
 */
  __pyx_tuple__37 = PyTuple_Pack(1, __pyx_kp_s_list); if (unlikely(!__pyx_tuple__37)) __PYX_ERR(0, 1404, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__37);
  __Pyx_GIVEREF(__pyx_tuple__37);

  /* "automata/cautomata.pyx":1429
 *         elif isinstance(a, DeterministicAutomaton):
 *             if verb:
 *                 print("DeterministicAutomaton...")             # <<<<<<<<<<<<<<
 *             da = a
 *             sig_on()
 */
  __pyx_tuple__38 = PyTuple_Pack(1, __pyx_kp_s_DeterministicAutomaton_2); if (unlikely(!__pyx_tuple__38)) __PYX_ERR(0, 1429, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__38);
  __Pyx_GIVEREF(__pyx_tuple__38);

  /* "automata/cautomata.pyx":1437
 *             self.S = da.S
 *         else:
 *             raise ValueError("Cannot convert the input to DeterministicAutomaton.")             # <<<<<<<<<<<<<<
 * 
 *     def __dealloc__(self):
 */
  __pyx_tuple__39 = PyTuple_Pack(1, __pyx_kp_s_Cannot_convert_the_input_to_Dete); if (unlikely(!__pyx_tuple__39)) __PYX_ERR(0, 1437, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__39);
  __Pyx_GIVEREF(__pyx_tuple__39);

  /* "automata/cautomata.pyx":1627
 *             from dot2tex import dot2tex
 *         except ImportError:
 *             print("dot2tex must be installed in order to have the LaTeX representation of the DeterministicAutomaton.")             # <<<<<<<<<<<<<<
 *             print("You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.")
 *             return None
 */
  __pyx_tuple__40 = PyTuple_Pack(1, __pyx_kp_s_dot2tex_must_be_installed_in_ord_2); if (unlikely(!__pyx_tuple__40)) __PYX_ERR(0, 1627, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__40);
  __Pyx_GIVEREF(__pyx_tuple__40);

  /* "automata/cautomata.pyx":1628
 *         except ImportError:
 *             print("dot2tex must be installed in order to have the LaTeX representation of the DeterministicAutomaton.")
 *             print("You can install it by doing './sage -i dot2tex' in a shell in the sage directory, or by doing 'install_package(package='dot2tex')' in the notebook.")             # <<<<<<<<<<<<<<
 *             return None
 *         cdef char** ll # labels of edges
 */
  __pyx_tuple__41 = PyTuple_Pack(1, __pyx_kp_s_You_can_install_it_by_doing_sage); if (unlikely(!__pyx_tuple__41)) __PYX_ERR(0, 1628, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__41);
  __Pyx_GIVEREF(__pyx_tuple__41);

  /* "automata/cautomata.pyx":1644
 *             vl = <char **>malloc(sizeof(char*) * self.a.n)
 *             if vl is NULL:
 *                 raise MemoryError("Failed to allocate memory for vl in "             # <<<<<<<<<<<<<<
 *                                   "_latex_")
 *             strV = []
 */
  __pyx_tuple__42 = PyTuple_Pack(1, __pyx_kp_s_Failed_to_allocate_memory_for_vl); if (unlikely(!__pyx_tuple__42)) __PYX_ERR(0, 1644, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__42);
  __Pyx_GIVEREF(__pyx_tuple__42);

  /* "automata/cautomata.pyx":1667
 *                 print("i=%s : %s" % (i, vl[i]))
 *         if verb:
 *             print("plot...")             # <<<<<<<<<<<<<<
 *         sig_on()
 *         plotDot(file, self.a[0], ll, "Automaton", sx, sy, vl, html, verb, False)
 */
  __pyx_tuple__46 = PyTuple_Pack(1, __pyx_kp_s_plot); if (unlikely(!__pyx_tuple__46)) __PYX_ERR(0, 1667, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__46);
  __Pyx_GIVEREF(__pyx_tuple__46);

  /* "automata/cautomata.pyx":1672
 *         sig_off()
 *         if verb:
 *             print("free...plot")             # <<<<<<<<<<<<<<
 *         sig_on()
 *         free(ll)
 */
  __pyx_tuple__47 = PyTuple_Pack(1, __pyx_kp_s_free_plot); if (unlikely(!__pyx_tuple__47)) __PYX_ERR(0, 1672, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__47);
  __Pyx_GIVEREF(__pyx_tuple__47);

  /* "automata/cautomata.pyx":1751
 *         if self.A != other.A:
 *             if verb:
 *                 print("The alphabets are differents.")             # <<<<<<<<<<<<<<
 *             return False
 *         sig_on()
 */
  __pyx_tuple__49 = PyTuple_Pack(1, __pyx_kp_s_The_alphabets_are_differents); if (unlikely(!__pyx_tuple__49)) __PYX_ERR(0, 1751, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__49);
  __Pyx_GIVEREF(__pyx_tuple__49);

  /* "automata/cautomata.pyx":1792
 *         cdef int r
 *         if op != op_EQ and op != op_NE:
 *             raise NotImplementedError("Comparaison <, >, <= or >= not implemented for DetAutomata.")             # <<<<<<<<<<<<<<
 *         sig_on()
 *         r = equalsAutomaton(self.a[0], other.a[0], False) and self.A == other.A
 */
  __pyx_tuple__50 = PyTuple_Pack(1, __pyx_kp_s_Comparaison_or_not_implemented_f); if (unlikely(!__pyx_tuple__50)) __PYX_ERR(0, 1792, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__50);
  __Pyx_GIVEREF(__pyx_tuple__50);

  /* "automata/cautomata.pyx":1908
 *                     sig_off()
 *                     if vl is NULL:
 *                         raise MemoryError("Failed to allocate memory for vl in "             # <<<<<<<<<<<<<<
 *                                           "plot")
 *                     strV = []
 */
  __pyx_tuple__51 = PyTuple_Pack(1, __pyx_kp_s_Failed_to_allocate_memory_for_vl_2); if (unlikely(!__pyx_tuple__51)) __PYX_ERR(0, 1908, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__51);
  __Pyx_GIVEREF(__pyx_tuple__51);

  /* "automata/cautomata.pyx":1925
 *                 else:
 *                     if verb:
 *                         print("vl = NULL")             # <<<<<<<<<<<<<<
 *                     vl = NULL
 *             else:
 */
  __pyx_tuple__52 = PyTuple_Pack(1, __pyx_kp_s_vl_NULL); if (unlikely(!__pyx_tuple__52)) __PYX_ERR(0, 1925, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__52);
  __Pyx_GIVEREF(__pyx_tuple__52);

  /* "automata/cautomata.pyx":2754
 *             V = d.values()
 *             if len(V) != len(set(V)):
 *                 raise ValueError("The dictionnary is not injective!")             # <<<<<<<<<<<<<<
 *         cdef Automaton a
 *         cdef Dict dC
 */
  __pyx_tuple__53 = PyTuple_Pack(1, __pyx_kp_s_The_dictionnary_is_not_injective); if (unlikely(!__pyx_tuple__53)) __PYX_ERR(0, 2754, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__53);
  __Pyx_GIVEREF(__pyx_tuple__53);

  /* "automata/cautomata.pyx":2765
 *         dC = getProductDict(d, self.A, b.A, dv=dv, verb=verb)
 *         if verb:
 *             print("dC=")             # <<<<<<<<<<<<<<
 *             sig_on()
 *             printDict(dC)
 */
  __pyx_tuple__54 = PyTuple_Pack(1, __pyx_kp_s_dC); if (unlikely(!__pyx_tuple__54)) __PYX_ERR(0, 2765, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__54);
  __Pyx_GIVEREF(__pyx_tuple__54);

  /* "automata/cautomata.pyx":3385
 * 
 *         if np <= 0:
 *             raise ValueError("np must be positive!")             # <<<<<<<<<<<<<<
 * 
 *         r = DeterministicAutomaton(None)
 */
  __pyx_tuple__55 = PyTuple_Pack(1, __pyx_kp_s_np_must_be_positive); if (unlikely(!__pyx_tuple__55)) __PYX_ERR(0, 3385, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__55);
  __Pyx_GIVEREF(__pyx_tuple__55);

  /* "automata/cautomata.pyx":3571
 *         if det:
 *             if verb:
 *                 print("Determinize...")             # <<<<<<<<<<<<<<
 *             r2 = r.determinize()
 *             if simplify:
 */
  __pyx_tuple__56 = PyTuple_Pack(1, __pyx_kp_s_Determinize); if (unlikely(!__pyx_tuple__56)) __PYX_ERR(0, 3571, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__56);
  __Pyx_GIVEREF(__pyx_tuple__56);

  /* "automata/cautomata.pyx":3575
 *             if simplify:
 *                 if verb:
 *                     print("Prune and minimize...")             # <<<<<<<<<<<<<<
 *                 return r2.prune().minimize()
 *             else:
 */
  __pyx_tuple__57 = PyTuple_Pack(1, __pyx_kp_s_Prune_and_minimize); if (unlikely(!__pyx_tuple__57)) __PYX_ERR(0, 3575, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__57);
  __Pyx_GIVEREF(__pyx_tuple__57);

  /* "automata/cautomata.pyx":3774
 *         sig_off()
 *         if verb:
 *             print("end...")             # <<<<<<<<<<<<<<
 *         sig_on()
 *         FreeInvertDict(dC)
 */
  __pyx_tuple__58 = PyTuple_Pack(1, __pyx_kp_s_end); if (unlikely(!__pyx_tuple__58)) __PYX_ERR(0, 3774, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__58);
  __Pyx_GIVEREF(__pyx_tuple__58);

  /* "automata/cautomata.pyx":3881
 *         l = <int*>malloc(sizeof(int) * len(A))
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "             # <<<<<<<<<<<<<<
 *                               "permut")
 *         for i in range(self.a.na):
 */
  __pyx_tuple__59 = PyTuple_Pack(1, __pyx_kp_s_Failed_to_allocate_memory_for_l_2); if (unlikely(!__pyx_tuple__59)) __PYX_ERR(0, 3881, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__59);
  __Pyx_GIVEREF(__pyx_tuple__59);

  /* "automata/cautomata.pyx":3964
 *         sig_off()
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "             # <<<<<<<<<<<<<<
 *                               "permut_in_place")
 *         for i in range(self.a.na):
 */
  __pyx_tuple__61 = PyTuple_Pack(1, __pyx_kp_s_Failed_to_allocate_memory_for_l_3); if (unlikely(!__pyx_tuple__61)) __PYX_ERR(0, 3964, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__61);
  __Pyx_GIVEREF(__pyx_tuple__61);

  /* "automata/cautomata.pyx":4133
 *         sig_off()
 *         if l is NULL:
 *             raise MemoryError("Failed to allocate memory for l in "             # <<<<<<<<<<<<<<
 *                               "strongly_connected_component.")
 *         sig_on()
 */
  __pyx_tuple__62 = PyTuple_Pack(1, __pyx_kp_s_Failed_to_allocate_memory_for_l_4); if (unlikely(!__pyx_tuple__62)) __PYX_ERR(0, 4133, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__62);
  __Pyx_GIVEREF(__pyx_tuple__62);

  /* "automata/cautomata.pyx":4203
 *         # check that the list l is correct
 *         if len(l) != len(set(l)):
 *             raise ValueError("A state of the list appears several times")             # <<<<<<<<<<<<<<
 *         n = self.a.n
 *         for i in l:
 */
  __pyx_tuple__63 = PyTuple_Pack(1, __pyx_kp_s_A_state_of_the_list_appears_seve); if (unlikely(!__pyx_tuple__63)) __PYX_ERR(0, 4203, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__63);
  __Pyx_GIVEREF(__pyx_tuple__63);

  /* "automata/cautomata.pyx":4584
 *             print("%s component strongly connex." % len(l))
 *         r = 0  # valeur propre maximale trouve
 *         spm = (0,0) #encadrement de l'approximation maximale trouve             # <<<<<<<<<<<<<<
 *         for c in l:
 *             if not only_non_trivial or len(c) > 1:
 */
  __pyx_tuple__64 = PyTuple_Pack(2, __pyx_int_0, __pyx_int_0); if (unlikely(!__pyx_tuple__64)) __PYX_ERR(0, 4584, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__64);
  __Pyx_GIVEREF(__pyx_tuple__64);

  /* "automata/cautomata.pyx":4596
 *                     if g.is_aperiodic():
 *                         if verb:
 *                             print("aperiodic")             # <<<<<<<<<<<<<<
 *                         sp = g.spectral_radius()
 *                         if verb:
 */
  __pyx_tuple__65 = PyTuple_Pack(1, __pyx_n_s_aperiodic); if (unlikely(!__pyx_tuple__65)) __PYX_ERR(0, 4596, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__65);
  __Pyx_GIVEREF(__pyx_tuple__65);

  /* "automata/cautomata.pyx":4602
 *                     else:
 *                         if verb:
 *                             print("non aperiodic")             # <<<<<<<<<<<<<<
 *                         r = max(b.adjacency_matrix().charpoly().real_roots())
 *                         sp = (r,r)
 */
  __pyx_tuple__66 = PyTuple_Pack(1, __pyx_kp_s_non_aperiodic); if (unlikely(!__pyx_tuple__66)) __PYX_ERR(0, 4602, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__66);
  __Pyx_GIVEREF(__pyx_tuple__66);

  /* "automata/cautomata.pyx":4919
 *         sig_off()
 *         if w is NULL:
 *             raise MemoryError("Failed to allocate memory for w in "             # <<<<<<<<<<<<<<
 *                               "shortest_words")
 *         if i is None:
 */
  __pyx_tuple__67 = PyTuple_Pack(1, __pyx_kp_s_Failed_to_allocate_memory_for_w); if (unlikely(!__pyx_tuple__67)) __PYX_ERR(0, 4919, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__67);
  __Pyx_GIVEREF(__pyx_tuple__67);

  /* "(tree fragment)":2
 * def __reduce_cython__(self):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")             # <<<<<<<<<<<<<<
 * def __setstate_cython__(self, __pyx_state):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 */
  __pyx_tuple__69 = PyTuple_Pack(1, __pyx_kp_s_no_default___reduce___due_to_non); if (unlikely(!__pyx_tuple__69)) __PYX_ERR(1, 2, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__69);
  __Pyx_GIVEREF(__pyx_tuple__69);

  /* "(tree fragment)":4
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")
 * def __setstate_cython__(self, __pyx_state):
 *     raise TypeError("no default __reduce__ due to non-trivial __cinit__")             # <<<<<<<<<<<<<<
 */
  __pyx_tuple__70 = PyTuple_Pack(1, __pyx_kp_s_no_default___reduce___due_to_non); if (unlikely(!__pyx_tuple__70)) __PYX_ERR(1, 4, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_tuple__70);
  __Pyx_GIVEREF(__pyx_tuple__70);
  __Pyx_RefNannyFinishContext();
  return 0;
  __pyx_L1_error:;
  __Pyx_RefNannyFinishContext();
  return -1;
}

static CYTHON_SMALL_CODE int __Pyx_InitGlobals(void) {
  __pyx_umethod_PyDict_Type_keys.type = (PyObject*)&PyDict_Type;
  __pyx_umethod_PyDict_Type_pop.type = (PyObject*)&PyDict_Type;
  __pyx_umethod_PyDict_Type_values.type = (PyObject*)&PyDict_Type;
  __pyx_umethod_PySet_Type_issubset.type = (PyObject*)&PySet_Type;
  if (__Pyx_InitStrings(__pyx_string_tab) < 0) __PYX_ERR(0, 1, __pyx_L1_error);
  __pyx_int_0 = PyInt_FromLong(0); if (unlikely(!__pyx_int_0)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_1 = PyInt_FromLong(1); if (unlikely(!__pyx_int_1)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_int_neg_1 = PyInt_FromLong(-1); if (unlikely(!__pyx_int_neg_1)) __PYX_ERR(0, 1, __pyx_L1_error)
  return 0;
  __pyx_L1_error:;
  return -1;
}

static CYTHON_SMALL_CODE int __Pyx_modinit_global_init_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_variable_export_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_function_export_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_type_init_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_type_import_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_variable_import_code(void); /*proto*/
static CYTHON_SMALL_CODE int __Pyx_modinit_function_import_code(void); /*proto*/

static int __Pyx_modinit_global_init_code(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_modinit_global_init_code", 0);
  /*--- Global init code ---*/
  __Pyx_RefNannyFinishContext();
  return 0;
}

static int __Pyx_modinit_variable_export_code(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_modinit_variable_export_code", 0);
  /*--- Variable export code ---*/
  __Pyx_RefNannyFinishContext();
  return 0;
}

static int __Pyx_modinit_function_export_code(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_modinit_function_export_code", 0);
  /*--- Function export code ---*/
  __Pyx_RefNannyFinishContext();
  return 0;
}

static int __Pyx_modinit_type_init_code(void) {
  __Pyx_RefNannyDeclarations
  __Pyx_RefNannySetupContext("__Pyx_modinit_type_init_code", 0);
  /*--- Type init code ---*/
  if (PyType_Ready(&__pyx_type_8automata_9cautomata_DeterministicAutomaton) < 0) __PYX_ERR(0, 1285, __pyx_L1_error)
  __pyx_type_8automata_9cautomata_DeterministicAutomaton.tp_print = 0;
  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_type_8automata_9cautomata_DeterministicAutomaton.tp_dictoffset && __pyx_type_8automata_9cautomata_DeterministicAutomaton.tp_getattro == PyObject_GenericGetAttr)) {
    __pyx_type_8automata_9cautomata_DeterministicAutomaton.tp_getattro = __Pyx_PyObject_GenericGetAttr;
  }
  #if CYTHON_COMPILING_IN_CPYTHON
  {
    PyObject *wrapper = PyObject_GetAttrString((PyObject *)&__pyx_type_8automata_9cautomata_DeterministicAutomaton, "__init__"); if (unlikely(!wrapper)) __PYX_ERR(0, 1285, __pyx_L1_error)
    if (Py_TYPE(wrapper) == &PyWrapperDescr_Type) {
      __pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_2__init__ = *((PyWrapperDescrObject *)wrapper)->d_base;
      __pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_2__init__.doc = __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_2__init__;
      ((PyWrapperDescrObject *)wrapper)->d_base = &__pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_2__init__;
    }
  }
  #endif
  #if CYTHON_COMPILING_IN_CPYTHON
  {
    PyObject *wrapper = PyObject_GetAttrString((PyObject *)&__pyx_type_8automata_9cautomata_DeterministicAutomaton, "__repr__"); if (unlikely(!wrapper)) __PYX_ERR(0, 1285, __pyx_L1_error)
    if (Py_TYPE(wrapper) == &PyWrapperDescr_Type) {
      __pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_10__repr__ = *((PyWrapperDescrObject *)wrapper)->d_base;
      __pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_10__repr__.doc = __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_10__repr__;
      ((PyWrapperDescrObject *)wrapper)->d_base = &__pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_10__repr__;
    }
  }
  #endif
  #if CYTHON_COMPILING_IN_CPYTHON
  {
    PyObject *wrapper = PyObject_GetAttrString((PyObject *)&__pyx_type_8automata_9cautomata_DeterministicAutomaton, "__hash__"); if (unlikely(!wrapper)) __PYX_ERR(0, 1285, __pyx_L1_error)
    if (Py_TYPE(wrapper) == &PyWrapperDescr_Type) {
      __pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_14__hash__ = *((PyWrapperDescrObject *)wrapper)->d_base;
      __pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_14__hash__.doc = __pyx_doc_8automata_9cautomata_22DeterministicAutomaton_14__hash__;
      ((PyWrapperDescrObject *)wrapper)->d_base = &__pyx_wrapperbase_8automata_9cautomata_22DeterministicAutomaton_14__hash__;
    }
  }
  #endif
  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_DeterministicAutomaton, (PyObject *)&__pyx_type_8automata_9cautomata_DeterministicAutomaton) < 0) __PYX_ERR(0, 1285, __pyx_L1_error)
  if (__Pyx_setup_reduce((PyObject*)&__pyx_type_8automata_9cautomata_DeterministicAutomaton) < 0) __PYX_ERR(0, 1285, __pyx_L1_error)
  __pyx_ptype_8automata_9cautomata_DeterministicAutomaton = &__pyx_type_8automata_9cautomata_DeterministicAutomaton;
  if (PyType_Ready(&__pyx_type_8automata_9cautomata_CAutomaton) < 0) __PYX_ERR(0, 447, __pyx_L1_error)
  __pyx_type_8automata_9cautomata_CAutomaton.tp_print = 0;
  if ((CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP) && likely(!__pyx_type_8automata_9cautomata_CAutomaton.tp_dictoffset && __pyx_type_8automata_9cautomata_CAutomaton.tp_getattro == PyObject_GenericGetAttr)) {
    __pyx_type_8automata_9cautomata_CAutomaton.tp_getattro = __Pyx_PyObject_GenericGetAttr;
  }
  #if CYTHON_COMPILING_IN_CPYTHON
  {
    PyObject *wrapper = PyObject_GetAttrString((PyObject *)&__pyx_type_8automata_9cautomata_CAutomaton, "__init__"); if (unlikely(!wrapper)) __PYX_ERR(0, 447, __pyx_L1_error)
    if (Py_TYPE(wrapper) == &PyWrapperDescr_Type) {
      __pyx_wrapperbase_8automata_9cautomata_10CAutomaton_2__init__ = *((PyWrapperDescrObject *)wrapper)->d_base;
      __pyx_wrapperbase_8automata_9cautomata_10CAutomaton_2__init__.doc = __pyx_doc_8automata_9cautomata_10CAutomaton_2__init__;
      ((PyWrapperDescrObject *)wrapper)->d_base = &__pyx_wrapperbase_8automata_9cautomata_10CAutomaton_2__init__;
    }
  }
  #endif
  #if CYTHON_COMPILING_IN_CPYTHON
  {
    PyObject *wrapper = PyObject_GetAttrString((PyObject *)&__pyx_type_8automata_9cautomata_CAutomaton, "__repr__"); if (unlikely(!wrapper)) __PYX_ERR(0, 447, __pyx_L1_error)
    if (Py_TYPE(wrapper) == &PyWrapperDescr_Type) {
      __pyx_wrapperbase_8automata_9cautomata_10CAutomaton_6__repr__ = *((PyWrapperDescrObject *)wrapper)->d_base;
      __pyx_wrapperbase_8automata_9cautomata_10CAutomaton_6__repr__.doc = __pyx_doc_8automata_9cautomata_10CAutomaton_6__repr__;
      ((PyWrapperDescrObject *)wrapper)->d_base = &__pyx_wrapperbase_8automata_9cautomata_10CAutomaton_6__repr__;
    }
  }
  #endif
  if (PyObject_SetAttr(__pyx_m, __pyx_n_s_CAutomaton, (PyObject *)&__pyx_type_8automata_9cautomata_CAutomaton) < 0) __PYX_ERR(0, 447, __pyx_L1_error)
  if (__Pyx_setup_reduce((PyObject*)&__pyx_type_8automata_9cautomata_CAutomaton) < 0) __PYX_ERR(0, 447, __pyx_L1_error)
  __pyx_ptype_8automata_9cautomata_CAutomaton = &__pyx_type_8automata_9cautomata_CAutomaton;
  __Pyx_RefNannyFinishContext();
  return 0;
  __pyx_L1_error:;
  __Pyx_RefNannyFinishContext();
  return -1;
}

static int __Pyx_modinit_type_import_code(void) {
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__Pyx_modinit_type_import_code", 0);
  /*--- Type import code ---*/
  __pyx_t_1 = PyImport_ImportModule(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_t_1)) __PYX_ERR(2, 9, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_ptype_7cpython_4type_type = __Pyx_ImportType(__pyx_t_1, __Pyx_BUILTIN_MODULE_NAME, "type", 
  #if defined(PYPY_VERSION_NUM) && PYPY_VERSION_NUM < 0x050B0000
  sizeof(PyTypeObject),
  #else
  sizeof(PyHeapTypeObject),
  #endif
  __Pyx_ImportType_CheckSize_Warn);
   if (!__pyx_ptype_7cpython_4type_type) __PYX_ERR(2, 9, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyImport_ImportModule(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_t_1)) __PYX_ERR(3, 8, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_ptype_7cpython_4bool_bool = __Pyx_ImportType(__pyx_t_1, __Pyx_BUILTIN_MODULE_NAME, "bool", sizeof(PyBoolObject), __Pyx_ImportType_CheckSize_Warn);
   if (!__pyx_ptype_7cpython_4bool_bool) __PYX_ERR(3, 8, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyImport_ImportModule(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_t_1)) __PYX_ERR(4, 15, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_ptype_7cpython_7complex_complex = __Pyx_ImportType(__pyx_t_1, __Pyx_BUILTIN_MODULE_NAME, "complex", sizeof(PyComplexObject), __Pyx_ImportType_CheckSize_Warn);
   if (!__pyx_ptype_7cpython_7complex_complex) __PYX_ERR(4, 15, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = PyImport_ImportModule("sage.combinat.words.cautomata"); if (unlikely(!__pyx_t_1)) __PYX_ERR(5, 43, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_ptype_4sage_8combinat_5words_9cautomata_DeterministicAutomaton = __Pyx_ImportType(__pyx_t_1, "sage.combinat.words.cautomata", "DeterministicAutomaton", sizeof(struct __pyx_obj_4sage_8combinat_5words_9cautomata_DeterministicAutomaton), __Pyx_ImportType_CheckSize_Warn);
   if (!__pyx_ptype_4sage_8combinat_5words_9cautomata_DeterministicAutomaton) __PYX_ERR(5, 43, __pyx_L1_error)
  __pyx_ptype_4sage_8combinat_5words_9cautomata_CAutomaton = __Pyx_ImportType(__pyx_t_1, "sage.combinat.words.cautomata", "CAutomaton", sizeof(struct __pyx_obj_4sage_8combinat_5words_9cautomata_CAutomaton), __Pyx_ImportType_CheckSize_Warn);
   if (!__pyx_ptype_4sage_8combinat_5words_9cautomata_CAutomaton) __PYX_ERR(5, 52, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_RefNannyFinishContext();
  return 0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_RefNannyFinishContext();
  return -1;
}

static int __Pyx_modinit_variable_import_code(void) {
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__Pyx_modinit_variable_import_code", 0);
  /*--- Variable import code ---*/
  __pyx_t_1 = PyImport_ImportModule("cysignals.signals"); if (!__pyx_t_1) __PYX_ERR(0, 1, __pyx_L1_error)
  if (__Pyx_ImportVoidPtr(__pyx_t_1, "cysigs", (void **)&__pyx_vp_9cysignals_7signals_cysigs, "cysigs_t") < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  Py_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_RefNannyFinishContext();
  return 0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_RefNannyFinishContext();
  return -1;
}

static int __Pyx_modinit_function_import_code(void) {
  __Pyx_RefNannyDeclarations
  PyObject *__pyx_t_1 = NULL;
  __Pyx_RefNannySetupContext("__Pyx_modinit_function_import_code", 0);
  /*--- Function import code ---*/
  __pyx_t_1 = PyImport_ImportModule("cysignals.signals"); if (!__pyx_t_1) __PYX_ERR(0, 1, __pyx_L1_error)
  if (__Pyx_ImportFunction(__pyx_t_1, "verify_exc_value", (void (**)(void))&__pyx_f_9cysignals_7signals_verify_exc_value, "void (void)") < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  if (__Pyx_ImportFunction(__pyx_t_1, "_sig_on_interrupt_received", (void (**)(void))&_sig_on_interrupt_received, "void (void)") < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  if (__Pyx_ImportFunction(__pyx_t_1, "_sig_on_recover", (void (**)(void))&_sig_on_recover, "void (void)") < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  if (__Pyx_ImportFunction(__pyx_t_1, "_sig_off_warning", (void (**)(void))&_sig_off_warning, "void (char const *, int)") < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  if (__Pyx_ImportFunction(__pyx_t_1, "print_backtrace", (void (**)(void))&print_backtrace, "void (void)") < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  Py_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_RefNannyFinishContext();
  return 0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_RefNannyFinishContext();
  return -1;
}


#if PY_MAJOR_VERSION < 3
#ifdef CYTHON_NO_PYINIT_EXPORT
#define __Pyx_PyMODINIT_FUNC void
#else
#define __Pyx_PyMODINIT_FUNC PyMODINIT_FUNC
#endif
#else
#ifdef CYTHON_NO_PYINIT_EXPORT
#define __Pyx_PyMODINIT_FUNC PyObject *
#else
#define __Pyx_PyMODINIT_FUNC PyMODINIT_FUNC
#endif
#endif


#if PY_MAJOR_VERSION < 3
__Pyx_PyMODINIT_FUNC initcautomata(void) CYTHON_SMALL_CODE; /*proto*/
__Pyx_PyMODINIT_FUNC initcautomata(void)
#else
__Pyx_PyMODINIT_FUNC PyInit_cautomata(void) CYTHON_SMALL_CODE; /*proto*/
__Pyx_PyMODINIT_FUNC PyInit_cautomata(void)
#if CYTHON_PEP489_MULTI_PHASE_INIT
{
  return PyModuleDef_Init(&__pyx_moduledef);
}
static CYTHON_SMALL_CODE int __Pyx_check_single_interpreter(void) {
    #if PY_VERSION_HEX >= 0x030700A1
    static PY_INT64_T main_interpreter_id = -1;
    PY_INT64_T current_id = PyInterpreterState_GetID(PyThreadState_Get()->interp);
    if (main_interpreter_id == -1) {
        main_interpreter_id = current_id;
        return (unlikely(current_id == -1)) ? -1 : 0;
    } else if (unlikely(main_interpreter_id != current_id))
    #else
    static PyInterpreterState *main_interpreter = NULL;
    PyInterpreterState *current_interpreter = PyThreadState_Get()->interp;
    if (!main_interpreter) {
        main_interpreter = current_interpreter;
    } else if (unlikely(main_interpreter != current_interpreter))
    #endif
    {
        PyErr_SetString(
            PyExc_ImportError,
            "Interpreter change detected - this module can only be loaded into one interpreter per process.");
        return -1;
    }
    return 0;
}
static CYTHON_SMALL_CODE int __Pyx_copy_spec_to_module(PyObject *spec, PyObject *moddict, const char* from_name, const char* to_name, int allow_none) {
    PyObject *value = PyObject_GetAttrString(spec, from_name);
    int result = 0;
    if (likely(value)) {
        if (allow_none || value != Py_None) {
            result = PyDict_SetItemString(moddict, to_name, value);
        }
        Py_DECREF(value);
    } else if (PyErr_ExceptionMatches(PyExc_AttributeError)) {
        PyErr_Clear();
    } else {
        result = -1;
    }
    return result;
}
static CYTHON_SMALL_CODE PyObject* __pyx_pymod_create(PyObject *spec, CYTHON_UNUSED PyModuleDef *def) {
    PyObject *module = NULL, *moddict, *modname;
    if (__Pyx_check_single_interpreter())
        return NULL;
    if (__pyx_m)
        return __Pyx_NewRef(__pyx_m);
    modname = PyObject_GetAttrString(spec, "name");
    if (unlikely(!modname)) goto bad;
    module = PyModule_NewObject(modname);
    Py_DECREF(modname);
    if (unlikely(!module)) goto bad;
    moddict = PyModule_GetDict(module);
    if (unlikely(!moddict)) goto bad;
    if (unlikely(__Pyx_copy_spec_to_module(spec, moddict, "loader", "__loader__", 1) < 0)) goto bad;
    if (unlikely(__Pyx_copy_spec_to_module(spec, moddict, "origin", "__file__", 1) < 0)) goto bad;
    if (unlikely(__Pyx_copy_spec_to_module(spec, moddict, "parent", "__package__", 1) < 0)) goto bad;
    if (unlikely(__Pyx_copy_spec_to_module(spec, moddict, "submodule_search_locations", "__path__", 0) < 0)) goto bad;
    return module;
bad:
    Py_XDECREF(module);
    return NULL;
}


static CYTHON_SMALL_CODE int __pyx_pymod_exec_cautomata(PyObject *__pyx_pyinit_module)
#endif
#endif
{
  PyObject *__pyx_t_1 = NULL;
  PyObject *__pyx_t_2 = NULL;
  __Pyx_RefNannyDeclarations
  #if CYTHON_PEP489_MULTI_PHASE_INIT
  if (__pyx_m) {
    if (__pyx_m == __pyx_pyinit_module) return 0;
    PyErr_SetString(PyExc_RuntimeError, "Module 'cautomata' has already been imported. Re-initialisation is not supported.");
    return -1;
  }
  #elif PY_MAJOR_VERSION >= 3
  if (__pyx_m) return __Pyx_NewRef(__pyx_m);
  #endif
  #if CYTHON_REFNANNY
__Pyx_RefNanny = __Pyx_RefNannyImportAPI("refnanny");
if (!__Pyx_RefNanny) {
  PyErr_Clear();
  __Pyx_RefNanny = __Pyx_RefNannyImportAPI("Cython.Runtime.refnanny");
  if (!__Pyx_RefNanny)
      Py_FatalError("failed to import 'refnanny' module");
}
#endif
  __Pyx_RefNannySetupContext("__Pyx_PyMODINIT_FUNC PyInit_cautomata(void)", 0);
  if (__Pyx_check_binary_version() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #ifdef __Pxy_PyFrame_Initialize_Offsets
  __Pxy_PyFrame_Initialize_Offsets();
  #endif
  __pyx_empty_tuple = PyTuple_New(0); if (unlikely(!__pyx_empty_tuple)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_empty_bytes = PyBytes_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_bytes)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_empty_unicode = PyUnicode_FromStringAndSize("", 0); if (unlikely(!__pyx_empty_unicode)) __PYX_ERR(0, 1, __pyx_L1_error)
  #ifdef __Pyx_CyFunction_USED
  if (__pyx_CyFunction_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_FusedFunction_USED
  if (__pyx_FusedFunction_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_Coroutine_USED
  if (__pyx_Coroutine_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_Generator_USED
  if (__pyx_Generator_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_AsyncGen_USED
  if (__pyx_AsyncGen_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  #ifdef __Pyx_StopAsyncIteration_USED
  if (__pyx_StopAsyncIteration_init() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  /*--- Library function declarations ---*/
  /*--- Threads initialization code ---*/
  #if defined(__PYX_FORCE_INIT_THREADS) && __PYX_FORCE_INIT_THREADS
  #ifdef WITH_THREAD /* Python build with threading support? */
  PyEval_InitThreads();
  #endif
  #endif
  /*--- Module creation code ---*/
  #if CYTHON_PEP489_MULTI_PHASE_INIT
  __pyx_m = __pyx_pyinit_module;
  Py_INCREF(__pyx_m);
  #else
  #if PY_MAJOR_VERSION < 3
  __pyx_m = Py_InitModule4("cautomata", __pyx_methods, __pyx_k_Deterministic_automaton_of_Fini, 0, PYTHON_API_VERSION); Py_XINCREF(__pyx_m);
  #else
  __pyx_m = PyModule_Create(&__pyx_moduledef);
  #endif
  if (unlikely(!__pyx_m)) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  __pyx_d = PyModule_GetDict(__pyx_m); if (unlikely(!__pyx_d)) __PYX_ERR(0, 1, __pyx_L1_error)
  Py_INCREF(__pyx_d);
  __pyx_b = PyImport_AddModule(__Pyx_BUILTIN_MODULE_NAME); if (unlikely(!__pyx_b)) __PYX_ERR(0, 1, __pyx_L1_error)
  __pyx_cython_runtime = PyImport_AddModule((char *) "cython_runtime"); if (unlikely(!__pyx_cython_runtime)) __PYX_ERR(0, 1, __pyx_L1_error)
  #if CYTHON_COMPILING_IN_PYPY
  Py_INCREF(__pyx_b);
  #endif
  if (PyObject_SetAttrString(__pyx_m, "__builtins__", __pyx_b) < 0) __PYX_ERR(0, 1, __pyx_L1_error);
  /*--- Initialize various global constants etc. ---*/
  if (__Pyx_InitGlobals() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #if PY_MAJOR_VERSION < 3 && (__PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT)
  if (__Pyx_init_sys_getdefaultencoding_params() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif
  if (__pyx_module_is_main_automata__cautomata) {
    if (PyObject_SetAttr(__pyx_m, __pyx_n_s_name, __pyx_n_s_main) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  }
  #if PY_MAJOR_VERSION >= 3
  {
    PyObject *modules = PyImport_GetModuleDict(); if (unlikely(!modules)) __PYX_ERR(0, 1, __pyx_L1_error)
    if (!PyDict_GetItemString(modules, "automata.cautomata")) {
      if (unlikely(PyDict_SetItemString(modules, "automata.cautomata", __pyx_m) < 0)) __PYX_ERR(0, 1, __pyx_L1_error)
    }
  }
  #endif
  /*--- Builtin init code ---*/
  if (__Pyx_InitCachedBuiltins() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  /*--- Constants init code ---*/
  if (__Pyx_InitCachedConstants() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  /*--- Global type/function init code ---*/
  (void)__Pyx_modinit_global_init_code();
  (void)__Pyx_modinit_variable_export_code();
  (void)__Pyx_modinit_function_export_code();
  if (unlikely(__Pyx_modinit_type_init_code() != 0)) goto __pyx_L1_error;
  if (unlikely(__Pyx_modinit_type_import_code() != 0)) goto __pyx_L1_error;
  if (unlikely(__Pyx_modinit_variable_import_code() != 0)) goto __pyx_L1_error;
  if (unlikely(__Pyx_modinit_function_import_code() != 0)) goto __pyx_L1_error;
  /*--- Execution code ---*/
  #if defined(__Pyx_Generator_USED) || defined(__Pyx_Coroutine_USED)
  if (__Pyx_patch_abc() < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  #endif

  /* "automata/cautomata.pyx":36
 * from __future__ import print_function
 * from libc.stdlib cimport malloc, free
 * from sage.graphs.digraph import DiGraph             # <<<<<<<<<<<<<<
 * from cysignals.signals cimport sig_on, sig_off, sig_check
 * from cpython cimport bool as c_bool
 */
  __pyx_t_1 = PyList_New(1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 36, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_INCREF(__pyx_n_s_DiGraph);
  __Pyx_GIVEREF(__pyx_n_s_DiGraph);
  PyList_SET_ITEM(__pyx_t_1, 0, __pyx_n_s_DiGraph);
  __pyx_t_2 = __Pyx_Import(__pyx_n_s_sage_graphs_digraph, __pyx_t_1, -1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 36, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_ImportFrom(__pyx_t_2, __pyx_n_s_DiGraph); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 36, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DiGraph, __pyx_t_1) < 0) __PYX_ERR(0, 36, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":39
 * from cysignals.signals cimport sig_on, sig_off, sig_check
 * from cpython cimport bool as c_bool
 * from sage.combinat.words.cautomata_generators import DeterministicAutomatonGenerators             # <<<<<<<<<<<<<<
 * cimport sage.combinat.words.cautomata
 * 
 */
  __pyx_t_2 = PyList_New(1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 39, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_INCREF(__pyx_n_s_DeterministicAutomatonGenerators);
  __Pyx_GIVEREF(__pyx_n_s_DeterministicAutomatonGenerators);
  PyList_SET_ITEM(__pyx_t_2, 0, __pyx_n_s_DeterministicAutomatonGenerators);
  __pyx_t_1 = __Pyx_Import(__pyx_n_s_sage_combinat_words_cautomata_ge, __pyx_t_2, -1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 39, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_ImportFrom(__pyx_t_1, __pyx_n_s_DeterministicAutomatonGenerators); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 39, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_DeterministicAutomatonGenerators, __pyx_t_2) < 0) __PYX_ERR(0, 39, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;

  /* "automata/cautomata.pyx":42
 * cimport sage.combinat.words.cautomata
 * 
 * dag = DeterministicAutomatonGenerators()             # <<<<<<<<<<<<<<
 * 
 * cdef extern from "Automaton.h":
 */
  __Pyx_GetModuleGlobalName(__pyx_t_1, __pyx_n_s_DeterministicAutomatonGenerators); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 42, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_2 = __Pyx_PyObject_CallNoArg(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 42, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_dag, __pyx_t_2) < 0) __PYX_ERR(0, 42, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":119
 *     void Test()
 * 
 * cdef imagDict(dict d, list A, list A2=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary which is numbering projected alphabet
 */
  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 119, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_k_ = ((PyObject*)__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":133
 *     return d1
 * 
 * cdef imagDict2(dict d, list A, list A2=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary which is numbering a new alphabet
 */
  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 133, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_k__2 = ((PyObject*)__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":194
 *     return r
 * 
 * cdef imagProductDict(dict d, list A1, list A2, list Av=[]):             # <<<<<<<<<<<<<<
 *     """
 *     Dictionary numbering the projected alphabet
 */
  __pyx_t_2 = PyList_New(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 194, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_k__3 = ((PyObject*)__pyx_t_2);
  __Pyx_GIVEREF(__pyx_t_2);
  __pyx_t_2 = 0;

  /* "automata/cautomata.pyx":1
 * # coding=utf8             # <<<<<<<<<<<<<<
 * """
 * Deterministic automaton of Finite state machines using C
 */
  __pyx_t_2 = __Pyx_PyDict_NewPresized(0); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  if (PyDict_SetItem(__pyx_d, __pyx_n_s_test, __pyx_t_2) < 0) __PYX_ERR(0, 1, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;

  /* "cysignals/signals.pxd":91
 * 
 * 
 * cdef inline void __generate_declarations():             # <<<<<<<<<<<<<<
 *     cysigs
 *     _sig_on_interrupt_received
 */

  /*--- Wrapped vars code ---*/

  goto __pyx_L0;
  __pyx_L1_error:;
  __Pyx_XDECREF(__pyx_t_1);
  __Pyx_XDECREF(__pyx_t_2);
  if (__pyx_m) {
    if (__pyx_d) {
      __Pyx_AddTraceback("init automata.cautomata", __pyx_clineno, __pyx_lineno, __pyx_filename);
    }
    Py_CLEAR(__pyx_m);
  } else if (!PyErr_Occurred()) {
    PyErr_SetString(PyExc_ImportError, "init automata.cautomata");
  }
  __pyx_L0:;
  __Pyx_RefNannyFinishContext();
  #if CYTHON_PEP489_MULTI_PHASE_INIT
  return (__pyx_m != NULL) ? 0 : -1;
  #elif PY_MAJOR_VERSION >= 3
  return __pyx_m;
  #else
  return;
  #endif
}

/* --- Runtime support code --- */
/* Refnanny */
#if CYTHON_REFNANNY
static __Pyx_RefNannyAPIStruct *__Pyx_RefNannyImportAPI(const char *modname) {
    PyObject *m = NULL, *p = NULL;
    void *r = NULL;
    m = PyImport_ImportModule(modname);
    if (!m) goto end;
    p = PyObject_GetAttrString(m, "RefNannyAPI");
    if (!p) goto end;
    r = PyLong_AsVoidPtr(p);
end:
    Py_XDECREF(p);
    Py_XDECREF(m);
    return (__Pyx_RefNannyAPIStruct *)r;
}
#endif

/* PyObjectGetAttrStr */
#if CYTHON_USE_TYPE_SLOTS
static CYTHON_INLINE PyObject* __Pyx_PyObject_GetAttrStr(PyObject* obj, PyObject* attr_name) {
    PyTypeObject* tp = Py_TYPE(obj);
    if (likely(tp->tp_getattro))
        return tp->tp_getattro(obj, attr_name);
#if PY_MAJOR_VERSION < 3
    if (likely(tp->tp_getattr))
        return tp->tp_getattr(obj, PyString_AS_STRING(attr_name));
#endif
    return PyObject_GetAttr(obj, attr_name);
}
#endif

/* GetBuiltinName */
static PyObject *__Pyx_GetBuiltinName(PyObject *name) {
    PyObject* result = __Pyx_PyObject_GetAttrStr(__pyx_b, name);
    if (unlikely(!result)) {
        PyErr_Format(PyExc_NameError,
#if PY_MAJOR_VERSION >= 3
            "name '%U' is not defined", name);
#else
            "name '%.200s' is not defined", PyString_AS_STRING(name));
#endif
    }
    return result;
}

/* DictGetItem */
#if PY_MAJOR_VERSION >= 3 && !CYTHON_COMPILING_IN_PYPY
static PyObject *__Pyx_PyDict_GetItem(PyObject *d, PyObject* key) {
    PyObject *value;
    value = PyDict_GetItemWithError(d, key);
    if (unlikely(!value)) {
        if (!PyErr_Occurred()) {
            if (unlikely(PyTuple_Check(key))) {
                PyObject* args = PyTuple_Pack(1, key);
                if (likely(args)) {
                    PyErr_SetObject(PyExc_KeyError, args);
                    Py_DECREF(args);
                }
            } else {
                PyErr_SetObject(PyExc_KeyError, key);
            }
        }
        return NULL;
    }
    Py_INCREF(value);
    return value;
}
#endif

/* PyIntBinop */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_AddObjC(PyObject *op1, PyObject *op2, CYTHON_UNUSED long intval, CYTHON_UNUSED int inplace) {
    #if PY_MAJOR_VERSION < 3
    if (likely(PyInt_CheckExact(op1))) {
        const long b = intval;
        long x;
        long a = PyInt_AS_LONG(op1);
            x = (long)((unsigned long)a + b);
            if (likely((x^a) >= 0 || (x^b) >= 0))
                return PyInt_FromLong(x);
            return PyLong_Type.tp_as_number->nb_add(op1, op2);
    }
    #endif
    #if CYTHON_USE_PYLONG_INTERNALS
    if (likely(PyLong_CheckExact(op1))) {
        const long b = intval;
        long a, x;
#ifdef HAVE_LONG_LONG
        const PY_LONG_LONG llb = intval;
        PY_LONG_LONG lla, llx;
#endif
        const digit* digits = ((PyLongObject*)op1)->ob_digit;
        const Py_ssize_t size = Py_SIZE(op1);
        if (likely(__Pyx_sst_abs(size) <= 1)) {
            a = likely(size) ? digits[0] : 0;
            if (size == -1) a = -a;
        } else {
            switch (size) {
                case -2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = (long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case -3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = (long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case -4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = (long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                default: return PyLong_Type.tp_as_number->nb_add(op1, op2);
            }
        }
                x = a + b;
            return PyLong_FromLong(x);
#ifdef HAVE_LONG_LONG
        long_long:
                llx = lla + llb;
            return PyLong_FromLongLong(llx);
#endif
        
        
    }
    #endif
    if (PyFloat_CheckExact(op1)) {
        const long b = intval;
        double a = PyFloat_AS_DOUBLE(op1);
            double result;
            PyFPE_START_PROTECT("add", return NULL)
            result = ((double)a) + (double)b;
            PyFPE_END_PROTECT(result)
            return PyFloat_FromDouble(result);
    }
    return (inplace ? PyNumber_InPlaceAdd : PyNumber_Add)(op1, op2);
}
#endif

/* GetItemInt */
static PyObject *__Pyx_GetItemInt_Generic(PyObject *o, PyObject* j) {
    PyObject *r;
    if (!j) return NULL;
    r = PyObject_GetItem(o, j);
    Py_DECREF(j);
    return r;
}
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_List_Fast(PyObject *o, Py_ssize_t i,
                                                              CYTHON_NCP_UNUSED int wraparound,
                                                              CYTHON_NCP_UNUSED int boundscheck) {
#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    Py_ssize_t wrapped_i = i;
    if (wraparound & unlikely(i < 0)) {
        wrapped_i += PyList_GET_SIZE(o);
    }
    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyList_GET_SIZE(o)))) {
        PyObject *r = PyList_GET_ITEM(o, wrapped_i);
        Py_INCREF(r);
        return r;
    }
    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
#else
    return PySequence_GetItem(o, i);
#endif
}
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Tuple_Fast(PyObject *o, Py_ssize_t i,
                                                              CYTHON_NCP_UNUSED int wraparound,
                                                              CYTHON_NCP_UNUSED int boundscheck) {
#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    Py_ssize_t wrapped_i = i;
    if (wraparound & unlikely(i < 0)) {
        wrapped_i += PyTuple_GET_SIZE(o);
    }
    if ((!boundscheck) || likely(__Pyx_is_valid_index(wrapped_i, PyTuple_GET_SIZE(o)))) {
        PyObject *r = PyTuple_GET_ITEM(o, wrapped_i);
        Py_INCREF(r);
        return r;
    }
    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
#else
    return PySequence_GetItem(o, i);
#endif
}
static CYTHON_INLINE PyObject *__Pyx_GetItemInt_Fast(PyObject *o, Py_ssize_t i, int is_list,
                                                     CYTHON_NCP_UNUSED int wraparound,
                                                     CYTHON_NCP_UNUSED int boundscheck) {
#if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS && CYTHON_USE_TYPE_SLOTS
    if (is_list || PyList_CheckExact(o)) {
        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyList_GET_SIZE(o);
        if ((!boundscheck) || (likely(__Pyx_is_valid_index(n, PyList_GET_SIZE(o))))) {
            PyObject *r = PyList_GET_ITEM(o, n);
            Py_INCREF(r);
            return r;
        }
    }
    else if (PyTuple_CheckExact(o)) {
        Py_ssize_t n = ((!wraparound) | likely(i >= 0)) ? i : i + PyTuple_GET_SIZE(o);
        if ((!boundscheck) || likely(__Pyx_is_valid_index(n, PyTuple_GET_SIZE(o)))) {
            PyObject *r = PyTuple_GET_ITEM(o, n);
            Py_INCREF(r);
            return r;
        }
    } else {
        PySequenceMethods *m = Py_TYPE(o)->tp_as_sequence;
        if (likely(m && m->sq_item)) {
            if (wraparound && unlikely(i < 0) && likely(m->sq_length)) {
                Py_ssize_t l = m->sq_length(o);
                if (likely(l >= 0)) {
                    i += l;
                } else {
                    if (!PyErr_ExceptionMatches(PyExc_OverflowError))
                        return NULL;
                    PyErr_Clear();
                }
            }
            return m->sq_item(o, i);
        }
    }
#else
    if (is_list || PySequence_Check(o)) {
        return PySequence_GetItem(o, i);
    }
#endif
    return __Pyx_GetItemInt_Generic(o, PyInt_FromSsize_t(i));
}

/* PyErrFetchRestore */
#if CYTHON_FAST_THREAD_STATE
static CYTHON_INLINE void __Pyx_ErrRestoreInState(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
    PyObject *tmp_type, *tmp_value, *tmp_tb;
    tmp_type = tstate->curexc_type;
    tmp_value = tstate->curexc_value;
    tmp_tb = tstate->curexc_traceback;
    tstate->curexc_type = type;
    tstate->curexc_value = value;
    tstate->curexc_traceback = tb;
    Py_XDECREF(tmp_type);
    Py_XDECREF(tmp_value);
    Py_XDECREF(tmp_tb);
}
static CYTHON_INLINE void __Pyx_ErrFetchInState(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
    *type = tstate->curexc_type;
    *value = tstate->curexc_value;
    *tb = tstate->curexc_traceback;
    tstate->curexc_type = 0;
    tstate->curexc_value = 0;
    tstate->curexc_traceback = 0;
}
#endif

/* WriteUnraisableException */
static void __Pyx_WriteUnraisable(const char *name, CYTHON_UNUSED int clineno,
                                  CYTHON_UNUSED int lineno, CYTHON_UNUSED const char *filename,
                                  int full_traceback, CYTHON_UNUSED int nogil) {
    PyObject *old_exc, *old_val, *old_tb;
    PyObject *ctx;
    __Pyx_PyThreadState_declare
#ifdef WITH_THREAD
    PyGILState_STATE state;
    if (nogil)
        state = PyGILState_Ensure();
#ifdef _MSC_VER
    else state = (PyGILState_STATE)-1;
#endif
#endif
    __Pyx_PyThreadState_assign
    __Pyx_ErrFetch(&old_exc, &old_val, &old_tb);
    if (full_traceback) {
        Py_XINCREF(old_exc);
        Py_XINCREF(old_val);
        Py_XINCREF(old_tb);
        __Pyx_ErrRestore(old_exc, old_val, old_tb);
        PyErr_PrintEx(1);
    }
    #if PY_MAJOR_VERSION < 3
    ctx = PyString_FromString(name);
    #else
    ctx = PyUnicode_FromString(name);
    #endif
    __Pyx_ErrRestore(old_exc, old_val, old_tb);
    if (!ctx) {
        PyErr_WriteUnraisable(Py_None);
    } else {
        PyErr_WriteUnraisable(ctx);
        Py_DECREF(ctx);
    }
#ifdef WITH_THREAD
    if (nogil)
        PyGILState_Release(state);
#endif
}

/* PyCFunctionFastCall */
#if CYTHON_FAST_PYCCALL
static CYTHON_INLINE PyObject * __Pyx_PyCFunction_FastCall(PyObject *func_obj, PyObject **args, Py_ssize_t nargs) {
    PyCFunctionObject *func = (PyCFunctionObject*)func_obj;
    PyCFunction meth = PyCFunction_GET_FUNCTION(func);
    PyObject *self = PyCFunction_GET_SELF(func);
    int flags = PyCFunction_GET_FLAGS(func);
    assert(PyCFunction_Check(func));
    assert(METH_FASTCALL == (flags & ~(METH_CLASS | METH_STATIC | METH_COEXIST | METH_KEYWORDS | METH_STACKLESS)));
    assert(nargs >= 0);
    assert(nargs == 0 || args != NULL);
    /* _PyCFunction_FastCallDict() must not be called with an exception set,
       because it may clear it (directly or indirectly) and so the
       caller loses its exception */
    assert(!PyErr_Occurred());
    if ((PY_VERSION_HEX < 0x030700A0) || unlikely(flags & METH_KEYWORDS)) {
        return (*((__Pyx_PyCFunctionFastWithKeywords)(void*)meth)) (self, args, nargs, NULL);
    } else {
        return (*((__Pyx_PyCFunctionFast)(void*)meth)) (self, args, nargs);
    }
}
#endif

/* PyFunctionFastCall */
#if CYTHON_FAST_PYCALL
static PyObject* __Pyx_PyFunction_FastCallNoKw(PyCodeObject *co, PyObject **args, Py_ssize_t na,
                                               PyObject *globals) {
    PyFrameObject *f;
    PyThreadState *tstate = __Pyx_PyThreadState_Current;
    PyObject **fastlocals;
    Py_ssize_t i;
    PyObject *result;
    assert(globals != NULL);
    /* XXX Perhaps we should create a specialized
       PyFrame_New() that doesn't take locals, but does
       take builtins without sanity checking them.
       */
    assert(tstate != NULL);
    f = PyFrame_New(tstate, co, globals, NULL);
    if (f == NULL) {
        return NULL;
    }
    fastlocals = __Pyx_PyFrame_GetLocalsplus(f);
    for (i = 0; i < na; i++) {
        Py_INCREF(*args);
        fastlocals[i] = *args++;
    }
    result = PyEval_EvalFrameEx(f,0);
    ++tstate->recursion_depth;
    Py_DECREF(f);
    --tstate->recursion_depth;
    return result;
}
#if 1 || PY_VERSION_HEX < 0x030600B1
static PyObject *__Pyx_PyFunction_FastCallDict(PyObject *func, PyObject **args, int nargs, PyObject *kwargs) {
    PyCodeObject *co = (PyCodeObject *)PyFunction_GET_CODE(func);
    PyObject *globals = PyFunction_GET_GLOBALS(func);
    PyObject *argdefs = PyFunction_GET_DEFAULTS(func);
    PyObject *closure;
#if PY_MAJOR_VERSION >= 3
    PyObject *kwdefs;
#endif
    PyObject *kwtuple, **k;
    PyObject **d;
    Py_ssize_t nd;
    Py_ssize_t nk;
    PyObject *result;
    assert(kwargs == NULL || PyDict_Check(kwargs));
    nk = kwargs ? PyDict_Size(kwargs) : 0;
    if (Py_EnterRecursiveCall((char*)" while calling a Python object")) {
        return NULL;
    }
    if (
#if PY_MAJOR_VERSION >= 3
            co->co_kwonlyargcount == 0 &&
#endif
            likely(kwargs == NULL || nk == 0) &&
            co->co_flags == (CO_OPTIMIZED | CO_NEWLOCALS | CO_NOFREE)) {
        if (argdefs == NULL && co->co_argcount == nargs) {
            result = __Pyx_PyFunction_FastCallNoKw(co, args, nargs, globals);
            goto done;
        }
        else if (nargs == 0 && argdefs != NULL
                 && co->co_argcount == Py_SIZE(argdefs)) {
            /* function called with no arguments, but all parameters have
               a default value: use default values as arguments .*/
            args = &PyTuple_GET_ITEM(argdefs, 0);
            result =__Pyx_PyFunction_FastCallNoKw(co, args, Py_SIZE(argdefs), globals);
            goto done;
        }
    }
    if (kwargs != NULL) {
        Py_ssize_t pos, i;
        kwtuple = PyTuple_New(2 * nk);
        if (kwtuple == NULL) {
            result = NULL;
            goto done;
        }
        k = &PyTuple_GET_ITEM(kwtuple, 0);
        pos = i = 0;
        while (PyDict_Next(kwargs, &pos, &k[i], &k[i+1])) {
            Py_INCREF(k[i]);
            Py_INCREF(k[i+1]);
            i += 2;
        }
        nk = i / 2;
    }
    else {
        kwtuple = NULL;
        k = NULL;
    }
    closure = PyFunction_GET_CLOSURE(func);
#if PY_MAJOR_VERSION >= 3
    kwdefs = PyFunction_GET_KW_DEFAULTS(func);
#endif
    if (argdefs != NULL) {
        d = &PyTuple_GET_ITEM(argdefs, 0);
        nd = Py_SIZE(argdefs);
    }
    else {
        d = NULL;
        nd = 0;
    }
#if PY_MAJOR_VERSION >= 3
    result = PyEval_EvalCodeEx((PyObject*)co, globals, (PyObject *)NULL,
                               args, nargs,
                               k, (int)nk,
                               d, (int)nd, kwdefs, closure);
#else
    result = PyEval_EvalCodeEx(co, globals, (PyObject *)NULL,
                               args, nargs,
                               k, (int)nk,
                               d, (int)nd, closure);
#endif
    Py_XDECREF(kwtuple);
done:
    Py_LeaveRecursiveCall();
    return result;
}
#endif
#endif

/* PyObjectCall */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_Call(PyObject *func, PyObject *arg, PyObject *kw) {
    PyObject *result;
    ternaryfunc call = func->ob_type->tp_call;
    if (unlikely(!call))
        return PyObject_Call(func, arg, kw);
    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
        return NULL;
    result = (*call)(func, arg, kw);
    Py_LeaveRecursiveCall();
    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
        PyErr_SetString(
            PyExc_SystemError,
            "NULL result without error in PyObject_Call");
    }
    return result;
}
#endif

/* PyObjectCallMethO */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallMethO(PyObject *func, PyObject *arg) {
    PyObject *self, *result;
    PyCFunction cfunc;
    cfunc = PyCFunction_GET_FUNCTION(func);
    self = PyCFunction_GET_SELF(func);
    if (unlikely(Py_EnterRecursiveCall((char*)" while calling a Python object")))
        return NULL;
    result = cfunc(self, arg);
    Py_LeaveRecursiveCall();
    if (unlikely(!result) && unlikely(!PyErr_Occurred())) {
        PyErr_SetString(
            PyExc_SystemError,
            "NULL result without error in PyObject_Call");
    }
    return result;
}
#endif

/* PyObjectCallOneArg */
#if CYTHON_COMPILING_IN_CPYTHON
static PyObject* __Pyx__PyObject_CallOneArg(PyObject *func, PyObject *arg) {
    PyObject *result;
    PyObject *args = PyTuple_New(1);
    if (unlikely(!args)) return NULL;
    Py_INCREF(arg);
    PyTuple_SET_ITEM(args, 0, arg);
    result = __Pyx_PyObject_Call(func, args, NULL);
    Py_DECREF(args);
    return result;
}
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
#if CYTHON_FAST_PYCALL
    if (PyFunction_Check(func)) {
        return __Pyx_PyFunction_FastCall(func, &arg, 1);
    }
#endif
    if (likely(PyCFunction_Check(func))) {
        if (likely(PyCFunction_GET_FLAGS(func) & METH_O)) {
            return __Pyx_PyObject_CallMethO(func, arg);
#if CYTHON_FAST_PYCCALL
        } else if (PyCFunction_GET_FLAGS(func) & METH_FASTCALL) {
            return __Pyx_PyCFunction_FastCall(func, &arg, 1);
#endif
        }
    }
    return __Pyx__PyObject_CallOneArg(func, arg);
}
#else
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallOneArg(PyObject *func, PyObject *arg) {
    PyObject *result;
    PyObject *args = PyTuple_Pack(1, arg);
    if (unlikely(!args)) return NULL;
    result = __Pyx_PyObject_Call(func, args, NULL);
    Py_DECREF(args);
    return result;
}
#endif

/* UnpackUnboundCMethod */
static int __Pyx_TryUnpackUnboundCMethod(__Pyx_CachedCFunction* target) {
    PyObject *method;
    method = __Pyx_PyObject_GetAttrStr(target->type, *target->method_name);
    if (unlikely(!method))
        return -1;
    target->method = method;
#if CYTHON_COMPILING_IN_CPYTHON
    #if PY_MAJOR_VERSION >= 3
    if (likely(__Pyx_TypeCheck(method, &PyMethodDescr_Type)))
    #endif
    {
        PyMethodDescrObject *descr = (PyMethodDescrObject*) method;
        target->func = descr->d_method->ml_meth;
        target->flag = descr->d_method->ml_flags & ~(METH_CLASS | METH_STATIC | METH_COEXIST | METH_STACKLESS);
    }
#endif
    return 0;
}

/* CallUnboundCMethod0 */
static PyObject* __Pyx__CallUnboundCMethod0(__Pyx_CachedCFunction* cfunc, PyObject* self) {
    PyObject *args, *result = NULL;
    if (unlikely(!cfunc->method) && unlikely(__Pyx_TryUnpackUnboundCMethod(cfunc) < 0)) return NULL;
#if CYTHON_ASSUME_SAFE_MACROS
    args = PyTuple_New(1);
    if (unlikely(!args)) goto bad;
    Py_INCREF(self);
    PyTuple_SET_ITEM(args, 0, self);
#else
    args = PyTuple_Pack(1, self);
    if (unlikely(!args)) goto bad;
#endif
    result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
    Py_DECREF(args);
bad:
    return result;
}

/* py_dict_keys */
static CYTHON_INLINE PyObject* __Pyx_PyDict_Keys(PyObject* d) {
    if (PY_MAJOR_VERSION >= 3)
        return __Pyx_CallUnboundCMethod0(&__pyx_umethod_PyDict_Type_keys, d);
    else
        return PyDict_Keys(d);
}

/* RaiseTooManyValuesToUnpack */
static CYTHON_INLINE void __Pyx_RaiseTooManyValuesError(Py_ssize_t expected) {
    PyErr_Format(PyExc_ValueError,
                 "too many values to unpack (expected %" CYTHON_FORMAT_SSIZE_T "d)", expected);
}

/* RaiseNeedMoreValuesToUnpack */
static CYTHON_INLINE void __Pyx_RaiseNeedMoreValuesError(Py_ssize_t index) {
    PyErr_Format(PyExc_ValueError,
                 "need more than %" CYTHON_FORMAT_SSIZE_T "d value%.1s to unpack",
                 index, (index == 1) ? "" : "s");
}

/* IterFinish */
static CYTHON_INLINE int __Pyx_IterFinish(void) {
#if CYTHON_FAST_THREAD_STATE
    PyThreadState *tstate = __Pyx_PyThreadState_Current;
    PyObject* exc_type = tstate->curexc_type;
    if (unlikely(exc_type)) {
        if (likely(__Pyx_PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) {
            PyObject *exc_value, *exc_tb;
            exc_value = tstate->curexc_value;
            exc_tb = tstate->curexc_traceback;
            tstate->curexc_type = 0;
            tstate->curexc_value = 0;
            tstate->curexc_traceback = 0;
            Py_DECREF(exc_type);
            Py_XDECREF(exc_value);
            Py_XDECREF(exc_tb);
            return 0;
        } else {
            return -1;
        }
    }
    return 0;
#else
    if (unlikely(PyErr_Occurred())) {
        if (likely(PyErr_ExceptionMatches(PyExc_StopIteration))) {
            PyErr_Clear();
            return 0;
        } else {
            return -1;
        }
    }
    return 0;
#endif
}

/* UnpackItemEndCheck */
static int __Pyx_IternextUnpackEndCheck(PyObject *retval, Py_ssize_t expected) {
    if (unlikely(retval)) {
        Py_DECREF(retval);
        __Pyx_RaiseTooManyValuesError(expected);
        return -1;
    } else {
        return __Pyx_IterFinish();
    }
    return 0;
}

/* GetAttr */
static CYTHON_INLINE PyObject *__Pyx_GetAttr(PyObject *o, PyObject *n) {
#if CYTHON_USE_TYPE_SLOTS
#if PY_MAJOR_VERSION >= 3
    if (likely(PyUnicode_Check(n)))
#else
    if (likely(PyString_Check(n)))
#endif
        return __Pyx_PyObject_GetAttrStr(o, n);
#endif
    return PyObject_GetAttr(o, n);
}

/* HasAttr */
static CYTHON_INLINE int __Pyx_HasAttr(PyObject *o, PyObject *n) {
    PyObject *r;
    if (unlikely(!__Pyx_PyBaseString_Check(n))) {
        PyErr_SetString(PyExc_TypeError,
                        "hasattr(): attribute name must be string");
        return -1;
    }
    r = __Pyx_GetAttr(o, n);
    if (unlikely(!r)) {
        PyErr_Clear();
        return 0;
    } else {
        Py_DECREF(r);
        return 1;
    }
}

/* PyObjectCallNoArg */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_PyObject_CallNoArg(PyObject *func) {
#if CYTHON_FAST_PYCALL
    if (PyFunction_Check(func)) {
        return __Pyx_PyFunction_FastCall(func, NULL, 0);
    }
#endif
#ifdef __Pyx_CyFunction_USED
    if (likely(PyCFunction_Check(func) || __Pyx_CyFunction_Check(func)))
#else
    if (likely(PyCFunction_Check(func)))
#endif
    {
        if (likely(PyCFunction_GET_FLAGS(func) & METH_NOARGS)) {
            return __Pyx_PyObject_CallMethO(func, NULL);
        }
    }
    return __Pyx_PyObject_Call(func, __pyx_empty_tuple, NULL);
}
#endif

/* GetTopmostException */
#if CYTHON_USE_EXC_INFO_STACK
static _PyErr_StackItem *
__Pyx_PyErr_GetTopmostException(PyThreadState *tstate)
{
    _PyErr_StackItem *exc_info = tstate->exc_info;
    while ((exc_info->exc_type == NULL || exc_info->exc_type == Py_None) &&
           exc_info->previous_item != NULL)
    {
        exc_info = exc_info->previous_item;
    }
    return exc_info;
}
#endif

/* SaveResetException */
#if CYTHON_FAST_THREAD_STATE
static CYTHON_INLINE void __Pyx__ExceptionSave(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb) {
    #if CYTHON_USE_EXC_INFO_STACK
    _PyErr_StackItem *exc_info = __Pyx_PyErr_GetTopmostException(tstate);
    *type = exc_info->exc_type;
    *value = exc_info->exc_value;
    *tb = exc_info->exc_traceback;
    #else
    *type = tstate->exc_type;
    *value = tstate->exc_value;
    *tb = tstate->exc_traceback;
    #endif
    Py_XINCREF(*type);
    Py_XINCREF(*value);
    Py_XINCREF(*tb);
}
static CYTHON_INLINE void __Pyx__ExceptionReset(PyThreadState *tstate, PyObject *type, PyObject *value, PyObject *tb) {
    PyObject *tmp_type, *tmp_value, *tmp_tb;
    #if CYTHON_USE_EXC_INFO_STACK
    _PyErr_StackItem *exc_info = tstate->exc_info;
    tmp_type = exc_info->exc_type;
    tmp_value = exc_info->exc_value;
    tmp_tb = exc_info->exc_traceback;
    exc_info->exc_type = type;
    exc_info->exc_value = value;
    exc_info->exc_traceback = tb;
    #else
    tmp_type = tstate->exc_type;
    tmp_value = tstate->exc_value;
    tmp_tb = tstate->exc_traceback;
    tstate->exc_type = type;
    tstate->exc_value = value;
    tstate->exc_traceback = tb;
    #endif
    Py_XDECREF(tmp_type);
    Py_XDECREF(tmp_value);
    Py_XDECREF(tmp_tb);
}
#endif

/* PyErrExceptionMatches */
#if CYTHON_FAST_THREAD_STATE
static int __Pyx_PyErr_ExceptionMatchesTuple(PyObject *exc_type, PyObject *tuple) {
    Py_ssize_t i, n;
    n = PyTuple_GET_SIZE(tuple);
#if PY_MAJOR_VERSION >= 3
    for (i=0; i<n; i++) {
        if (exc_type == PyTuple_GET_ITEM(tuple, i)) return 1;
    }
#endif
    for (i=0; i<n; i++) {
        if (__Pyx_PyErr_GivenExceptionMatches(exc_type, PyTuple_GET_ITEM(tuple, i))) return 1;
    }
    return 0;
}
static CYTHON_INLINE int __Pyx_PyErr_ExceptionMatchesInState(PyThreadState* tstate, PyObject* err) {
    PyObject *exc_type = tstate->curexc_type;
    if (exc_type == err) return 1;
    if (unlikely(!exc_type)) return 0;
    if (unlikely(PyTuple_Check(err)))
        return __Pyx_PyErr_ExceptionMatchesTuple(exc_type, err);
    return __Pyx_PyErr_GivenExceptionMatches(exc_type, err);
}
#endif

/* GetException */
#if CYTHON_FAST_THREAD_STATE
static int __Pyx__GetException(PyThreadState *tstate, PyObject **type, PyObject **value, PyObject **tb)
#else
static int __Pyx_GetException(PyObject **type, PyObject **value, PyObject **tb)
#endif
{
    PyObject *local_type, *local_value, *local_tb;
#if CYTHON_FAST_THREAD_STATE
    PyObject *tmp_type, *tmp_value, *tmp_tb;
    local_type = tstate->curexc_type;
    local_value = tstate->curexc_value;
    local_tb = tstate->curexc_traceback;
    tstate->curexc_type = 0;
    tstate->curexc_value = 0;
    tstate->curexc_traceback = 0;
#else
    PyErr_Fetch(&local_type, &local_value, &local_tb);
#endif
    PyErr_NormalizeException(&local_type, &local_value, &local_tb);
#if CYTHON_FAST_THREAD_STATE
    if (unlikely(tstate->curexc_type))
#else
    if (unlikely(PyErr_Occurred()))
#endif
        goto bad;
    #if PY_MAJOR_VERSION >= 3
    if (local_tb) {
        if (unlikely(PyException_SetTraceback(local_value, local_tb) < 0))
            goto bad;
    }
    #endif
    Py_XINCREF(local_tb);
    Py_XINCREF(local_type);
    Py_XINCREF(local_value);
    *type = local_type;
    *value = local_value;
    *tb = local_tb;
#if CYTHON_FAST_THREAD_STATE
    #if CYTHON_USE_EXC_INFO_STACK
    {
        _PyErr_StackItem *exc_info = tstate->exc_info;
        tmp_type = exc_info->exc_type;
        tmp_value = exc_info->exc_value;
        tmp_tb = exc_info->exc_traceback;
        exc_info->exc_type = local_type;
        exc_info->exc_value = local_value;
        exc_info->exc_traceback = local_tb;
    }
    #else
    tmp_type = tstate->exc_type;
    tmp_value = tstate->exc_value;
    tmp_tb = tstate->exc_traceback;
    tstate->exc_type = local_type;
    tstate->exc_value = local_value;
    tstate->exc_traceback = local_tb;
    #endif
    Py_XDECREF(tmp_type);
    Py_XDECREF(tmp_value);
    Py_XDECREF(tmp_tb);
#else
    PyErr_SetExcInfo(local_type, local_value, local_tb);
#endif
    return 0;
bad:
    *type = 0;
    *value = 0;
    *tb = 0;
    Py_XDECREF(local_type);
    Py_XDECREF(local_value);
    Py_XDECREF(local_tb);
    return -1;
}

/* RaiseException */
#if PY_MAJOR_VERSION < 3
static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb,
                        CYTHON_UNUSED PyObject *cause) {
    __Pyx_PyThreadState_declare
    Py_XINCREF(type);
    if (!value || value == Py_None)
        value = NULL;
    else
        Py_INCREF(value);
    if (!tb || tb == Py_None)
        tb = NULL;
    else {
        Py_INCREF(tb);
        if (!PyTraceBack_Check(tb)) {
            PyErr_SetString(PyExc_TypeError,
                "raise: arg 3 must be a traceback or None");
            goto raise_error;
        }
    }
    if (PyType_Check(type)) {
#if CYTHON_COMPILING_IN_PYPY
        if (!value) {
            Py_INCREF(Py_None);
            value = Py_None;
        }
#endif
        PyErr_NormalizeException(&type, &value, &tb);
    } else {
        if (value) {
            PyErr_SetString(PyExc_TypeError,
                "instance exception may not have a separate value");
            goto raise_error;
        }
        value = type;
        type = (PyObject*) Py_TYPE(type);
        Py_INCREF(type);
        if (!PyType_IsSubtype((PyTypeObject *)type, (PyTypeObject *)PyExc_BaseException)) {
            PyErr_SetString(PyExc_TypeError,
                "raise: exception class must be a subclass of BaseException");
            goto raise_error;
        }
    }
    __Pyx_PyThreadState_assign
    __Pyx_ErrRestore(type, value, tb);
    return;
raise_error:
    Py_XDECREF(value);
    Py_XDECREF(type);
    Py_XDECREF(tb);
    return;
}
#else
static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb, PyObject *cause) {
    PyObject* owned_instance = NULL;
    if (tb == Py_None) {
        tb = 0;
    } else if (tb && !PyTraceBack_Check(tb)) {
        PyErr_SetString(PyExc_TypeError,
            "raise: arg 3 must be a traceback or None");
        goto bad;
    }
    if (value == Py_None)
        value = 0;
    if (PyExceptionInstance_Check(type)) {
        if (value) {
            PyErr_SetString(PyExc_TypeError,
                "instance exception may not have a separate value");
            goto bad;
        }
        value = type;
        type = (PyObject*) Py_TYPE(value);
    } else if (PyExceptionClass_Check(type)) {
        PyObject *instance_class = NULL;
        if (value && PyExceptionInstance_Check(value)) {
            instance_class = (PyObject*) Py_TYPE(value);
            if (instance_class != type) {
                int is_subclass = PyObject_IsSubclass(instance_class, type);
                if (!is_subclass) {
                    instance_class = NULL;
                } else if (unlikely(is_subclass == -1)) {
                    goto bad;
                } else {
                    type = instance_class;
                }
            }
        }
        if (!instance_class) {
            PyObject *args;
            if (!value)
                args = PyTuple_New(0);
            else if (PyTuple_Check(value)) {
                Py_INCREF(value);
                args = value;
            } else
                args = PyTuple_Pack(1, value);
            if (!args)
                goto bad;
            owned_instance = PyObject_Call(type, args, NULL);
            Py_DECREF(args);
            if (!owned_instance)
                goto bad;
            value = owned_instance;
            if (!PyExceptionInstance_Check(value)) {
                PyErr_Format(PyExc_TypeError,
                             "calling %R should have returned an instance of "
                             "BaseException, not %R",
                             type, Py_TYPE(value));
                goto bad;
            }
        }
    } else {
        PyErr_SetString(PyExc_TypeError,
            "raise: exception class must be a subclass of BaseException");
        goto bad;
    }
    if (cause) {
        PyObject *fixed_cause;
        if (cause == Py_None) {
            fixed_cause = NULL;
        } else if (PyExceptionClass_Check(cause)) {
            fixed_cause = PyObject_CallObject(cause, NULL);
            if (fixed_cause == NULL)
                goto bad;
        } else if (PyExceptionInstance_Check(cause)) {
            fixed_cause = cause;
            Py_INCREF(fixed_cause);
        } else {
            PyErr_SetString(PyExc_TypeError,
                            "exception causes must derive from "
                            "BaseException");
            goto bad;
        }
        PyException_SetCause(value, fixed_cause);
    }
    PyErr_SetObject(type, value);
    if (tb) {
#if CYTHON_COMPILING_IN_PYPY
        PyObject *tmp_type, *tmp_value, *tmp_tb;
        PyErr_Fetch(&tmp_type, &tmp_value, &tmp_tb);
        Py_INCREF(tb);
        PyErr_Restore(tmp_type, tmp_value, tb);
        Py_XDECREF(tmp_tb);
#else
        PyThreadState *tstate = __Pyx_PyThreadState_Current;
        PyObject* tmp_tb = tstate->curexc_traceback;
        if (tb != tmp_tb) {
            Py_INCREF(tb);
            tstate->curexc_traceback = tb;
            Py_XDECREF(tmp_tb);
        }
#endif
    }
bad:
    Py_XDECREF(owned_instance);
    return;
}
#endif

/* PyObjectSetAttrStr */
#if CYTHON_USE_TYPE_SLOTS
static CYTHON_INLINE int __Pyx_PyObject_SetAttrStr(PyObject* obj, PyObject* attr_name, PyObject* value) {
    PyTypeObject* tp = Py_TYPE(obj);
    if (likely(tp->tp_setattro))
        return tp->tp_setattro(obj, attr_name, value);
#if PY_MAJOR_VERSION < 3
    if (likely(tp->tp_setattr))
        return tp->tp_setattr(obj, PyString_AS_STRING(attr_name), value);
#endif
    return PyObject_SetAttr(obj, attr_name, value);
}
#endif

/* ObjectGetItem */
#if CYTHON_USE_TYPE_SLOTS
static PyObject *__Pyx_PyObject_GetIndex(PyObject *obj, PyObject* index) {
    PyObject *runerr;
    Py_ssize_t key_value;
    PySequenceMethods *m = Py_TYPE(obj)->tp_as_sequence;
    if (unlikely(!(m && m->sq_item))) {
        PyErr_Format(PyExc_TypeError, "'%.200s' object is not subscriptable", Py_TYPE(obj)->tp_name);
        return NULL;
    }
    key_value = __Pyx_PyIndex_AsSsize_t(index);
    if (likely(key_value != -1 || !(runerr = PyErr_Occurred()))) {
        return __Pyx_GetItemInt_Fast(obj, key_value, 0, 1, 1);
    }
    if (PyErr_GivenExceptionMatches(runerr, PyExc_OverflowError)) {
        PyErr_Clear();
        PyErr_Format(PyExc_IndexError, "cannot fit '%.200s' into an index-sized integer", Py_TYPE(index)->tp_name);
    }
    return NULL;
}
static PyObject *__Pyx_PyObject_GetItem(PyObject *obj, PyObject* key) {
    PyMappingMethods *m = Py_TYPE(obj)->tp_as_mapping;
    if (likely(m && m->mp_subscript)) {
        return m->mp_subscript(obj, key);
    }
    return __Pyx_PyObject_GetIndex(obj, key);
}
#endif

/* PyObjectCall2Args */
static CYTHON_UNUSED PyObject* __Pyx_PyObject_Call2Args(PyObject* function, PyObject* arg1, PyObject* arg2) {
    PyObject *args, *result = NULL;
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(function)) {
        PyObject *args[2] = {arg1, arg2};
        return __Pyx_PyFunction_FastCall(function, args, 2);
    }
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(function)) {
        PyObject *args[2] = {arg1, arg2};
        return __Pyx_PyCFunction_FastCall(function, args, 2);
    }
    #endif
    args = PyTuple_New(2);
    if (unlikely(!args)) goto done;
    Py_INCREF(arg1);
    PyTuple_SET_ITEM(args, 0, arg1);
    Py_INCREF(arg2);
    PyTuple_SET_ITEM(args, 1, arg2);
    Py_INCREF(function);
    result = __Pyx_PyObject_Call(function, args, NULL);
    Py_DECREF(args);
    Py_DECREF(function);
done:
    return result;
}

/* PyObjectGetMethod */
static int __Pyx_PyObject_GetMethod(PyObject *obj, PyObject *name, PyObject **method) {
    PyObject *attr;
#if CYTHON_UNPACK_METHODS && CYTHON_COMPILING_IN_CPYTHON && CYTHON_USE_PYTYPE_LOOKUP
    PyTypeObject *tp = Py_TYPE(obj);
    PyObject *descr;
    descrgetfunc f = NULL;
    PyObject **dictptr, *dict;
    int meth_found = 0;
    assert (*method == NULL);
    if (unlikely(tp->tp_getattro != PyObject_GenericGetAttr)) {
        attr = __Pyx_PyObject_GetAttrStr(obj, name);
        goto try_unpack;
    }
    if (unlikely(tp->tp_dict == NULL) && unlikely(PyType_Ready(tp) < 0)) {
        return 0;
    }
    descr = _PyType_Lookup(tp, name);
    if (likely(descr != NULL)) {
        Py_INCREF(descr);
#if PY_MAJOR_VERSION >= 3
        #ifdef __Pyx_CyFunction_USED
        if (likely(PyFunction_Check(descr) || (Py_TYPE(descr) == &PyMethodDescr_Type) || __Pyx_CyFunction_Check(descr)))
        #else
        if (likely(PyFunction_Check(descr) || (Py_TYPE(descr) == &PyMethodDescr_Type)))
        #endif
#else
        #ifdef __Pyx_CyFunction_USED
        if (likely(PyFunction_Check(descr) || __Pyx_CyFunction_Check(descr)))
        #else
        if (likely(PyFunction_Check(descr)))
        #endif
#endif
        {
            meth_found = 1;
        } else {
            f = Py_TYPE(descr)->tp_descr_get;
            if (f != NULL && PyDescr_IsData(descr)) {
                attr = f(descr, obj, (PyObject *)Py_TYPE(obj));
                Py_DECREF(descr);
                goto try_unpack;
            }
        }
    }
    dictptr = _PyObject_GetDictPtr(obj);
    if (dictptr != NULL && (dict = *dictptr) != NULL) {
        Py_INCREF(dict);
        attr = __Pyx_PyDict_GetItemStr(dict, name);
        if (attr != NULL) {
            Py_INCREF(attr);
            Py_DECREF(dict);
            Py_XDECREF(descr);
            goto try_unpack;
        }
        Py_DECREF(dict);
    }
    if (meth_found) {
        *method = descr;
        return 1;
    }
    if (f != NULL) {
        attr = f(descr, obj, (PyObject *)Py_TYPE(obj));
        Py_DECREF(descr);
        goto try_unpack;
    }
    if (descr != NULL) {
        *method = descr;
        return 0;
    }
    PyErr_Format(PyExc_AttributeError,
#if PY_MAJOR_VERSION >= 3
                 "'%.50s' object has no attribute '%U'",
                 tp->tp_name, name);
#else
                 "'%.50s' object has no attribute '%.400s'",
                 tp->tp_name, PyString_AS_STRING(name));
#endif
    return 0;
#else
    attr = __Pyx_PyObject_GetAttrStr(obj, name);
    goto try_unpack;
#endif
try_unpack:
#if CYTHON_UNPACK_METHODS
    if (likely(attr) && PyMethod_Check(attr) && likely(PyMethod_GET_SELF(attr) == obj)) {
        PyObject *function = PyMethod_GET_FUNCTION(attr);
        Py_INCREF(function);
        Py_DECREF(attr);
        *method = function;
        return 1;
    }
#endif
    *method = attr;
    return 0;
}

/* PyObjectCallMethod1 */
static PyObject* __Pyx__PyObject_CallMethod1(PyObject* method, PyObject* arg) {
    PyObject *result = __Pyx_PyObject_CallOneArg(method, arg);
    Py_DECREF(method);
    return result;
}
static PyObject* __Pyx_PyObject_CallMethod1(PyObject* obj, PyObject* method_name, PyObject* arg) {
    PyObject *method = NULL, *result;
    int is_method = __Pyx_PyObject_GetMethod(obj, method_name, &method);
    if (likely(is_method)) {
        result = __Pyx_PyObject_Call2Args(method, obj, arg);
        Py_DECREF(method);
        return result;
    }
    if (unlikely(!method)) return NULL;
    return __Pyx__PyObject_CallMethod1(method, arg);
}

/* append */
static CYTHON_INLINE int __Pyx_PyObject_Append(PyObject* L, PyObject* x) {
    if (likely(PyList_CheckExact(L))) {
        if (unlikely(__Pyx_PyList_Append(L, x) < 0)) return -1;
    } else {
        PyObject* retval = __Pyx_PyObject_CallMethod1(L, __pyx_n_s_append, x);
        if (unlikely(!retval))
            return -1;
        Py_DECREF(retval);
    }
    return 0;
}

/* Import */
static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list, int level) {
    PyObject *empty_list = 0;
    PyObject *module = 0;
    PyObject *global_dict = 0;
    PyObject *empty_dict = 0;
    PyObject *list;
    #if PY_MAJOR_VERSION < 3
    PyObject *py_import;
    py_import = __Pyx_PyObject_GetAttrStr(__pyx_b, __pyx_n_s_import);
    if (!py_import)
        goto bad;
    #endif
    if (from_list)
        list = from_list;
    else {
        empty_list = PyList_New(0);
        if (!empty_list)
            goto bad;
        list = empty_list;
    }
    global_dict = PyModule_GetDict(__pyx_m);
    if (!global_dict)
        goto bad;
    empty_dict = PyDict_New();
    if (!empty_dict)
        goto bad;
    {
        #if PY_MAJOR_VERSION >= 3
        if (level == -1) {
            if (strchr(__Pyx_MODULE_NAME, '.')) {
                module = PyImport_ImportModuleLevelObject(
                    name, global_dict, empty_dict, list, 1);
                if (!module) {
                    if (!PyErr_ExceptionMatches(PyExc_ImportError))
                        goto bad;
                    PyErr_Clear();
                }
            }
            level = 0;
        }
        #endif
        if (!module) {
            #if PY_MAJOR_VERSION < 3
            PyObject *py_level = PyInt_FromLong(level);
            if (!py_level)
                goto bad;
            module = PyObject_CallFunctionObjArgs(py_import,
                name, global_dict, empty_dict, list, py_level, (PyObject *)NULL);
            Py_DECREF(py_level);
            #else
            module = PyImport_ImportModuleLevelObject(
                name, global_dict, empty_dict, list, level);
            #endif
        }
    }
bad:
    #if PY_MAJOR_VERSION < 3
    Py_XDECREF(py_import);
    #endif
    Py_XDECREF(empty_list);
    Py_XDECREF(empty_dict);
    return module;
}

/* ImportFrom */
static PyObject* __Pyx_ImportFrom(PyObject* module, PyObject* name) {
    PyObject* value = __Pyx_PyObject_GetAttrStr(module, name);
    if (unlikely(!value) && PyErr_ExceptionMatches(PyExc_AttributeError)) {
        PyErr_Format(PyExc_ImportError,
        #if PY_MAJOR_VERSION < 3
            "cannot import name %.230s", PyString_AS_STRING(name));
        #else
            "cannot import name %S", name);
        #endif
    }
    return value;
}

/* RaiseArgTupleInvalid */
static void __Pyx_RaiseArgtupleInvalid(
    const char* func_name,
    int exact,
    Py_ssize_t num_min,
    Py_ssize_t num_max,
    Py_ssize_t num_found)
{
    Py_ssize_t num_expected;
    const char *more_or_less;
    if (num_found < num_min) {
        num_expected = num_min;
        more_or_less = "at least";
    } else {
        num_expected = num_max;
        more_or_less = "at most";
    }
    if (exact) {
        more_or_less = "exactly";
    }
    PyErr_Format(PyExc_TypeError,
                 "%.200s() takes %.8s %" CYTHON_FORMAT_SSIZE_T "d positional argument%.1s (%" CYTHON_FORMAT_SSIZE_T "d given)",
                 func_name, more_or_less, num_expected,
                 (num_expected == 1) ? "" : "s", num_found);
}

/* KeywordStringCheck */
static int __Pyx_CheckKeywordStrings(
    PyObject *kwdict,
    const char* function_name,
    int kw_allowed)
{
    PyObject* key = 0;
    Py_ssize_t pos = 0;
#if CYTHON_COMPILING_IN_PYPY
    if (!kw_allowed && PyDict_Next(kwdict, &pos, &key, 0))
        goto invalid_keyword;
    return 1;
#else
    while (PyDict_Next(kwdict, &pos, &key, 0)) {
        #if PY_MAJOR_VERSION < 3
        if (unlikely(!PyString_Check(key)))
        #endif
            if (unlikely(!PyUnicode_Check(key)))
                goto invalid_keyword_type;
    }
    if ((!kw_allowed) && unlikely(key))
        goto invalid_keyword;
    return 1;
invalid_keyword_type:
    PyErr_Format(PyExc_TypeError,
        "%.200s() keywords must be strings", function_name);
    return 0;
#endif
invalid_keyword:
    PyErr_Format(PyExc_TypeError,
    #if PY_MAJOR_VERSION < 3
        "%.200s() got an unexpected keyword argument '%.200s'",
        function_name, PyString_AsString(key));
    #else
        "%s() got an unexpected keyword argument '%U'",
        function_name, key);
    #endif
    return 0;
}

/* RaiseDoubleKeywords */
static void __Pyx_RaiseDoubleKeywordsError(
    const char* func_name,
    PyObject* kw_name)
{
    PyErr_Format(PyExc_TypeError,
        #if PY_MAJOR_VERSION >= 3
        "%s() got multiple values for keyword argument '%U'", func_name, kw_name);
        #else
        "%s() got multiple values for keyword argument '%s'", func_name,
        PyString_AsString(kw_name));
        #endif
}

/* ParseKeywords */
static int __Pyx_ParseOptionalKeywords(
    PyObject *kwds,
    PyObject **argnames[],
    PyObject *kwds2,
    PyObject *values[],
    Py_ssize_t num_pos_args,
    const char* function_name)
{
    PyObject *key = 0, *value = 0;
    Py_ssize_t pos = 0;
    PyObject*** name;
    PyObject*** first_kw_arg = argnames + num_pos_args;
    while (PyDict_Next(kwds, &pos, &key, &value)) {
        name = first_kw_arg;
        while (*name && (**name != key)) name++;
        if (*name) {
            values[name-argnames] = value;
            continue;
        }
        name = first_kw_arg;
        #if PY_MAJOR_VERSION < 3
        if (likely(PyString_CheckExact(key)) || likely(PyString_Check(key))) {
            while (*name) {
                if ((CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**name) == PyString_GET_SIZE(key))
                        && _PyString_Eq(**name, key)) {
                    values[name-argnames] = value;
                    break;
                }
                name++;
            }
            if (*name) continue;
            else {
                PyObject*** argname = argnames;
                while (argname != first_kw_arg) {
                    if ((**argname == key) || (
                            (CYTHON_COMPILING_IN_PYPY || PyString_GET_SIZE(**argname) == PyString_GET_SIZE(key))
                             && _PyString_Eq(**argname, key))) {
                        goto arg_passed_twice;
                    }
                    argname++;
                }
            }
        } else
        #endif
        if (likely(PyUnicode_Check(key))) {
            while (*name) {
                int cmp = (**name == key) ? 0 :
                #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
                    (PyUnicode_GET_SIZE(**name) != PyUnicode_GET_SIZE(key)) ? 1 :
                #endif
                    PyUnicode_Compare(**name, key);
                if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
                if (cmp == 0) {
                    values[name-argnames] = value;
                    break;
                }
                name++;
            }
            if (*name) continue;
            else {
                PyObject*** argname = argnames;
                while (argname != first_kw_arg) {
                    int cmp = (**argname == key) ? 0 :
                    #if !CYTHON_COMPILING_IN_PYPY && PY_MAJOR_VERSION >= 3
                        (PyUnicode_GET_SIZE(**argname) != PyUnicode_GET_SIZE(key)) ? 1 :
                    #endif
                        PyUnicode_Compare(**argname, key);
                    if (cmp < 0 && unlikely(PyErr_Occurred())) goto bad;
                    if (cmp == 0) goto arg_passed_twice;
                    argname++;
                }
            }
        } else
            goto invalid_keyword_type;
        if (kwds2) {
            if (unlikely(PyDict_SetItem(kwds2, key, value))) goto bad;
        } else {
            goto invalid_keyword;
        }
    }
    return 0;
arg_passed_twice:
    __Pyx_RaiseDoubleKeywordsError(function_name, key);
    goto bad;
invalid_keyword_type:
    PyErr_Format(PyExc_TypeError,
        "%.200s() keywords must be strings", function_name);
    goto bad;
invalid_keyword:
    PyErr_Format(PyExc_TypeError,
    #if PY_MAJOR_VERSION < 3
        "%.200s() got an unexpected keyword argument '%.200s'",
        function_name, PyString_AsString(key));
    #else
        "%s() got an unexpected keyword argument '%U'",
        function_name, key);
    #endif
bad:
    return -1;
}

/* CallUnboundCMethod1 */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE PyObject* __Pyx_CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg) {
    if (likely(cfunc->func)) {
        int flag = cfunc->flag;
        if (flag == METH_O) {
            return (*(cfunc->func))(self, arg);
        } else if (PY_VERSION_HEX >= 0x030600B1 && flag == METH_FASTCALL) {
            if (PY_VERSION_HEX >= 0x030700A0) {
                return (*(__Pyx_PyCFunctionFast)(void*)(PyCFunction)cfunc->func)(self, &arg, 1);
            } else {
                return (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)cfunc->func)(self, &arg, 1, NULL);
            }
        } else if (PY_VERSION_HEX >= 0x030700A0 && flag == (METH_FASTCALL | METH_KEYWORDS)) {
            return (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)cfunc->func)(self, &arg, 1, NULL);
        }
    }
    return __Pyx__CallUnboundCMethod1(cfunc, self, arg);
}
#endif
static PyObject* __Pyx__CallUnboundCMethod1(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg){
    PyObject *args, *result = NULL;
    if (unlikely(!cfunc->func && !cfunc->method) && unlikely(__Pyx_TryUnpackUnboundCMethod(cfunc) < 0)) return NULL;
#if CYTHON_COMPILING_IN_CPYTHON
    if (cfunc->func && (cfunc->flag & METH_VARARGS)) {
        args = PyTuple_New(1);
        if (unlikely(!args)) goto bad;
        Py_INCREF(arg);
        PyTuple_SET_ITEM(args, 0, arg);
        if (cfunc->flag & METH_KEYWORDS)
            result = (*(PyCFunctionWithKeywords)(void*)(PyCFunction)cfunc->func)(self, args, NULL);
        else
            result = (*cfunc->func)(self, args);
    } else {
        args = PyTuple_New(2);
        if (unlikely(!args)) goto bad;
        Py_INCREF(self);
        PyTuple_SET_ITEM(args, 0, self);
        Py_INCREF(arg);
        PyTuple_SET_ITEM(args, 1, arg);
        result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
    }
#else
    args = PyTuple_Pack(2, self, arg);
    if (unlikely(!args)) goto bad;
    result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
#endif
bad:
    Py_XDECREF(args);
    return result;
}

/* ExtTypeTest */
static CYTHON_INLINE int __Pyx_TypeTest(PyObject *obj, PyTypeObject *type) {
    if (unlikely(!type)) {
        PyErr_SetString(PyExc_SystemError, "Missing type object");
        return 0;
    }
    if (likely(__Pyx_TypeCheck(obj, type)))
        return 1;
    PyErr_Format(PyExc_TypeError, "Cannot convert %.200s to %.200s",
                 Py_TYPE(obj)->tp_name, type->tp_name);
    return 0;
}

/* GetModuleGlobalName */
#if CYTHON_USE_DICT_VERSIONS
static PyObject *__Pyx__GetModuleGlobalName(PyObject *name, PY_UINT64_T *dict_version, PyObject **dict_cached_value)
#else
static CYTHON_INLINE PyObject *__Pyx__GetModuleGlobalName(PyObject *name)
#endif
{
    PyObject *result;
#if !CYTHON_AVOID_BORROWED_REFS
#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030500A1
    result = _PyDict_GetItem_KnownHash(__pyx_d, name, ((PyASCIIObject *) name)->hash);
    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
    if (likely(result)) {
        return __Pyx_NewRef(result);
    } else if (unlikely(PyErr_Occurred())) {
        return NULL;
    }
#else
    result = PyDict_GetItem(__pyx_d, name);
    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
    if (likely(result)) {
        return __Pyx_NewRef(result);
    }
#endif
#else
    result = PyObject_GetItem(__pyx_d, name);
    __PYX_UPDATE_DICT_CACHE(__pyx_d, result, *dict_cached_value, *dict_version)
    if (likely(result)) {
        return __Pyx_NewRef(result);
    }
    PyErr_Clear();
#endif
    return __Pyx_GetBuiltinName(name);
}

/* SliceTupleAndList */
#if CYTHON_COMPILING_IN_CPYTHON
static CYTHON_INLINE void __Pyx_crop_slice(Py_ssize_t* _start, Py_ssize_t* _stop, Py_ssize_t* _length) {
    Py_ssize_t start = *_start, stop = *_stop, length = *_length;
    if (start < 0) {
        start += length;
        if (start < 0)
            start = 0;
    }
    if (stop < 0)
        stop += length;
    else if (stop > length)
        stop = length;
    *_length = stop - start;
    *_start = start;
    *_stop = stop;
}
static CYTHON_INLINE void __Pyx_copy_object_array(PyObject** CYTHON_RESTRICT src, PyObject** CYTHON_RESTRICT dest, Py_ssize_t length) {
    PyObject *v;
    Py_ssize_t i;
    for (i = 0; i < length; i++) {
        v = dest[i] = src[i];
        Py_INCREF(v);
    }
}
static CYTHON_INLINE PyObject* __Pyx_PyList_GetSlice(
            PyObject* src, Py_ssize_t start, Py_ssize_t stop) {
    PyObject* dest;
    Py_ssize_t length = PyList_GET_SIZE(src);
    __Pyx_crop_slice(&start, &stop, &length);
    if (unlikely(length <= 0))
        return PyList_New(0);
    dest = PyList_New(length);
    if (unlikely(!dest))
        return NULL;
    __Pyx_copy_object_array(
        ((PyListObject*)src)->ob_item + start,
        ((PyListObject*)dest)->ob_item,
        length);
    return dest;
}
static CYTHON_INLINE PyObject* __Pyx_PyTuple_GetSlice(
            PyObject* src, Py_ssize_t start, Py_ssize_t stop) {
    PyObject* dest;
    Py_ssize_t length = PyTuple_GET_SIZE(src);
    __Pyx_crop_slice(&start, &stop, &length);
    if (unlikely(length <= 0))
        return PyTuple_New(0);
    dest = PyTuple_New(length);
    if (unlikely(!dest))
        return NULL;
    __Pyx_copy_object_array(
        ((PyTupleObject*)src)->ob_item + start,
        ((PyTupleObject*)dest)->ob_item,
        length);
    return dest;
}
#endif

/* ArgTypeTest */
static int __Pyx__ArgTypeTest(PyObject *obj, PyTypeObject *type, const char *name, int exact)
{
    if (unlikely(!type)) {
        PyErr_SetString(PyExc_SystemError, "Missing type object");
        return 0;
    }
    else if (exact) {
        #if PY_MAJOR_VERSION == 2
        if ((type == &PyBaseString_Type) && likely(__Pyx_PyBaseString_CheckExact(obj))) return 1;
        #endif
    }
    else {
        if (likely(__Pyx_TypeCheck(obj, type))) return 1;
    }
    PyErr_Format(PyExc_TypeError,
        "Argument '%.200s' has incorrect type (expected %.200s, got %.200s)",
        name, type->tp_name, Py_TYPE(obj)->tp_name);
    return 0;
}

/* PyIntCompare */
static CYTHON_INLINE PyObject* __Pyx_PyInt_NeObjC(PyObject *op1, PyObject *op2, CYTHON_UNUSED long intval, CYTHON_UNUSED long inplace) {
    if (op1 == op2) {
        Py_RETURN_FALSE;
    }
    #if PY_MAJOR_VERSION < 3
    if (likely(PyInt_CheckExact(op1))) {
        const long b = intval;
        long a = PyInt_AS_LONG(op1);
        if (a != b) Py_RETURN_TRUE; else Py_RETURN_FALSE;
    }
    #endif
    #if CYTHON_USE_PYLONG_INTERNALS
    if (likely(PyLong_CheckExact(op1))) {
        int unequal;
        unsigned long uintval;
        Py_ssize_t size = Py_SIZE(op1);
        const digit* digits = ((PyLongObject*)op1)->ob_digit;
        if (intval == 0) {
            if (size != 0) Py_RETURN_TRUE; else Py_RETURN_FALSE;
        } else if (intval < 0) {
            if (size >= 0)
                Py_RETURN_TRUE;
            intval = -intval;
            size = -size;
        } else {
            if (size <= 0)
                Py_RETURN_TRUE;
        }
        uintval = (unsigned long) intval;
#if PyLong_SHIFT * 4 < SIZEOF_LONG*8
        if (uintval >> (PyLong_SHIFT * 4)) {
            unequal = (size != 5) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[3] != ((uintval >> (3 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[4] != ((uintval >> (4 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
        } else
#endif
#if PyLong_SHIFT * 3 < SIZEOF_LONG*8
        if (uintval >> (PyLong_SHIFT * 3)) {
            unequal = (size != 4) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[3] != ((uintval >> (3 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
        } else
#endif
#if PyLong_SHIFT * 2 < SIZEOF_LONG*8
        if (uintval >> (PyLong_SHIFT * 2)) {
            unequal = (size != 3) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK)) | (digits[2] != ((uintval >> (2 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
        } else
#endif
#if PyLong_SHIFT * 1 < SIZEOF_LONG*8
        if (uintval >> (PyLong_SHIFT * 1)) {
            unequal = (size != 2) || (digits[0] != (uintval & (unsigned long) PyLong_MASK))
                 | (digits[1] != ((uintval >> (1 * PyLong_SHIFT)) & (unsigned long) PyLong_MASK));
        } else
#endif
            unequal = (size != 1) || (((unsigned long) digits[0]) != (uintval & (unsigned long) PyLong_MASK));
        if (unequal != 0) Py_RETURN_TRUE; else Py_RETURN_FALSE;
    }
    #endif
    if (PyFloat_CheckExact(op1)) {
        const long b = intval;
        double a = PyFloat_AS_DOUBLE(op1);
        if ((double)a != (double)b) Py_RETURN_TRUE; else Py_RETURN_FALSE;
    }
    return (
        PyObject_RichCompare(op1, op2, Py_NE));
}

/* None */
static CYTHON_INLINE void __Pyx_RaiseUnboundLocalError(const char *varname) {
    PyErr_Format(PyExc_UnboundLocalError, "local variable '%s' referenced before assignment", varname);
}

/* py_dict_values */
static CYTHON_INLINE PyObject* __Pyx_PyDict_Values(PyObject* d) {
    if (PY_MAJOR_VERSION >= 3)
        return __Pyx_CallUnboundCMethod0(&__pyx_umethod_PyDict_Type_values, d);
    else
        return PyDict_Values(d);
}

/* PyIntBinop */
#if !CYTHON_COMPILING_IN_PYPY
static PyObject* __Pyx_PyInt_SubtractObjC(PyObject *op1, PyObject *op2, CYTHON_UNUSED long intval, CYTHON_UNUSED int inplace) {
    #if PY_MAJOR_VERSION < 3
    if (likely(PyInt_CheckExact(op1))) {
        const long b = intval;
        long x;
        long a = PyInt_AS_LONG(op1);
            x = (long)((unsigned long)a - b);
            if (likely((x^a) >= 0 || (x^~b) >= 0))
                return PyInt_FromLong(x);
            return PyLong_Type.tp_as_number->nb_subtract(op1, op2);
    }
    #endif
    #if CYTHON_USE_PYLONG_INTERNALS
    if (likely(PyLong_CheckExact(op1))) {
        const long b = intval;
        long a, x;
#ifdef HAVE_LONG_LONG
        const PY_LONG_LONG llb = intval;
        PY_LONG_LONG lla, llx;
#endif
        const digit* digits = ((PyLongObject*)op1)->ob_digit;
        const Py_ssize_t size = Py_SIZE(op1);
        if (likely(__Pyx_sst_abs(size) <= 1)) {
            a = likely(size) ? digits[0] : 0;
            if (size == -1) a = -a;
        } else {
            switch (size) {
                case -2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 2:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        a = (long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 2 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case -3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 3:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        a = (long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 3 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case -4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = -(PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                case 4:
                    if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                        a = (long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0]));
                        break;
#ifdef HAVE_LONG_LONG
                    } else if (8 * sizeof(PY_LONG_LONG) - 1 > 4 * PyLong_SHIFT) {
                        lla = (PY_LONG_LONG) (((((((((unsigned PY_LONG_LONG)digits[3]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[2]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[1]) << PyLong_SHIFT) | (unsigned PY_LONG_LONG)digits[0]));
                        goto long_long;
#endif
                    }
                    CYTHON_FALLTHROUGH;
                default: return PyLong_Type.tp_as_number->nb_subtract(op1, op2);
            }
        }
                x = a - b;
            return PyLong_FromLong(x);
#ifdef HAVE_LONG_LONG
        long_long:
                llx = lla - llb;
            return PyLong_FromLongLong(llx);
#endif
        
        
    }
    #endif
    if (PyFloat_CheckExact(op1)) {
        const long b = intval;
        double a = PyFloat_AS_DOUBLE(op1);
            double result;
            PyFPE_START_PROTECT("subtract", return NULL)
            result = ((double)a) - (double)b;
            PyFPE_END_PROTECT(result)
            return PyFloat_FromDouble(result);
    }
    return (inplace ? PyNumber_InPlaceSubtract : PyNumber_Subtract)(op1, op2);
}
#endif

/* CallUnboundCMethod2 */
#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX >= 0x030600B1
static CYTHON_INLINE PyObject *__Pyx_CallUnboundCMethod2(__Pyx_CachedCFunction *cfunc, PyObject *self, PyObject *arg1, PyObject *arg2) {
    if (likely(cfunc->func)) {
        PyObject *args[2] = {arg1, arg2};
        if (cfunc->flag == METH_FASTCALL) {
            #if PY_VERSION_HEX >= 0x030700A0
            return (*(__Pyx_PyCFunctionFast)(void*)(PyCFunction)cfunc->func)(self, args, 2);
            #else
            return (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)cfunc->func)(self, args, 2, NULL);
            #endif
        }
        #if PY_VERSION_HEX >= 0x030700A0
        if (cfunc->flag == (METH_FASTCALL | METH_KEYWORDS))
            return (*(__Pyx_PyCFunctionFastWithKeywords)(void*)(PyCFunction)cfunc->func)(self, args, 2, NULL);
        #endif
    }
    return __Pyx__CallUnboundCMethod2(cfunc, self, arg1, arg2);
}
#endif
static PyObject* __Pyx__CallUnboundCMethod2(__Pyx_CachedCFunction* cfunc, PyObject* self, PyObject* arg1, PyObject* arg2){
    PyObject *args, *result = NULL;
    if (unlikely(!cfunc->func && !cfunc->method) && unlikely(__Pyx_TryUnpackUnboundCMethod(cfunc) < 0)) return NULL;
#if CYTHON_COMPILING_IN_CPYTHON
    if (cfunc->func && (cfunc->flag & METH_VARARGS)) {
        args = PyTuple_New(2);
        if (unlikely(!args)) goto bad;
        Py_INCREF(arg1);
        PyTuple_SET_ITEM(args, 0, arg1);
        Py_INCREF(arg2);
        PyTuple_SET_ITEM(args, 1, arg2);
        if (cfunc->flag & METH_KEYWORDS)
            result = (*(PyCFunctionWithKeywords)(void*)(PyCFunction)cfunc->func)(self, args, NULL);
        else
            result = (*cfunc->func)(self, args);
    } else {
        args = PyTuple_New(3);
        if (unlikely(!args)) goto bad;
        Py_INCREF(self);
        PyTuple_SET_ITEM(args, 0, self);
        Py_INCREF(arg1);
        PyTuple_SET_ITEM(args, 1, arg1);
        Py_INCREF(arg2);
        PyTuple_SET_ITEM(args, 2, arg2);
        result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
    }
#else
    args = PyTuple_Pack(3, self, arg1, arg2);
    if (unlikely(!args)) goto bad;
    result = __Pyx_PyObject_Call(cfunc->method, args, NULL);
#endif
bad:
    Py_XDECREF(args);
    return result;
}

/* py_dict_pop */
static CYTHON_INLINE PyObject *__Pyx_PyDict_Pop(PyObject *d, PyObject *key, PyObject *default_value) {
#if CYTHON_COMPILING_IN_CPYTHON && PY_VERSION_HEX > 0x030600B3
    if ((1)) {
        return _PyDict_Pop(d, key, default_value);
    } else
#endif
    if (default_value) {
        return __Pyx_CallUnboundCMethod2(&__pyx_umethod_PyDict_Type_pop, d, key, default_value);
    } else {
        return __Pyx_CallUnboundCMethod1(&__pyx_umethod_PyDict_Type_pop, d, key);
    }
}

/* FetchCommonType */
static PyTypeObject* __Pyx_FetchCommonType(PyTypeObject* type) {
    PyObject* fake_module;
    PyTypeObject* cached_type = NULL;
    fake_module = PyImport_AddModule((char*) "_cython_" CYTHON_ABI);
    if (!fake_module) return NULL;
    Py_INCREF(fake_module);
    cached_type = (PyTypeObject*) PyObject_GetAttrString(fake_module, type->tp_name);
    if (cached_type) {
        if (!PyType_Check((PyObject*)cached_type)) {
            PyErr_Format(PyExc_TypeError,
                "Shared Cython type %.200s is not a type object",
                type->tp_name);
            goto bad;
        }
        if (cached_type->tp_basicsize != type->tp_basicsize) {
            PyErr_Format(PyExc_TypeError,
                "Shared Cython type %.200s has the wrong size, try recompiling",
                type->tp_name);
            goto bad;
        }
    } else {
        if (!PyErr_ExceptionMatches(PyExc_AttributeError)) goto bad;
        PyErr_Clear();
        if (PyType_Ready(type) < 0) goto bad;
        if (PyObject_SetAttrString(fake_module, type->tp_name, (PyObject*) type) < 0)
            goto bad;
        Py_INCREF(type);
        cached_type = type;
    }
done:
    Py_DECREF(fake_module);
    return cached_type;
bad:
    Py_XDECREF(cached_type);
    cached_type = NULL;
    goto done;
}

/* CythonFunction */
#include <structmember.h>
static PyObject *
__Pyx_CyFunction_get_doc(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *closure)
{
    if (unlikely(op->func_doc == NULL)) {
        if (op->func.m_ml->ml_doc) {
#if PY_MAJOR_VERSION >= 3
            op->func_doc = PyUnicode_FromString(op->func.m_ml->ml_doc);
#else
            op->func_doc = PyString_FromString(op->func.m_ml->ml_doc);
#endif
            if (unlikely(op->func_doc == NULL))
                return NULL;
        } else {
            Py_INCREF(Py_None);
            return Py_None;
        }
    }
    Py_INCREF(op->func_doc);
    return op->func_doc;
}
static int
__Pyx_CyFunction_set_doc(__pyx_CyFunctionObject *op, PyObject *value, CYTHON_UNUSED void *context)
{
    PyObject *tmp = op->func_doc;
    if (value == NULL) {
        value = Py_None;
    }
    Py_INCREF(value);
    op->func_doc = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_name(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    if (unlikely(op->func_name == NULL)) {
#if PY_MAJOR_VERSION >= 3
        op->func_name = PyUnicode_InternFromString(op->func.m_ml->ml_name);
#else
        op->func_name = PyString_InternFromString(op->func.m_ml->ml_name);
#endif
        if (unlikely(op->func_name == NULL))
            return NULL;
    }
    Py_INCREF(op->func_name);
    return op->func_name;
}
static int
__Pyx_CyFunction_set_name(__pyx_CyFunctionObject *op, PyObject *value, CYTHON_UNUSED void *context)
{
    PyObject *tmp;
#if PY_MAJOR_VERSION >= 3
    if (unlikely(value == NULL || !PyUnicode_Check(value)))
#else
    if (unlikely(value == NULL || !PyString_Check(value)))
#endif
    {
        PyErr_SetString(PyExc_TypeError,
                        "__name__ must be set to a string object");
        return -1;
    }
    tmp = op->func_name;
    Py_INCREF(value);
    op->func_name = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_qualname(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    Py_INCREF(op->func_qualname);
    return op->func_qualname;
}
static int
__Pyx_CyFunction_set_qualname(__pyx_CyFunctionObject *op, PyObject *value, CYTHON_UNUSED void *context)
{
    PyObject *tmp;
#if PY_MAJOR_VERSION >= 3
    if (unlikely(value == NULL || !PyUnicode_Check(value)))
#else
    if (unlikely(value == NULL || !PyString_Check(value)))
#endif
    {
        PyErr_SetString(PyExc_TypeError,
                        "__qualname__ must be set to a string object");
        return -1;
    }
    tmp = op->func_qualname;
    Py_INCREF(value);
    op->func_qualname = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_self(__pyx_CyFunctionObject *m, CYTHON_UNUSED void *closure)
{
    PyObject *self;
    self = m->func_closure;
    if (self == NULL)
        self = Py_None;
    Py_INCREF(self);
    return self;
}
static PyObject *
__Pyx_CyFunction_get_dict(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    if (unlikely(op->func_dict == NULL)) {
        op->func_dict = PyDict_New();
        if (unlikely(op->func_dict == NULL))
            return NULL;
    }
    Py_INCREF(op->func_dict);
    return op->func_dict;
}
static int
__Pyx_CyFunction_set_dict(__pyx_CyFunctionObject *op, PyObject *value, CYTHON_UNUSED void *context)
{
    PyObject *tmp;
    if (unlikely(value == NULL)) {
        PyErr_SetString(PyExc_TypeError,
               "function's dictionary may not be deleted");
        return -1;
    }
    if (unlikely(!PyDict_Check(value))) {
        PyErr_SetString(PyExc_TypeError,
               "setting function's dictionary to a non-dict");
        return -1;
    }
    tmp = op->func_dict;
    Py_INCREF(value);
    op->func_dict = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_globals(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    Py_INCREF(op->func_globals);
    return op->func_globals;
}
static PyObject *
__Pyx_CyFunction_get_closure(CYTHON_UNUSED __pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    Py_INCREF(Py_None);
    return Py_None;
}
static PyObject *
__Pyx_CyFunction_get_code(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context)
{
    PyObject* result = (op->func_code) ? op->func_code : Py_None;
    Py_INCREF(result);
    return result;
}
static int
__Pyx_CyFunction_init_defaults(__pyx_CyFunctionObject *op) {
    int result = 0;
    PyObject *res = op->defaults_getter((PyObject *) op);
    if (unlikely(!res))
        return -1;
    #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
    op->defaults_tuple = PyTuple_GET_ITEM(res, 0);
    Py_INCREF(op->defaults_tuple);
    op->defaults_kwdict = PyTuple_GET_ITEM(res, 1);
    Py_INCREF(op->defaults_kwdict);
    #else
    op->defaults_tuple = PySequence_ITEM(res, 0);
    if (unlikely(!op->defaults_tuple)) result = -1;
    else {
        op->defaults_kwdict = PySequence_ITEM(res, 1);
        if (unlikely(!op->defaults_kwdict)) result = -1;
    }
    #endif
    Py_DECREF(res);
    return result;
}
static int
__Pyx_CyFunction_set_defaults(__pyx_CyFunctionObject *op, PyObject* value, CYTHON_UNUSED void *context) {
    PyObject* tmp;
    if (!value) {
        value = Py_None;
    } else if (value != Py_None && !PyTuple_Check(value)) {
        PyErr_SetString(PyExc_TypeError,
                        "__defaults__ must be set to a tuple object");
        return -1;
    }
    Py_INCREF(value);
    tmp = op->defaults_tuple;
    op->defaults_tuple = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_defaults(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context) {
    PyObject* result = op->defaults_tuple;
    if (unlikely(!result)) {
        if (op->defaults_getter) {
            if (__Pyx_CyFunction_init_defaults(op) < 0) return NULL;
            result = op->defaults_tuple;
        } else {
            result = Py_None;
        }
    }
    Py_INCREF(result);
    return result;
}
static int
__Pyx_CyFunction_set_kwdefaults(__pyx_CyFunctionObject *op, PyObject* value, CYTHON_UNUSED void *context) {
    PyObject* tmp;
    if (!value) {
        value = Py_None;
    } else if (value != Py_None && !PyDict_Check(value)) {
        PyErr_SetString(PyExc_TypeError,
                        "__kwdefaults__ must be set to a dict object");
        return -1;
    }
    Py_INCREF(value);
    tmp = op->defaults_kwdict;
    op->defaults_kwdict = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_kwdefaults(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context) {
    PyObject* result = op->defaults_kwdict;
    if (unlikely(!result)) {
        if (op->defaults_getter) {
            if (__Pyx_CyFunction_init_defaults(op) < 0) return NULL;
            result = op->defaults_kwdict;
        } else {
            result = Py_None;
        }
    }
    Py_INCREF(result);
    return result;
}
static int
__Pyx_CyFunction_set_annotations(__pyx_CyFunctionObject *op, PyObject* value, CYTHON_UNUSED void *context) {
    PyObject* tmp;
    if (!value || value == Py_None) {
        value = NULL;
    } else if (!PyDict_Check(value)) {
        PyErr_SetString(PyExc_TypeError,
                        "__annotations__ must be set to a dict object");
        return -1;
    }
    Py_XINCREF(value);
    tmp = op->func_annotations;
    op->func_annotations = value;
    Py_XDECREF(tmp);
    return 0;
}
static PyObject *
__Pyx_CyFunction_get_annotations(__pyx_CyFunctionObject *op, CYTHON_UNUSED void *context) {
    PyObject* result = op->func_annotations;
    if (unlikely(!result)) {
        result = PyDict_New();
        if (unlikely(!result)) return NULL;
        op->func_annotations = result;
    }
    Py_INCREF(result);
    return result;
}
static PyGetSetDef __pyx_CyFunction_getsets[] = {
    {(char *) "func_doc", (getter)__Pyx_CyFunction_get_doc, (setter)__Pyx_CyFunction_set_doc, 0, 0},
    {(char *) "__doc__",  (getter)__Pyx_CyFunction_get_doc, (setter)__Pyx_CyFunction_set_doc, 0, 0},
    {(char *) "func_name", (getter)__Pyx_CyFunction_get_name, (setter)__Pyx_CyFunction_set_name, 0, 0},
    {(char *) "__name__", (getter)__Pyx_CyFunction_get_name, (setter)__Pyx_CyFunction_set_name, 0, 0},
    {(char *) "__qualname__", (getter)__Pyx_CyFunction_get_qualname, (setter)__Pyx_CyFunction_set_qualname, 0, 0},
    {(char *) "__self__", (getter)__Pyx_CyFunction_get_self, 0, 0, 0},
    {(char *) "func_dict", (getter)__Pyx_CyFunction_get_dict, (setter)__Pyx_CyFunction_set_dict, 0, 0},
    {(char *) "__dict__", (getter)__Pyx_CyFunction_get_dict, (setter)__Pyx_CyFunction_set_dict, 0, 0},
    {(char *) "func_globals", (getter)__Pyx_CyFunction_get_globals, 0, 0, 0},
    {(char *) "__globals__", (getter)__Pyx_CyFunction_get_globals, 0, 0, 0},
    {(char *) "func_closure", (getter)__Pyx_CyFunction_get_closure, 0, 0, 0},
    {(char *) "__closure__", (getter)__Pyx_CyFunction_get_closure, 0, 0, 0},
    {(char *) "func_code", (getter)__Pyx_CyFunction_get_code, 0, 0, 0},
    {(char *) "__code__", (getter)__Pyx_CyFunction_get_code, 0, 0, 0},
    {(char *) "func_defaults", (getter)__Pyx_CyFunction_get_defaults, (setter)__Pyx_CyFunction_set_defaults, 0, 0},
    {(char *) "__defaults__", (getter)__Pyx_CyFunction_get_defaults, (setter)__Pyx_CyFunction_set_defaults, 0, 0},
    {(char *) "__kwdefaults__", (getter)__Pyx_CyFunction_get_kwdefaults, (setter)__Pyx_CyFunction_set_kwdefaults, 0, 0},
    {(char *) "__annotations__", (getter)__Pyx_CyFunction_get_annotations, (setter)__Pyx_CyFunction_set_annotations, 0, 0},
    {0, 0, 0, 0, 0}
};
static PyMemberDef __pyx_CyFunction_members[] = {
    {(char *) "__module__", T_OBJECT, offsetof(PyCFunctionObject, m_module), PY_WRITE_RESTRICTED, 0},
    {0, 0, 0,  0, 0}
};
static PyObject *
__Pyx_CyFunction_reduce(__pyx_CyFunctionObject *m, CYTHON_UNUSED PyObject *args)
{
#if PY_MAJOR_VERSION >= 3
    return PyUnicode_FromString(m->func.m_ml->ml_name);
#else
    return PyString_FromString(m->func.m_ml->ml_name);
#endif
}
static PyMethodDef __pyx_CyFunction_methods[] = {
    {"__reduce__", (PyCFunction)__Pyx_CyFunction_reduce, METH_VARARGS, 0},
    {0, 0, 0, 0}
};
#if PY_VERSION_HEX < 0x030500A0
#define __Pyx_CyFunction_weakreflist(cyfunc) ((cyfunc)->func_weakreflist)
#else
#define __Pyx_CyFunction_weakreflist(cyfunc) ((cyfunc)->func.m_weakreflist)
#endif
static PyObject *__Pyx_CyFunction_New(PyTypeObject *type, PyMethodDef *ml, int flags, PyObject* qualname,
                                      PyObject *closure, PyObject *module, PyObject* globals, PyObject* code) {
    __pyx_CyFunctionObject *op = PyObject_GC_New(__pyx_CyFunctionObject, type);
    if (op == NULL)
        return NULL;
    op->flags = flags;
    __Pyx_CyFunction_weakreflist(op) = NULL;
    op->func.m_ml = ml;
    op->func.m_self = (PyObject *) op;
    Py_XINCREF(closure);
    op->func_closure = closure;
    Py_XINCREF(module);
    op->func.m_module = module;
    op->func_dict = NULL;
    op->func_name = NULL;
    Py_INCREF(qualname);
    op->func_qualname = qualname;
    op->func_doc = NULL;
    op->func_classobj = NULL;
    op->func_globals = globals;
    Py_INCREF(op->func_globals);
    Py_XINCREF(code);
    op->func_code = code;
    op->defaults_pyobjects = 0;
    op->defaults = NULL;
    op->defaults_tuple = NULL;
    op->defaults_kwdict = NULL;
    op->defaults_getter = NULL;
    op->func_annotations = NULL;
    PyObject_GC_Track(op);
    return (PyObject *) op;
}
static int
__Pyx_CyFunction_clear(__pyx_CyFunctionObject *m)
{
    Py_CLEAR(m->func_closure);
    Py_CLEAR(m->func.m_module);
    Py_CLEAR(m->func_dict);
    Py_CLEAR(m->func_name);
    Py_CLEAR(m->func_qualname);
    Py_CLEAR(m->func_doc);
    Py_CLEAR(m->func_globals);
    Py_CLEAR(m->func_code);
    Py_CLEAR(m->func_classobj);
    Py_CLEAR(m->defaults_tuple);
    Py_CLEAR(m->defaults_kwdict);
    Py_CLEAR(m->func_annotations);
    if (m->defaults) {
        PyObject **pydefaults = __Pyx_CyFunction_Defaults(PyObject *, m);
        int i;
        for (i = 0; i < m->defaults_pyobjects; i++)
            Py_XDECREF(pydefaults[i]);
        PyObject_Free(m->defaults);
        m->defaults = NULL;
    }
    return 0;
}
static void __Pyx__CyFunction_dealloc(__pyx_CyFunctionObject *m)
{
    if (__Pyx_CyFunction_weakreflist(m) != NULL)
        PyObject_ClearWeakRefs((PyObject *) m);
    __Pyx_CyFunction_clear(m);
    PyObject_GC_Del(m);
}
static void __Pyx_CyFunction_dealloc(__pyx_CyFunctionObject *m)
{
    PyObject_GC_UnTrack(m);
    __Pyx__CyFunction_dealloc(m);
}
static int __Pyx_CyFunction_traverse(__pyx_CyFunctionObject *m, visitproc visit, void *arg)
{
    Py_VISIT(m->func_closure);
    Py_VISIT(m->func.m_module);
    Py_VISIT(m->func_dict);
    Py_VISIT(m->func_name);
    Py_VISIT(m->func_qualname);
    Py_VISIT(m->func_doc);
    Py_VISIT(m->func_globals);
    Py_VISIT(m->func_code);
    Py_VISIT(m->func_classobj);
    Py_VISIT(m->defaults_tuple);
    Py_VISIT(m->defaults_kwdict);
    if (m->defaults) {
        PyObject **pydefaults = __Pyx_CyFunction_Defaults(PyObject *, m);
        int i;
        for (i = 0; i < m->defaults_pyobjects; i++)
            Py_VISIT(pydefaults[i]);
    }
    return 0;
}
static PyObject *__Pyx_CyFunction_descr_get(PyObject *func, PyObject *obj, PyObject *type)
{
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    if (m->flags & __Pyx_CYFUNCTION_STATICMETHOD) {
        Py_INCREF(func);
        return func;
    }
    if (m->flags & __Pyx_CYFUNCTION_CLASSMETHOD) {
        if (type == NULL)
            type = (PyObject *)(Py_TYPE(obj));
        return __Pyx_PyMethod_New(func, type, (PyObject *)(Py_TYPE(type)));
    }
    if (obj == Py_None)
        obj = NULL;
    return __Pyx_PyMethod_New(func, obj, type);
}
static PyObject*
__Pyx_CyFunction_repr(__pyx_CyFunctionObject *op)
{
#if PY_MAJOR_VERSION >= 3
    return PyUnicode_FromFormat("<cyfunction %U at %p>",
                                op->func_qualname, (void *)op);
#else
    return PyString_FromFormat("<cyfunction %s at %p>",
                               PyString_AsString(op->func_qualname), (void *)op);
#endif
}
static PyObject * __Pyx_CyFunction_CallMethod(PyObject *func, PyObject *self, PyObject *arg, PyObject *kw) {
    PyCFunctionObject* f = (PyCFunctionObject*)func;
    PyCFunction meth = f->m_ml->ml_meth;
    Py_ssize_t size;
    switch (f->m_ml->ml_flags & (METH_VARARGS | METH_KEYWORDS | METH_NOARGS | METH_O)) {
    case METH_VARARGS:
        if (likely(kw == NULL || PyDict_Size(kw) == 0))
            return (*meth)(self, arg);
        break;
    case METH_VARARGS | METH_KEYWORDS:
        return (*(PyCFunctionWithKeywords)(void*)meth)(self, arg, kw);
    case METH_NOARGS:
        if (likely(kw == NULL || PyDict_Size(kw) == 0)) {
            size = PyTuple_GET_SIZE(arg);
            if (likely(size == 0))
                return (*meth)(self, NULL);
            PyErr_Format(PyExc_TypeError,
                "%.200s() takes no arguments (%" CYTHON_FORMAT_SSIZE_T "d given)",
                f->m_ml->ml_name, size);
            return NULL;
        }
        break;
    case METH_O:
        if (likely(kw == NULL || PyDict_Size(kw) == 0)) {
            size = PyTuple_GET_SIZE(arg);
            if (likely(size == 1)) {
                PyObject *result, *arg0;
                #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
                arg0 = PyTuple_GET_ITEM(arg, 0);
                #else
                arg0 = PySequence_ITEM(arg, 0); if (unlikely(!arg0)) return NULL;
                #endif
                result = (*meth)(self, arg0);
                #if !(CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS)
                Py_DECREF(arg0);
                #endif
                return result;
            }
            PyErr_Format(PyExc_TypeError,
                "%.200s() takes exactly one argument (%" CYTHON_FORMAT_SSIZE_T "d given)",
                f->m_ml->ml_name, size);
            return NULL;
        }
        break;
    default:
        PyErr_SetString(PyExc_SystemError, "Bad call flags in "
                        "__Pyx_CyFunction_Call. METH_OLDARGS is no "
                        "longer supported!");
        return NULL;
    }
    PyErr_Format(PyExc_TypeError, "%.200s() takes no keyword arguments",
                 f->m_ml->ml_name);
    return NULL;
}
static CYTHON_INLINE PyObject *__Pyx_CyFunction_Call(PyObject *func, PyObject *arg, PyObject *kw) {
    return __Pyx_CyFunction_CallMethod(func, ((PyCFunctionObject*)func)->m_self, arg, kw);
}
static PyObject *__Pyx_CyFunction_CallAsMethod(PyObject *func, PyObject *args, PyObject *kw) {
    PyObject *result;
    __pyx_CyFunctionObject *cyfunc = (__pyx_CyFunctionObject *) func;
    if ((cyfunc->flags & __Pyx_CYFUNCTION_CCLASS) && !(cyfunc->flags & __Pyx_CYFUNCTION_STATICMETHOD)) {
        Py_ssize_t argc;
        PyObject *new_args;
        PyObject *self;
        argc = PyTuple_GET_SIZE(args);
        new_args = PyTuple_GetSlice(args, 1, argc);
        if (unlikely(!new_args))
            return NULL;
        self = PyTuple_GetItem(args, 0);
        if (unlikely(!self)) {
            Py_DECREF(new_args);
            return NULL;
        }
        result = __Pyx_CyFunction_CallMethod(func, self, new_args, kw);
        Py_DECREF(new_args);
    } else {
        result = __Pyx_CyFunction_Call(func, args, kw);
    }
    return result;
}
static PyTypeObject __pyx_CyFunctionType_type = {
    PyVarObject_HEAD_INIT(0, 0)
    "cython_function_or_method",
    sizeof(__pyx_CyFunctionObject),
    0,
    (destructor) __Pyx_CyFunction_dealloc,
    0,
    0,
    0,
#if PY_MAJOR_VERSION < 3
    0,
#else
    0,
#endif
    (reprfunc) __Pyx_CyFunction_repr,
    0,
    0,
    0,
    0,
    __Pyx_CyFunction_CallAsMethod,
    0,
    0,
    0,
    0,
    Py_TPFLAGS_DEFAULT | Py_TPFLAGS_HAVE_GC,
    0,
    (traverseproc) __Pyx_CyFunction_traverse,
    (inquiry) __Pyx_CyFunction_clear,
    0,
#if PY_VERSION_HEX < 0x030500A0
    offsetof(__pyx_CyFunctionObject, func_weakreflist),
#else
    offsetof(PyCFunctionObject, m_weakreflist),
#endif
    0,
    0,
    __pyx_CyFunction_methods,
    __pyx_CyFunction_members,
    __pyx_CyFunction_getsets,
    0,
    0,
    __Pyx_CyFunction_descr_get,
    0,
    offsetof(__pyx_CyFunctionObject, func_dict),
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
#if PY_VERSION_HEX >= 0x030400a1
    0,
#endif
};
static int __pyx_CyFunction_init(void) {
    __pyx_CyFunctionType = __Pyx_FetchCommonType(&__pyx_CyFunctionType_type);
    if (unlikely(__pyx_CyFunctionType == NULL)) {
        return -1;
    }
    return 0;
}
static CYTHON_INLINE void *__Pyx_CyFunction_InitDefaults(PyObject *func, size_t size, int pyobjects) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->defaults = PyObject_Malloc(size);
    if (unlikely(!m->defaults))
        return PyErr_NoMemory();
    memset(m->defaults, 0, size);
    m->defaults_pyobjects = pyobjects;
    return m->defaults;
}
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsTuple(PyObject *func, PyObject *tuple) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->defaults_tuple = tuple;
    Py_INCREF(tuple);
}
static CYTHON_INLINE void __Pyx_CyFunction_SetDefaultsKwDict(PyObject *func, PyObject *dict) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->defaults_kwdict = dict;
    Py_INCREF(dict);
}
static CYTHON_INLINE void __Pyx_CyFunction_SetAnnotationsDict(PyObject *func, PyObject *dict) {
    __pyx_CyFunctionObject *m = (__pyx_CyFunctionObject *) func;
    m->func_annotations = dict;
    Py_INCREF(dict);
}

/* PyObject_GenericGetAttrNoDict */
#if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
static PyObject *__Pyx_RaiseGenericGetAttributeError(PyTypeObject *tp, PyObject *attr_name) {
    PyErr_Format(PyExc_AttributeError,
#if PY_MAJOR_VERSION >= 3
                 "'%.50s' object has no attribute '%U'",
                 tp->tp_name, attr_name);
#else
                 "'%.50s' object has no attribute '%.400s'",
                 tp->tp_name, PyString_AS_STRING(attr_name));
#endif
    return NULL;
}
static CYTHON_INLINE PyObject* __Pyx_PyObject_GenericGetAttrNoDict(PyObject* obj, PyObject* attr_name) {
    PyObject *descr;
    PyTypeObject *tp = Py_TYPE(obj);
    if (unlikely(!PyString_Check(attr_name))) {
        return PyObject_GenericGetAttr(obj, attr_name);
    }
    assert(!tp->tp_dictoffset);
    descr = _PyType_Lookup(tp, attr_name);
    if (unlikely(!descr)) {
        return __Pyx_RaiseGenericGetAttributeError(tp, attr_name);
    }
    Py_INCREF(descr);
    #if PY_MAJOR_VERSION < 3
    if (likely(PyType_HasFeature(Py_TYPE(descr), Py_TPFLAGS_HAVE_CLASS)))
    #endif
    {
        descrgetfunc f = Py_TYPE(descr)->tp_descr_get;
        if (unlikely(f)) {
            PyObject *res = f(descr, obj, (PyObject *)tp);
            Py_DECREF(descr);
            return res;
        }
    }
    return descr;
}
#endif

/* PyObject_GenericGetAttr */
#if CYTHON_USE_TYPE_SLOTS && CYTHON_USE_PYTYPE_LOOKUP && PY_VERSION_HEX < 0x03070000
static PyObject* __Pyx_PyObject_GenericGetAttr(PyObject* obj, PyObject* attr_name) {
    if (unlikely(Py_TYPE(obj)->tp_dictoffset)) {
        return PyObject_GenericGetAttr(obj, attr_name);
    }
    return __Pyx_PyObject_GenericGetAttrNoDict(obj, attr_name);
}
#endif

/* SetupReduce */
static int __Pyx_setup_reduce_is_named(PyObject* meth, PyObject* name) {
  int ret;
  PyObject *name_attr;
  name_attr = __Pyx_PyObject_GetAttrStr(meth, __pyx_n_s_name);
  if (likely(name_attr)) {
      ret = PyObject_RichCompareBool(name_attr, name, Py_EQ);
  } else {
      ret = -1;
  }
  if (unlikely(ret < 0)) {
      PyErr_Clear();
      ret = 0;
  }
  Py_XDECREF(name_attr);
  return ret;
}
static int __Pyx_setup_reduce(PyObject* type_obj) {
    int ret = 0;
    PyObject *object_reduce = NULL;
    PyObject *object_reduce_ex = NULL;
    PyObject *reduce = NULL;
    PyObject *reduce_ex = NULL;
    PyObject *reduce_cython = NULL;
    PyObject *setstate = NULL;
    PyObject *setstate_cython = NULL;
#if CYTHON_USE_PYTYPE_LOOKUP
    if (_PyType_Lookup((PyTypeObject*)type_obj, __pyx_n_s_getstate)) goto GOOD;
#else
    if (PyObject_HasAttr(type_obj, __pyx_n_s_getstate)) goto GOOD;
#endif
#if CYTHON_USE_PYTYPE_LOOKUP
    object_reduce_ex = _PyType_Lookup(&PyBaseObject_Type, __pyx_n_s_reduce_ex); if (!object_reduce_ex) goto BAD;
#else
    object_reduce_ex = __Pyx_PyObject_GetAttrStr((PyObject*)&PyBaseObject_Type, __pyx_n_s_reduce_ex); if (!object_reduce_ex) goto BAD;
#endif
    reduce_ex = __Pyx_PyObject_GetAttrStr(type_obj, __pyx_n_s_reduce_ex); if (unlikely(!reduce_ex)) goto BAD;
    if (reduce_ex == object_reduce_ex) {
#if CYTHON_USE_PYTYPE_LOOKUP
        object_reduce = _PyType_Lookup(&PyBaseObject_Type, __pyx_n_s_reduce); if (!object_reduce) goto BAD;
#else
        object_reduce = __Pyx_PyObject_GetAttrStr((PyObject*)&PyBaseObject_Type, __pyx_n_s_reduce); if (!object_reduce) goto BAD;
#endif
        reduce = __Pyx_PyObject_GetAttrStr(type_obj, __pyx_n_s_reduce); if (unlikely(!reduce)) goto BAD;
        if (reduce == object_reduce || __Pyx_setup_reduce_is_named(reduce, __pyx_n_s_reduce_cython)) {
            reduce_cython = __Pyx_PyObject_GetAttrStr(type_obj, __pyx_n_s_reduce_cython); if (unlikely(!reduce_cython)) goto BAD;
            ret = PyDict_SetItem(((PyTypeObject*)type_obj)->tp_dict, __pyx_n_s_reduce, reduce_cython); if (unlikely(ret < 0)) goto BAD;
            ret = PyDict_DelItem(((PyTypeObject*)type_obj)->tp_dict, __pyx_n_s_reduce_cython); if (unlikely(ret < 0)) goto BAD;
            setstate = __Pyx_PyObject_GetAttrStr(type_obj, __pyx_n_s_setstate);
            if (!setstate) PyErr_Clear();
            if (!setstate || __Pyx_setup_reduce_is_named(setstate, __pyx_n_s_setstate_cython)) {
                setstate_cython = __Pyx_PyObject_GetAttrStr(type_obj, __pyx_n_s_setstate_cython); if (unlikely(!setstate_cython)) goto BAD;
                ret = PyDict_SetItem(((PyTypeObject*)type_obj)->tp_dict, __pyx_n_s_setstate, setstate_cython); if (unlikely(ret < 0)) goto BAD;
                ret = PyDict_DelItem(((PyTypeObject*)type_obj)->tp_dict, __pyx_n_s_setstate_cython); if (unlikely(ret < 0)) goto BAD;
            }
            PyType_Modified((PyTypeObject*)type_obj);
        }
    }
    goto GOOD;
BAD:
    if (!PyErr_Occurred())
        PyErr_Format(PyExc_RuntimeError, "Unable to initialize pickling for %s", ((PyTypeObject*)type_obj)->tp_name);
    ret = -1;
GOOD:
#if !CYTHON_USE_PYTYPE_LOOKUP
    Py_XDECREF(object_reduce);
    Py_XDECREF(object_reduce_ex);
#endif
    Py_XDECREF(reduce);
    Py_XDECREF(reduce_ex);
    Py_XDECREF(reduce_cython);
    Py_XDECREF(setstate);
    Py_XDECREF(setstate_cython);
    return ret;
}

/* TypeImport */
#ifndef __PYX_HAVE_RT_ImportType
#define __PYX_HAVE_RT_ImportType
static PyTypeObject *__Pyx_ImportType(PyObject *module, const char *module_name, const char *class_name,
    size_t size, enum __Pyx_ImportType_CheckSize check_size)
{
    PyObject *result = 0;
    char warning[200];
    Py_ssize_t basicsize;
#ifdef Py_LIMITED_API
    PyObject *py_basicsize;
#endif
    result = PyObject_GetAttrString(module, class_name);
    if (!result)
        goto bad;
    if (!PyType_Check(result)) {
        PyErr_Format(PyExc_TypeError,
            "%.200s.%.200s is not a type object",
            module_name, class_name);
        goto bad;
    }
#ifndef Py_LIMITED_API
    basicsize = ((PyTypeObject *)result)->tp_basicsize;
#else
    py_basicsize = PyObject_GetAttrString(result, "__basicsize__");
    if (!py_basicsize)
        goto bad;
    basicsize = PyLong_AsSsize_t(py_basicsize);
    Py_DECREF(py_basicsize);
    py_basicsize = 0;
    if (basicsize == (Py_ssize_t)-1 && PyErr_Occurred())
        goto bad;
#endif
    if ((size_t)basicsize < size) {
        PyErr_Format(PyExc_ValueError,
            "%.200s.%.200s size changed, may indicate binary incompatibility. "
            "Expected %zd from C header, got %zd from PyObject",
            module_name, class_name, size, basicsize);
        goto bad;
    }
    if (check_size == __Pyx_ImportType_CheckSize_Error && (size_t)basicsize != size) {
        PyErr_Format(PyExc_ValueError,
            "%.200s.%.200s size changed, may indicate binary incompatibility. "
            "Expected %zd from C header, got %zd from PyObject",
            module_name, class_name, size, basicsize);
        goto bad;
    }
    else if (check_size == __Pyx_ImportType_CheckSize_Warn && (size_t)basicsize > size) {
        PyOS_snprintf(warning, sizeof(warning),
            "%s.%s size changed, may indicate binary incompatibility. "
            "Expected %zd from C header, got %zd from PyObject",
            module_name, class_name, size, basicsize);
        if (PyErr_WarnEx(NULL, warning, 0) < 0) goto bad;
    }
    return (PyTypeObject *)result;
bad:
    Py_XDECREF(result);
    return NULL;
}
#endif

/* CLineInTraceback */
#ifndef CYTHON_CLINE_IN_TRACEBACK
static int __Pyx_CLineForTraceback(PyThreadState *tstate, int c_line) {
    PyObject *use_cline;
    PyObject *ptype, *pvalue, *ptraceback;
#if CYTHON_COMPILING_IN_CPYTHON
    PyObject **cython_runtime_dict;
#endif
    if (unlikely(!__pyx_cython_runtime)) {
        return c_line;
    }
    __Pyx_ErrFetchInState(tstate, &ptype, &pvalue, &ptraceback);
#if CYTHON_COMPILING_IN_CPYTHON
    cython_runtime_dict = _PyObject_GetDictPtr(__pyx_cython_runtime);
    if (likely(cython_runtime_dict)) {
        __PYX_PY_DICT_LOOKUP_IF_MODIFIED(
            use_cline, *cython_runtime_dict,
            __Pyx_PyDict_GetItemStr(*cython_runtime_dict, __pyx_n_s_cline_in_traceback))
    } else
#endif
    {
      PyObject *use_cline_obj = __Pyx_PyObject_GetAttrStr(__pyx_cython_runtime, __pyx_n_s_cline_in_traceback);
      if (use_cline_obj) {
        use_cline = PyObject_Not(use_cline_obj) ? Py_False : Py_True;
        Py_DECREF(use_cline_obj);
      } else {
        PyErr_Clear();
        use_cline = NULL;
      }
    }
    if (!use_cline) {
        c_line = 0;
        PyObject_SetAttr(__pyx_cython_runtime, __pyx_n_s_cline_in_traceback, Py_False);
    }
    else if (use_cline == Py_False || (use_cline != Py_True && PyObject_Not(use_cline) != 0)) {
        c_line = 0;
    }
    __Pyx_ErrRestoreInState(tstate, ptype, pvalue, ptraceback);
    return c_line;
}
#endif

/* CodeObjectCache */
static int __pyx_bisect_code_objects(__Pyx_CodeObjectCacheEntry* entries, int count, int code_line) {
    int start = 0, mid = 0, end = count - 1;
    if (end >= 0 && code_line > entries[end].code_line) {
        return count;
    }
    while (start < end) {
        mid = start + (end - start) / 2;
        if (code_line < entries[mid].code_line) {
            end = mid;
        } else if (code_line > entries[mid].code_line) {
             start = mid + 1;
        } else {
            return mid;
        }
    }
    if (code_line <= entries[mid].code_line) {
        return mid;
    } else {
        return mid + 1;
    }
}
static PyCodeObject *__pyx_find_code_object(int code_line) {
    PyCodeObject* code_object;
    int pos;
    if (unlikely(!code_line) || unlikely(!__pyx_code_cache.entries)) {
        return NULL;
    }
    pos = __pyx_bisect_code_objects(__pyx_code_cache.entries, __pyx_code_cache.count, code_line);
    if (unlikely(pos >= __pyx_code_cache.count) || unlikely(__pyx_code_cache.entries[pos].code_line != code_line)) {
        return NULL;
    }
    code_object = __pyx_code_cache.entries[pos].code_object;
    Py_INCREF(code_object);
    return code_object;
}
static void __pyx_insert_code_object(int code_line, PyCodeObject* code_object) {
    int pos, i;
    __Pyx_CodeObjectCacheEntry* entries = __pyx_code_cache.entries;
    if (unlikely(!code_line)) {
        return;
    }
    if (unlikely(!entries)) {
        entries = (__Pyx_CodeObjectCacheEntry*)PyMem_Malloc(64*sizeof(__Pyx_CodeObjectCacheEntry));
        if (likely(entries)) {
            __pyx_code_cache.entries = entries;
            __pyx_code_cache.max_count = 64;
            __pyx_code_cache.count = 1;
            entries[0].code_line = code_line;
            entries[0].code_object = code_object;
            Py_INCREF(code_object);
        }
        return;
    }
    pos = __pyx_bisect_code_objects(__pyx_code_cache.entries, __pyx_code_cache.count, code_line);
    if ((pos < __pyx_code_cache.count) && unlikely(__pyx_code_cache.entries[pos].code_line == code_line)) {
        PyCodeObject* tmp = entries[pos].code_object;
        entries[pos].code_object = code_object;
        Py_DECREF(tmp);
        return;
    }
    if (__pyx_code_cache.count == __pyx_code_cache.max_count) {
        int new_max = __pyx_code_cache.max_count + 64;
        entries = (__Pyx_CodeObjectCacheEntry*)PyMem_Realloc(
            __pyx_code_cache.entries, (size_t)new_max*sizeof(__Pyx_CodeObjectCacheEntry));
        if (unlikely(!entries)) {
            return;
        }
        __pyx_code_cache.entries = entries;
        __pyx_code_cache.max_count = new_max;
    }
    for (i=__pyx_code_cache.count; i>pos; i--) {
        entries[i] = entries[i-1];
    }
    entries[pos].code_line = code_line;
    entries[pos].code_object = code_object;
    __pyx_code_cache.count++;
    Py_INCREF(code_object);
}

/* AddTraceback */
#include "compile.h"
#include "frameobject.h"
#include "traceback.h"
static PyCodeObject* __Pyx_CreateCodeObjectForTraceback(
            const char *funcname, int c_line,
            int py_line, const char *filename) {
    PyCodeObject *py_code = 0;
    PyObject *py_srcfile = 0;
    PyObject *py_funcname = 0;
    #if PY_MAJOR_VERSION < 3
    py_srcfile = PyString_FromString(filename);
    #else
    py_srcfile = PyUnicode_FromString(filename);
    #endif
    if (!py_srcfile) goto bad;
    if (c_line) {
        #if PY_MAJOR_VERSION < 3
        py_funcname = PyString_FromFormat( "%s (%s:%d)", funcname, __pyx_cfilenm, c_line);
        #else
        py_funcname = PyUnicode_FromFormat( "%s (%s:%d)", funcname, __pyx_cfilenm, c_line);
        #endif
    }
    else {
        #if PY_MAJOR_VERSION < 3
        py_funcname = PyString_FromString(funcname);
        #else
        py_funcname = PyUnicode_FromString(funcname);
        #endif
    }
    if (!py_funcname) goto bad;
    py_code = __Pyx_PyCode_New(
        0,
        0,
        0,
        0,
        0,
        __pyx_empty_bytes, /*PyObject *code,*/
        __pyx_empty_tuple, /*PyObject *consts,*/
        __pyx_empty_tuple, /*PyObject *names,*/
        __pyx_empty_tuple, /*PyObject *varnames,*/
        __pyx_empty_tuple, /*PyObject *freevars,*/
        __pyx_empty_tuple, /*PyObject *cellvars,*/
        py_srcfile,   /*PyObject *filename,*/
        py_funcname,  /*PyObject *name,*/
        py_line,
        __pyx_empty_bytes  /*PyObject *lnotab*/
    );
    Py_DECREF(py_srcfile);
    Py_DECREF(py_funcname);
    return py_code;
bad:
    Py_XDECREF(py_srcfile);
    Py_XDECREF(py_funcname);
    return NULL;
}
static void __Pyx_AddTraceback(const char *funcname, int c_line,
                               int py_line, const char *filename) {
    PyCodeObject *py_code = 0;
    PyFrameObject *py_frame = 0;
    PyThreadState *tstate = __Pyx_PyThreadState_Current;
    if (c_line) {
        c_line = __Pyx_CLineForTraceback(tstate, c_line);
    }
    py_code = __pyx_find_code_object(c_line ? -c_line : py_line);
    if (!py_code) {
        py_code = __Pyx_CreateCodeObjectForTraceback(
            funcname, c_line, py_line, filename);
        if (!py_code) goto bad;
        __pyx_insert_code_object(c_line ? -c_line : py_line, py_code);
    }
    py_frame = PyFrame_New(
        tstate,            /*PyThreadState *tstate,*/
        py_code,           /*PyCodeObject *code,*/
        __pyx_d,    /*PyObject *globals,*/
        0                  /*PyObject *locals*/
    );
    if (!py_frame) goto bad;
    __Pyx_PyFrame_SetLineNumber(py_frame, py_line);
    PyTraceBack_Here(py_frame);
bad:
    Py_XDECREF(py_code);
    Py_XDECREF(py_frame);
}

/* CIntFromPyVerify */
#define __PYX_VERIFY_RETURN_INT(target_type, func_type, func_value)\
    __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 0)
#define __PYX_VERIFY_RETURN_INT_EXC(target_type, func_type, func_value)\
    __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, 1)
#define __PYX__VERIFY_RETURN_INT(target_type, func_type, func_value, exc)\
    {\
        func_type value = func_value;\
        if (sizeof(target_type) < sizeof(func_type)) {\
            if (unlikely(value != (func_type) (target_type) value)) {\
                func_type zero = 0;\
                if (exc && unlikely(value == (func_type)-1 && PyErr_Occurred()))\
                    return (target_type) -1;\
                if (is_unsigned && unlikely(value < zero))\
                    goto raise_neg_overflow;\
                else\
                    goto raise_overflow;\
            }\
        }\
        return (target_type) value;\
    }

/* CIntToPy */
static CYTHON_INLINE PyObject* __Pyx_PyInt_From_int(int value) {
    const int neg_one = (int) ((int) 0 - (int) 1), const_zero = (int) 0;
    const int is_unsigned = neg_one > const_zero;
    if (is_unsigned) {
        if (sizeof(int) < sizeof(long)) {
            return PyInt_FromLong((long) value);
        } else if (sizeof(int) <= sizeof(unsigned long)) {
            return PyLong_FromUnsignedLong((unsigned long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(int) <= sizeof(unsigned PY_LONG_LONG)) {
            return PyLong_FromUnsignedLongLong((unsigned PY_LONG_LONG) value);
#endif
        }
    } else {
        if (sizeof(int) <= sizeof(long)) {
            return PyInt_FromLong((long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(int) <= sizeof(PY_LONG_LONG)) {
            return PyLong_FromLongLong((PY_LONG_LONG) value);
#endif
        }
    }
    {
        int one = 1; int little = (int)*(unsigned char *)&one;
        unsigned char *bytes = (unsigned char *)&value;
        return _PyLong_FromByteArray(bytes, sizeof(int),
                                     little, !is_unsigned);
    }
}

/* CIntToPy */
static CYTHON_INLINE PyObject* __Pyx_PyInt_From_long(long value) {
    const long neg_one = (long) ((long) 0 - (long) 1), const_zero = (long) 0;
    const int is_unsigned = neg_one > const_zero;
    if (is_unsigned) {
        if (sizeof(long) < sizeof(long)) {
            return PyInt_FromLong((long) value);
        } else if (sizeof(long) <= sizeof(unsigned long)) {
            return PyLong_FromUnsignedLong((unsigned long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(long) <= sizeof(unsigned PY_LONG_LONG)) {
            return PyLong_FromUnsignedLongLong((unsigned PY_LONG_LONG) value);
#endif
        }
    } else {
        if (sizeof(long) <= sizeof(long)) {
            return PyInt_FromLong((long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(long) <= sizeof(PY_LONG_LONG)) {
            return PyLong_FromLongLong((PY_LONG_LONG) value);
#endif
        }
    }
    {
        int one = 1; int little = (int)*(unsigned char *)&one;
        unsigned char *bytes = (unsigned char *)&value;
        return _PyLong_FromByteArray(bytes, sizeof(long),
                                     little, !is_unsigned);
    }
}

/* CIntToPy */
static CYTHON_INLINE PyObject* __Pyx_PyInt_From_bool(bool value) {
    const bool neg_one = (bool) ((bool) 0 - (bool) 1), const_zero = (bool) 0;
    const int is_unsigned = neg_one > const_zero;
    if (is_unsigned) {
        if (sizeof(bool) < sizeof(long)) {
            return PyInt_FromLong((long) value);
        } else if (sizeof(bool) <= sizeof(unsigned long)) {
            return PyLong_FromUnsignedLong((unsigned long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(bool) <= sizeof(unsigned PY_LONG_LONG)) {
            return PyLong_FromUnsignedLongLong((unsigned PY_LONG_LONG) value);
#endif
        }
    } else {
        if (sizeof(bool) <= sizeof(long)) {
            return PyInt_FromLong((long) value);
#ifdef HAVE_LONG_LONG
        } else if (sizeof(bool) <= sizeof(PY_LONG_LONG)) {
            return PyLong_FromLongLong((PY_LONG_LONG) value);
#endif
        }
    }
    {
        int one = 1; int little = (int)*(unsigned char *)&one;
        unsigned char *bytes = (unsigned char *)&value;
        return _PyLong_FromByteArray(bytes, sizeof(bool),
                                     little, !is_unsigned);
    }
}

/* CIntFromPy */
static CYTHON_INLINE int __Pyx_PyInt_As_int(PyObject *x) {
    const int neg_one = (int) ((int) 0 - (int) 1), const_zero = (int) 0;
    const int is_unsigned = neg_one > const_zero;
#if PY_MAJOR_VERSION < 3
    if (likely(PyInt_Check(x))) {
        if (sizeof(int) < sizeof(long)) {
            __PYX_VERIFY_RETURN_INT(int, long, PyInt_AS_LONG(x))
        } else {
            long val = PyInt_AS_LONG(x);
            if (is_unsigned && unlikely(val < 0)) {
                goto raise_neg_overflow;
            }
            return (int) val;
        }
    } else
#endif
    if (likely(PyLong_Check(x))) {
        if (is_unsigned) {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (int) 0;
                case  1: __PYX_VERIFY_RETURN_INT(int, digit, digits[0])
                case 2:
                    if (8 * sizeof(int) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) >= 2 * PyLong_SHIFT) {
                            return (int) (((((int)digits[1]) << PyLong_SHIFT) | (int)digits[0]));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(int) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) >= 3 * PyLong_SHIFT) {
                            return (int) (((((((int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0]));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(int) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) >= 4 * PyLong_SHIFT) {
                            return (int) (((((((((int)digits[3]) << PyLong_SHIFT) | (int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0]));
                        }
                    }
                    break;
            }
#endif
#if CYTHON_COMPILING_IN_CPYTHON
            if (unlikely(Py_SIZE(x) < 0)) {
                goto raise_neg_overflow;
            }
#else
            {
                int result = PyObject_RichCompareBool(x, Py_False, Py_LT);
                if (unlikely(result < 0))
                    return (int) -1;
                if (unlikely(result == 1))
                    goto raise_neg_overflow;
            }
#endif
            if (sizeof(int) <= sizeof(unsigned long)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, unsigned long, PyLong_AsUnsignedLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(int) <= sizeof(unsigned PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, unsigned PY_LONG_LONG, PyLong_AsUnsignedLongLong(x))
#endif
            }
        } else {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (int) 0;
                case -1: __PYX_VERIFY_RETURN_INT(int, sdigit, (sdigit) (-(sdigit)digits[0]))
                case  1: __PYX_VERIFY_RETURN_INT(int,  digit, +digits[0])
                case -2:
                    if (8 * sizeof(int) - 1 > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, long, -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 2 * PyLong_SHIFT) {
                            return (int) (((int)-1)*(((((int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case 2:
                    if (8 * sizeof(int) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 2 * PyLong_SHIFT) {
                            return (int) ((((((int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case -3:
                    if (8 * sizeof(int) - 1 > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, long, -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 3 * PyLong_SHIFT) {
                            return (int) (((int)-1)*(((((((int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(int) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 3 * PyLong_SHIFT) {
                            return (int) ((((((((int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case -4:
                    if (8 * sizeof(int) - 1 > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, long, -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 4 * PyLong_SHIFT) {
                            return (int) (((int)-1)*(((((((((int)digits[3]) << PyLong_SHIFT) | (int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(int) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(int, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(int) - 1 > 4 * PyLong_SHIFT) {
                            return (int) ((((((((((int)digits[3]) << PyLong_SHIFT) | (int)digits[2]) << PyLong_SHIFT) | (int)digits[1]) << PyLong_SHIFT) | (int)digits[0])));
                        }
                    }
                    break;
            }
#endif
            if (sizeof(int) <= sizeof(long)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, long, PyLong_AsLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(int) <= sizeof(PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(int, PY_LONG_LONG, PyLong_AsLongLong(x))
#endif
            }
        }
        {
#if CYTHON_COMPILING_IN_PYPY && !defined(_PyLong_AsByteArray)
            PyErr_SetString(PyExc_RuntimeError,
                            "_PyLong_AsByteArray() not available in PyPy, cannot convert large numbers");
#else
            int val;
            PyObject *v = __Pyx_PyNumber_IntOrLong(x);
 #if PY_MAJOR_VERSION < 3
            if (likely(v) && !PyLong_Check(v)) {
                PyObject *tmp = v;
                v = PyNumber_Long(tmp);
                Py_DECREF(tmp);
            }
 #endif
            if (likely(v)) {
                int one = 1; int is_little = (int)*(unsigned char *)&one;
                unsigned char *bytes = (unsigned char *)&val;
                int ret = _PyLong_AsByteArray((PyLongObject *)v,
                                              bytes, sizeof(val),
                                              is_little, !is_unsigned);
                Py_DECREF(v);
                if (likely(!ret))
                    return val;
            }
#endif
            return (int) -1;
        }
    } else {
        int val;
        PyObject *tmp = __Pyx_PyNumber_IntOrLong(x);
        if (!tmp) return (int) -1;
        val = __Pyx_PyInt_As_int(tmp);
        Py_DECREF(tmp);
        return val;
    }
raise_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "value too large to convert to int");
    return (int) -1;
raise_neg_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "can't convert negative value to int");
    return (int) -1;
}

/* CIntFromPy */
static CYTHON_INLINE bool __Pyx_PyInt_As_bool(PyObject *x) {
    const bool neg_one = (bool) ((bool) 0 - (bool) 1), const_zero = (bool) 0;
    const int is_unsigned = neg_one > const_zero;
#if PY_MAJOR_VERSION < 3
    if (likely(PyInt_Check(x))) {
        if (sizeof(bool) < sizeof(long)) {
            __PYX_VERIFY_RETURN_INT(bool, long, PyInt_AS_LONG(x))
        } else {
            long val = PyInt_AS_LONG(x);
            if (is_unsigned && unlikely(val < 0)) {
                goto raise_neg_overflow;
            }
            return (bool) val;
        }
    } else
#endif
    if (likely(PyLong_Check(x))) {
        if (is_unsigned) {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (bool) 0;
                case  1: __PYX_VERIFY_RETURN_INT(bool, digit, digits[0])
                case 2:
                    if (8 * sizeof(bool) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(bool, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(bool) >= 2 * PyLong_SHIFT) {
                            return (bool) (((((bool)digits[1]) << PyLong_SHIFT) | (bool)digits[0]));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(bool) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(bool, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(bool) >= 3 * PyLong_SHIFT) {
                            return (bool) (((((((bool)digits[2]) << PyLong_SHIFT) | (bool)digits[1]) << PyLong_SHIFT) | (bool)digits[0]));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(bool) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(bool, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(bool) >= 4 * PyLong_SHIFT) {
                            return (bool) (((((((((bool)digits[3]) << PyLong_SHIFT) | (bool)digits[2]) << PyLong_SHIFT) | (bool)digits[1]) << PyLong_SHIFT) | (bool)digits[0]));
                        }
                    }
                    break;
            }
#endif
#if CYTHON_COMPILING_IN_CPYTHON
            if (unlikely(Py_SIZE(x) < 0)) {
                goto raise_neg_overflow;
            }
#else
            {
                int result = PyObject_RichCompareBool(x, Py_False, Py_LT);
                if (unlikely(result < 0))
                    return (bool) -1;
                if (unlikely(result == 1))
                    goto raise_neg_overflow;
            }
#endif
            if (sizeof(bool) <= sizeof(unsigned long)) {
                __PYX_VERIFY_RETURN_INT_EXC(bool, unsigned long, PyLong_AsUnsignedLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(bool) <= sizeof(unsigned PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(bool, unsigned PY_LONG_LONG, PyLong_AsUnsignedLongLong(x))
#endif
            }
        } else {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (bool) 0;
                case -1: __PYX_VERIFY_RETURN_INT(bool, sdigit, (sdigit) (-(sdigit)digits[0]))
                case  1: __PYX_VERIFY_RETURN_INT(bool,  digit, +digits[0])
                case -2:
                    if (8 * sizeof(bool) - 1 > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(bool, long, -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(bool) - 1 > 2 * PyLong_SHIFT) {
                            return (bool) (((bool)-1)*(((((bool)digits[1]) << PyLong_SHIFT) | (bool)digits[0])));
                        }
                    }
                    break;
                case 2:
                    if (8 * sizeof(bool) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(bool, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(bool) - 1 > 2 * PyLong_SHIFT) {
                            return (bool) ((((((bool)digits[1]) << PyLong_SHIFT) | (bool)digits[0])));
                        }
                    }
                    break;
                case -3:
                    if (8 * sizeof(bool) - 1 > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(bool, long, -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(bool) - 1 > 3 * PyLong_SHIFT) {
                            return (bool) (((bool)-1)*(((((((bool)digits[2]) << PyLong_SHIFT) | (bool)digits[1]) << PyLong_SHIFT) | (bool)digits[0])));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(bool) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(bool, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(bool) - 1 > 3 * PyLong_SHIFT) {
                            return (bool) ((((((((bool)digits[2]) << PyLong_SHIFT) | (bool)digits[1]) << PyLong_SHIFT) | (bool)digits[0])));
                        }
                    }
                    break;
                case -4:
                    if (8 * sizeof(bool) - 1 > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(bool, long, -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(bool) - 1 > 4 * PyLong_SHIFT) {
                            return (bool) (((bool)-1)*(((((((((bool)digits[3]) << PyLong_SHIFT) | (bool)digits[2]) << PyLong_SHIFT) | (bool)digits[1]) << PyLong_SHIFT) | (bool)digits[0])));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(bool) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(bool, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(bool) - 1 > 4 * PyLong_SHIFT) {
                            return (bool) ((((((((((bool)digits[3]) << PyLong_SHIFT) | (bool)digits[2]) << PyLong_SHIFT) | (bool)digits[1]) << PyLong_SHIFT) | (bool)digits[0])));
                        }
                    }
                    break;
            }
#endif
            if (sizeof(bool) <= sizeof(long)) {
                __PYX_VERIFY_RETURN_INT_EXC(bool, long, PyLong_AsLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(bool) <= sizeof(PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(bool, PY_LONG_LONG, PyLong_AsLongLong(x))
#endif
            }
        }
        {
#if CYTHON_COMPILING_IN_PYPY && !defined(_PyLong_AsByteArray)
            PyErr_SetString(PyExc_RuntimeError,
                            "_PyLong_AsByteArray() not available in PyPy, cannot convert large numbers");
#else
            bool val;
            PyObject *v = __Pyx_PyNumber_IntOrLong(x);
 #if PY_MAJOR_VERSION < 3
            if (likely(v) && !PyLong_Check(v)) {
                PyObject *tmp = v;
                v = PyNumber_Long(tmp);
                Py_DECREF(tmp);
            }
 #endif
            if (likely(v)) {
                int one = 1; int is_little = (int)*(unsigned char *)&one;
                unsigned char *bytes = (unsigned char *)&val;
                int ret = _PyLong_AsByteArray((PyLongObject *)v,
                                              bytes, sizeof(val),
                                              is_little, !is_unsigned);
                Py_DECREF(v);
                if (likely(!ret))
                    return val;
            }
#endif
            return (bool) -1;
        }
    } else {
        bool val;
        PyObject *tmp = __Pyx_PyNumber_IntOrLong(x);
        if (!tmp) return (bool) -1;
        val = __Pyx_PyInt_As_bool(tmp);
        Py_DECREF(tmp);
        return val;
    }
raise_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "value too large to convert to bool");
    return (bool) -1;
raise_neg_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "can't convert negative value to bool");
    return (bool) -1;
}

/* CIntFromPy */
static CYTHON_INLINE long __Pyx_PyInt_As_long(PyObject *x) {
    const long neg_one = (long) ((long) 0 - (long) 1), const_zero = (long) 0;
    const int is_unsigned = neg_one > const_zero;
#if PY_MAJOR_VERSION < 3
    if (likely(PyInt_Check(x))) {
        if (sizeof(long) < sizeof(long)) {
            __PYX_VERIFY_RETURN_INT(long, long, PyInt_AS_LONG(x))
        } else {
            long val = PyInt_AS_LONG(x);
            if (is_unsigned && unlikely(val < 0)) {
                goto raise_neg_overflow;
            }
            return (long) val;
        }
    } else
#endif
    if (likely(PyLong_Check(x))) {
        if (is_unsigned) {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (long) 0;
                case  1: __PYX_VERIFY_RETURN_INT(long, digit, digits[0])
                case 2:
                    if (8 * sizeof(long) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) >= 2 * PyLong_SHIFT) {
                            return (long) (((((long)digits[1]) << PyLong_SHIFT) | (long)digits[0]));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(long) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) >= 3 * PyLong_SHIFT) {
                            return (long) (((((((long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0]));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(long) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) >= 4 * PyLong_SHIFT) {
                            return (long) (((((((((long)digits[3]) << PyLong_SHIFT) | (long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0]));
                        }
                    }
                    break;
            }
#endif
#if CYTHON_COMPILING_IN_CPYTHON
            if (unlikely(Py_SIZE(x) < 0)) {
                goto raise_neg_overflow;
            }
#else
            {
                int result = PyObject_RichCompareBool(x, Py_False, Py_LT);
                if (unlikely(result < 0))
                    return (long) -1;
                if (unlikely(result == 1))
                    goto raise_neg_overflow;
            }
#endif
            if (sizeof(long) <= sizeof(unsigned long)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, unsigned long, PyLong_AsUnsignedLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(long) <= sizeof(unsigned PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, unsigned PY_LONG_LONG, PyLong_AsUnsignedLongLong(x))
#endif
            }
        } else {
#if CYTHON_USE_PYLONG_INTERNALS
            const digit* digits = ((PyLongObject*)x)->ob_digit;
            switch (Py_SIZE(x)) {
                case  0: return (long) 0;
                case -1: __PYX_VERIFY_RETURN_INT(long, sdigit, (sdigit) (-(sdigit)digits[0]))
                case  1: __PYX_VERIFY_RETURN_INT(long,  digit, +digits[0])
                case -2:
                    if (8 * sizeof(long) - 1 > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, long, -(long) (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                            return (long) (((long)-1)*(((((long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case 2:
                    if (8 * sizeof(long) > 1 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 2 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                            return (long) ((((((long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case -3:
                    if (8 * sizeof(long) - 1 > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, long, -(long) (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                            return (long) (((long)-1)*(((((((long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case 3:
                    if (8 * sizeof(long) > 2 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 3 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                            return (long) ((((((((long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case -4:
                    if (8 * sizeof(long) - 1 > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, long, -(long) (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                            return (long) (((long)-1)*(((((((((long)digits[3]) << PyLong_SHIFT) | (long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
                case 4:
                    if (8 * sizeof(long) > 3 * PyLong_SHIFT) {
                        if (8 * sizeof(unsigned long) > 4 * PyLong_SHIFT) {
                            __PYX_VERIFY_RETURN_INT(long, unsigned long, (((((((((unsigned long)digits[3]) << PyLong_SHIFT) | (unsigned long)digits[2]) << PyLong_SHIFT) | (unsigned long)digits[1]) << PyLong_SHIFT) | (unsigned long)digits[0])))
                        } else if (8 * sizeof(long) - 1 > 4 * PyLong_SHIFT) {
                            return (long) ((((((((((long)digits[3]) << PyLong_SHIFT) | (long)digits[2]) << PyLong_SHIFT) | (long)digits[1]) << PyLong_SHIFT) | (long)digits[0])));
                        }
                    }
                    break;
            }
#endif
            if (sizeof(long) <= sizeof(long)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, long, PyLong_AsLong(x))
#ifdef HAVE_LONG_LONG
            } else if (sizeof(long) <= sizeof(PY_LONG_LONG)) {
                __PYX_VERIFY_RETURN_INT_EXC(long, PY_LONG_LONG, PyLong_AsLongLong(x))
#endif
            }
        }
        {
#if CYTHON_COMPILING_IN_PYPY && !defined(_PyLong_AsByteArray)
            PyErr_SetString(PyExc_RuntimeError,
                            "_PyLong_AsByteArray() not available in PyPy, cannot convert large numbers");
#else
            long val;
            PyObject *v = __Pyx_PyNumber_IntOrLong(x);
 #if PY_MAJOR_VERSION < 3
            if (likely(v) && !PyLong_Check(v)) {
                PyObject *tmp = v;
                v = PyNumber_Long(tmp);
                Py_DECREF(tmp);
            }
 #endif
            if (likely(v)) {
                int one = 1; int is_little = (int)*(unsigned char *)&one;
                unsigned char *bytes = (unsigned char *)&val;
                int ret = _PyLong_AsByteArray((PyLongObject *)v,
                                              bytes, sizeof(val),
                                              is_little, !is_unsigned);
                Py_DECREF(v);
                if (likely(!ret))
                    return val;
            }
#endif
            return (long) -1;
        }
    } else {
        long val;
        PyObject *tmp = __Pyx_PyNumber_IntOrLong(x);
        if (!tmp) return (long) -1;
        val = __Pyx_PyInt_As_long(tmp);
        Py_DECREF(tmp);
        return val;
    }
raise_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "value too large to convert to long");
    return (long) -1;
raise_neg_overflow:
    PyErr_SetString(PyExc_OverflowError,
        "can't convert negative value to long");
    return (long) -1;
}

/* FastTypeChecks */
#if CYTHON_COMPILING_IN_CPYTHON
static int __Pyx_InBases(PyTypeObject *a, PyTypeObject *b) {
    while (a) {
        a = a->tp_base;
        if (a == b)
            return 1;
    }
    return b == &PyBaseObject_Type;
}
static CYTHON_INLINE int __Pyx_IsSubtype(PyTypeObject *a, PyTypeObject *b) {
    PyObject *mro;
    if (a == b) return 1;
    mro = a->tp_mro;
    if (likely(mro)) {
        Py_ssize_t i, n;
        n = PyTuple_GET_SIZE(mro);
        for (i = 0; i < n; i++) {
            if (PyTuple_GET_ITEM(mro, i) == (PyObject *)b)
                return 1;
        }
        return 0;
    }
    return __Pyx_InBases(a, b);
}
#if PY_MAJOR_VERSION == 2
static int __Pyx_inner_PyErr_GivenExceptionMatches2(PyObject *err, PyObject* exc_type1, PyObject* exc_type2) {
    PyObject *exception, *value, *tb;
    int res;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    __Pyx_ErrFetch(&exception, &value, &tb);
    res = exc_type1 ? PyObject_IsSubclass(err, exc_type1) : 0;
    if (unlikely(res == -1)) {
        PyErr_WriteUnraisable(err);
        res = 0;
    }
    if (!res) {
        res = PyObject_IsSubclass(err, exc_type2);
        if (unlikely(res == -1)) {
            PyErr_WriteUnraisable(err);
            res = 0;
        }
    }
    __Pyx_ErrRestore(exception, value, tb);
    return res;
}
#else
static CYTHON_INLINE int __Pyx_inner_PyErr_GivenExceptionMatches2(PyObject *err, PyObject* exc_type1, PyObject *exc_type2) {
    int res = exc_type1 ? __Pyx_IsSubtype((PyTypeObject*)err, (PyTypeObject*)exc_type1) : 0;
    if (!res) {
        res = __Pyx_IsSubtype((PyTypeObject*)err, (PyTypeObject*)exc_type2);
    }
    return res;
}
#endif
static int __Pyx_PyErr_GivenExceptionMatchesTuple(PyObject *exc_type, PyObject *tuple) {
    Py_ssize_t i, n;
    assert(PyExceptionClass_Check(exc_type));
    n = PyTuple_GET_SIZE(tuple);
#if PY_MAJOR_VERSION >= 3
    for (i=0; i<n; i++) {
        if (exc_type == PyTuple_GET_ITEM(tuple, i)) return 1;
    }
#endif
    for (i=0; i<n; i++) {
        PyObject *t = PyTuple_GET_ITEM(tuple, i);
        #if PY_MAJOR_VERSION < 3
        if (likely(exc_type == t)) return 1;
        #endif
        if (likely(PyExceptionClass_Check(t))) {
            if (__Pyx_inner_PyErr_GivenExceptionMatches2(exc_type, NULL, t)) return 1;
        } else {
        }
    }
    return 0;
}
static CYTHON_INLINE int __Pyx_PyErr_GivenExceptionMatches(PyObject *err, PyObject* exc_type) {
    if (likely(err == exc_type)) return 1;
    if (likely(PyExceptionClass_Check(err))) {
        if (likely(PyExceptionClass_Check(exc_type))) {
            return __Pyx_inner_PyErr_GivenExceptionMatches2(err, NULL, exc_type);
        } else if (likely(PyTuple_Check(exc_type))) {
            return __Pyx_PyErr_GivenExceptionMatchesTuple(err, exc_type);
        } else {
        }
    }
    return PyErr_GivenExceptionMatches(err, exc_type);
}
static CYTHON_INLINE int __Pyx_PyErr_GivenExceptionMatches2(PyObject *err, PyObject *exc_type1, PyObject *exc_type2) {
    assert(PyExceptionClass_Check(exc_type1));
    assert(PyExceptionClass_Check(exc_type2));
    if (likely(err == exc_type1 || err == exc_type2)) return 1;
    if (likely(PyExceptionClass_Check(err))) {
        return __Pyx_inner_PyErr_GivenExceptionMatches2(err, exc_type1, exc_type2);
    }
    return (PyErr_GivenExceptionMatches(err, exc_type1) || PyErr_GivenExceptionMatches(err, exc_type2));
}
#endif

/* CheckBinaryVersion */
static int __Pyx_check_binary_version(void) {
    char ctversion[4], rtversion[4];
    PyOS_snprintf(ctversion, 4, "%d.%d", PY_MAJOR_VERSION, PY_MINOR_VERSION);
    PyOS_snprintf(rtversion, 4, "%s", Py_GetVersion());
    if (ctversion[0] != rtversion[0] || ctversion[2] != rtversion[2]) {
        char message[200];
        PyOS_snprintf(message, sizeof(message),
                      "compiletime version %s of module '%.100s' "
                      "does not match runtime version %s",
                      ctversion, __Pyx_MODULE_NAME, rtversion);
        return PyErr_WarnEx(NULL, message, 1);
    }
    return 0;
}

/* VoidPtrImport */
#ifndef __PYX_HAVE_RT_ImportVoidPtr
#define __PYX_HAVE_RT_ImportVoidPtr
static int __Pyx_ImportVoidPtr(PyObject *module, const char *name, void **p, const char *sig) {
    PyObject *d = 0;
    PyObject *cobj = 0;
    d = PyObject_GetAttrString(module, (char *)"__pyx_capi__");
    if (!d)
        goto bad;
    cobj = PyDict_GetItemString(d, name);
    if (!cobj) {
        PyErr_Format(PyExc_ImportError,
            "%.200s does not export expected C variable %.200s",
                PyModule_GetName(module), name);
        goto bad;
    }
#if PY_VERSION_HEX >= 0x02070000
    if (!PyCapsule_IsValid(cobj, sig)) {
        PyErr_Format(PyExc_TypeError,
            "C variable %.200s.%.200s has wrong signature (expected %.500s, got %.500s)",
             PyModule_GetName(module), name, sig, PyCapsule_GetName(cobj));
        goto bad;
    }
    *p = PyCapsule_GetPointer(cobj, sig);
#else
    {const char *desc, *s1, *s2;
    desc = (const char *)PyCObject_GetDesc(cobj);
    if (!desc)
        goto bad;
    s1 = desc; s2 = sig;
    while (*s1 != '\0' && *s1 == *s2) { s1++; s2++; }
    if (*s1 != *s2) {
        PyErr_Format(PyExc_TypeError,
            "C variable %.200s.%.200s has wrong signature (expected %.500s, got %.500s)",
             PyModule_GetName(module), name, sig, desc);
        goto bad;
    }
    *p = PyCObject_AsVoidPtr(cobj);}
#endif
    if (!(*p))
        goto bad;
    Py_DECREF(d);
    return 0;
bad:
    Py_XDECREF(d);
    return -1;
}
#endif

/* FunctionImport */
#ifndef __PYX_HAVE_RT_ImportFunction
#define __PYX_HAVE_RT_ImportFunction
static int __Pyx_ImportFunction(PyObject *module, const char *funcname, void (**f)(void), const char *sig) {
    PyObject *d = 0;
    PyObject *cobj = 0;
    union {
        void (*fp)(void);
        void *p;
    } tmp;
    d = PyObject_GetAttrString(module, (char *)"__pyx_capi__");
    if (!d)
        goto bad;
    cobj = PyDict_GetItemString(d, funcname);
    if (!cobj) {
        PyErr_Format(PyExc_ImportError,
            "%.200s does not export expected C function %.200s",
                PyModule_GetName(module), funcname);
        goto bad;
    }
#if PY_VERSION_HEX >= 0x02070000
    if (!PyCapsule_IsValid(cobj, sig)) {
        PyErr_Format(PyExc_TypeError,
            "C function %.200s.%.200s has wrong signature (expected %.500s, got %.500s)",
             PyModule_GetName(module), funcname, sig, PyCapsule_GetName(cobj));
        goto bad;
    }
    tmp.p = PyCapsule_GetPointer(cobj, sig);
#else
    {const char *desc, *s1, *s2;
    desc = (const char *)PyCObject_GetDesc(cobj);
    if (!desc)
        goto bad;
    s1 = desc; s2 = sig;
    while (*s1 != '\0' && *s1 == *s2) { s1++; s2++; }
    if (*s1 != *s2) {
        PyErr_Format(PyExc_TypeError,
            "C function %.200s.%.200s has wrong signature (expected %.500s, got %.500s)",
             PyModule_GetName(module), funcname, sig, desc);
        goto bad;
    }
    tmp.p = PyCObject_AsVoidPtr(cobj);}
#endif
    *f = tmp.fp;
    if (!(*f))
        goto bad;
    Py_DECREF(d);
    return 0;
bad:
    Py_XDECREF(d);
    return -1;
}
#endif

/* InitStrings */
static int __Pyx_InitStrings(__Pyx_StringTabEntry *t) {
    while (t->p) {
        #if PY_MAJOR_VERSION < 3
        if (t->is_unicode) {
            *t->p = PyUnicode_DecodeUTF8(t->s, t->n - 1, NULL);
        } else if (t->intern) {
            *t->p = PyString_InternFromString(t->s);
        } else {
            *t->p = PyString_FromStringAndSize(t->s, t->n - 1);
        }
        #else
        if (t->is_unicode | t->is_str) {
            if (t->intern) {
                *t->p = PyUnicode_InternFromString(t->s);
            } else if (t->encoding) {
                *t->p = PyUnicode_Decode(t->s, t->n - 1, t->encoding, NULL);
            } else {
                *t->p = PyUnicode_FromStringAndSize(t->s, t->n - 1);
            }
        } else {
            *t->p = PyBytes_FromStringAndSize(t->s, t->n - 1);
        }
        #endif
        if (!*t->p)
            return -1;
        if (PyObject_Hash(*t->p) == -1)
            return -1;
        ++t;
    }
    return 0;
}

static CYTHON_INLINE PyObject* __Pyx_PyUnicode_FromString(const char* c_str) {
    return __Pyx_PyUnicode_FromStringAndSize(c_str, (Py_ssize_t)strlen(c_str));
}
static CYTHON_INLINE const char* __Pyx_PyObject_AsString(PyObject* o) {
    Py_ssize_t ignore;
    return __Pyx_PyObject_AsStringAndSize(o, &ignore);
}
#if __PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT
#if !CYTHON_PEP393_ENABLED
static const char* __Pyx_PyUnicode_AsStringAndSize(PyObject* o, Py_ssize_t *length) {
    char* defenc_c;
    PyObject* defenc = _PyUnicode_AsDefaultEncodedString(o, NULL);
    if (!defenc) return NULL;
    defenc_c = PyBytes_AS_STRING(defenc);
#if __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
    {
        char* end = defenc_c + PyBytes_GET_SIZE(defenc);
        char* c;
        for (c = defenc_c; c < end; c++) {
            if ((unsigned char) (*c) >= 128) {
                PyUnicode_AsASCIIString(o);
                return NULL;
            }
        }
    }
#endif
    *length = PyBytes_GET_SIZE(defenc);
    return defenc_c;
}
#else
static CYTHON_INLINE const char* __Pyx_PyUnicode_AsStringAndSize(PyObject* o, Py_ssize_t *length) {
    if (unlikely(__Pyx_PyUnicode_READY(o) == -1)) return NULL;
#if __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
    if (likely(PyUnicode_IS_ASCII(o))) {
        *length = PyUnicode_GET_LENGTH(o);
        return PyUnicode_AsUTF8(o);
    } else {
        PyUnicode_AsASCIIString(o);
        return NULL;
    }
#else
    return PyUnicode_AsUTF8AndSize(o, length);
#endif
}
#endif
#endif
static CYTHON_INLINE const char* __Pyx_PyObject_AsStringAndSize(PyObject* o, Py_ssize_t *length) {
#if __PYX_DEFAULT_STRING_ENCODING_IS_ASCII || __PYX_DEFAULT_STRING_ENCODING_IS_DEFAULT
    if (
#if PY_MAJOR_VERSION < 3 && __PYX_DEFAULT_STRING_ENCODING_IS_ASCII
            __Pyx_sys_getdefaultencoding_not_ascii &&
#endif
            PyUnicode_Check(o)) {
        return __Pyx_PyUnicode_AsStringAndSize(o, length);
    } else
#endif
#if (!CYTHON_COMPILING_IN_PYPY) || (defined(PyByteArray_AS_STRING) && defined(PyByteArray_GET_SIZE))
    if (PyByteArray_Check(o)) {
        *length = PyByteArray_GET_SIZE(o);
        return PyByteArray_AS_STRING(o);
    } else
#endif
    {
        char* result;
        int r = PyBytes_AsStringAndSize(o, &result, length);
        if (unlikely(r < 0)) {
            return NULL;
        } else {
            return result;
        }
    }
}
static CYTHON_INLINE int __Pyx_PyObject_IsTrue(PyObject* x) {
   int is_true = x == Py_True;
   if (is_true | (x == Py_False) | (x == Py_None)) return is_true;
   else return PyObject_IsTrue(x);
}
static CYTHON_INLINE int __Pyx_PyObject_IsTrueAndDecref(PyObject* x) {
    int retval;
    if (unlikely(!x)) return -1;
    retval = __Pyx_PyObject_IsTrue(x);
    Py_DECREF(x);
    return retval;
}
static PyObject* __Pyx_PyNumber_IntOrLongWrongResultType(PyObject* result, const char* type_name) {
#if PY_MAJOR_VERSION >= 3
    if (PyLong_Check(result)) {
        if (PyErr_WarnFormat(PyExc_DeprecationWarning, 1,
                "__int__ returned non-int (type %.200s).  "
                "The ability to return an instance of a strict subclass of int "
                "is deprecated, and may be removed in a future version of Python.",
                Py_TYPE(result)->tp_name)) {
            Py_DECREF(result);
            return NULL;
        }
        return result;
    }
#endif
    PyErr_Format(PyExc_TypeError,
                 "__%.4s__ returned non-%.4s (type %.200s)",
                 type_name, type_name, Py_TYPE(result)->tp_name);
    Py_DECREF(result);
    return NULL;
}
static CYTHON_INLINE PyObject* __Pyx_PyNumber_IntOrLong(PyObject* x) {
#if CYTHON_USE_TYPE_SLOTS
  PyNumberMethods *m;
#endif
  const char *name = NULL;
  PyObject *res = NULL;
#if PY_MAJOR_VERSION < 3
  if (likely(PyInt_Check(x) || PyLong_Check(x)))
#else
  if (likely(PyLong_Check(x)))
#endif
    return __Pyx_NewRef(x);
#if CYTHON_USE_TYPE_SLOTS
  m = Py_TYPE(x)->tp_as_number;
  #if PY_MAJOR_VERSION < 3
  if (m && m->nb_int) {
    name = "int";
    res = m->nb_int(x);
  }
  else if (m && m->nb_long) {
    name = "long";
    res = m->nb_long(x);
  }
  #else
  if (likely(m && m->nb_int)) {
    name = "int";
    res = m->nb_int(x);
  }
  #endif
#else
  if (!PyBytes_CheckExact(x) && !PyUnicode_CheckExact(x)) {
    res = PyNumber_Int(x);
  }
#endif
  if (likely(res)) {
#if PY_MAJOR_VERSION < 3
    if (unlikely(!PyInt_Check(res) && !PyLong_Check(res))) {
#else
    if (unlikely(!PyLong_CheckExact(res))) {
#endif
        return __Pyx_PyNumber_IntOrLongWrongResultType(res, name);
    }
  }
  else if (!PyErr_Occurred()) {
    PyErr_SetString(PyExc_TypeError,
                    "an integer is required");
  }
  return res;
}
static CYTHON_INLINE Py_ssize_t __Pyx_PyIndex_AsSsize_t(PyObject* b) {
  Py_ssize_t ival;
  PyObject *x;
#if PY_MAJOR_VERSION < 3
  if (likely(PyInt_CheckExact(b))) {
    if (sizeof(Py_ssize_t) >= sizeof(long))
        return PyInt_AS_LONG(b);
    else
        return PyInt_AsSsize_t(b);
  }
#endif
  if (likely(PyLong_CheckExact(b))) {
    #if CYTHON_USE_PYLONG_INTERNALS
    const digit* digits = ((PyLongObject*)b)->ob_digit;
    const Py_ssize_t size = Py_SIZE(b);
    if (likely(__Pyx_sst_abs(size) <= 1)) {
        ival = likely(size) ? digits[0] : 0;
        if (size == -1) ival = -ival;
        return ival;
    } else {
      switch (size) {
         case 2:
           if (8 * sizeof(Py_ssize_t) > 2 * PyLong_SHIFT) {
             return (Py_ssize_t) (((((size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case -2:
           if (8 * sizeof(Py_ssize_t) > 2 * PyLong_SHIFT) {
             return -(Py_ssize_t) (((((size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case 3:
           if (8 * sizeof(Py_ssize_t) > 3 * PyLong_SHIFT) {
             return (Py_ssize_t) (((((((size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case -3:
           if (8 * sizeof(Py_ssize_t) > 3 * PyLong_SHIFT) {
             return -(Py_ssize_t) (((((((size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case 4:
           if (8 * sizeof(Py_ssize_t) > 4 * PyLong_SHIFT) {
             return (Py_ssize_t) (((((((((size_t)digits[3]) << PyLong_SHIFT) | (size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
         case -4:
           if (8 * sizeof(Py_ssize_t) > 4 * PyLong_SHIFT) {
             return -(Py_ssize_t) (((((((((size_t)digits[3]) << PyLong_SHIFT) | (size_t)digits[2]) << PyLong_SHIFT) | (size_t)digits[1]) << PyLong_SHIFT) | (size_t)digits[0]));
           }
           break;
      }
    }
    #endif
    return PyLong_AsSsize_t(b);
  }
  x = PyNumber_Index(b);
  if (!x) return -1;
  ival = PyInt_AsSsize_t(x);
  Py_DECREF(x);
  return ival;
}
static CYTHON_INLINE PyObject * __Pyx_PyBool_FromLong(long b) {
  return b ? __Pyx_NewRef(Py_True) : __Pyx_NewRef(Py_False);
}
static CYTHON_INLINE PyObject * __Pyx_PyInt_FromSize_t(size_t ival) {
    return PyInt_FromSize_t(ival);
}


#endif /* Py_PYTHON_H */
